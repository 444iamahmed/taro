"use strict";var S={};!function(t){function i(t){this.Cc=-1,this.ha=new xt,this.pa=new xt,this.a=new xt;var i=t.position;this.ha.v=i.x,this.ha.A=i.y,this.ha.B=i.z,i=t.rotation,this.ha.o=i.e00,this.ha.f=i.e01,this.ha.h=i.e02,this.ha.i=i.e10,this.ha.m=i.e11,this.ha.j=i.e12,this.ha.l=i.e20,this.ha.g=i.e21,this.ha.s=i.e22;i=this.pa;var s=this.ha;i.v=s.v,i.A=s.A,i.B=s.B,i.o=s.o,i.f=s.f,i.h=s.h,i.i=s.i,i.m=s.m,i.j=s.j,i.l=s.l,i.g=s.g,i.s=s.s,i=this.a,s=this.ha,i.v=s.v,i.A=s.A,i.B=s.B,i.o=s.o,i.f=s.f,i.h=s.h,i.i=s.i,i.m=s.m,i.j=s.j,i.l=s.l,i.g=s.g,i.s=s.s,this.hk=t.restitution,this.Xj=t.friction,this.Dk=t.density,this.Kb=t.geometry,this.Tj=t.collisionGroup,this.Uj=t.collisionMask,this.yd=t.contactCallback,this.u=new Et,this.tb=null,this.rc=new dt}function s(){}function h(t){this.Fi=this.Dc=this.ia=this.M=null,this.zg=0,this.kc=this.Ob=null,this.Ae=0,this.Ze=this.ze=null,this.kh=0;var i=t.linearVelocity;this.gb=i.x,this.hb=i.y,this.ib=i.z,i=t.angularVelocity,this.kb=i.x,this.lb=i.y,this.mb=i.z,this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0,this.pa=new xt,this.a=new xt,i=t.position,this.pa.v=i.x,this.pa.A=i.y,this.pa.B=i.z,i=t.rotation,this.pa.o=i.e00,this.pa.f=i.e01,this.pa.h=i.e02,this.pa.i=i.e10,this.pa.m=i.e11,this.pa.j=i.e12,this.pa.l=i.e20,this.pa.g=i.e21,this.pa.s=i.e22;i=this.a;var s=this.pa;i.v=s.v,i.A=s.A,i.B=s.B,i.o=s.o,i.f=s.f,i.h=s.h,i.i=s.i,i.m=s.m,i.j=s.j,i.l=s.l,i.g=s.g,i.s=s.s,this.Lb=t.type,this.yb=0,this.Gb=!1,this.Bk=t.autoSleep,this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.R=this.P=this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Id=this.Hd=this.Gd=this.Fd=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.$a=this.Pc=0,this.$j=t.linearDamping,this.Qj=t.angularDamping,this.xf=this.wf=this.vf=this.Oh=this.Nh=this.Mh=0,this.N=new dt(1,1,1),this.Nf=!1,this.eh=1,this.oc=null}function a(){this.mass=0,this.localInertia=new ft}function e(t){Y.call(this),this.$=t,this.info=new R,this.ac=Array(gt.maxJacobianRows),t=0;for(var i=this.ac.length;t<i;){var s=t++;this.ac[s]=new f}}function o(t){Y.call(this),this.Ji=t,this.info=new N,this.ac=Array(gt.maxManifoldPoints),t=0;for(var i=this.ac.length;t<i;){var s=t++;this.ac[s]=new u}}function r(t){this.Ag=t,this.wk=Array(this.Ag),this.$a=Array(this.Ag),this.cj=Array(this.Ag),t=0;for(var i=this.Ag;t<i;){var s=t++;this.wk[s]=Array(this.Ag),this.$a[s]=Array(this.Ag),this.cj[s]=Array(this.Ag);for(var h=0,a=this.Ag;h<a;){var e=h++;this.wk[s][e]=0,this.$a[s][e]=0,this.cj[s][e]=0}}for(this.ak=1<<this.Ag,this.Sj=Array(this.ak),this.Ck=Array(this.ak),t=0,i=this.ak;t<i;){h=(15&(h=(51&(h=(85&(h=s=t++))+(h>>1&85)))+(h>>2&51)))+(h>>4&15),a=Array(h),e=0;for(var o=h;e<o;){var r=e++;a[r]=Array(h);for(var n=0,p=h;n<p;){var l=n++;a[r][l]=0}}this.Sj[s]=!1,this.Ck[s]=a}}function n(t){Y.call(this),this.$=t,this.info=new R,t=gt.maxJacobianRows,this.ei=new r(t),this.Se=new l(t),this.ac=Array(t);for(var i=0,s=this.ac.length;i<s;){var h=i++;this.ac[h]=new f}for(i=this.Se.Th.length,this.Ml=new p(i),this.Ki=new p(i),this.Qg=Array(t),this.Yh=Array(t),this.Cf=Array(t),this.Aj=Array(t),i=0;i<t;)s=i++,this.Qg[s]=0,this.Yh[s]=0,this.Cf[s]=0,this.Aj[s]=0}function p(t){this.n=t,this.sc=Array(t),this.kf=Array(t);for(var i=0;i<t;){var s=i++;this.sc[s]=s}}function l(t){this.Qn=t,this.jf=0,this.Th=Array(1<<t),this.cf=new c(t)}function c(t){this.size=t,this.Sc=0,this.uh=Array(t),this.zh=Array(t),this.ie=0,this.Mg=Array(t)}function y(t){this.uh=Array(t),this.Mg=Array(t),this.zh=Array(t),this.il=Array(t),this.ie=this.Sc=0}function f(){this.Ff=this.mass=this.pd=this.od=this.nd=this.md=this.ld=this.kd=this.vd=this.ud=this.td=this.sd=this.rd=this.qd=0}function u(){this.Bm=this.Am=this.zm=this.ym=this.he=this.rk=this.qk=this.pk=this.nk=this.mk=this.lk=this.xl=this.wl=this.vl=this.ul=this.tl=this.sl=this.Jj=this.Ij=this.Hj=this.Gj=this.Fj=this.Ej=this.Dl=this.Cl=this.Bl=this.Al=this.zl=this.yl=this.bg=this.ag=this.$f=this.Zf=this.Yf=this.Xf=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=0}function b(){}function v(){O.call(this),this.localAxis1=new dt(1,0,0),this.localAxis2=new dt(1,0,0),this.springDamper1=new d,this.springDamper2=new d,this.limitMotor1=new j,this.limitMotor2=new j}function g(t){F.call(this,t,q.UNIVERSAL);var i=t.localAxis1;this.qa=i.x,this.ra=i.y,this.sa=i.z,i=t.localAxis2,this.Mc=i.x,this.Nc=i.y,this.Oc=i.z,this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(0<(i=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa)&&(i=1/Math.sqrt(i)),this.qa*=i,this.ra*=i,this.sa*=i):(this.qa=1,this.sa=this.ra=0),this.Mc*this.Mc+this.Nc*this.Nc+this.Oc*this.Oc?(0<(i=this.Mc*this.Mc+this.Nc*this.Nc+this.Oc*this.Oc)&&(i=1/Math.sqrt(i)),this.Mc*=i,this.Nc*=i,this.Oc*=i):(this.Nc=this.Mc=0,this.Oc=1);var s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d=this.C.a;i=this.D.a;f=d.o*this.qa+d.f*this.ra+d.h*this.sa,u=d.i*this.qa+d.m*this.ra+d.j*this.sa,s=d.l*this.qa+d.g*this.ra+d.s*this.sa,b=i.o*this.Mc+i.f*this.Nc+i.h*this.Oc,(o=(v=i.i*this.Mc+i.m*this.Nc+i.j*this.Oc)*s-(y=i.l*this.Mc+i.g*this.Nc+i.s*this.Oc)*u)*o+(r=y*f-b*s)*r+(n=b*u-v*f)*n||(n=s*s,(o=f*f)<(r=u*u)?o<n?(o=0,r=s*(n=1/Math.sqrt(r+n)),n*=-u):(o=u*(n=1/Math.sqrt(o+r)),r=-f*n,n=0):r<n?(o=-s*(n=1/Math.sqrt(n+o)),r=0,n*=f):(o=u*(n=1/Math.sqrt(o+r)),r=-f*n,n=0)),h=u*n-s*r,a=s*o-f*n,e=f*r-u*o,p=r*y-n*v,l=n*b-o*y,c=o*v-r*b,g=d.o*f+d.i*u+d.l*s,x=d.f*f+d.m*u+d.g*s,s=d.h*f+d.j*u+d.s*s,this.qa=g,this.ra=x,this.sa=s,s=d.o*o+d.i*r+d.l*n,f=d.f*o+d.m*r+d.g*n,u=d.h*o+d.j*r+d.s*n,this.Ab=s,this.Bb=f,this.Cb=u,s=d.o*h+d.i*a+d.l*e,f=d.f*h+d.m*a+d.g*e,d=d.h*h+d.j*a+d.s*e,this.lc=s,this.mc=f,this.nc=d,d=i.o*p+i.i*l+i.l*c,h=i.f*p+i.m*l+i.g*c,p=i.h*p+i.j*l+i.s*c,this.nb=d,this.ob=h,this.pb=p,d=i.o*o+i.i*r+i.l*n,p=i.f*o+i.m*r+i.g*n,o=i.h*o+i.j*r+i.s*n,this.gh=d,this.hh=p,this.ih=o,o=i.o*b+i.i*v+i.l*y,r=i.f*b+i.m*v+i.g*y,i=i.h*b+i.j*v+i.s*y,this.Mc=o,this.Nc=r,this.Oc=i,this.Oi=this.Pl=this.Ni=0,this.Lm=this.Km=this.Jm=!1,this.Yk=t.springDamper1.clone(),this.Zk=t.springDamper2.clone(),this.Qk=t.limitMotor1.clone(),this.Rk=t.limitMotor2.clone()}function x(){this.lowerLimit=1,this.motorForce=this.upperLimit=0}function d(){this.dampingRatio=this.frequency=0,this.useSymplecticEuler=!1}function z(){O.call(this),this.springDamper=new d}function m(t){F.call(this,t,0),this.Ce=t.springDamper.clone()}function j(){this.lowerLimit=1,this.motorTorque=this.upperLimit=0}function M(){O.call(this),this.localAxis1=new dt(1,0,0),this.localAxis2=new dt(1,0,0),this.springDamper=new d,this.limitMotor=new j}function A(t){F.call(this,t,1);var i,s,h,a,e,o,r,n,p=t.localAxis1;this.qa=p.x,this.ra=p.y,this.sa=p.z,p=t.localAxis2,this.nb=p.x,this.ob=p.y,this.pb=p.z,this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(0<(p=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa)&&(p=1/Math.sqrt(p)),this.qa*=p,this.ra*=p,this.sa*=p):(this.qa=1,this.sa=this.ra=0),this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(0<(p=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb)&&(p=1/Math.sqrt(p)),this.nb*=p,this.ob*=p,this.pb*=p):(this.nb=1,this.pb=this.ob=0),-.999999999>(s=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb)?(p=this.qa,i=this.ra,e=(h=this.sa)*h,(s=p*p)<(a=i*i)?s<e?(s=0,h*=a=1/Math.sqrt(a+e),a*=-i):(s=i*(a=1/Math.sqrt(s+a)),h=-p*a,a=0):a<e?(s=-h*(a=1/Math.sqrt(e+s)),h=0,a*=p):(s=i*(a=1/Math.sqrt(s+a)),h=-p*a,a=0),p=s,i=h,s=a,h=0):(p=this.ra*this.pb-this.sa*this.ob,i=this.sa*this.nb-this.qa*this.pb,a=this.qa*this.ob-this.ra*this.nb,p*=s=.5/(h=Math.sqrt(.5*(1+s))),i*=s,s*=a),o=i,i=h,n=p*(c=2*p);var l=o*(e=2*o);a=s*(h=2*s),s=p*e,r=o*h,o=p*h;var c=i*c,y=i*e;p=1-l-a,i=s-(e=i*h),h=o+y,s+=e,a=1-n-a,e=r-c,o-=y,r+=c,n=1-n-l;var f=(l=this.qa)*l,u=(c=this.ra)*c,b=(y=this.sa)*y;f<u?f<b?(f=1/Math.sqrt(u+b),this.Ab=0,this.Bb=y*f,this.Cb=-c*f):(f=1/Math.sqrt(f+u),this.Ab=c*f,this.Bb=-l*f,this.Cb=0):u<b?(f=1/Math.sqrt(b+f),this.Ab=-y*f,this.Bb=0,this.Cb=l*f):(f=1/Math.sqrt(f+u),this.Ab=c*f,this.Bb=-l*f,this.Cb=0),this.lc=this.ra*this.Cb-this.sa*this.Bb,this.mc=this.sa*this.Ab-this.qa*this.Cb,this.nc=this.qa*this.Bb-this.ra*this.Ab,l=p*this.qa+i*this.ra+h*this.sa,c=s*this.qa+a*this.ra+e*this.sa,y=o*this.qa+r*this.ra+n*this.sa,this.nb=l,this.ob=c,this.pb=y,l=p*this.Ab+i*this.Bb+h*this.Cb,c=s*this.Ab+a*this.Bb+e*this.Cb,y=o*this.Ab+r*this.Bb+n*this.Cb,this.gh=l,this.hh=c,this.ih=y,p=p*this.lc+i*this.mc+h*this.nc,i=s*this.lc+a*this.mc+e*this.nc,h=o*this.lc+r*this.mc+n*this.nc,this.Mc=p,this.Nc=i,this.Oc=h,this.Fe=this.Ee=this.angle=0,this.da=new I(this),this.Ce=t.springDamper.clone(),this.Rh=t.limitMotor.clone()}function w(){O.call(this),this.localTwistAxis1=new dt(1,0,0),this.localTwistAxis2=new dt(1,0,0),this.localSwingAxis1=new dt(0,1,0),this.twistSpringDamper=new d,this.swingSpringDamper=new d,this.twistLimitMotor=new j,this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function D(t){F.call(this,t,q.RAGDOLL);var i,s,h,a,e=t.localTwistAxis1;if(this.qa=e.x,this.ra=e.y,this.sa=e.z,e=t.localSwingAxis1,this.Ab=e.x,this.Bb=e.y,this.Cb=e.z,e=t.localTwistAxis2,this.nb=e.x,this.ob=e.y,this.pb=e.z,this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(0<(e=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa)&&(e=1/Math.sqrt(e)),this.qa*=e,this.ra*=e,this.sa*=e):(this.qa=1,this.sa=this.ra=0),this.lc=this.ra*this.Cb-this.sa*this.Bb,this.mc=this.sa*this.Ab-this.qa*this.Cb,this.nc=this.qa*this.Bb-this.ra*this.Ab,this.lc*this.lc+this.mc*this.mc+this.nc*this.nc)0<(e=this.lc*this.lc+this.mc*this.mc+this.nc*this.nc)&&(e=1/Math.sqrt(e)),this.lc*=e,this.mc*=e,this.nc*=e,this.Ab=this.mc*this.sa-this.nc*this.ra,this.Bb=this.nc*this.qa-this.lc*this.sa,this.Cb=this.lc*this.ra-this.mc*this.qa;else{e=this.qa;var o,r=this.ra,n=this.sa,p=r*r,l=n*n;(o=e*e)<p?o<l?(o=1/Math.sqrt(p+l),this.Ab=0,this.Bb=n*o,this.Cb=-r*o):(o=1/Math.sqrt(o+p),this.Ab=r*o,this.Bb=-e*o,this.Cb=0):p<l?(o=1/Math.sqrt(l+o),this.Ab=-n*o,this.Bb=0,this.Cb=e*o):(o=1/Math.sqrt(o+p),this.Ab=r*o,this.Bb=-e*o,this.Cb=0),this.lc=this.ra*this.Cb-this.sa*this.Bb,this.mc=this.sa*this.Ab-this.qa*this.Cb,this.nc=this.qa*this.Bb-this.ra*this.Ab}-.999999999>(o=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb)?(e=this.qa,r=this.ra,l=(n=this.sa)*n,(o=e*e)<(p=r*r)?o<l?(o=0,n*=p=1/Math.sqrt(p+l),p*=-r):(o=r*(p=1/Math.sqrt(o+p)),n=-e*p,p=0):p<l?(o=-n*(p=1/Math.sqrt(l+o)),n=0,p*=e):(o=r*(p=1/Math.sqrt(o+p)),n=-e*p,p=0),e=o,r=n,o=p,n=0):(e=this.ra*this.pb-this.sa*this.ob,r=this.sa*this.nb-this.qa*this.pb,p=this.qa*this.ob-this.ra*this.nb,e*=o=.5/(n=Math.sqrt(.5*(1+o))),r*=o,o*=p),h=r;l=o,r=n;o=e*(c=2*e),p=h*(s=2*h),i=l*(n=2*l),l=e*s,a=h*n,h=e*n;var c=r*c,y=r*s;e=1-p-i,r=l-(s=r*n),n=h+y,l+=s,i=1-o-i,s=a-c,h-=y,a+=c,o=1-o-p,p=e*this.qa+r*this.ra+n*this.sa,c=l*this.qa+i*this.ra+s*this.sa,y=h*this.qa+a*this.ra+o*this.sa,this.nb=p,this.ob=c,this.pb=y,p=e*this.Ab+r*this.Bb+n*this.Cb,c=l*this.Ab+i*this.Bb+s*this.Cb,y=h*this.Ab+a*this.Bb+o*this.Cb,this.gh=p,this.hh=c,this.ih=y,e=e*this.lc+r*this.mc+n*this.nc,r=l*this.lc+i*this.mc+s*this.nc,n=h*this.lc+a*this.mc+o*this.nc,this.Mc=e,this.Nc=r,this.Oc=n,this.fl=t.twistSpringDamper.clone(),this.el=t.twistLimitMotor.clone(),this.$k=t.swingSpringDamper.clone(),this.bk=t.maxSwingAngle1,this.ck=t.maxSwingAngle2,this.bk<gt.minRagdollMaxSwingAngle&&(this.bk=gt.minRagdollMaxSwingAngle),this.ck<gt.minRagdollMaxSwingAngle&&(this.ck=gt.minRagdollMaxSwingAngle),this.nl=new j,this.nl.lowerLimit=-1,this.ii=this.hi=this.gi=this.le=this.ke=this.je=this.Nj=this.tj=this.kj=this.nl.upperLimit=0}function C(){O.call(this),this.localAxis1=new dt(1,0,0),this.localAxis2=new dt(1,0,0),this.limitMotor=new x,this.springDamper=new d}function B(t){F.call(this,t,q.PRISMATIC);var i,s,h,a,e,o,r,n,p=t.localAxis1;this.qa=p.x,this.ra=p.y,this.sa=p.z,p=t.localAxis2,this.nb=p.x,this.ob=p.y,this.pb=p.z,this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(0<(p=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa)&&(p=1/Math.sqrt(p)),this.qa*=p,this.ra*=p,this.sa*=p):(this.qa=1,this.sa=this.ra=0),this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(0<(p=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb)&&(p=1/Math.sqrt(p)),this.nb*=p,this.ob*=p,this.pb*=p):(this.nb=1,this.pb=this.ob=0),-.999999999>(s=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb)?(p=this.qa,i=this.ra,e=(h=this.sa)*h,(s=p*p)<(a=i*i)?s<e?(s=0,h*=a=1/Math.sqrt(a+e),a*=-i):(s=i*(a=1/Math.sqrt(s+a)),h=-p*a,a=0):a<e?(s=-h*(a=1/Math.sqrt(e+s)),h=0,a*=p):(s=i*(a=1/Math.sqrt(s+a)),h=-p*a,a=0),p=s,i=h,s=a,h=0):(p=this.ra*this.pb-this.sa*this.ob,i=this.sa*this.nb-this.qa*this.pb,a=this.qa*this.ob-this.ra*this.nb,p*=s=.5/(h=Math.sqrt(.5*(1+s))),i*=s,s*=a),o=i,i=h,n=p*(c=2*p);var l=o*(e=2*o);a=s*(h=2*s),s=p*e,r=o*h,o=p*h;var c=i*c,y=i*e;p=1-l-a,i=s-(e=i*h),h=o+y,s+=e,a=1-n-a,e=r-c,o-=y,r+=c,n=1-n-l;var f=(l=this.qa)*l,u=(c=this.ra)*c,b=(y=this.sa)*y;f<u?f<b?(f=1/Math.sqrt(u+b),this.Ab=0,this.Bb=y*f,this.Cb=-c*f):(f=1/Math.sqrt(f+u),this.Ab=c*f,this.Bb=-l*f,this.Cb=0):u<b?(f=1/Math.sqrt(b+f),this.Ab=-y*f,this.Bb=0,this.Cb=l*f):(f=1/Math.sqrt(f+u),this.Ab=c*f,this.Bb=-l*f,this.Cb=0),this.lc=this.ra*this.Cb-this.sa*this.Bb,this.mc=this.sa*this.Ab-this.qa*this.Cb,this.nc=this.qa*this.Bb-this.ra*this.Ab,l=p*this.qa+i*this.ra+h*this.sa,c=s*this.qa+a*this.ra+e*this.sa,y=o*this.qa+r*this.ra+n*this.sa,this.nb=l,this.ob=c,this.pb=y,l=p*this.Ab+i*this.Bb+h*this.Cb,c=s*this.Ab+a*this.Bb+e*this.Cb,y=o*this.Ab+r*this.Bb+n*this.Cb,this.gh=l,this.hh=c,this.ih=y,p=p*this.lc+i*this.mc+h*this.nc,i=s*this.lc+a*this.mc+e*this.nc,h=o*this.lc+r*this.mc+n*this.nc,this.Mc=p,this.Nc=i,this.Oc=h,this.da=new I(this),this.Fe=this.Ee=this.rh=this.Ef=this.Df=this.eg=0,this.Ce=t.springDamper.clone(),this.Rh=t.limitMotor.clone()}function q(){}function S(t){this.Pk=t}function k(){this.ub=this.ad=this.ta=0}function I(t){this.$=t,this.oe=this.ne=this.me=this.Sd=this.Rd=this.Qd=this.ed=this.dd=this.cd=0}function T(){O.call(this),this.localAxis1=new dt(1,0,0),this.localAxis2=new dt(1,0,0),this.translationalLimitMotor=new x,this.translationalSpringDamper=new d,this.rotationalLimitMotor=new j,this.rotationalSpringDamper=new d}function O(){this.rigidBody2=this.rigidBody1=null,this.localAnchor1=new dt,this.localAnchor2=new dt,this.allowCollision=!1,this.solverType=gt.defaultJointConstraintSolverType,this.positionCorrectionAlgorithm=gt.defaultJointPositionCorrectionAlgorithm,this.breakTorque=this.breakForce=0}function L(t){F.call(this,t,2);var i,s,h,a,e,o,r,n,p=t.localAxis1;this.qa=p.x,this.ra=p.y,this.sa=p.z,p=t.localAxis2,this.nb=p.x,this.ob=p.y,this.pb=p.z,this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(0<(p=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa)&&(p=1/Math.sqrt(p)),this.qa*=p,this.ra*=p,this.sa*=p):(this.qa=1,this.sa=this.ra=0),this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(0<(p=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb)&&(p=1/Math.sqrt(p)),this.nb*=p,this.ob*=p,this.pb*=p):(this.nb=1,this.pb=this.ob=0),-.999999999>(s=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb)?(p=this.qa,i=this.ra,e=(h=this.sa)*h,(s=p*p)<(a=i*i)?s<e?(s=0,h*=a=1/Math.sqrt(a+e),a*=-i):(s=i*(a=1/Math.sqrt(s+a)),h=-p*a,a=0):a<e?(s=-h*(a=1/Math.sqrt(e+s)),h=0,a*=p):(s=i*(a=1/Math.sqrt(s+a)),h=-p*a,a=0),p=s,i=h,s=a,h=0):(p=this.ra*this.pb-this.sa*this.ob,i=this.sa*this.nb-this.qa*this.pb,a=this.qa*this.ob-this.ra*this.nb,p*=s=.5/(h=Math.sqrt(.5*(1+s))),i*=s,s*=a),o=i,i=h,n=p*(c=2*p);var l=o*(e=2*o);a=s*(h=2*s),s=p*e,r=o*h,o=p*h;var c=i*c,y=i*e;p=1-l-a,i=s-(e=i*h),h=o+y,s+=e,a=1-n-a,e=r-c,o-=y,r+=c,n=1-n-l;var f=(l=this.qa)*l,u=(c=this.ra)*c,b=(y=this.sa)*y;f<u?f<b?(f=1/Math.sqrt(u+b),this.Ab=0,this.Bb=y*f,this.Cb=-c*f):(f=1/Math.sqrt(f+u),this.Ab=c*f,this.Bb=-l*f,this.Cb=0):u<b?(f=1/Math.sqrt(b+f),this.Ab=-y*f,this.Bb=0,this.Cb=l*f):(f=1/Math.sqrt(f+u),this.Ab=c*f,this.Bb=-l*f,this.Cb=0),this.lc=this.ra*this.Cb-this.sa*this.Bb,this.mc=this.sa*this.Ab-this.qa*this.Cb,this.nc=this.qa*this.Bb-this.ra*this.Ab,l=p*this.qa+i*this.ra+h*this.sa,c=s*this.qa+a*this.ra+e*this.sa,y=o*this.qa+r*this.ra+n*this.sa,this.nb=l,this.ob=c,this.pb=y,l=p*this.Ab+i*this.Bb+h*this.Cb,c=s*this.Ab+a*this.Bb+e*this.Cb,y=o*this.Ab+r*this.Bb+n*this.Cb,this.gh=l,this.hh=c,this.ih=y,p=p*this.lc+i*this.mc+h*this.nc,i=s*this.lc+a*this.mc+e*this.nc,h=o*this.lc+r*this.mc+n*this.nc,this.Mc=p,this.Nc=i,this.Oc=h,this.Ef=this.Df=this.eg=this.Fe=this.Ee=this.angle=0,this.da=new I(this),this.dl=t.translationalSpringDamper.clone(),this.cl=t.translationalLimitMotor.clone(),this.Xk=t.rotationalSpringDamper.clone(),this.Wk=t.rotationalLimitMotor.clone()}function F(t,i){switch(this.rb=new S(this),this.sb=new S(this),this.Hc=gt.defaultJointPositionCorrectionAlgorithm,this.Lb=i,this.oc=null,this.C=t.rigidBody1,this.D=t.rigidBody2,this.Ak=t.allowCollision,this.Yi=t.breakForce,this.Zi=t.breakTorque,t.solverType){case 0:this.jk=new e(this);break;case 1:this.jk=new n(this)}for(i=t.localAnchor1,this.dj=i.x,this.ej=i.y,this.fj=i.z,t=t.localAnchor2,this.gj=t.x,this.hj=t.y,this.ij=t.z,this.Oc=this.Nc=this.Mc=this.ih=this.hh=this.gh=this.pb=this.ob=this.nb=this.nc=this.mc=this.lc=this.Cb=this.Bb=this.Ab=this.sa=this.ra=this.qa=this.Tf=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Xb=this.Wb=this.Vb=this.Ub=this.Tb=this.Sb=0,this.Pb=Array(gt.maxJacobianRows),t=0,i=gt.maxJacobianRows;t<i;){var s=t++;this.Pb[s]=new k}}function P(){this.Aa=new H,this.fb=this.motorSpeed=this.Ha=this.Ia=this.Ma=this.Fa=0,this.ta=null}function R(){this.Re=this.Qe=null,this.Ka=0,this.rows=Array(gt.maxJacobianRows);for(var t=0,i=this.rows.length;t<i;){var s=t++;this.rows[s]=new P}}function J(){this.Ng=new H,this.Lj=new H,this.Kj=new H,this.friction=this.Ma=this.Fa=0,this.ta=null}function N(){this.Re=this.Qe=null,this.Ka=0,this.rows=Array(gt.maxManifoldPoints);for(var t=0,i=this.rows.length;t<i;){var s=t++;this.rows[s]=new J}}function H(){this.xc=this.ga=this.fa=this.ea=this.ca=this.ba=this.aa=this.Da=this.Ca=this.Ba=this.xa=this.wa=this.va=0}function K(t){this.Ja=t,this.Gl=0,this.Hl=Array(gt.maxManifoldPoints),t=0;for(var i=gt.maxManifoldPoints;t<i;){var s=t++;this.Hl[s]=new G}}function G(){this.Gc=this.Od=this.Nd=this.Md=this.Ld=this.Kd=this.Jd=this.gc=this.fc=this.ec=this.Fb=this.Eb=this.Db=this.sf=this.rf=this.qf=this.pf=this.nf=this.mf=0,this.ae=new E,this.lf=this.Pe=!1,this.Cc=-1}function V(){this.be=this.Xi=this.Wi=this.Vi=this.nj=this.mj=this.lj=this.yg=this.xg=this.wg=0,this.wc=Array(gt.maxManifoldPoints);for(var t=0,i=gt.maxManifoldPoints;t<i;){var s=t++;this.wc[s]=new G}}function E(){this.ff=this.ef=this.df=this.ub=this.yc=this.zc=this.bd=0}function U(t){this.jk=new o(this),this.Ja=t}function W(){}function Y(){this.D=this.C=null,this.Nf=!1}function X(){}function $(){this.position=new dt,this.normal=new dt,this.shape=null,this.fraction=1,this.position.Z(),this.normal.Z(),this.hit=!1}function Z(){}function Q(){}function _(){}function tt(){this.u=new Et,this.Ql=null}function it(){this.Mi=new Rt,this.vj=new xt,this.eg=new dt,this.Z=new dt,this.em=this.xj=null}function st(){this.Mi=new Rt,this.vj=new dt,this.end=new dt,this.xj=null}function ht(t,i){switch(null==t&&(t=2),t){case 1:this.jc=new Zt;break;case 2:this.jc=new $t}this.Kh=new ot(this.jc),null==i&&(i=new dt(0,-9.80665,0)),this.Fk=new dt(i.x,i.y,i.z),this.zi=this.Ph=this.Ei=this.uf=null,this.ek=this.Sk=this.zg=this.jj=0,this.Uk=10,this.Tk=5,this.gk=new st,this.aj=new it,this.yk=new tt,this.vg=new et,this.af=Array(gt.islandInitialConstraintArraySize),this.ph=Array(gt.islandInitialRigidBodyArraySize),this.Sh=new at,this.Ga=new lt,this.Xl=0}function at(){this.invDt=this.dt=0,this.dtRatio=1}function et(){this.Jf=Array(gt.islandInitialRigidBodyArraySize),this.Kf=Array(gt.islandInitialConstraintArraySize),this.Eh=Array(gt.islandInitialConstraintArraySize),this.Dh=Array(gt.islandInitialConstraintArraySize),this.vh=this.wh=this.If=this.Hf=0}function ot(t){this.jc=t,this.Xm=new Ft,this.Bi=0}function rt(){this.Qc=this.Zd=this.M=this.ia=null}function nt(){this.ia=this.M=null,this.rb=new rt,this.sb=new rt,this.Lh=this.D=this.C=this.$b=this.Zb=null,this.$i=new qt,this.Ym=new Lt,this.ik=this.Zj=!1,this.Ja=new V,this.Zl=new K(this.Ja),this.Ye=new U(this.Ja),this.Td=!1}function pt(t,i,s,h){null==h&&(h=1),null==s&&(s=0),null==i&&(i=0),null==t&&(t=0),this.x=t,this.y=i,this.z=s,this.w=h,pt.numCreations++}function lt(){this.b=Array(256),this.c=0,this.bb=Array(256),this.eb=0,this.Lf=Array(256),this.dg=0,this.Wd=Array(256),this.ee=0}function ct(){}function yt(t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b){null==b&&(b=1),null==u&&(u=0),null==f&&(f=0),null==y&&(y=0),null==c&&(c=0),null==l&&(l=1),null==p&&(p=0),null==n&&(n=0),null==r&&(r=0),null==o&&(o=0),null==e&&(e=1),null==a&&(a=0),null==h&&(h=0),null==s&&(s=0),null==i&&(i=0),null==t&&(t=1),this.e00=t,this.e01=i,this.e02=s,this.e03=h,this.e10=a,this.e11=e,this.e12=o,this.e13=r,this.e20=n,this.e21=p,this.e22=l,this.e23=c,this.e30=y,this.e31=f,this.e32=u,this.e33=b,yt.numCreations++}function ft(t,i,s,h,a,e,o,r,n){null==n&&(n=1),null==r&&(r=0),null==o&&(o=0),null==e&&(e=0),null==a&&(a=1),null==h&&(h=0),null==s&&(s=0),null==i&&(i=0),null==t&&(t=1),this.e00=t,this.e01=i,this.e02=s,this.e10=h,this.e11=a,this.e12=e,this.e20=o,this.e21=r,this.e22=n,ft.numCreations++}function ut(){}function bt(){}function vt(){this.Na=Array(4),this.jb=Array(4),this.qb=Array(4),this.uj=Array(3),this.uj[0]=new dt(1,0,0),this.uj[1]=new dt(0,1,0),this.uj[2]=new dt(0,0,1),this.bo=new dt,this.co=new dt,this.Vn=new dt,this.Un=new dt,this.ao=new xt;for(var t=0;4>t;){var i=t++;this.Na[i]=new dt,this.jb[i]=new dt,this.qb[i]=new dt}this.dir=new dt,this.closest=new dt,this.closestPoint1=new dt,this.closestPoint2=new dt,this.Og=new Mt}function gt(){}function xt(){this.B=this.A=this.v=0,this.o=1,this.i=this.h=this.f=0,this.m=1,this.g=this.l=this.j=0,this.s=1}function dt(t,i,s){null==s&&(s=0),null==i&&(i=0),null==t&&(t=0),this.x=t,this.y=i,this.z=s,dt.numCreations++}function zt(){this.Il=new dt}function mt(){this.xd=new dt,this.jb=new dt,this.qb=new dt}function jt(){this.id=++jt.Mb,this.ia=this.M=null,this.dk=new dt,this.bl=this.Wj=0,this.rj=!1,this.zb=Array(3),this.Ge=Array(3),this.We=Array(3),this.fi=new dt,this.Ai=Array(3),this.Ai[0]=1,this.Ai[1]=2,this.Ai[2]=0}function Mt(){this.zb=Array(gt.maxEPAVertices),this.mi=new dt,this.Ne=0,this.Rc=this.jd=null,this.lh=0,this.bf=this.De=null}function At(){this.Sg=!1}function wt(t){this.Sg=t}function Dt(t){this.Sg=t}function Ct(){this.Sg=!1}function Bt(){this.Sg=!1}function qt(){}function St(){this.hc=this.Tc=this.Dj=this.w=0,this.Bc=Array(8),this.ic=Array(8);for(var t=0;8>t;){var i=t++;this.Bc[i]=new kt,this.ic[i]=new kt}}function kt(){this.Qa=this.Pa=this.Oa=this.y=this.x=0}function It(){this.Sg=!1,this.Dg=new St}function Tt(t){this.Sg=t}function Ot(){this.position1=new dt,this.position2=new dt,this.id=this.depth=0}function Lt(){this.numPoints=0,this.normal=new dt,this.points=Array(gt.maxManifoldPoints),this.incremental=!1;for(var t=0,i=gt.maxManifoldPoints;t<i;){var s=t++;this.points[s]=new Ot}}function Ft(){this.Jb=Array(8);for(var t=0;6>t;){var i=t++;this.Jb[i]=Array(8)}t=new Ct,this.Jb[0][0]=new At,this.Jb[0][1]=new Dt(!1),this.Jb[0][2]=t,this.Jb[0][3]=t,this.Jb[0][4]=new wt(!1),this.Jb[0][5]=t,this.Jb[1][0]=new Dt(!0),this.Jb[1][1]=new It,this.Jb[1][2]=t,this.Jb[1][3]=t,this.Jb[1][4]=t,this.Jb[1][5]=t,this.Jb[2][0]=t,this.Jb[2][1]=t,this.Jb[2][2]=t,this.Jb[2][3]=t,this.Jb[2][4]=t,this.Jb[2][5]=t,this.Jb[3][0]=t,this.Jb[3][1]=t,this.Jb[3][2]=t,this.Jb[3][3]=t,this.Jb[3][4]=t,this.Jb[3][5]=t,this.Jb[4][0]=new wt(!0),this.Jb[4][1]=t,this.Jb[4][2]=t,this.Jb[4][3]=t,this.Jb[4][4]=new Bt,this.Jb[4][5]=t,this.Jb[5][0]=t,this.Jb[5][1]=t,this.Jb[5][2]=t,this.Jb[5][3]=t,this.Jb[5][4]=t,this.Jb[5][5]=t}function Pt(t){ai.call(this,0),this.Rb=this.ab=t,this.Oe()}function Rt(){this.position=new dt,this.normal=new dt,this.fraction=0}function Jt(){}function Nt(t,i){ai.call(this,2),this.ab=t,this.Ib=i,this.Oe()}function Ht(t){ai.call(this,5),this.Ne=t.length,this.zb=Array(this.Ne),this.Bg=Array(this.Ne);for(var i=0,s=this.Ne;i<s;){var h=i++;this.zb[h]=t[h],this.Bg[h]=new dt}this.$l=!0,this.Oe()}function Kt(t,i){ai.call(this,3),this.ab=t,this.Ib=i,this.uk=t/Math.sqrt(t*t+4*i*i),this.kk=2*i/Math.sqrt(t*t+4*i*i),this.Oe()}function Gt(t,i){ai.call(this,4),this.ab=t,this.Ib=i,this.Rb=this.ab,this.Oe()}function Vt(t){ai.call(this,1),this.Ke=t.x,this.Le=t.y,this.Me=t.z,this.Gk=t.x,this.Jk=this.Ik=this.Hk=0,this.Kk=t.y,this.Nk=this.Mk=this.Lk=0,this.Ok=t.z,this.Oe(),t=t.x<t.y?t.z<t.x?t.z:t.x:t.z<t.y?t.z:t.y,this.Rb>.2*t&&(this.Rb=.2*t)}function Et(){this.la=this.ka=this.ja=this.oa=this.na=this.ma=0}function Ut(){this.Qb=null,this.fk=0,this.Gi=new Wt,this.gf=this.cg=this.Xc=null,this.fi=Array(1024)}function Wt(){this.Vl=0,this.Rj=!1}function Yt(t,i){_t.call(this,t,i),this.Qh=null,this.jh=!1}function Xt(){this.Uf=this.Vf=this.M=null,this.F=Array(2),this.La=0,this.Ea=null,this.O=0,this.tb=null,this.I=this.H=this.G=this.L=this.K=this.J=0}function $t(){oi.call(this,2),this.Yj=!0,this.ge=new Ut,this.hf=Array(1024),this.Gf=0}function Zt(){oi.call(this,1),this.Yj=!1}function Qt(){this.nh=this.mh=null}function _t(t,i){this.userData=t,this.Cc=i,this.M=this.ia=null,this.I=this.H=this.G=this.L=this.K=this.J=0}function ti(){}function ii(){}function si(){ai.call(this,-1),this.min=new dt,this.max=new dt}function hi(){ai.call(this,-1)}function ai(t){ei.call(this,t),this.Rb=gt.defaultGJKMargin,this.$l=!1}function ei(t){this.Lb=t,this.yf=0}function oi(t){this.Lb=t,this.Ci=0,this.ce=this.$e=this.Be=null,this.Yj=!1,this.oj=0,this.oh=null,this.Ul=0,this.Vj=new hi,this.u=new si,this.Wf=new xt,this.Z=new dt,this.Mi=new Rt}function ri(t,i){function s(){}for(var h in s.prototype=t,t=new s,i)t[h]=i[h];return i.toString!==Object.prototype.toString&&(t.toString=i.toString),t}oi.prototype={Vh:function(){return null},Wh:function(){},wd:function(){},Mb:function(t,i){return t.J<i.G&&t.G>i.J&&t.K<i.H&&t.H>i.K&&t.L<i.I&&t.I>i.L},Ii:function(){},ua:function(){return this.ce},Hb:function(){return this.Yj},cb:function(){return this.oj},Vd:function(){},Bf:function(){},qh:function(){}},ei.prototype={Oe:function(){},Nb:function(){},Di:function(){return!1},cb:function(){return this.Lb},ua:function(){return this.yf},Vd:function(t,i,s,h){var a,e,o,r,n,p,l,c;return a=t.x,e=t.y,t=t.z,o=i.x,r=i.y,i=i.z,a-=s.v,e-=s.A,t-=s.B,o-=s.v,r-=s.A,i-=s.B,!!this.Di(s.o*a+s.i*e+s.l*t,s.f*a+s.m*e+s.g*t,s.h*a+s.j*e+s.s*t,s.o*o+s.i*r+s.l*i,s.f*o+s.m*r+s.g*i,s.h*o+s.j*r+s.s*i,h)&&(a=(i=h.position).x,e=i.y,o=i.z,r=(i=h.normal).x,n=i.y,p=i.z,l=s.o*a+s.f*e+s.h*o,c=s.i*a+s.m*e+s.j*o,o=s.l*a+s.g*e+s.s*o,i=s.o*r+s.f*n+s.h*p,t=s.i*r+s.m*n+s.j*p,r=s.l*r+s.g*n+s.s*p,a=l+s.v,e=c+s.A,o+=s.B,(s=h.position).x=a,s.y=e,s.z=o,(h=h.normal).x=i,h.y=t,h.z=r,!0)}},ai.ua=ei,ai.prototype=ri(ei.prototype,{un:function(){return this.Rb},Zn:function(t){0>t&&(t=0),this.Rb=t},Pd:function(){},Vd:function(t,i,s,h){return this.$l?vt.cb.Vd(this,s,t,i,h):ei.prototype.Vd.call(this,t,i,s,h)}}),hi.ua=ai,hi.prototype=ri(ai.prototype,{za:function(t,i,s){var h,a,e,o;this.ln=t,h=s.x,a=s.y,e=s.z,s=i.o*h+i.i*a+i.l*e,o=i.f*h+i.m*a+i.g*e,i=i.h*h+i.j*a+i.s*e,(h=this.Fl=new dt).x=s,h.y=o,h.z=i,this.Rb=t.Rb},Pd:function(t,i){this.ln.Pd(t,i);var s=this.Fl;if(0<t.x*s.x+t.y*s.y+t.z*s.z){t=this.Fl;s=i.y+t.y;var h=i.z+t.z;i.x+=t.x,i.y=s,i.z=h}}}),si.ua=ai,si.prototype=ri(ai.prototype,{Pd:function(t,i){i.x=0<t.x?this.max.x:this.min.x,i.y=0<t.y?this.max.y:this.min.y,i.z=0<t.z?this.max.z:this.min.z}}),ii.prototype={process:function(){}},_t.prototype={Hb:function(){return this.Cc},ua:function(){var t=new Et;return t.ma=this.J,t.na=this.K,t.oa=this.L,t.ja=this.G,t.ka=this.H,t.la=this.I,t},cb:function(t){t.ma=this.J,t.na=this.K,t.oa=this.L,t.ja=this.G,t.ka=this.H,t.la=this.I}},Qt.prototype={ua:function(){return this.mh},cb:function(){return this.nh},Hb:function(){return this.M}},Zt.ua=oi,Zt.prototype=ri(oi.prototype,{Vh:function(t,i){return t=new _t(t,this.Ul++),this.Ci++,null==this.Be?this.Be=t:(this.$e.M=t,t.ia=this.$e),this.$e=t,t.J=i.ma,t.K=i.na,t.L=i.oa,t.G=i.ja,t.H=i.ka,t.I=i.la,t},Wh:function(t){this.Ci--;var i=t.ia,s=t.M;null!=i&&(i.M=s),null!=s&&(s.ia=i),t==this.Be&&(this.Be=this.Be.M),t==this.$e&&(this.$e=this.$e.ia),t.M=null,t.ia=null,t.userData=null},wd:function(t,i){t.J=i.ma,t.K=i.na,t.L=i.oa,t.G=i.ja,t.H=i.ka,t.I=i.la},Ii:function(){var t=this.ce;if(null!=t){for(;t.mh=null,t.nh=null,null!=(t=t.M););this.ce.M=this.oh,this.oh=this.ce,this.ce=null}for(this.oj=0,t=this.Be;null!=t;){for(var i=t.M,s=t.M;null!=s;){var h=s.M;if(this.oj++,t.J<s.G&&t.G>s.J&&t.K<s.H&&t.H>s.K&&t.L<s.I&&t.I>s.L){var a=this.oh;null!=a?(this.oh=a.M,a.M=null):a=new Qt,null!=this.ce&&(a.M=this.ce),this.ce=a,a.mh=t,a.nh=s}s=h}t=i}},Vd:function(t,i,s){var h,a,e,o;h=t.x,a=t.y,t=t.z,e=i.x,o=i.y,i=i.z;for(var r=this.Be;null!=r;){var n=r.M,p=(D=h)<(z=e)?D:z,l=(m=a)<(M=o)?m:M,c=(j=t)<(w=i)?j:w,y=m>M?m:M,f=j>w?j:w,u=r.J,b=r.K,v=r.L,g=r.G,x=r.H,d=r.I;if(u>(D>z?D:z)||g<p||b>y||x<l||v>f||d<c)j=!1;else{var z,m,j,M=M-m,A=w-j,w=0>(z=z-D)?-z:z,D=(l=.5*(g-u),f=.5*(d-v),D-.5*(g+u));0<(0>(v=(m=m-.5*(x+b))*A-(j=j-.5*(d+v))*M)?-v:v)-((c=.5*(x-b))*(y=0>A?-A:A)+f*(p=0>M?-M:M))?j=!0:j=0<(0>(j=j*z-D*A)?-j:j)-(f*w+l*y),j?j=!0:j=0<(0>(j=D*M-m*z)?-j:j)-(l*p+c*w),j=!j}j&&s.process(r),r=n}},Bf:function(t,i,s,h){for(var a=this.Be;null!=a;){var e=a.M,o=this.u.min;o.x=a.J,o.y=a.K,o.z=a.L,(o=this.u.max).x=a.G,o.y=a.H,o.z=a.I,this.Vj.za(t,i,s),0==(o=vt.cb).zj(this.Vj,this.u,i,this.Wf,null,!1)&&0>=o.distance&&h.process(a),a=e}},qh:function(t,i){for(var s=this.Be;null!=s;){var h=s.M;t.ma<s.G&&t.ja>s.J&&t.na<s.H&&t.ka>s.K&&t.oa<s.I&&t.la>s.L&&i.process(s),s=h}}}),$t.ua=oi,$t.prototype=ri(oi.prototype,{sh:function(t,i){this.oj++;var s=0==t.O,h=0==i.O;t==i?s||(this.sh(t.F[0],i),this.sh(t.F[1],i)):t.J<i.G&&t.G>i.J&&t.K<i.H&&t.H>i.K&&t.L<i.I&&t.I>i.L&&(s&&h?(t=t.tb,i=i.tb,null!=(s=this.oh)?(this.oh=s.M,s.M=null):s=new Qt,null!=this.ce&&(s.M=this.ce),this.ce=s,s.mh=t,s.nh=i):h||t.O>i.O?(this.sh(t.F[0],i),this.sh(t.F[1],i)):(this.sh(i.F[0],t),this.sh(i.F[1],t)))},Jl:function(t,i,s,h,a,e,o,r){var n,p=t.J,l=t.K,c=t.L,y=t.G,f=t.H,u=t.I;if(p>(i>a?i:a)||y<(i<a?i:a)||l>(s>e?s:e)||f<(s<e?s:e)||c>(h>o?h:o)||u<(h<o?h:o))n=!1;else{var b=a-i,v=e-s,g=o-h;n=0>b?-b:b;var x=0>v?-v:v,d=0>g?-g:g,z=.5*(y-p),m=.5*(f-l),j=.5*(u-c);p=i-.5*(y+p);0<(0>(u=(l=s-.5*(f+l))*g-(c=h-.5*(u+c))*v)?-u:u)-(m*d+j*x)?d=!0:d=0<(0>(g=c*b-p*g)?-g:g)-(j*n+z*d),d?n=!0:n=0<(0>(b=p*v-l*b)?-b:b)-(z*x+m*n),n=!n}n&&(0==t.O?r.process(t.tb):(this.Jl(t.F[0],i,s,h,a,e,o,r),this.Jl(t.F[1],i,s,h,a,e,o,r)))},ml:function(t,i,s,h,a){var e=this.u.min;e.x=t.J,e.y=t.K,e.z=t.L,(e=this.u.max).x=t.G,e.y=t.H,e.z=t.I,this.Vj.za(i,s,h),0==(e=vt.cb).zj(this.Vj,this.u,s,this.Wf,null,!1)&&0>=e.distance&&(0==t.O?a.process(t.tb):(this.ml(t.F[0],i,s,h,a),this.ml(t.F[1],i,s,h,a)))},hl:function(t,i,s){t.J<i.ja&&t.G>i.ma&&t.K<i.ka&&t.H>i.na&&t.L<i.la&&t.I>i.oa&&(0==t.O?s.process(t.tb):(this.hl(t.F[0],i,s),this.hl(t.F[1],i,s)))},Vh:function(t,i){if(t=new Yt(t,this.Ul++),this.Ci++,null==this.Be?this.Be=t:(this.$e.M=t,t.ia=this.$e),this.$e=t,t.J=i.ma,t.K=i.na,t.L=i.oa,t.G=i.ja,t.H=i.ka,t.I=i.la,i=gt.bvhProxyPadding,t.J-=i,t.K-=i,t.L-=i,t.G+=i,t.H+=i,t.I+=i,null!=(h=(i=this.ge).Xc)?(i.Xc=h.M,h.M=null):h=new Xt,(o=h).tb=t,t.Qh=o,o.J=t.J,o.K=t.K,o.L=t.L,o.G=t.G,o.H=t.H,o.I=t.I,i.fk++,null==i.cg?i.cg=o:(i.gf.Uf=o,o.Vf=i.gf),i.gf=o,null==i.Qb)i.Qb=o;else{for(var s=i.Qb;0<s.O&&-1!=(h=i.Gi.Sl(s,o));)s=s.F[h];var h,a=s.Ea;if(null!=(h=i.Xc)?(i.Xc=h.M,h.M=null):h=new Xt,null==a)i.Qb=h;else{var e=s.La;a.F[e]=h,h.Ea=a,h.La=e}for(a=s.La,h.F[a]=s,s.Ea=h,s.La=a,s=1^s.La,h.F[s]=o,o.Ea=h,o.La=s;null!=h;){if(i.Gi.Rj&&!(2>h.O)){var o=h.Ea,r=(a=h.F[0],e=h.F[1],a.O-e.O);s=h.La;1<r?(e=a.F[0],r=a.F[1],e.O>r.O?(a.F[1]=h,h.Ea=a,h.La=1,h.F[0]=r,r.Ea=h,r.La=0):(a.F[0]=h,h.Ea=a,h.La=0,h.F[0]=e,e.Ea=h,e.La=0),e=a.F[0],r=a.F[1],a.J=e.J<r.J?e.J:r.J,a.K=e.K<r.K?e.K:r.K,a.L=e.L<r.L?e.L:r.L,a.G=e.G>r.G?e.G:r.G,a.H=e.H>r.H?e.H:r.H,a.I=e.I>r.I?e.I:r.I,e=a.F[0].O,r=a.F[1].O,a.O=(e>r?e:r)+1,e=h.F[0],r=h.F[1],h.J=e.J<r.J?e.J:r.J,h.K=e.K<r.K?e.K:r.K,h.L=e.L<r.L?e.L:r.L,h.G=e.G>r.G?e.G:r.G,h.H=e.H>r.H?e.H:r.H,h.I=e.I>r.I?e.I:r.I,e=h.F[0].O,r=h.F[1].O,h.O=(e>r?e:r)+1,null!=o?(o.F[s]=a,a.Ea=o,a.La=s):(i.Qb=a,a.Ea=null),h=a):-1>r&&(a=e.F[0],r=e.F[1],a.O>r.O?(e.F[1]=h,h.Ea=e,h.La=1,h.F[1]=r,r.Ea=h,r.La=1):(e.F[0]=h,h.Ea=e,h.La=0,h.F[1]=a,a.Ea=h,a.La=1),a=e.F[0],r=e.F[1],e.J=a.J<r.J?a.J:r.J,e.K=a.K<r.K?a.K:r.K,e.L=a.L<r.L?a.L:r.L,e.G=a.G>r.G?a.G:r.G,e.H=a.H>r.H?a.H:r.H,e.I=a.I>r.I?a.I:r.I,a=e.F[0].O,r=e.F[1].O,e.O=(a>r?a:r)+1,a=h.F[0],r=h.F[1],h.J=a.J<r.J?a.J:r.J,h.K=a.K<r.K?a.K:r.K,h.L=a.L<r.L?a.L:r.L,h.G=a.G>r.G?a.G:r.G,h.H=a.H>r.H?a.H:r.H,h.I=a.I>r.I?a.I:r.I,a=h.F[0].O,r=h.F[1].O,h.O=(a>r?a:r)+1,null!=o?(o.F[s]=e,e.Ea=o,e.La=s):(i.Qb=e,e.Ea=null),h=e)}o=h.F[0].O,s=h.F[1].O,h.O=(o>s?o:s)+1,o=h.F[0],s=h.F[1],h.J=o.J<s.J?o.J:s.J,h.K=o.K<s.K?o.K:s.K,h.L=o.L<s.L?o.L:s.L,h.G=o.G>s.G?o.G:s.G,h.H=o.H>s.H?o.H:s.H,h.I=o.I>s.I?o.I:s.I,h=h.Ea}}if(!t.jh){if(t.jh=!0,this.hf.length==this.Gf){for(i=Array(this.Gf<<1),h=0,o=this.Gf;h<o;)i[s=h++]=this.hf[s],this.hf[s]=null;this.hf=i}this.hf[this.Gf++]=t}return t},Wh:function(t){this.Ci--;var i=t.ia,s=t.M;null!=i&&(i.M=s),null!=s&&(s.ia=i),t==this.Be&&(this.Be=this.Be.M),t==this.$e&&(this.$e=this.$e.ia),t.M=null,t.ia=null,i=this.ge,s=t.Qh,i.fk--;var h=s.Vf,a=s.Uf;if(null!=h&&(h.Uf=a),null!=a&&(a.Vf=h),s==i.cg&&(i.cg=i.cg.Uf),s==i.gf&&(i.gf=i.gf.Vf),s.Uf=null,s.Vf=null,i.Qb==s)i.Qb=null;else{a=(h=s.Ea).F[1^s.La];if(null==(n=h.Ea))a.Ea=null,a.La=0,i.Qb=a,h.F[0]=null,h.F[1]=null,h.La=0,h.Ea=null,h.O=0,h.tb=null,h.M=i.Xc,i.Xc=h;else{var e=h.La;for(n.F[e]=a,a.Ea=n,a.La=e,h.F[0]=null,h.F[1]=null,h.La=0,h.Ea=null,h.O=0,h.tb=null,h.M=i.Xc,i.Xc=h,h=n;null!=h;){if(i.Gi.Rj&&!(2>h.O)){a=h.Ea,e=h.F[0];var o=h.F[1],r=e.O-o.O,n=h.La;1<r?(o=e.F[0],r=e.F[1],o.O>r.O?(e.F[1]=h,h.Ea=e,h.La=1,h.F[0]=r,r.Ea=h,r.La=0):(e.F[0]=h,h.Ea=e,h.La=0,h.F[0]=o,o.Ea=h,o.La=0),o=e.F[0],r=e.F[1],e.J=o.J<r.J?o.J:r.J,e.K=o.K<r.K?o.K:r.K,e.L=o.L<r.L?o.L:r.L,e.G=o.G>r.G?o.G:r.G,e.H=o.H>r.H?o.H:r.H,e.I=o.I>r.I?o.I:r.I,o=e.F[0].O,r=e.F[1].O,e.O=(o>r?o:r)+1,o=h.F[0],r=h.F[1],h.J=o.J<r.J?o.J:r.J,h.K=o.K<r.K?o.K:r.K,h.L=o.L<r.L?o.L:r.L,h.G=o.G>r.G?o.G:r.G,h.H=o.H>r.H?o.H:r.H,h.I=o.I>r.I?o.I:r.I,o=h.F[0].O,r=h.F[1].O,h.O=(o>r?o:r)+1,null!=a?(a.F[n]=e,e.Ea=a,e.La=n):(i.Qb=e,e.Ea=null),h=e):-1>r&&(e=o.F[0],r=o.F[1],e.O>r.O?(o.F[1]=h,h.Ea=o,h.La=1,h.F[1]=r,r.Ea=h,r.La=1):(o.F[0]=h,h.Ea=o,h.La=0,h.F[1]=e,e.Ea=h,e.La=1),e=o.F[0],r=o.F[1],o.J=e.J<r.J?e.J:r.J,o.K=e.K<r.K?e.K:r.K,o.L=e.L<r.L?e.L:r.L,o.G=e.G>r.G?e.G:r.G,o.H=e.H>r.H?e.H:r.H,o.I=e.I>r.I?e.I:r.I,e=o.F[0].O,r=o.F[1].O,o.O=(e>r?e:r)+1,e=h.F[0],r=h.F[1],h.J=e.J<r.J?e.J:r.J,h.K=e.K<r.K?e.K:r.K,h.L=e.L<r.L?e.L:r.L,h.G=e.G>r.G?e.G:r.G,h.H=e.H>r.H?e.H:r.H,h.I=e.I>r.I?e.I:r.I,e=h.F[0].O,r=h.F[1].O,h.O=(e>r?e:r)+1,null!=a?(a.F[n]=o,o.Ea=a,o.La=n):(i.Qb=o,o.Ea=null),h=o)}a=h.F[0].O,n=h.F[1].O,h.O=(a>n?a:n)+1,a=h.F[0],n=h.F[1],h.J=a.J<n.J?a.J:n.J,h.K=a.K<n.K?a.K:n.K,h.L=a.L<n.L?a.L:n.L,h.G=a.G>n.G?a.G:n.G,h.H=a.H>n.H?a.H:n.H,h.I=a.I>n.I?a.I:n.I,h=h.Ea}}}t.Qh=null,s.F[0]=null,s.F[1]=null,s.La=0,s.Ea=null,s.O=0,s.tb=null,s.M=i.Xc,i.Xc=s,t.userData=null,t.M=null,t.ia=null,t.jh&&(t.jh=!1)},wd:function(t,i,s){if(!(t.J<=i.ma&&t.G>=i.ja&&t.K<=i.na&&t.H>=i.ka&&t.L<=i.oa&&t.I>=i.la)){var h;if(t.J=i.ma,t.K=i.na,t.L=i.oa,t.G=i.ja,t.H=i.ka,t.I=i.la,i=gt.bvhProxyPadding,t.J-=i,t.K-=i,t.L-=i,t.G+=i,t.H+=i,t.I+=i,null!=s)i=s.x,h=s.y,s=s.z,t.J+=0<i?0:i,t.K+=0<h?0:h,t.L+=0<s?0:s,t.G+=0>i?0:i,t.H+=0>h?0:h,t.I+=0>s?0:s;if(!t.jh){if(t.jh=!0,this.hf.length==this.Gf){for(s=Array(this.Gf<<1),i=0,h=this.Gf;i<h;){var a=i++;s[a]=this.hf[a],this.hf[a]=null}this.hf=s}this.hf[this.Gf++]=t}}},Ii:function(){var t=this.ce;if(null!=t){for(;t.mh=null,t.nh=null,null!=(t=t.M););this.ce.M=this.oh,this.oh=this.ce,this.ce=null}if(this.oj=0,!(2>this.Ci)){for(var i=this.Gf/this.Ci<gt.bvhIncrementalCollisionThreshold,s=0,h=this.Gf;s<h;){var a=s++,e=this.hf[a];if(e.jh){var o=this.ge,r=e.Qh;o.fk--;var n=r.Vf,p=r.Uf;if(null!=n&&(n.Uf=p),null!=p&&(p.Vf=n),r==o.cg&&(o.cg=o.cg.Uf),r==o.gf&&(o.gf=o.gf.Vf),r.Uf=null,r.Vf=null,o.Qb==r)o.Qb=null;else{var l=r.Ea,c=l.F[1^r.La],y=l.Ea;if(null==y)c.Ea=null,c.La=0,o.Qb=c,l.M=null,l.La=0,l.F[0]=null,l.F[1]=null,l.La=0,l.Ea=null,l.O=0,l.tb=null,l.M=o.Xc,o.Xc=l;else{c.Ea=y;var f=l.La;y.F[f]=c,c.Ea=y,c.La=f,l.M=null,l.La=0,l.F[0]=null,l.F[1]=null,l.La=0,l.Ea=null,l.O=0,l.tb=null,l.M=o.Xc,o.Xc=l;for(var u=y;null!=u;){if(o.Gi.Rj&&!(2>u.O)){var b=u.Ea,v=u.F[0],g=u.F[1],x=v.O-g.O,d=u.La;if(1<x){var z=v.F[0],m=v.F[1];if(z.O>m.O){v.F[1]=u,u.Ea=v,u.La=1,u.F[0]=m,m.Ea=u,m.La=0;var j=v.F[0],M=v.F[1];v.J=j.J<M.J?j.J:M.J,v.K=j.K<M.K?j.K:M.K,v.L=j.L<M.L?j.L:M.L,v.G=j.G>M.G?j.G:M.G,v.H=j.H>M.H?j.H:M.H,v.I=j.I>M.I?j.I:M.I;var A=v.F[0].O,w=v.F[1].O;v.O=(A>w?A:w)+1;var D=u.F[0],C=u.F[1];u.J=D.J<C.J?D.J:C.J,u.K=D.K<C.K?D.K:C.K,u.L=D.L<C.L?D.L:C.L,u.G=D.G>C.G?D.G:C.G,u.H=D.H>C.H?D.H:C.H,u.I=D.I>C.I?D.I:C.I;var B=u.F[0].O,q=u.F[1].O;u.O=(B>q?B:q)+1}else{v.F[0]=u,u.Ea=v,u.La=0,u.F[0]=z,z.Ea=u,z.La=0;var S=v.F[0],k=v.F[1];v.J=S.J<k.J?S.J:k.J,v.K=S.K<k.K?S.K:k.K,v.L=S.L<k.L?S.L:k.L,v.G=S.G>k.G?S.G:k.G,v.H=S.H>k.H?S.H:k.H,v.I=S.I>k.I?S.I:k.I;var I=v.F[0].O,T=v.F[1].O;v.O=(I>T?I:T)+1;var O=u.F[0],L=u.F[1];u.J=O.J<L.J?O.J:L.J,u.K=O.K<L.K?O.K:L.K,u.L=O.L<L.L?O.L:L.L,u.G=O.G>L.G?O.G:L.G,u.H=O.H>L.H?O.H:L.H,u.I=O.I>L.I?O.I:L.I;var F=u.F[0].O,P=u.F[1].O;u.O=(F>P?F:P)+1}null!=b?(b.F[d]=v,v.Ea=b,v.La=d):(o.Qb=v,v.Ea=null),u=v}else if(-1>x){var R=g.F[0],J=g.F[1];if(R.O>J.O){g.F[1]=u,u.Ea=g,u.La=1,u.F[1]=J,J.Ea=u,J.La=1;var N=g.F[0],H=g.F[1];g.J=N.J<H.J?N.J:H.J,g.K=N.K<H.K?N.K:H.K,g.L=N.L<H.L?N.L:H.L,g.G=N.G>H.G?N.G:H.G,g.H=N.H>H.H?N.H:H.H,g.I=N.I>H.I?N.I:H.I;var K=g.F[0].O,G=g.F[1].O;g.O=(K>G?K:G)+1;var V=u.F[0],E=u.F[1];u.J=V.J<E.J?V.J:E.J,u.K=V.K<E.K?V.K:E.K,u.L=V.L<E.L?V.L:E.L,u.G=V.G>E.G?V.G:E.G,u.H=V.H>E.H?V.H:E.H,u.I=V.I>E.I?V.I:E.I;var U=u.F[0].O,W=u.F[1].O;u.O=(U>W?U:W)+1}else{g.F[0]=u,u.Ea=g,u.La=0,u.F[1]=R,R.Ea=u,R.La=1;var Y=g.F[0],X=g.F[1];g.J=Y.J<X.J?Y.J:X.J,g.K=Y.K<X.K?Y.K:X.K,g.L=Y.L<X.L?Y.L:X.L,g.G=Y.G>X.G?Y.G:X.G,g.H=Y.H>X.H?Y.H:X.H,g.I=Y.I>X.I?Y.I:X.I;var $=g.F[0].O,Z=g.F[1].O;g.O=($>Z?$:Z)+1;var Q=u.F[0],_=u.F[1];u.J=Q.J<_.J?Q.J:_.J,u.K=Q.K<_.K?Q.K:_.K,u.L=Q.L<_.L?Q.L:_.L,u.G=Q.G>_.G?Q.G:_.G,u.H=Q.H>_.H?Q.H:_.H,u.I=Q.I>_.I?Q.I:_.I;var tt=u.F[0].O,it=u.F[1].O;u.O=(tt>it?tt:it)+1}null!=b?(b.F[d]=g,g.Ea=b,g.La=d):(o.Qb=g,g.Ea=null),u=g}}var st=u.F[0].O,ht=u.F[1].O;u.O=(st>ht?st:ht)+1;var at=u.F[0],et=u.F[1];u.J=at.J<et.J?at.J:et.J,u.K=at.K<et.K?at.K:et.K,u.L=at.L<et.L?at.L:et.L,u.G=at.G>et.G?at.G:et.G,u.H=at.H>et.H?at.H:et.H,u.I=at.I>et.I?at.I:et.I,u=u.Ea}}}e.Qh=null,r.M=null,r.La=0,r.F[0]=null,r.F[1]=null,r.La=0,r.Ea=null,r.O=0,r.tb=null,r.M=o.Xc,o.Xc=r;var ot=this.ge,rt=ot.Xc;null!=rt?(ot.Xc=rt.M,rt.M=null):rt=new Xt;var nt=rt;if(nt.tb=e,e.Qh=nt,nt.J=e.J,nt.K=e.K,nt.L=e.L,nt.G=e.G,nt.H=e.H,nt.I=e.I,ot.fk++,null==ot.cg?ot.cg=nt:(ot.gf.Uf=nt,nt.Vf=ot.gf),ot.gf=nt,null==ot.Qb)ot.Qb=nt;else{for(var pt=ot.Qb;0<pt.O;){var lt=ot.Gi.Sl(pt,nt);if(-1==lt)break;pt=pt.F[lt]}var ct=pt.Ea,yt=ot.Xc;null!=yt?(ot.Xc=yt.M,yt.M=null):yt=new Xt;var ft=yt;if(null==ct)ot.Qb=ft;else{var ut=pt.La;ct.F[ut]=ft,ft.Ea=ct,ft.La=ut}var bt=pt.La;ft.F[bt]=pt,pt.Ea=ft,pt.La=bt;var vt=1^pt.La;for(ft.F[vt]=nt,nt.Ea=ft,nt.La=vt;null!=ft;){if(ot.Gi.Rj&&!(2>ft.O)){var xt=ft.Ea,dt=ft.F[0],zt=ft.F[1],mt=dt.O-zt.O,jt=ft.La;if(1<mt){var Mt=dt.F[0],At=dt.F[1];if(Mt.O>At.O){dt.F[1]=ft,ft.Ea=dt,ft.La=1,ft.F[0]=At,At.Ea=ft,At.La=0;var wt=dt.F[0],Dt=dt.F[1];dt.J=wt.J<Dt.J?wt.J:Dt.J,dt.K=wt.K<Dt.K?wt.K:Dt.K,dt.L=wt.L<Dt.L?wt.L:Dt.L,dt.G=wt.G>Dt.G?wt.G:Dt.G,dt.H=wt.H>Dt.H?wt.H:Dt.H,dt.I=wt.I>Dt.I?wt.I:Dt.I;var Ct=dt.F[0].O,Bt=dt.F[1].O;dt.O=(Ct>Bt?Ct:Bt)+1;var qt=ft.F[0],St=ft.F[1];ft.J=qt.J<St.J?qt.J:St.J,ft.K=qt.K<St.K?qt.K:St.K,ft.L=qt.L<St.L?qt.L:St.L,ft.G=qt.G>St.G?qt.G:St.G,ft.H=qt.H>St.H?qt.H:St.H,ft.I=qt.I>St.I?qt.I:St.I;var kt=ft.F[0].O,It=ft.F[1].O;ft.O=(kt>It?kt:It)+1}else{dt.F[0]=ft,ft.Ea=dt,ft.La=0,ft.F[0]=Mt,Mt.Ea=ft,Mt.La=0;var Tt=dt.F[0],Ot=dt.F[1];dt.J=Tt.J<Ot.J?Tt.J:Ot.J,dt.K=Tt.K<Ot.K?Tt.K:Ot.K,dt.L=Tt.L<Ot.L?Tt.L:Ot.L,dt.G=Tt.G>Ot.G?Tt.G:Ot.G,dt.H=Tt.H>Ot.H?Tt.H:Ot.H,dt.I=Tt.I>Ot.I?Tt.I:Ot.I;var Lt=dt.F[0].O,Ft=dt.F[1].O;dt.O=(Lt>Ft?Lt:Ft)+1;var Pt=ft.F[0],Rt=ft.F[1];ft.J=Pt.J<Rt.J?Pt.J:Rt.J,ft.K=Pt.K<Rt.K?Pt.K:Rt.K,ft.L=Pt.L<Rt.L?Pt.L:Rt.L,ft.G=Pt.G>Rt.G?Pt.G:Rt.G,ft.H=Pt.H>Rt.H?Pt.H:Rt.H,ft.I=Pt.I>Rt.I?Pt.I:Rt.I;var Jt=ft.F[0].O,Nt=ft.F[1].O;ft.O=(Jt>Nt?Jt:Nt)+1}null!=xt?(xt.F[jt]=dt,dt.Ea=xt,dt.La=jt):(ot.Qb=dt,dt.Ea=null),ft=dt}else if(-1>mt){var Ht=zt.F[0],Kt=zt.F[1];if(Ht.O>Kt.O){zt.F[1]=ft,ft.Ea=zt,ft.La=1,ft.F[1]=Kt,Kt.Ea=ft,Kt.La=1;var Gt=zt.F[0],Vt=zt.F[1];zt.J=Gt.J<Vt.J?Gt.J:Vt.J,zt.K=Gt.K<Vt.K?Gt.K:Vt.K,zt.L=Gt.L<Vt.L?Gt.L:Vt.L,zt.G=Gt.G>Vt.G?Gt.G:Vt.G,zt.H=Gt.H>Vt.H?Gt.H:Vt.H,zt.I=Gt.I>Vt.I?Gt.I:Vt.I;var Et=zt.F[0].O,Ut=zt.F[1].O;zt.O=(Et>Ut?Et:Ut)+1;var Wt=ft.F[0],Yt=ft.F[1];ft.J=Wt.J<Yt.J?Wt.J:Yt.J,ft.K=Wt.K<Yt.K?Wt.K:Yt.K,ft.L=Wt.L<Yt.L?Wt.L:Yt.L,ft.G=Wt.G>Yt.G?Wt.G:Yt.G,ft.H=Wt.H>Yt.H?Wt.H:Yt.H,ft.I=Wt.I>Yt.I?Wt.I:Yt.I;var $t=ft.F[0].O,Zt=ft.F[1].O;ft.O=($t>Zt?$t:Zt)+1}else{zt.F[0]=ft,ft.Ea=zt,ft.La=0,ft.F[1]=Ht,Ht.Ea=ft,Ht.La=1;var Qt=zt.F[0],_t=zt.F[1];zt.J=Qt.J<_t.J?Qt.J:_t.J,zt.K=Qt.K<_t.K?Qt.K:_t.K,zt.L=Qt.L<_t.L?Qt.L:_t.L,zt.G=Qt.G>_t.G?Qt.G:_t.G,zt.H=Qt.H>_t.H?Qt.H:_t.H,zt.I=Qt.I>_t.I?Qt.I:_t.I;var ti=zt.F[0].O,ii=zt.F[1].O;zt.O=(ti>ii?ti:ii)+1;var si=ft.F[0],hi=ft.F[1];ft.J=si.J<hi.J?si.J:hi.J,ft.K=si.K<hi.K?si.K:hi.K,ft.L=si.L<hi.L?si.L:hi.L,ft.G=si.G>hi.G?si.G:hi.G,ft.H=si.H>hi.H?si.H:hi.H,ft.I=si.I>hi.I?si.I:hi.I;var ai=ft.F[0].O,ei=ft.F[1].O;ft.O=(ai>ei?ai:ei)+1}null!=xt?(xt.F[jt]=zt,zt.Ea=xt,zt.La=jt):(ot.Qb=zt,zt.Ea=null),ft=zt}}var oi=ft.F[0].O,ri=ft.F[1].O;ft.O=(oi>ri?oi:ri)+1;var ni=ft.F[0],pi=ft.F[1];ft.J=ni.J<pi.J?ni.J:pi.J,ft.K=ni.K<pi.K?ni.K:pi.K,ft.L=ni.L<pi.L?ni.L:pi.L,ft.G=ni.G>pi.G?ni.G:pi.G,ft.H=ni.H>pi.H?ni.H:pi.H,ft.I=ni.I>pi.I?ni.I:pi.I,ft=ft.Ea}}i&&this.sh(this.ge.Qb,e.Qh),e.jh=!1}this.hf[a]=null}i||this.sh(this.ge.Qb,this.ge.Qb),this.Gf=0}},Vd:function(t,i,s){null!=this.ge.Qb&&this.Jl(this.ge.Qb,t.x,t.y,t.z,i.x,i.y,i.z,s)},Bf:function(t,i,s,h){null!=this.ge.Qb&&this.ml(this.ge.Qb,t,i,s,h)},qh:function(t,i){null!=this.ge.Qb&&this.hl(this.ge.Qb,t,i)},Jn:function(){return this.ge.cn()}}),Yt.ua=_t,Yt.prototype=ri(_t.prototype,{}),Wt.prototype={Sl:function(t,i){switch(this.Vl){case 0:var s,h,a;s=i.J+i.G,h=i.K+i.H,a=i.L+i.I;var e,o,r=t.F[0],n=t.F[1];return i=r.J+r.G,t=r.K+r.H,r=r.L+r.I,e=n.J+n.G,o=n.K+n.H,n=n.L+n.I,(i-=s)*i+(t-=h)*t+(r-=a)*r<(e-=s)*e+(o-=h)*o+(n-=a)*n?0:1;case 1:r=t.F[0],s=t.F[1],h=t.H-t.K,a=t.I-t.L;var p,l;n=2*((t.G-t.J)*(h+a)+h*a);h=t.J<i.J?t.J:i.J,p=t.K<i.K?t.K:i.K,e=t.L<i.L?t.L:i.L,a=t.G>i.G?t.G:i.G,l=t.H>i.H?t.H:i.H,o=t.I>i.I?t.I:i.I,t=2*(h=2*((a-h)*((t=l-p)+(e=o-e))+t*e));var c=2*(h-n);n=c;return h=r.J<i.J?r.J:i.J,p=r.K<i.K?r.K:i.K,e=r.L<i.L?r.L:i.L,a=r.G>i.G?r.G:i.G,l=r.H>i.H?r.H:i.H,o=r.I>i.I?r.I:i.I,0==r.O?n+=2*((a-h)*((r=l-p)+(e=o-e))+r*e):(p=l-p,e=o-e,o=r.H-r.K,l=r.I-r.L,n+=2*((a-h)*(p+e)+p*e)-2*((r.G-r.J)*(o+l)+o*l)),r=c,h=s.J<i.J?s.J:i.J,p=s.K<i.K?s.K:i.K,e=s.L<i.L?s.L:i.L,a=s.G>i.G?s.G:i.G,l=s.H>i.H?s.H:i.H,o=s.I>i.I?s.I:i.I,0==s.O?r+=2*((a-h)*((s=l-p)+(i=o-e))+s*i):(i=l-p,e=o-e,o=s.H-s.K,c=s.I-s.L,r+=2*((a-h)*(i+e)+i*e)-2*((s.G-s.J)*(o+c)+o*c)),t<n?t<r?-1:1:n<r?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Vl),-1}}},Ut.prototype={cn:function(){return this.pl(this.Qb)},pl:function(t){if(null==t||0==t.O)return 0;var i=t.F[0].O-t.F[1].O;return 0>i&&(i=-i),i+this.pl(t.F[0])+this.pl(t.F[1])}},Et.prototype={za:function(t,i){return this.ma=t.x,this.na=t.y,this.oa=t.z,this.ja=i.x,this.ka=i.y,this.la=i.z,this},Jc:function(){var t=new dt;return t.x=this.ma,t.y=this.na,t.z=this.oa,t},Kc:function(t){t.x=this.ma,t.y=this.na,t.z=this.oa},Yd:function(t){return this.ma=t.x,this.na=t.y,this.oa=t.z,this},Ac:function(){var t=new dt;return t.x=this.ja,t.y=this.ka,t.z=this.la,t},Ec:function(t){t.x=this.ja,t.y=this.ka,t.z=this.la},fd:function(t){return this.ja=t.x,this.ka=t.y,this.la=t.z,this},Hb:function(){var t,i,s,h=new dt;return t=this.ma+this.ja,i=this.na+this.ka,s=this.oa+this.la,h.x=.5*t,h.y=.5*i,h.z=.5*s,h},Mb:function(t){var i,s,h;i=this.ma+this.ja,s=this.na+this.ka,h=this.oa+this.la,t.x=.5*i,t.y=.5*s,t.z=.5*h},pc:function(){var t,i,s,h=new dt;return t=this.ja-this.ma,i=this.ka-this.na,s=this.la-this.oa,h.x=.5*t,h.y=.5*i,h.z=.5*s,h},qc:function(t){var i,s,h;i=this.ja-this.ma,s=this.ka-this.na,h=this.la-this.oa,t.x=.5*i,t.y=.5*s,t.z=.5*h},ua:function(t){return this.ma=this.ma<t.ma?this.ma:t.ma,this.na=this.na<t.na?this.na:t.na,this.oa=this.oa<t.oa?this.oa:t.oa,this.ja=this.ja>t.ja?this.ja:t.ja,this.ka=this.ka>t.ka?this.ka:t.ka,this.la=this.la>t.la?this.la:t.la,this},cb:function(t){var i=new Et;return i.ma=this.ma<t.ma?this.ma:t.ma,i.na=this.na<t.na?this.na:t.na,i.oa=this.oa<t.oa?this.oa:t.oa,i.ja=this.ja>t.ja?this.ja:t.ja,i.ka=this.ka>t.ka?this.ka:t.ka,i.la=this.la>t.la?this.la:t.la,i},Lc:function(t){return this.ma<t.ja&&this.ja>t.ma&&this.na<t.ka&&this.ka>t.na&&this.oa<t.la&&this.la>t.oa},uc:function(t){var i=new Et;return i.ma=this.ma>t.ma?this.ma:t.ma,i.na=this.na>t.na?this.na:t.na,i.oa=this.oa>t.oa?this.oa:t.oa,i.ja=this.ja<t.ja?this.ja:t.ja,i.ka=this.ka<t.ka?this.ka:t.ka,i.la=this.la<t.la?this.la:t.la,i},vc:function(t,i){i.ma=this.ma>t.ma?this.ma:t.ma,i.na=this.na>t.na?this.na:t.na,i.oa=this.oa>t.oa?this.oa:t.oa,i.ja=this.ja<t.ja?this.ja:t.ja,i.ka=this.ka<t.ka?this.ka:t.ka,i.la=this.la<t.la?this.la:t.la},de:function(t){return this.ma=t.ma,this.na=t.na,this.oa=t.oa,this.ja=t.ja,this.ka=t.ka,this.la=t.la,this},clone:function(){var t=new Et;return t.ma=this.ma,t.na=this.na,t.oa=this.oa,t.ja=this.ja,t.ka=this.ka,t.la=this.la,t}},Vt.ua=ai,Vt.prototype=ri(ai.prototype,{vn:function(){var t=new dt;return t.x=this.Ke,t.y=this.Le,t.z=this.Me,t},wn:function(t){t.x=this.Ke,t.y=this.Le,t.z=this.Me},Oe:function(){var t,i,s;this.yf=8*this.Ke*this.Le*this.Me,t=this.Ke*this.Ke,i=this.Le*this.Le,s=this.Me*this.Me,this.mg=.3333333333333333*(i+s),this.pg=this.og=this.ng=0,this.qg=.3333333333333333*(s+t),this.tg=this.sg=this.rg=0,this.ug=.3333333333333333*(t+i)},Nb:function(t,i){var s,h,a,e,o,r,n,p,l;e=i.o*this.Gk+i.f*this.Hk+i.h*this.Ik,o=i.i*this.Gk+i.m*this.Hk+i.j*this.Ik,s=i.l*this.Gk+i.g*this.Hk+i.s*this.Ik,r=i.o*this.Jk+i.f*this.Kk+i.h*this.Lk,n=i.i*this.Jk+i.m*this.Kk+i.j*this.Lk,h=i.l*this.Jk+i.g*this.Kk+i.s*this.Lk,e=(0>e?-e:e)+(0>r?-r:r)+(0>(p=i.o*this.Mk+i.f*this.Nk+i.h*this.Ok)?-p:p),o=(0>o?-o:o)+(0>n?-n:n)+(0>(l=i.i*this.Mk+i.m*this.Nk+i.j*this.Ok)?-l:l),s=(0>s?-s:s)+(0>h?-h:h)+(0>(a=i.l*this.Mk+i.g*this.Nk+i.s*this.Ok)?-a:a),t.ma=i.v-e,t.na=i.A-o,t.oa=i.B-s,t.ja=i.v+e,t.ka=i.A+o,t.la=i.B+s},Pd:function(t,i){var s,h,a;a=h=s=this.Rb,s=s<this.Ke?s:this.Ke,h=h<this.Le?h:this.Le,a=a<this.Me?a:this.Me,s=this.Ke-s,h=this.Le-h,a=this.Me-a,i.x=0<t.x?s:-s,i.y=0<t.y?h:-h,i.z=0<t.z?a:-a},Di:function(t,i,s,h,a,e,o){var r=this.Ke,n=this.Le,p=this.Me,l=0,c=0,y=0,f=1,u=1,b=1;if(-1e-6<(h-=t)&&1e-6>h){if(t<=-r||t>=r)return!1}else{var v=1/h,g=(-r-t)*v;g>(r=(r-t)*v)&&(v=g,g=r,r=v),0<g&&(l=g),1>r&&(f=r)}if(-1e-6<(a-=i)&&1e-6>a){if(i<=-n||i>=n)return!1}else(r=(-n-i)*(g=1/a))>(n=(n-i)*g)&&(g=r,r=n,n=g),0<r&&(c=r),1>n&&(u=n);if(-1e-6<(e-=s)&&1e-6>e){if(s<=-p||s>=p)return!1}else(n=(-p-s)*(r=1/e))>(p=(p-s)*r)&&(r=n,n=p,p=r),0<n&&(y=n),1>p&&(b=p);if(1<=l||1<=c||1<=y||0>=f||0>=u||0>=b)return!1;if(p=l,l=0,c>p&&(p=c,l=1),y>p&&(p=y,l=2),u<f&&(f=u),b<f&&(f=b),p>f||!p)return!1;switch(l){case 0:o.normal.za(0<h?-1:1,0,0);break;case 1:o.normal.za(0,0<a?-1:1,0);break;case 2:o.normal.za(0,0,0<e?-1:1)}return o.position.za(t+p*h,i+p*a,s+p*e),o.fraction=p,!0}}),Gt.ua=ai,Gt.prototype=ri(ai.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var t=this.ab*this.ab,i=this.Ib*this.Ib,s=6.28318530717958*t*this.Ib,h=3.14159265358979*t*this.ab*4/3,a=(this.yf=s+h)?1/this.yf:0;this.mg=i=a*(s*(.25*t+i/3)+h*(.4*t+this.Ib*this.ab*.75+i)),this.pg=this.og=this.ng=0,this.qg=a*(s*t*.5+h*t*.4),this.tg=this.sg=this.rg=0,this.ug=i},Nb:function(t,i){var s,h,a,e,o,r;a=h=s=this.ab,e=i.f,o=i.m,r=i.g,s+=e=(0>e?-e:e)*this.Ib,h+=o=(0>o?-o:o)*this.Ib,a+=r=(0>r?-r:r)*this.Ib,t.ma=i.v-s,t.na=i.A-h,t.oa=i.B-a,t.ja=i.v+s,t.ka=i.A+h,t.la=i.B+a},Pd:function(t,i){0<t.y?i.za(0,this.Ib,0):i.za(0,-this.Ib,0)},Di:function(t,i,s,h,a,e,o){var r,n,p,l=this.Ib,c=e-s,y=(n=h-t)*n+c*c,f=t*n+s*c,u=f*f-y*(r=t*t+s*s-this.ab*this.ab);if(0>u)return!1;if(0<y){if(1<=(r=(-f-(u=Math.sqrt(u)))/y)||0>=(-f+u)/y)return!1}else{if(0<=r)return!1;r=0}return(y=i+(a-i)*r)>-l&&y<l?0<r&&(e=r,f=o.normal.za(t+n*e,0,s+c*e),0<(i=Math.sqrt(f.x*f.x+f.y*f.y+f.z*f.z))&&(i=1/i),a=f.y*i,h=f.z*i,f.x=f.x*i,f.y=a,f.z=h,o.position.za(t+e*n,y,s+e*c),o.fraction=e,!0):!(0>(u=(f=(p=t-0)*(t=h-t)+(l=i-(n=0>y?-l:l))*(i=a-i)+(c=s-0)*(s=e-s))*f-(y=t*t+i*i+s*s)*(r=p*p+l*l+c*c-this.ab*this.ab)))&&(!(0>(e=(-f-Math.sqrt(u))/y)||1<e)&&(0<(f=(t=p+t*e)*t+(y=l+i*e)*y+(s=c+s*e)*s)&&(f=1/Math.sqrt(f)),(i=o.position).x=t+0,i.y=y+n,i.z=s+0,(n=o.normal).x=t*f,n.y=y*f,n.z=s*f,o.fraction=e,!0))}}),Kt.ua=ai,Kt.prototype=ri(ai.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var t=this.ab*this.ab,i=this.Ib*this.Ib*4;this.yf=3.14159265358979*t*this.Ib*2/3,this.mg=.05*(3*t+2*i),this.pg=this.og=this.ng=0,this.qg=.3*t,this.tg=this.sg=this.rg=0,this.ug=.08333333333333333*(3*t+2*i)},Nb:function(t,i){var s,h,a,e,o,r,n,p,l,c,y,f;s=i.f,h=i.m,a=i.g,e=Math.sqrt(1-s*s),o=Math.sqrt(1-h*h),r=Math.sqrt(1-a*a),e*=this.ab,o*=this.ab,r*=this.ab,s*=this.Ib,h*=this.Ib,l=-(a*=this.Ib)-r,f=-a+r,r=(n=-s-e)>(c=-s+e)?n:c,o=(p=-h-o)>(y=-h+o)?p:y,e=l>f?l:f,n=n<c?n:c,p=p<y?p:y,l=l<f?l:f,t.ma=i.v+(n<s?n:s),t.na=i.A+(p<h?p:h),t.oa=i.B+(l<a?l:a),t.ja=i.v+(r>s?r:s),t.ka=i.A+(o>h?o:h),t.la=i.B+(e>a?e:a)},Pd:function(t,i){var s=t.x,h=t.y,a=t.z;0<h&&h*h>this.uk*this.uk*(s*s+h*h+a*a)?(i.za(0,this.Ib-this.Rb/this.uk,0),0>i.y&&(i.y=0)):(h=(s=t.x)*s+(t=t.z)*t,0>(a=((a=2*this.Ib)-this.Rb)/a*this.ab-this.Rb/this.kk)&&(a=0),h=0<h?a/Math.sqrt(h):0,0>(a=this.Ib-this.Rb)&&(a=0),i.x=s*h,i.y=-a,i.z=t*h)},Di:function(t,i,s,h,a,e,o){var r=this.Ib;h-=t,e-=s;var n=0,p=1;if(-1e-6<(a-=i)&&1e-6>a){if(i<=-r||i>=r)return!1}else{if((c=(-r-i)*(y=1/a))>(y=(r-i)*y))var l=c,c=y,y=l;0<c&&(n=c),1>y&&(p=y)}if(1<=n||0>=p)return!1;i-=r;var f=(c=(l=this.kk*this.kk)*(t*h+i*a+s*e)-i*a)*c-(y=l*(h*h+a*a+e*e)-a*a)*(l=l*(t*t+i*i+s*s)-i*i);if(y){if(0>f)return!1;if(f=Math.sqrt(f),0>y){if(0<a){if(l=0,0>=(c=(-c+f)/y))return!1}else if(l=(-c-f)/y,c=1,1<=l)return!1}else if(l=(-c-f)/y,c=(-c+f)/y,1<=l||0>=c)return!1}else if(y=-l/(2*c),0<c){if(l=0,c=y,0>=y)return!1}else if(l=y,c=1,1<=y)return!1;if(i+=r,c<=n||p<=l)return!1;if(l<n){if(!(r=n))return!1;o.normal.za(0,0<a?-1:1,0)}else{if(!(r=l))return!1;n=o.normal.za(t+h*r,0,s+e*r),0<(p=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z))&&(p=1/p),c=n.y*p,y=n.z*p,n.x=n.x*p,n.y=c,n.z=y,p=this.kk,c=n.y*p,y=n.z*p,n.x=n.x*p,n.y=c,n.z=y,o.normal.y+=this.uk}return o.position.za(t+r*h,i+r*a,s+r*e),o.fraction=r,!0}}),Ht.ua=ai,Ht.prototype=ri(ai.prototype,{Nn:function(){return this.zb},Oe:function(){this.mg=this.yf=1,this.pg=this.og=this.ng=0,this.qg=1,this.tg=this.sg=this.rg=0,this.ug=1;for(var t=this.zb[0].x,i=this.zb[0].y,s=this.zb[0].z,h=this.zb[0].x,a=this.zb[0].y,e=this.zb[0].z,o=1,r=this.Ne;o<r;){var n=o++,p=this.zb[n].x,l=this.zb[n].y;p<t?t=p:p>h&&(h=p),l<i?i=l:l>a&&(a=l),(n=this.zb[n].z)<s?s=n:n>e&&(e=n)}o=h-t,r=a-i,p=e-s,this.yf=o*r*p,t=.25*((t+h)*(t+h)+(i+a)*(i+a)+(s+e)*(s+e)),o=o*o*.25,r=r*r*.25,p=p*p*.25,this.mg=.3333333333333333*(r+p)+t,this.pg=this.og=this.ng=0,this.qg=.3333333333333333*(p+o)+t,this.tg=this.sg=this.rg=0,this.ug=.3333333333333333*(o+r)+t},Nb:function(t,i){var s,h,a,e,o,r,n,p,l,c,y,f;l=p=n=this.Rb,c=(s=this.zb[0]).x,y=s.y,f=s.z,h=i.o*c+i.f*y+i.h*f,s=i.i*c+i.m*y+i.j*f,a=i.l*c+i.g*y+i.s*f,c=h+i.v,y=s+i.A,s=c,h=y,a=f=a+i.B,e=c,o=y,r=f;for(var u=1,b=this.Ne;u<b;){var v,g;c=u++,c=(f=this.zb[c]).x,y=f.y,f=f.z,v=i.o*c+i.f*y+i.h*f,g=i.i*c+i.m*y+i.j*f,f=i.l*c+i.g*y+i.s*f,c=v,y=g,s=s<(c+=i.v)?s:c,h=h<(y+=i.A)?h:y,a=a<(f+=i.B)?a:f,e=e>c?e:c,o=o>y?o:y,r=r>f?r:f}t.ma=s-n,t.na=h-p,t.oa=a-l,t.ja=e+n,t.ka=o+p,t.la=r+l},Pd:function(t,i){for(var s=(s=this.zb[0]).x*t.x+s.y*t.y+s.z*t.z,h=0,a=1,e=this.Ne;a<e;){var o,r=a++;(o=(o=this.zb[r]).x*t.x+o.y*t.y+o.z*t.z)>s&&(s=o,h=r)}t=this.zb[h],i.x=t.x,i.y=t.y,i.z=t.z}}),Nt.ua=ai,Nt.prototype=ri(ai.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var t=this.ab*this.ab,i=this.Ib*this.Ib*4;this.yf=3.14159265358979*t*this.Ib*2,this.mg=.08333333333333333*(3*t+i),this.pg=this.og=this.ng=0,this.qg=.5*t,this.tg=this.sg=this.rg=0,this.ug=.08333333333333333*(3*t+i)},Nb:function(t,i){var s,h,a,e,o,r;s=0>(s=i.f)?-s:s,h=0>(h=i.m)?-h:h,a=0>(a=i.g)?-a:a,e=Math.sqrt(1-s*s),o=Math.sqrt(1-h*h),r=Math.sqrt(1-a*a),e*=this.ab,o*=this.ab,r*=this.ab,e+=s*=this.Ib,o+=h*=this.Ib,r+=a*=this.Ib,t.ma=i.v-e,t.na=i.A-o,t.oa=i.B-r,t.ja=i.v+e,t.ka=i.A+o,t.la=i.B+r},Pd:function(t,i){var s=t.x,h=t.z,a=s*s+h*h,e=this.ab-this.Rb;0>e&&(e=0),a=0<a?e/Math.sqrt(a):0,0>(e=this.Ib-this.Rb)&&(e=0),i.x=s*a,i.y=0<t.y?e:-e,i.z=h*a},Di:function(t,i,s,h,a,e,o){var r=this.Ib,n=0,p=1;if(-1e-6<(a-=i)&&1e-6>a){if(i<=-r||i>=r)return!1}else(l=(-r-i)*(c=1/a))>(r=(r-i)*c)&&(c=l,l=r,r=c),0<l&&(n=l),1>r&&(p=r);if(1<=n||0>=p)return!1;var l,c,y=(l=t*(h-=t)+s*(e-=s))*l-(r=h*h+e*e)*(c=t*t+s*s-this.ab*this.ab);if(0>y)return!1;if(0<r){if(c=(-l-(y=Math.sqrt(y)))/r,r=(-l+y)/r,1<=c||0>=r)return!1}else{if(0<=c)return!1;c=0,r=1}if(r<=n||p<=c)return!1;if(c<n){if(!n)return!1;o.normal.za(0,0<a?-1:1,0)}else{if(!(n=c))return!1;p=o.normal.za(t+h*n,0,s+e*n),0<(r=Math.sqrt(p.x*p.x+p.y*p.y+p.z*p.z))&&(r=1/r),l=p.y*r,c=p.z*r,p.x=p.x*r,p.y=l,p.z=c}return o.position.za(t+n*h,i+n*a,s+n*e),o.fraction=n,!0}}),Pt.ua=ai,Pt.prototype=ri(ai.prototype,{Xh:function(){return this.ab},Oe:function(){this.yf=4.188790204786386*this.ab*this.ab*this.ab,this.mg=.4*this.ab*this.ab,this.pg=this.og=this.ng=0,this.qg=.4*this.ab*this.ab,this.tg=this.sg=this.rg=0,this.ug=.4*this.ab*this.ab},Nb:function(t,i){var s,h,a;a=h=s=this.ab,t.ma=i.v-s,t.na=i.A-h,t.oa=i.B-a,t.ja=i.v+s,t.ka=i.A+h,t.la=i.B+a},Pd:function(t,i){i.Z()},Di:function(t,i,s,h,a,e,o){var r,n=t*(h-=t)+i*(a-=i)+s*(r=e-s),p=n*n-(e=h*h+a*a+r*r)*(t*t+i*i+s*s-this.ab*this.ab);return!(0>p)&&(!(0>(e=(-n-Math.sqrt(p))/e)||1<e)&&(0<(h=(t+=h*e)*t+(i+=a*e)*i+(s+=r*e)*s)&&(h=1/Math.sqrt(h)),(a=o.position).x=t,a.y=i,a.z=s,(a=o.normal).x=t*h,a.y=i*h,a.z=s*h,o.fraction=e,!0))}}),Ft.prototype={ua:function(t,i){return this.Jb[t][i]}},Lt.prototype={mm:function(){for(var t=0,i=0,s=this.numPoints;i<s;){var h=i++;this.points[h].depth>t&&(t=this.points[h].depth)}return t},clear:function(){for(var t=this.numPoints=0,i=this.points;t<i.length;){var s=i[t];++t,s.position1.Z(),s.position2.Z(),s.depth=0,s.id=0}this.normal.Z()}},Tt.prototype={yh:function(t,i,s,h){var a=t.normal;a.x=i,a.y=s,a.z=h,this.Sg&&(i=-(t=t.normal).y,s=-t.z,t.x=-t.x,t.y=i,t.z=s)},Cg:function(t,i,s,h,a,e,o,r,n){(t=t.points[t.numPoints++]).depth=r,t.id=n,this.Sg?((r=t.position1).x=a,r.y=e,r.z=o,(a=t.position2).x=i,a.y=s,a.z=h):((r=t.position1).x=i,r.y=s,r.z=h,(i=t.position2).x=a,i.y=e,i.z=o)},th:function(){},hm:function(t,i,s,h,a,e){for(var o=t.numPoints=0,r=t.points;o<r.length;){var n=r[o];++o,n.position1.Z(),n.position2.Z(),n.depth=0,n.id=0}t.normal.Z(),this.Sg?this.th(t,s,i,a,h,e):this.th(t,i,s,h,a,e)}},It.ua=Tt,It.prototype=ri(Tt.prototype,{th:function(t,i,s,h,a){var e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A,w,D,C,B,q,S,k,I,T,O,L,F,P,R,J,N,H,K,G,V,E,U,W,Y,X,$=i,Z=s;t.incremental=!1,e=h.v,o=h.A,r=h.B,c=(n=a.v)-e,y=(p=a.A)-o,f=(l=a.B)-r,u=h.o,b=h.i,v=h.l,g=h.f,x=h.m,d=h.g,z=h.h,m=h.j,j=h.s,M=a.o,A=a.i,w=a.l,D=a.f,C=a.m,B=a.g,q=a.h,S=a.j,k=a.s,I=u*(wh=$.Ke),T=b*wh,O=v*wh,L=g*(Bh=$.Le),F=x*Bh,P=d*Bh,R=z*(kh=$.Me),J=m*kh,N=j*kh;var Q,_,tt,it=1/0,st=-1,ht=0;tt=_=Q=0;var at=u*(H=M*(Dh=Z.Ke))+b*(K=A*Dh)+v*(G=w*Dh),et=u*(V=D*(qh=Z.Le))+b*(E=C*qh)+v*(U=B*qh),ot=u*(W=q*(Ih=Z.Me))+b*(Y=S*Ih)+v*(X=k*Ih);0>at&&(at=-at),0>et&&(et=-et),0>ot&&(ot=-ot);var rt=wh+(at+et+ot),nt=0>(ds=u*c+b*y+v*f),pt=nt?-ds:ds;if(pt<rt){var lt=rt-pt;lt<it&&(it=lt,st=0,Q=u,_=b,tt=v,ht=nt?-1:1);var ct=g*H+x*K+d*G,yt=g*V+x*E+d*U,ft=g*W+x*Y+d*X;0>ct&&(ct=-ct),0>yt&&(yt=-yt),0>ft&&(ft=-ft);var ut=Bh+(ct+yt+ft),bt=0>(ds=g*c+x*y+d*f),vt=bt?-ds:ds;if(vt<ut){var xt=ut-vt;xt<it&&(it=xt,st=1,Q=g,_=x,tt=d,ht=bt?-1:1);var dt=z*H+m*K+j*G,zt=z*V+m*E+j*U,mt=z*W+m*Y+j*X;0>dt&&(dt=-dt),0>zt&&(zt=-zt),0>mt&&(mt=-mt);var jt=kh+(dt+zt+mt),Mt=0>(ds=z*c+m*y+j*f),At=Mt?-ds:ds;if(At<jt){var wt=jt-At;wt<it&&(it=wt,st=2,Q=z,_=m,tt=j,ht=Mt?-1:1);it=it>gt.linearSlop?it-gt.linearSlop:0;var Dt=M*I+A*T+w*O,Ct=M*L+A*F+w*P,Bt=M*R+A*J+w*N;0>Dt&&(Dt=-Dt),0>Ct&&(Ct=-Ct),0>Bt&&(Bt=-Bt);var qt=Dt+Ct+Bt+Dh,St=0>(ds=M*c+A*y+w*f),kt=St?-ds:ds;if(kt<qt){var It=qt-kt;It<it&&(it=It,st=3,Q=M,_=A,tt=w,ht=St?-1:1);var Tt=D*I+C*T+B*O,Ot=D*L+C*F+B*P,Lt=D*R+C*J+B*N;0>Tt&&(Tt=-Tt),0>Ot&&(Ot=-Ot),0>Lt&&(Lt=-Lt);var Ft=Tt+Ot+Lt+qh,Pt=0>(ds=D*c+C*y+B*f),Rt=Pt?-ds:ds;if(Rt<Ft){var Jt=Ft-Rt;Jt<it&&(it=Jt,st=4,Q=D,_=C,tt=B,ht=Pt?-1:1);var Nt=q*I+S*T+k*O,Ht=q*L+S*F+k*P,Kt=q*R+S*J+k*N;0>Nt&&(Nt=-Nt),0>Ht&&(Ht=-Ht),0>Kt&&(Kt=-Kt);var Gt=Nt+Ht+Kt+Ih,Vt=0>(ds=q*c+S*y+k*f),Et=Vt?-ds:ds;if(Et<Gt){var Ut=Gt-Et;Ut<it&&(it=Ut,st=5,Q=q,_=S,tt=k,ht=Vt?-1:1);var Wt,Yt,Xt;it=it>gt.linearSlop?it-gt.linearSlop:0;if(Yt=v*M-u*w,Xt=u*A-b*M,(Wt=b*w-v*A)||Yt||Xt){var $t=Wt*Wt+Yt*Yt+Xt*Xt;0<$t&&($t=1/Math.sqrt($t));var Zt=(Wt*=$t)*L+(Yt*=$t)*F+(Xt*=$t)*P,Qt=Wt*R+Yt*J+Xt*N;0>Zt&&(Zt=-Zt),0>Qt&&(Qt=-Qt);var _t=Wt*V+Yt*E+Xt*U,ti=Wt*W+Yt*Y+Xt*X;0>_t&&(_t=-_t),0>ti&&(ti=-ti);var ii=Zt+Qt+(_t+ti),si=0>(ds=Wt*c+Yt*y+Xt*f),hi=si?-ds:ds;if(!(hi<ii))return;var ai=ii-hi;ai<it&&(it=ai,st=6,Q=Wt,_=Yt,tt=Xt,ht=si?-1:1)}if(Yt=v*D-u*B,Xt=u*C-b*D,(Wt=b*B-v*C)||Yt||Xt){var ei=Wt*Wt+Yt*Yt+Xt*Xt;0<ei&&(ei=1/Math.sqrt(ei));var oi=(Wt*=ei)*L+(Yt*=ei)*F+(Xt*=ei)*P,ri=Wt*R+Yt*J+Xt*N;0>oi&&(oi=-oi),0>ri&&(ri=-ri);var ni=Wt*H+Yt*K+Xt*G,pi=Wt*W+Yt*Y+Xt*X;0>ni&&(ni=-ni),0>pi&&(pi=-pi);var li=oi+ri+(ni+pi),ci=0>(ds=Wt*c+Yt*y+Xt*f),yi=ci?-ds:ds;if(!(yi<li))return;var fi=li-yi;fi<it&&(it=fi,st=7,Q=Wt,_=Yt,tt=Xt,ht=ci?-1:1)}if(Yt=v*q-u*k,Xt=u*S-b*q,(Wt=b*k-v*S)||Yt||Xt){var ui=Wt*Wt+Yt*Yt+Xt*Xt;0<ui&&(ui=1/Math.sqrt(ui));var bi=(Wt*=ui)*L+(Yt*=ui)*F+(Xt*=ui)*P,vi=Wt*R+Yt*J+Xt*N;0>bi&&(bi=-bi),0>vi&&(vi=-vi);var gi=Wt*H+Yt*K+Xt*G,xi=Wt*V+Yt*E+Xt*U;0>gi&&(gi=-gi),0>xi&&(xi=-xi);var di=bi+vi+(gi+xi),zi=0>(ds=Wt*c+Yt*y+Xt*f),mi=zi?-ds:ds;if(!(mi<di))return;var ji=di-mi;ji<it&&(it=ji,st=8,Q=Wt,_=Yt,tt=Xt,ht=zi?-1:1)}if(Yt=d*M-g*w,Xt=g*A-x*M,(Wt=x*w-d*A)||Yt||Xt){var Mi=Wt*Wt+Yt*Yt+Xt*Xt;0<Mi&&(Mi=1/Math.sqrt(Mi));var Ai=(Wt*=Mi)*I+(Yt*=Mi)*T+(Xt*=Mi)*O,wi=Wt*R+Yt*J+Xt*N;0>Ai&&(Ai=-Ai),0>wi&&(wi=-wi);var Di=Wt*V+Yt*E+Xt*U,Ci=Wt*W+Yt*Y+Xt*X;0>Di&&(Di=-Di),0>Ci&&(Ci=-Ci);var Bi=Ai+wi+(Di+Ci),qi=0>(ds=Wt*c+Yt*y+Xt*f),Si=qi?-ds:ds;if(!(Si<Bi))return;var ki=Bi-Si;ki<it&&(it=ki,st=9,Q=Wt,_=Yt,tt=Xt,ht=qi?-1:1)}if(Yt=d*D-g*B,Xt=g*C-x*D,(Wt=x*B-d*C)||Yt||Xt){var Ii=Wt*Wt+Yt*Yt+Xt*Xt;0<Ii&&(Ii=1/Math.sqrt(Ii));var Ti=(Wt*=Ii)*I+(Yt*=Ii)*T+(Xt*=Ii)*O,Oi=Wt*R+Yt*J+Xt*N;0>Ti&&(Ti=-Ti),0>Oi&&(Oi=-Oi);var Li=Wt*H+Yt*K+Xt*G,Fi=Wt*W+Yt*Y+Xt*X;0>Li&&(Li=-Li),0>Fi&&(Fi=-Fi);var Pi=Ti+Oi+(Li+Fi),Ri=0>(ds=Wt*c+Yt*y+Xt*f),Ji=Ri?-ds:ds;if(!(Ji<Pi))return;var Ni=Pi-Ji;Ni<it&&(it=Ni,st=10,Q=Wt,_=Yt,tt=Xt,ht=Ri?-1:1)}if(Yt=d*q-g*k,Xt=g*S-x*q,(Wt=x*k-d*S)||Yt||Xt){var Hi=Wt*Wt+Yt*Yt+Xt*Xt;0<Hi&&(Hi=1/Math.sqrt(Hi));var Ki=(Wt*=Hi)*I+(Yt*=Hi)*T+(Xt*=Hi)*O,Gi=Wt*R+Yt*J+Xt*N;0>Ki&&(Ki=-Ki),0>Gi&&(Gi=-Gi);var Vi=Wt*H+Yt*K+Xt*G,Ei=Wt*V+Yt*E+Xt*U;0>Vi&&(Vi=-Vi),0>Ei&&(Ei=-Ei);var Ui=Ki+Gi+(Vi+Ei),Wi=0>(ds=Wt*c+Yt*y+Xt*f),Yi=Wi?-ds:ds;if(!(Yi<Ui))return;var Xi=Ui-Yi;Xi<it&&(it=Xi,st=11,Q=Wt,_=Yt,tt=Xt,ht=Wi?-1:1)}if(Yt=j*M-z*w,Xt=z*A-m*M,(Wt=m*w-j*A)||Yt||Xt){var $i=Wt*Wt+Yt*Yt+Xt*Xt;0<$i&&($i=1/Math.sqrt($i));var Zi=(Wt*=$i)*I+(Yt*=$i)*T+(Xt*=$i)*O,Qi=Wt*L+Yt*F+Xt*P;0>Zi&&(Zi=-Zi),0>Qi&&(Qi=-Qi);var _i=Wt*V+Yt*E+Xt*U,ts=Wt*W+Yt*Y+Xt*X;0>_i&&(_i=-_i),0>ts&&(ts=-ts);var is=Zi+Qi+(_i+ts),ss=0>(ds=Wt*c+Yt*y+Xt*f),hs=ss?-ds:ds;if(!(hs<is))return;var as=is-hs;as<it&&(it=as,st=12,Q=Wt,_=Yt,tt=Xt,ht=ss?-1:1)}if(Yt=j*D-z*B,Xt=z*C-m*D,(Wt=m*B-j*C)||Yt||Xt){var es=Wt*Wt+Yt*Yt+Xt*Xt;0<es&&(es=1/Math.sqrt(es));var os=(Wt*=es)*I+(Yt*=es)*T+(Xt*=es)*O,rs=Wt*L+Yt*F+Xt*P;0>os&&(os=-os),0>rs&&(rs=-rs);var ns=Wt*H+Yt*K+Xt*G,ps=Wt*W+Yt*Y+Xt*X;0>ns&&(ns=-ns),0>ps&&(ps=-ps);var ls=os+rs+(ns+ps),cs=0>(ds=Wt*c+Yt*y+Xt*f),ys=cs?-ds:ds;if(!(ys<ls))return;var fs=ls-ys;fs<it&&(it=fs,st=13,Q=Wt,_=Yt,tt=Xt,ht=cs?-1:1)}if(Yt=j*q-z*k,Xt=z*S-m*q,(Wt=m*k-j*S)||Yt||Xt){var us=Wt*Wt+Yt*Yt+Xt*Xt;0<us&&(us=1/Math.sqrt(us));var bs=(Wt*=us)*I+(Yt*=us)*T+(Xt*=us)*O,vs=Wt*L+Yt*F+Xt*P;0>bs&&(bs=-bs),0>vs&&(vs=-vs);var gs=Wt*H+Yt*K+Xt*G,xs=Wt*V+Yt*E+Xt*U;0>gs&&(gs=-gs),0>xs&&(xs=-xs);var ds,zs=bs+vs+(gs+xs),ms=0>(ds=Wt*c+Yt*y+Xt*f),js=ms?-ds:ds;if(!(js<zs))return;var Ms=zs-js;Ms<it&&(it=Ms,st=14,Q=Wt,_=Yt,tt=Xt,ht=ms?-1:1)}if(6<=st){Q*=ht,_*=ht,tt*=ht;var As,ws,Ds,Cs,Bs,qs,Ss,ks,Is,Ts,Os,Ls,Fs,Ps,Rs,Js=(st-6)/3|0,Ns=st-6-3*Js;switch(Js){case 0:Ss=u,ks=b,Is=v;var Hs=0<R*Q+J*_+N*tt;0<L*Q+F*_+P*tt?Hs?(As=L+R,ws=F+J,Ds=P+N):(As=L-R,ws=F-J,Ds=P-N):Hs?(As=R-L,ws=J-F,Ds=N-P):(As=-(As=L+R),ws=-(ws=F+J),Ds=-(Ds=P+N));break;case 1:Ss=g,ks=x,Is=d;var Ks=0<R*Q+J*_+N*tt;0<I*Q+T*_+O*tt?Ks?(As=I+R,ws=T+J,Ds=O+N):(As=I-R,ws=T-J,Ds=O-N):Ks?(As=R-I,ws=J-T,Ds=N-O):(As=-(As=I+R),ws=-(ws=T+J),Ds=-(Ds=O+N));break;default:Ss=z,ks=m,Is=j;var Gs=0<L*Q+F*_+P*tt;0<I*Q+T*_+O*tt?Gs?(As=I+L,ws=T+F,Ds=O+P):(As=I-L,ws=T-F,Ds=O-P):Gs?(As=L-I,ws=F-T,Ds=P-O):(As=-(As=I+L),ws=-(ws=T+F),Ds=-(Ds=O+P))}switch(As=e+As,ws=o+ws,Ds=r+Ds,Ns){case 0:Ts=M,Os=A,Ls=w;var Vs=0<W*Q+Y*_+X*tt;0<V*Q+E*_+U*tt?Vs?(Cs=V+W,Bs=E+Y,qs=U+X):(Cs=V-W,Bs=E-Y,qs=U-X):Vs?(Cs=W-V,Bs=Y-E,qs=X-U):(Cs=-(Cs=V+W),Bs=-(Bs=E+Y),qs=-(qs=U+X));break;case 1:Ts=D,Os=C,Ls=B;var Es=0<W*Q+Y*_+X*tt;0<H*Q+K*_+G*tt?Es?(Cs=H+W,Bs=K+Y,qs=G+X):(Cs=H-W,Bs=K-Y,qs=G-X):Es?(Cs=W-H,Bs=Y-K,qs=X-G):(Cs=-(Cs=H+W),Bs=-(Bs=K+Y),qs=-(qs=G+X));break;default:Ts=q,Os=S,Ls=k;var Us=0<V*Q+E*_+U*tt;0<H*Q+K*_+G*tt?Us?(Cs=H+V,Bs=K+E,qs=G+U):(Cs=H-V,Bs=K-E,qs=G-U):Us?(Cs=V-H,Bs=E-K,qs=U-G):(Cs=-(Cs=H+V),Bs=-(Bs=K+E),qs=-(qs=G+U))}var Ws,Ys,Xs,$s,Zs,Qs,_s=Ss*Ts+ks*Os+Is*Ls,th=Ss*(Fs=As-(Cs=n-Cs))+ks*(Ps=ws-(Bs=p-Bs))+Is*(Rs=Ds-(qs=l-qs)),ih=Ts*Fs+Os*Ps+Ls*Rs,sh=1/(1-_s*_s),hh=(_s*ih-th)*sh,ah=(ih-_s*th)*sh;Ws=As+Ss*hh,Ys=ws+ks*hh,Xs=Ds+Is*hh,$s=Cs+Ts*ah,Zs=Bs+Os*ah,Qs=qs+Ls*ah,this.yh(t,-Q,-_,-tt),this.Cg(t,Ws,Ys,Xs,$s,Zs,Qs,it,4)}else{var eh,oh,rh,nh,ph,lh,ch,yh,fh,uh,bh,vh,gh,xh,dh,zh,mh,jh;if(3<=st){ht=-ht,c=-c,y=-y,f=-f;var Mh=$,Ah=($=Z,Z=Mh,wh),wh=Dh,Dh=Ah,Ch=Bh,Bh=qh,qh=Ch,Sh=kh,kh=Ih,Ih=Sh;eh=e,oh=o,rh=r,e=n,o=p,r=l,n=eh,p=oh,l=rh,eh=u,oh=b,rh=v,u=M,b=A,v=w,M=eh,A=oh,w=rh,eh=g,oh=x,rh=d,g=D,x=C,d=B,D=eh,C=oh,B=rh,eh=z,oh=m,rh=j,z=q,m=S,j=k,q=eh,S=oh,k=rh,eh=I,oh=T,rh=O,I=H,T=K,O=G,H=eh,K=oh,G=rh,eh=L,oh=F,rh=P,L=V,F=E,P=U,V=eh,E=oh,U=rh,eh=R,oh=J,rh=N,R=W,J=Y,N=X,W=eh,Y=oh,X=rh,st-=3,nh=!0}else nh=!1;switch(st){case 0:ph=I,lh=T,ch=O,yh=u,fh=b,uh=v,bh=g,vh=x,gh=d,xh=z,dh=m,zh=j,mh=Bh,jh=kh;break;case 1:ph=L,lh=F,ch=P,yh=g,fh=x,uh=d,bh=z,vh=m,gh=j,xh=u,dh=b,zh=v,mh=kh,jh=wh;break;default:ph=R,lh=J,ch=N,yh=z,fh=m,uh=j,bh=u,vh=b,gh=v,xh=g,dh=x,zh=d,mh=wh,jh=Bh}if(0>ht){ph=-ph,lh=-lh,ch=-ch,yh=-yh,fh=-fh,uh=-uh,eh=bh,oh=vh,rh=gh,bh=xh,vh=dh,gh=zh,xh=eh,dh=oh,zh=rh;var Th=mh;mh=jh,jh=Th}ph+=e,lh+=o,ch+=r;var Oh,Lh,Fh,Ph,Rh,Jh,Nh,Hh,Kh,Gh,Vh,Eh,Uh=1,Wh=0,Yh=yh*M+fh*A+uh*w;switch(Yh<Uh&&(Uh=Yh,Wh=0),-Yh<Uh&&(Uh=-Yh,Wh=1),(Yh=yh*D+fh*C+uh*B)<Uh&&(Uh=Yh,Wh=2),-Yh<Uh&&(Uh=-Yh,Wh=3),(Yh=yh*q+fh*S+uh*k)<Uh&&(Uh=Yh,Wh=4),-Yh<Uh&&(Uh=-Yh,Wh=5),Wh){case 0:Oh=H+V,Lh=K+E,Fh=G+U,Oh+=W,Lh+=Y,Fh+=X,Ph=H-V,Rh=K-E,Jh=G-U,Ph+=W,Rh+=Y,Jh+=X,Nh=H-V,Hh=K-E,Kh=G-U,Nh-=W,Hh-=Y,Kh-=X,Gh=H+V,Vh=K+E,Eh=G+U,Gh-=W,Vh-=Y,Eh-=X;break;case 1:Oh=V-H,Lh=E-K,Fh=U-G,Oh+=W,Lh+=Y,Fh+=X,Ph=V-H,Rh=E-K,Jh=U-G,Ph-=W,Rh-=Y,Jh-=X,Nh=-(Nh=H+V),Hh=-(Hh=K+E),Kh=-(Kh=G+U),Nh-=W,Hh-=Y,Kh-=X,Gh=-(Gh=H+V),Vh=-(Vh=K+E),Eh=-(Eh=G+U),Gh+=W,Vh+=Y,Eh+=X;break;case 2:Oh=H+V,Lh=K+E,Fh=G+U,Oh+=W,Lh+=Y,Fh+=X,Ph=H+V,Rh=K+E,Jh=G+U,Ph-=W,Rh-=Y,Jh-=X,Nh=V-H,Hh=E-K,Kh=U-G,Nh-=W,Hh-=Y,Kh-=X,Gh=V-H,Vh=E-K,Eh=U-G,Gh+=W,Vh+=Y,Eh+=X;break;case 3:Oh=H-V,Lh=K-E,Fh=G-U,Oh+=W,Lh+=Y,Fh+=X,Ph=-(Ph=H+V),Rh=-(Rh=K+E),Jh=-(Jh=G+U),Ph+=W,Rh+=Y,Jh+=X,Nh=-(Nh=H+V),Hh=-(Hh=K+E),Kh=-(Kh=G+U),Nh-=W,Hh-=Y,Kh-=X,Gh=H-V,Vh=K-E,Eh=G-U,Gh-=W,Vh-=Y,Eh-=X;break;case 4:Oh=H+V,Lh=K+E,Fh=G+U,Oh+=W,Lh+=Y,Fh+=X,Ph=V-H,Rh=E-K,Jh=U-G,Ph+=W,Rh+=Y,Jh+=X,Nh=-(Nh=H+V),Hh=-(Hh=K+E),Kh=-(Kh=G+U),Nh+=W,Hh+=Y,Kh+=X,Gh=H-V,Vh=K-E,Eh=G-U,Gh+=W,Vh+=Y,Eh+=X;break;default:Oh=H+V,Lh=K+E,Fh=G+U,Oh-=W,Lh-=Y,Fh-=X,Ph=H-V,Rh=K-E,Jh=G-U,Ph-=W,Rh-=Y,Jh-=X,Nh=-(Nh=H+V),Hh=-(Hh=K+E),Kh=-(Kh=G+U),Nh-=W,Hh-=Y,Kh-=X,Gh=V-H,Vh=E-K,Eh=U-G,Gh-=W,Vh-=Y,Eh-=X}Oh+=c,Lh+=y,Fh+=f,Ph+=c,Rh+=y,Jh+=f,Nh+=c,Hh+=y,Kh+=f,Gh+=c,Vh+=y,Eh+=f;var Xh=this.Dg;Xh.w=mh,Xh.Dj=jh,Xh.Tc=0,Xh.hc=0;var $h=this.Dg,Zh=$h.Bc[$h.Tc++];Zh.x=Oh*bh+Lh*vh+Fh*gh,Zh.y=Oh*xh+Lh*dh+Fh*zh,Zh.Oa=Oh,Zh.Pa=Lh,Zh.Qa=Fh;var Qh=this.Dg,_h=Qh.Bc[Qh.Tc++];_h.x=Ph*bh+Rh*vh+Jh*gh,_h.y=Ph*xh+Rh*dh+Jh*zh,_h.Oa=Ph,_h.Pa=Rh,_h.Qa=Jh;var ta=this.Dg,ia=ta.Bc[ta.Tc++];ia.x=Nh*bh+Hh*vh+Kh*gh,ia.y=Nh*xh+Hh*dh+Kh*zh,ia.Oa=Nh,ia.Pa=Hh,ia.Qa=Kh;var sa,ha,aa,ea=this.Dg,oa=ea.Bc[ea.Tc++];oa.x=Gh*bh+Vh*vh+Eh*gh,oa.y=Gh*xh+Vh*dh+Eh*zh,oa.Oa=Gh,oa.Pa=Vh,oa.Qa=Eh,this.Dg.clip(),this.Dg.reduce(),nh?(sa=yh,ha=fh,aa=uh):(sa=-yh,ha=-fh,aa=-uh),this.yh(t,sa,ha,aa);for(var ra=0,na=this.Dg.Tc;ra<na;){var pa,la,ca,ya=ra++,fa=this.Dg.Bc[ya];pa=fa.Oa,la=fa.Pa,ca=fa.Qa;var ua,ba,va,ga=(ph-(pa+=e))*yh+(lh-(la+=o))*fh+(ch-(ca+=r))*uh;ua=pa+yh*ga,ba=la+fh*ga,va=ca+uh*ga,ga>-gt.contactPersistenceThreshold&&(nh?this.Cg(t,pa,la,ca,ua,ba,va,ga,ya):this.Cg(t,ua,ba,va,pa,la,ca,ga,ya))}}}}}}}}}}),St.prototype={clip:function(){for(var t=0,i=this.Tc;t<i;){var s=t++,h=this.Bc[s],a=(s=this.Bc[(s+1)%this.Tc],this.w+h.x),e=this.w+s.x;if(0<a&&0<e)(s=this.ic[this.hc++]).x=h.x,s.y=h.y,s.Oa=h.Oa,s.Pa=h.Pa,s.Qa=h.Qa;else if(0<a&&0>=e){var o=this.ic[this.hc++];o.x=h.x,o.y=h.y,o.Oa=h.Oa,o.Pa=h.Pa,o.Qa=h.Qa,a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a}else 0>=a&&0<e&&(a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a)}for(t=this.Bc,this.Bc=this.ic,this.ic=t,this.Tc=this.hc,t=this.hc=0,i=this.Tc;t<i;)s=t++,h=this.Bc[s],s=this.Bc[(s+1)%this.Tc],a=this.w-h.x,e=this.w-s.x,0<a&&0<e?((s=this.ic[this.hc++]).x=h.x,s.y=h.y,s.Oa=h.Oa,s.Pa=h.Pa,s.Qa=h.Qa):0<a&&0>=e?((o=this.ic[this.hc++]).x=h.x,o.y=h.y,o.Oa=h.Oa,o.Pa=h.Pa,o.Qa=h.Qa,a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a):0>=a&&0<e&&(a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a);for(t=this.Bc,this.Bc=this.ic,this.ic=t,this.Tc=this.hc,t=this.hc=0,i=this.Tc;t<i;)s=t++,h=this.Bc[s],s=this.Bc[(s+1)%this.Tc],a=this.Dj+h.y,e=this.Dj+s.y,0<a&&0<e?((s=this.ic[this.hc++]).x=h.x,s.y=h.y,s.Oa=h.Oa,s.Pa=h.Pa,s.Qa=h.Qa):0<a&&0>=e?((o=this.ic[this.hc++]).x=h.x,o.y=h.y,o.Oa=h.Oa,o.Pa=h.Pa,o.Qa=h.Qa,a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a):0>=a&&0<e&&(a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a);for(t=this.Bc,this.Bc=this.ic,this.ic=t,this.Tc=this.hc,t=this.hc=0,i=this.Tc;t<i;)s=t++,h=this.Bc[s],s=this.Bc[(s+1)%this.Tc],a=this.Dj-h.y,e=this.Dj-s.y,0<a&&0<e?((s=this.ic[this.hc++]).x=h.x,s.y=h.y,s.Oa=h.Oa,s.Pa=h.Pa,s.Qa=h.Qa):0<a&&0>=e?((o=this.ic[this.hc++]).x=h.x,o.y=h.y,o.Oa=h.Oa,o.Pa=h.Pa,o.Qa=h.Qa,a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a):0>=a&&0<e&&(a/=a-e,(e=this.ic[this.hc++]).x=h.x+(s.x-h.x)*a,e.y=h.y+(s.y-h.y)*a,e.Oa=h.Oa+(s.Oa-h.Oa)*a,e.Pa=h.Pa+(s.Pa-h.Pa)*a,e.Qa=h.Qa+(s.Qa-h.Qa)*a);t=this.Bc,this.Bc=this.ic,this.ic=t,this.Tc=this.hc,this.hc=0},reduce:function(){if(!(4>this.Tc)){for(var t=-1/0,i=1/0,s=-1/0,h=1/0,a=null,e=null,o=null,r=null,n=0,p=this.Tc;n<p;){var l=n++,c=1*(l=this.Bc[l]).x+1*l.y,y=-1*l.x+1*l.y;c>t&&(t=c,a=l),c<i&&(i=c,e=l),y>s&&(s=y,o=l),y<h&&(h=y,r=l)}(t=this.ic[this.hc++]).x=a.x,t.y=a.y,t.Oa=a.Oa,t.Pa=a.Pa,t.Qa=a.Qa,(a=this.ic[this.hc++]).x=o.x,a.y=o.y,a.Oa=o.Oa,a.Pa=o.Pa,a.Qa=o.Qa,(o=this.ic[this.hc++]).x=e.x,o.y=e.y,o.Oa=e.Oa,o.Pa=e.Pa,o.Qa=e.Qa,(e=this.ic[this.hc++]).x=r.x,e.y=r.y,e.Oa=r.Oa,e.Pa=r.Pa,e.Qa=r.Qa,r=this.Bc,this.Bc=this.ic,this.ic=r,this.Tc=this.hc,this.hc=0}}},qt.prototype={Xe:function(){null!=this.oi&&this.oi.clear()}},Bt.ua=Tt,Bt.prototype=ri(Tt.prototype,{th:function(t,i,s,h,a){var e,o,r,n,p,l;t.incremental=!1,e=h.f,o=h.m,r=h.g,n=a.f,p=a.m,l=a.g;var c,y,f,u,b,v,g,x,d,z=i.Ib,m=s.Ib;i=i.ab,s=s.ab,c=h.v+e*-z,y=h.A+o*-z,f=h.B+r*-z,e=h.v+e*z,u=h.A+o*z,b=h.B+r*z,o=a.v+n*-m,r=a.A+p*-m,h=a.B+l*-m,n=a.v+n*m,p=a.A+p*m,v=a.B+l*m,a=b-f,b=p-r,p=-((g=c-o)*(e-=c)+(x=y-r)*(u-=y)+(d=f-h)*a),g=g*(l=n-o)+x*b+d*(n=v-h),d=e*l+u*b+a*n,v=m*m*4,(x=z*z*4)||v?x?v?((m=x*v-d*d)?z=0>(z=d*g+v*p)?0:z>m?1:z/m:z=0,0>(m=z*d+g)?(m=0,z=0>(z=p)?0:z>x?1:z/x):m>v?(m=1,z=0>(z=d+p)?0:z>x?1:z/x):m/=v):(m=0,z=0>(z=p)?0:z>x?1:z/x):(z=0,m=0>(m=g)?0:m>v?1:m/v):m=z=0,y+=u*z,(z=(u=(c+=e*z)-(o+=l*m))*u+(e=y-(r+=b*m))*e+(m=(f+=a*z)-(h+=n*m))*m)>=(i+s)*(i+s)||(0<(z=Math.sqrt(z))?(u*=1/z,e*=1/z,m*=1/z):(u=1,m=e=0),this.yh(t,u,e,m),this.Cg(t,c+u*-i,y+e*-i,f+m*-i,o+u*s,r+e*s,h+m*s,i+s-z,0))}}),Ct.ua=Tt,Ct.prototype=ri(Tt.prototype,{th:function(t,i,s,h,a,e){var o=vt.cb;if(h=o.zj(i,s,h,a,gt.enableGJKCaching?e:null,!0),t.incremental=!0,h!=bt.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+h);else if(!(o.distance>i.Rb+s.Rb)){var r,n,p,l,c,y;if(h=(e=o.closestPoint1).x,a=e.y,e=e.z,(l=h-(r=(p=o.closestPoint2).x))*l+(c=a-(n=p.y))*c+(y=e-(p=p.z))*y){0>o.distance&&(l=-l,c=-c,y=-y);var f=l*l+c*c+y*y;0<f&&(f=1/Math.sqrt(f)),l*=f,c*=f,y*=f,this.yh(t,l,c,y),h+=l*-i.Rb,a+=c*-i.Rb,e+=y*-i.Rb,r+=l*s.Rb,n+=c*s.Rb,p+=y*s.Rb,this.Cg(t,h,a,e,r,n,p,i.Rb+s.Rb-o.distance,0)}}}}),Dt.ua=Tt,Dt.prototype=ri(Tt.prototype,{th:function(t,i,s,h,a){var e,o,r,n,p,l,c,y,f,u;if(t.incremental=!1,r=-(e=s.Ke),n=-(o=s.Le),p=-(s=s.Me),i=i.ab,l=h.v-a.v,c=h.A-a.A,y=h.B-a.B,f=a.o*l+a.i*c+a.l*y,u=a.f*l+a.m*c+a.g*y,l=a.h*l+a.j*c+a.s*y,r<f&&e>f&&n<u&&o>u&&p<l&&s>l){var b,v,g,x=s-(0>l?-l:l);(c=e-(0>f?-f:f))<(b=o-(0>u?-u:u))?c<x?(r=0<f?1:-1,v=p=n=0,y=g=1):(0<l?(n=r=0,p=1):(n=r=0,p=-1),g=v=1,y=0,c=x):b<x?(0<u?(r=0,n=1):(r=0,n=-1),p=0,v=1,g=0,y=1,c=b):(0<l?(n=r=0,p=1):(n=r=0,p=-1),g=v=1,y=0,c=x),f=r*e+v*f,o=n*o+g*u,l=p*s+y*l,s=a.o*f+a.f*o+a.h*l,u=a.i*f+a.m*o+a.j*l,o=a.l*f+a.g*o+a.s*l,l=a.o*r+a.f*n+a.h*p,f=a.i*r+a.m*n+a.j*p,e=a.l*r+a.g*n+a.s*p,this.yh(t,l,f,e),this.Cg(t,h.v+l*-i,h.A+f*-i,h.B+e*-i,a.v+s,a.A+u,a.B+o,c,0)}else(s=(f-=e=(e=f<(e-=1e-9)?f:e)>(r+=1e-9)?e:r)*f+(r=u-(c=(c=u<(o-=1e-9)?u:o)>(n+=1e-9)?c:n))*r+(n=l-(y=(y=l<(s-=1e-9)?l:s)>(p+=1e-9)?y:p))*n)>=i*i||(s=Math.sqrt(s),u=a.o*e+a.f*c+a.h*y,o=a.i*e+a.m*c+a.j*y,l=a.l*e+a.g*c+a.s*y,0<(n=(p=a.o*f+a.f*r+a.h*n)*p+(e=a.i*f+a.m*r+a.j*n)*e+(f=a.l*f+a.g*r+a.s*n)*f)&&(n=1/Math.sqrt(n)),r=p*n,e*=n,f*=n,this.yh(t,r,e,f),this.Cg(t,h.v+r*-i,h.A+e*-i,h.B+f*-i,a.v+u,a.A+o,a.B+l,i-s,0))}}),wt.ua=Tt,wt.prototype=ri(Tt.prototype,{th:function(t,i,s,h,a){t.incremental=!1;var e,o,r,n,p,l,c,y,f,u=s.Ib;i=i.ab,s=s.ab,e=a.f,o=a.m,r=a.g,n=h.v,p=h.A,h=h.B,l=a.v+e*-u,c=a.A+o*-u,y=a.B+r*-u,e=a.v+e*u,o=a.A+o*u,f=a.B+r*u,r=o-c,u=u*u*4,y+=(o=f-y)*(e=0>(e=(n-l)*(a=e-l)+(p-c)*r+(h-y)*o)?0:e>u?1:e/u),(a=(o=n-(u=l+a*e))*o+(r=p-(c+=r*e))*r+(l=h-y)*l)>=(i+s)*(i+s)||(0<(a=Math.sqrt(a))?(o*=1/a,r*=1/a,l*=1/a):(o=1,l=r=0),this.yh(t,o,r,l),this.Cg(t,n+o*-i,p+r*-i,h+l*-i,u+o*s,c+r*s,y+l*s,i+s-a,0))}}),At.ua=Tt,At.prototype=ri(Tt.prototype,{th:function(t,i,s,h,a){var e,o,r;t.incremental=!1;var n=(e=h.v-a.v)*e+(o=h.A-a.A)*o+(r=h.B-a.B)*r;n>=((i=i.ab)+(s=s.ab))*(i+s)||(0<(n=Math.sqrt(n))?(e*=1/n,o*=1/n,r*=1/n):(e=1,r=o=0),this.yh(t,e,o,r),this.Cg(t,h.v+e*-i,h.A+o*-i,h.B+r*-i,a.v+e*s,a.A+o*s,a.B+r*s,i+s-n,0))}}),Mt.prototype={io:function(){for(var t=this.jd;null!=t;){for(var i=t.M,s=0;3>s;){var h=s++;if(t.zb[h].sj=null,t.zb[h].Hi=null,-1==t.We[h])return this.Fc=2,!1;if(null==t.Ge[h])return this.Fc=3,!1}t=i}return!0},km:function(t,i,s){if(i.bl!=t){i.bl=t;var h=i.fi;h.x=s.x,h.y=s.y,h.z=s.z;var a=i.zb[0].xd,e=h.y-a.y,o=h.z-a.z;if(h.x=h.x-a.x,h.y=e,h.z=o,h=i.fi,a=i.dk,i.rj=0<h.x*a.x+h.y*a.y+h.z*a.z,i.rj){for(h=0;3>h;)if(a=h++,null!=(e=i.Ge[a])){(o=e.fi).x=s.x,o.y=s.y,o.z=s.z;var r=e.zb[0].xd,n=o.y-r.y,p=o.z-r.z;o.x=o.x-r.x,o.y=n,o.z=p,o=e.fi,r=e.dk,e.rj=0<o.x*r.x+o.y*r.y+o.z*r.z,e.rj?this.km(t,e,s):((o=i.zb[a]).Hi=i.zb[i.Ai[a]],o.sj=e)}for(t=0;3>t;)s=t++,null!=(h=i.Ge[s])&&(a=i.We[s],h.Ge[a]=null,h.We[a]=-1,i.Ge[s]=null,i.We[s]=-1);this.lh--,t=i.ia,s=i.M,null!=t&&(t.M=s),null!=s&&(s.ia=t),i==this.jd&&(this.jd=this.jd.M),i==this.Rc&&(this.Rc=this.Rc.ia),i.M=null,i.ia=null,i.tk(),i.M=this.De,this.De=i}else this.Fc=6}},fh:function(t,i,s,h){this.Fc=0,this.Ne=4,this.zb[0]=t,this.zb[1]=i,this.zb[2]=s,this.zb[3]=h;var a=this.mi,e=t.xd;a.x=e.x,a.y=e.y,a.z=e.z;e=i.xd;var o=a.y+e.y,r=a.z+e.z;return a.x+=e.x,a.y=o,a.z=r,e=s.xd,o=a.y+e.y,r=a.z+e.z,a.x+=e.x,a.y=o,a.z=r,e=h.xd,o=a.y+e.y,r=a.z+e.z,a.x+=e.x,a.y=o,a.z=r,e=.25*a.y,o=.25*a.z,a.x=.25*a.x,a.y=e,a.z=o,null!=(a=this.De)?(this.De=a.M,a.M=null):a=new jt,null!=(e=this.De)?(this.De=e.M,e.M=null):e=new jt,null!=(o=this.De)?(this.De=o.M,o.M=null):o=new jt,null!=(r=this.De)?(this.De=r.M,r.M=null):r=new jt,a.za(t,i,s,this.mi,!0)||(this.Fc=1),e.za(t,i,h,this.mi,!0)||(this.Fc=1),o.za(t,s,h,this.mi,!0)||(this.Fc=1),r.za(i,s,h,this.mi,!0)||(this.Fc=1),a.Rg(e)||(this.Fc=1),a.Rg(o)||(this.Fc=1),a.Rg(r)||(this.Fc=1),e.Rg(o)||(this.Fc=1),e.Rg(r)||(this.Fc=1),o.Rg(r)||(this.Fc=1),this.lh++,null==this.jd?this.jd=a:(this.Rc.M=a,a.ia=this.Rc),this.Rc=a,this.lh++,null==this.jd?this.jd=e:(this.Rc.M=e,e.ia=this.Rc),this.Rc=e,this.lh++,null==this.jd?this.jd=o:(this.Rc.M=o,o.ia=this.Rc),this.Rc=o,this.lh++,null==this.jd?this.jd=r:(this.Rc.M=r,r.ia=this.Rc),this.Rc=r,!this.Fc},Vm:function(t,i){this.zb[this.Ne++]=t;var s=i.zb[0];if(this.km(this.Ne,i,t.xd),0!=this.Fc)return!1;i=s;for(var h=null,a=null;;){if(null==i.Hi)return this.Fc=4,!1;if(null==i.sj)return this.Fc=5,!1;var e=this.De;if(null!=e?(this.De=e.M,e.M=null):e=new jt,null==a&&(a=e),e.za(i,i.Hi,t,this.mi,!1)||(this.Fc=1),0!=this.Fc)return!1;if(this.lh++,null==this.jd?this.jd=e:(this.Rc.M=e,e.ia=this.Rc),this.Rc=e,e.Rg(i.sj)||(this.Fc=1),null==h||e.Rg(h)||(this.Fc=1),h=e,(i=i.Hi)==s)break}return h.Rg(a)||(this.Fc=1),0==this.Fc&&this.io()}},jt.prototype={za:function(t,i,s,h,a){null==a&&(a=!1);var e,o,r,n,p,l,c,y,f,u=t.xd;e=u.x,o=u.y,r=u.z;var b=i.xd;n=b.x,p=b.y,l=b.z;var v,g,x,d,z,m,j,M,A,w=s.xd;c=w.x,y=w.y,f=w.z;var D=!1;if(0>(e-h.x)*(j=(g=p-o)*(m=f-r)-(x=l-r)*(z=y-o))+(o-h.y)*(M=x*(d=c-e)-(v=n-e)*m)+(r-h.z)*(A=v*z-g*d))if(a){var C=i;i=s,s=C,j*=-1,M*=-1,A*=-1}else D=!0;this.zb[0]=t,this.zb[1]=i,this.zb[2]=s;var B=this.dk;B.x=j,B.y=M,B.z=A;var q,S,k,I,T,O,L,F,P,R,J,N,H,K,G,V,E,U,W,Y,X,$=t.xd,Z=i.xd,Q=s.xd,_=this.fi;q=$.x,S=$.y,k=$.z,I=Z.x,T=Z.y,O=Z.z,L=Q.x;var tt,it,st,ht=I*((K=(F=Q.y)-T)*(X=(R=I-q)*K-(J=T-S)*(H=L-I))-(G=(P=Q.z)-O)*(Y=(N=O-k)*H-R*G))+T*(G*(W=J*G-N*K)-H*X)+O*(H*Y-K*W),at=L*((E=S-F)*X-(U=k-P)*Y)+F*(U*W-(V=q-L)*X)+P*(V*Y-E*W),et=-1;if(st=it=tt=0,0>q*(J*X-N*Y)+S*(N*W-R*X)+k*(R*Y-J*W)){var ot,rt,nt,pt,lt,ct,yt,ft,ut,bt;if(ot=$.x,rt=$.y,nt=$.z,0>(bt=-(bt=(yt=(pt=Z.x)-ot)*ot+(ft=(lt=Z.y)-rt)*rt+(ut=(ct=Z.z)-nt)*nt)/(yt*yt+ft*ft+ut*ut)))_.x=ot,_.y=rt,_.z=nt;else if(1<bt)_.x=pt,_.y=lt,_.z=ct;else{var vt,gt,xt;vt=ot+yt*bt,gt=rt+ft*bt,xt=nt+ut*bt,_.x=vt,_.y=gt,_.z=xt}et=_.x*_.x+_.y*_.y+_.z*_.z,tt=_.x,it=_.y,st=_.z}if(0>ht){var dt,zt,mt,jt,Mt,At,wt,Dt,Ct,Bt;if(dt=Z.x,zt=Z.y,mt=Z.z,0>(Bt=-(Bt=(wt=(jt=Q.x)-dt)*dt+(Dt=(Mt=Q.y)-zt)*zt+(Ct=(At=Q.z)-mt)*mt)/(wt*wt+Dt*Dt+Ct*Ct)))_.x=dt,_.y=zt,_.z=mt;else if(1<Bt)_.x=jt,_.y=Mt,_.z=At;else{var qt,St,kt;qt=dt+wt*Bt,St=zt+Dt*Bt,kt=mt+Ct*Bt,_.x=qt,_.y=St,_.z=kt}var It=_.x*_.x+_.y*_.y+_.z*_.z;(0>et||It<et)&&(et=It,tt=_.x,it=_.y,st=_.z)}if(0>at){var Tt,Ot,Lt,Ft,Pt,Rt,Jt,Nt,Ht,Kt;if(Tt=$.x,Ot=$.y,Lt=$.z,0>(Kt=-(Kt=(Jt=(Ft=Q.x)-Tt)*Tt+(Nt=(Pt=Q.y)-Ot)*Ot+(Ht=(Rt=Q.z)-Lt)*Lt)/(Jt*Jt+Nt*Nt+Ht*Ht)))_.x=Tt,_.y=Ot,_.z=Lt;else if(1<Kt)_.x=Ft,_.y=Pt,_.z=Rt;else{var Gt,Vt,Et;Gt=Tt+Jt*Kt,Vt=Ot+Nt*Kt,Et=Lt+Ht*Kt,_.x=Gt,_.y=Vt,_.z=Et}var Ut=_.x*_.x+_.y*_.y+_.z*_.z;(0>et||Ut<et)&&(et=Ut,tt=_.x,it=_.y,st=_.z)}if(0<et)_.x=tt,_.y=it,_.z=st;else{var Wt,Yt=W*W+Y*Y+X*X;0<Yt&&(Yt=1/Math.sqrt(Yt)),tt=(W*=Yt)*(Wt=(q*W+S*(Y*=Yt)+k*(X*=Yt))/(Wt=W*W+Y*Y+X*X)),it=Y*Wt,st=X*Wt,_.x=tt,_.y=it,_.z=st}var Xt=this.fi;return this.Wj=Xt.x*Xt.x+Xt.y*Xt.y+Xt.z*Xt.z,this.Ge[0]=null,this.Ge[1]=null,this.Ge[2]=null,this.We[0]=-1,this.We[1]=-1,this.We[2]=-1,!D},Rg:function(t){for(var i=0,s=0;3>s;)for(var h=s++,a=0;3>a;){var e=a++,o=this.Ai[h];this.zb[h]==t.zb[this.Ai[e]]&&this.zb[o]==t.zb[e]&&(this.Ge[h]=t,this.We[h]=e,t.Ge[e]=this,t.We[e]=h,++i)}return 1==i},tk:function(){this.ia=this.M=null,this.bl=0,this.rj=!1,this.Wj=0,this.zb[0]=null,this.zb[1]=null,this.zb[2]=null,this.Ge[0]=null,this.Ge[1]=null,this.Ge[2]=null,this.We[0]=0,this.We[1]=0,this.We[2]=0}},mt.prototype={za:function(t,i,s){var h=this.xd;return h.x=t.x,h.y=t.y,h.z=t.z,(t=this.jb).x=i.x,t.y=i.y,t.z=i.z,(i=this.qb).x=s.x,i.y=s.y,i.z=s.z,this.sj=this.Hi=this.M=null,this},tk:function(){this.sj=this.Hi=this.M=null}},zt.prototype={clear:function(){this.Il.Z()}},dt.prototype={za:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},Z:function(){return this.z=this.y=this.x=0,this},Lc:function(t){return new dt(this.x+t.x,this.y+t.y,this.z+t.z)},ua:function(t,i){return new dt(this.x+t.x*i,this.y+t.y*i,this.z+t.z*i)},ue:function(t){return new dt(this.x-t.x,this.y-t.y,this.z-t.z)},se:function(t){return new dt(this.x*t,this.y*t,this.z*t)},Ve:function(t,i,s){return new dt(this.x*t,this.y*i,this.z*s)},Yd:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Hb:function(t){return new dt(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},fd:function(t){var i=this.y+t.y,s=this.z+t.z;return this.x+=t.x,this.y=i,this.z=s,this},cb:function(t,i){var s=this.y+t.y*i,h=this.z+t.z*i;return this.x+=t.x*i,this.y=s,this.z=h,this},Ue:function(t){var i=this.y-t.y,s=this.z-t.z;return this.x=this.x-t.x,this.y=i,this.z=s,this},te:function(t){var i=this.y*t,s=this.z*t;return this.x=this.x*t,this.y=i,this.z=s,this},Mf:function(t,i,s){return i=this.y*i,s=this.z*s,this.x=this.x*t,this.y=i,this.z=s,this},Mb:function(t){var i=this.z*t.x-this.x*t.z,s=this.x*t.y-this.y*t.x;return this.x=this.y*t.z-this.z*t.y,this.y=i,this.z=s,this},pc:function(t){return new dt(this.x*t.e00+this.y*t.e01+this.z*t.e02,this.x*t.e10+this.y*t.e11+this.z*t.e12,this.x*t.e20+this.y*t.e21+this.z*t.e22)},uc:function(t){return new dt(this.x*t.e00+this.y*t.e01+this.z*t.e02+t.e03,this.x*t.e10+this.y*t.e11+this.z*t.e12+t.e13,this.x*t.e20+this.y*t.e21+this.z*t.e22+t.e23)},Ac:function(t){var i,s,h,a,e;return i=this.x,s=this.y,h=this.z,a=t.o*i+t.f*s+t.h*h,e=t.i*i+t.m*s+t.j*h,h=t.l*i+t.g*s+t.s*h,i=a+t.v,s=e+t.A,h+=t.B,(t=new dt).x=i,t.y=s,t.z=h,t},qc:function(t){var i=this.x*t.e10+this.y*t.e11+this.z*t.e12,s=this.x*t.e20+this.y*t.e21+this.z*t.e22;return this.x=this.x*t.e00+this.y*t.e01+this.z*t.e02,this.y=i,this.z=s,this},vc:function(t){var i=this.x*t.e10+this.y*t.e11+this.z*t.e12+t.e13,s=this.x*t.e20+this.y*t.e21+this.z*t.e22+t.e23;return this.x=this.x*t.e00+this.y*t.e01+this.z*t.e02+t.e03,this.y=i,this.z=s,this},Ec:function(t){var i,s,h,a,e;return i=this.x,s=this.y,h=this.z,a=t.o*i+t.f*s+t.h*h,e=t.i*i+t.m*s+t.j*h,h=t.l*i+t.g*s+t.s*h,i=a+t.v,s=e+t.A,h+=t.B,this.x=i,this.y=s,this.z=h,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pe:function(){return this.x*this.x+this.y*this.y+this.z*this.z},re:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return 0<t&&(t=1/t),new dt(this.x*t,this.y*t,this.z*t)},qe:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<t&&(t=1/t);var i=this.y*t,s=this.z*t;return this.x=this.x*t,this.y=i,this.z=s,this},Jc:function(){return new dt(-this.x,-this.y,-this.z)},Kc:function(){var t=-this.y,i=-this.z;return this.x=-this.x,this.y=t,this.z=i,this},de:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},clone:function(){return new dt(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1e7*this.x+.5|0)/1e7:(1e7*this.x-.5|0)/1e7)+", "+(0<this.y?(1e7*this.y+.5|0)/1e7:(1e7*this.y-.5|0)/1e7)+", "+(0<this.z?(1e7*this.z+.5|0)/1e7:(1e7*this.z-.5|0)/1e7)+"]"}},xt.prototype={Wf:function(){return this.B=this.A=this.v=0,this.o=1,this.i=this.h=this.f=0,this.m=1,this.g=this.l=this.j=0,this.s=1,this},Hb:function(){var t=new dt;return t.x=this.v,t.y=this.A,t.z=this.B,t},Mb:function(t){t.x=this.v,t.y=this.A,t.z=this.B},Ec:function(t){return this.v=t.x,this.A=t.y,this.B=t.z,this},Lc:function(t){var i,s;i=t.x,s=t.y,t=t.z,this.v+=i,this.A+=s,this.B+=t},pc:function(){var t=new ft;return t.e00=this.o,t.e01=this.f,t.e02=this.h,t.e10=this.i,t.e11=this.m,t.e12=this.j,t.e20=this.l,t.e21=this.g,t.e22=this.s,t},qc:function(t){t.e00=this.o,t.e01=this.f,t.e02=this.h,t.e10=this.i,t.e11=this.m,t.e12=this.j,t.e20=this.l,t.e21=this.g,t.e22=this.s},Jc:function(t){return this.o=t.e00,this.f=t.e01,this.h=t.e02,this.i=t.e10,this.m=t.e11,this.j=t.e12,this.l=t.e20,this.g=t.e21,this.s=t.e22,this},Kc:function(t){var i,s,h;i=t.x,s=t.y,h=t.z,t=Math.sin(i);var a=Math.sin(s),e=Math.sin(h);i=Math.cos(i),s=Math.cos(s),h=Math.cos(h),this.o=s*h,this.f=-s*e,this.h=a,this.i=i*e+h*t*a,this.m=i*h-t*a*e,this.j=-s*t,this.l=t*e-i*h*a,this.g=h*t+i*a*e,this.s=i*s},uc:function(t){var i,s,h,a,e,o,r,n,p,l;i=t.e00,s=t.e01,h=t.e02,a=t.e10,e=t.e11,o=t.e12,r=t.e20,n=t.e21,p=t.e22,t=i*this.o+s*this.i+h*this.l,l=i*this.f+s*this.m+h*this.g,i=i*this.h+s*this.j+h*this.s,s=a*this.o+e*this.i+o*this.l,h=a*this.f+e*this.m+o*this.g,a=a*this.h+e*this.j+o*this.s,e=r*this.o+n*this.i+p*this.l,o=r*this.f+n*this.m+p*this.g,r=r*this.h+n*this.j+p*this.s,this.o=t,this.f=l,this.h=i,this.i=s,this.m=h,this.j=a,this.l=e,this.g=o,this.s=r},vc:function(t){var i,s,h,a,e,o,r;i=t.x,s=t.y,t=t.z,o=Math.sin(i);var n=Math.sin(s),p=Math.sin(t),l=Math.cos(i);r=Math.cos(s);var c=Math.cos(t);h=r*c,a=-r*p,t=l*p+c*o*n,i=l*c-o*n*p,e=-r*o,s=o*p-l*c*n,o=c*o+l*n*p,r*=l,p=h*this.o+a*this.i+n*this.l,l=h*this.f+a*this.m+n*this.g,n=h*this.h+a*this.j+n*this.s,h=t*this.o+i*this.i+e*this.l,a=t*this.f+i*this.m+e*this.g,t=t*this.h+i*this.j+e*this.s,i=s*this.o+o*this.i+r*this.l,e=s*this.f+o*this.m+r*this.g,s=s*this.h+o*this.j+r*this.s,this.o=p,this.f=l,this.h=n,this.i=h,this.m=a,this.j=t,this.l=i,this.g=e,this.s=s},ua:function(){var t,i,s,h,a,e=new pt;return 0<(h=(t=this.o)+(i=this.m)+(s=this.s))?(h=.5*(a=Math.sqrt(h+1)),a=.5/a,t=(this.g-this.j)*a,i=(this.h-this.l)*a,s=(this.i-this.f)*a):t>i?t>s?(t=.5*(a=Math.sqrt(t-i-s+1)),a=.5/a,i=(this.f+this.i)*a,s=(this.h+this.l)*a,h=(this.g-this.j)*a):(s=.5*(a=Math.sqrt(s-t-i+1)),a=.5/a,t=(this.h+this.l)*a,i=(this.j+this.g)*a,h=(this.i-this.f)*a):i>s?(i=.5*(a=Math.sqrt(i-s-t+1)),a=.5/a,t=(this.f+this.i)*a,s=(this.j+this.g)*a,h=(this.h-this.l)*a):(s=.5*(a=Math.sqrt(s-t-i+1)),a=.5/a,t=(this.h+this.l)*a,i=(this.j+this.g)*a,h=(this.i-this.f)*a),e.x=t,e.y=i,e.z=s,e.w=h,e},cb:function(t){var i,s,h,a,e;0<(a=(i=this.o)+(s=this.m)+(h=this.s))?(a=.5*(e=Math.sqrt(a+1)),e=.5/e,i=(this.g-this.j)*e,s=(this.h-this.l)*e,h=(this.i-this.f)*e):i>s?i>h?(i=.5*(e=Math.sqrt(i-s-h+1)),e=.5/e,s=(this.f+this.i)*e,h=(this.h+this.l)*e,a=(this.g-this.j)*e):(h=.5*(e=Math.sqrt(h-i-s+1)),e=.5/e,i=(this.h+this.l)*e,s=(this.j+this.g)*e,a=(this.i-this.f)*e):s>h?(s=.5*(e=Math.sqrt(s-h-i+1)),e=.5/e,i=(this.f+this.i)*e,h=(this.j+this.g)*e,a=(this.h-this.l)*e):(h=.5*(e=Math.sqrt(h-i-s+1)),e=.5/e,i=(this.h+this.l)*e,s=(this.j+this.g)*e,a=(this.i-this.f)*e),t.x=i,t.y=s,t.z=h,t.w=a},Ac:function(t){var i,s,h;i=t.x,s=t.y,h=t.z;var a=t.w,e=2*i,o=2*s,r=2*h;t=i*e;var n=s*o;h*=r;var p=i*o;return s*=r,i*=r,e*=a,o*=a,a*=r,this.o=1-n-h,this.f=p-a,this.h=i+o,this.i=p+a,this.m=1-t-h,this.j=s-e,this.l=i-o,this.g=s+e,this.s=1-t-n,this},clone:function(){var t=new xt;return t.v=this.v,t.A=this.A,t.B=this.B,t.o=this.o,t.f=this.f,t.h=this.h,t.i=this.i,t.m=this.m,t.j=this.j,t.l=this.l,t.g=this.g,t.s=this.s,t},de:function(t){return this.v=t.v,this.A=t.A,this.B=t.B,this.o=t.o,this.f=t.f,this.h=t.h,this.i=t.i,this.m=t.m,this.j=t.j,this.l=t.l,this.g=t.g,this.s=t.s,this}},vt.pc=function(){return vt.cb},vt.prototype={zj:function(t,i,s,h,a,e){this.wj=t,this.jl=i,this.tc=s,this.Ic=h;var o,r,n,p=this.Na,l=this.jb,c=this.qb,y=this.closest,f=this.dir;(null!=a?(null==a.oi&&(a.oi=new zt),this.Pn(a.oi)):f.Z(),f.x*f.x+f.y*f.y+f.z*f.z)||(o=h.v-s.v,r=h.A-s.A,n=h.B-s.B,f.x=o,f.y=r,f.z=n,1e-6>f.x*f.x+f.y*f.y+f.z*f.z&&f.za(1,0,0));this.ya=0,this.zf(!1),this.Af(!1);var u=this.Na[this.ya],b=this.jb[this.ya];u.x=b.x,u.y=b.y,u.z=b.z;var v=this.qb[this.ya],g=u.y-v.y,x=u.z-v.z;u.x=u.x-v.x,u.y=g,u.z=x,this.ya=1;for(var d=0;40>d;){var z=0;switch(this.ya){case 1:var m=p[0];y.x=m.x,y.y=m.y,y.z=m.z,z=1;break;case 2:var j,M,A,w,D,C,B=p[0];j=B.x,M=B.y,A=B.z;var q,S,k,I,T=p[1];if(0>(I=-(I=(q=(w=T.x)-j)*j+(S=(D=T.y)-M)*M+(k=(C=T.z)-A)*A)/(q*q+S*S+k*k))){var O=y;O.x=j,O.y=M,O.z=A,z=1}else if(1<I){var L=y;L.x=w,L.y=D,L.z=C,z=2}else{var F,P,R;F=j+q*I,P=M+S*I,R=A+k*I;var J=y;J.x=F,J.y=P,J.z=R,z=3}break;case 3:var N,H,K,G,V,E,U,W,Y,X,$,Z,Q,_,tt,it,st,ht,at=p[0],et=p[1],ot=p[2],rt=at;N=rt.x,H=rt.y,K=rt.z;var nt=et;G=nt.x,V=nt.y,E=nt.z;var pt,lt,ct,yt=ot;U=yt.x;var ft,ut,bt,vt=G*((_=(W=yt.y)-V)*(ct=(X=G-N)*_-($=V-H)*(Q=U-G))-(tt=(Y=yt.z)-E)*(lt=(Z=E-K)*Q-X*tt))+V*(tt*(pt=$*tt-Z*_)-Q*ct)+E*(Q*lt-_*pt),gt=U*((st=H-W)*ct-(ht=K-Y)*lt)+W*(ht*pt-(it=N-U)*ct)+Y*(it*lt-st*pt),xt=-1,dt=0;if(bt=ut=ft=0,0>N*($*ct-Z*lt)+H*(Z*pt-X*ct)+K*(X*lt-$*pt)){var mt,jt,Mt,At,wt,Dt,Ct=at;mt=Ct.x,jt=Ct.y,Mt=Ct.z;var Bt,qt,St,kt,It,Tt=et;if(0>(kt=-(kt=(Bt=(At=Tt.x)-mt)*mt+(qt=(wt=Tt.y)-jt)*jt+(St=(Dt=Tt.z)-Mt)*Mt)/(Bt*Bt+qt*qt+St*St))){var Ot=y;Ot.x=mt,Ot.y=jt,Ot.z=Mt,It=1}else if(1<kt){var Lt=y;Lt.x=At,Lt.y=wt,Lt.z=Dt,It=2}else{var Ft,Pt,Rt;Ft=mt+Bt*kt,Pt=jt+qt*kt,Rt=Mt+St*kt;var Jt=y;Jt.x=Ft,Jt.y=Pt,Jt.z=Rt,It=3}dt=It,xt=y.x*y.x+y.y*y.y+y.z*y.z;var Nt=y;ft=Nt.x,ut=Nt.y,bt=Nt.z}if(0>vt){var Ht,Kt,Gt,Vt,Et,Ut,Wt=et;Ht=Wt.x,Kt=Wt.y,Gt=Wt.z;var Yt,Xt,$t,Zt,Qt,_t=ot;if(0>(Zt=-(Zt=(Yt=(Vt=_t.x)-Ht)*Ht+(Xt=(Et=_t.y)-Kt)*Kt+($t=(Ut=_t.z)-Gt)*Gt)/(Yt*Yt+Xt*Xt+$t*$t))){var ti=y;ti.x=Ht,ti.y=Kt,ti.z=Gt,Qt=1}else if(1<Zt){var ii=y;ii.x=Vt,ii.y=Et,ii.z=Ut,Qt=2}else{var si,hi,ai;si=Ht+Yt*Zt,hi=Kt+Xt*Zt,ai=Gt+$t*Zt;var ei=y;ei.x=si,ei.y=hi,ei.z=ai,Qt=3}var oi=y.x*y.x+y.y*y.y+y.z*y.z;if(0>xt||oi<xt){dt=Qt<<1,xt=oi;var ri=y;ft=ri.x,ut=ri.y,bt=ri.z}}if(0>gt){var ni,pi,li,ci,yi,fi,ui=at;ni=ui.x,pi=ui.y,li=ui.z;var bi,vi,gi,xi,di,zi=ot;if(0>(xi=-(xi=(bi=(ci=zi.x)-ni)*ni+(vi=(yi=zi.y)-pi)*pi+(gi=(fi=zi.z)-li)*li)/(bi*bi+vi*vi+gi*gi))){var mi=y;mi.x=ni,mi.y=pi,mi.z=li,di=1}else if(1<xi){var ji=y;ji.x=ci,ji.y=yi,ji.z=fi,di=2}else{var Mi,Ai,wi;Mi=ni+bi*xi,Ai=pi+vi*xi,wi=li+gi*xi;var Di=y;Di.x=Mi,Di.y=Ai,Di.z=wi,di=3}var Ci=y.x*y.x+y.y*y.y+y.z*y.z;if(0>xt||Ci<xt){dt=1&di|(2&di)<<1,xt=Ci;var Bi=y;ft=Bi.x,ut=Bi.y,bt=Bi.z}}if(0<xt){var qi=y;qi.x=ft,qi.y=ut,qi.z=bt,z=dt}else{var Si,ki=pt*pt+lt*lt+ct*ct;0<ki&&(ki=1/Math.sqrt(ki)),ft=(pt*=ki)*(Si=(N*pt+H*(lt*=ki)+K*(ct*=ki))/(Si=pt*pt+lt*lt+ct*ct)),ut=lt*Si,bt=ct*Si;var Ii=y;Ii.x=ft,Ii.y=ut,Ii.z=bt,z=7}break;case 4:var Ti,Oi,Li,Fi,Pi,Ri,Ji,Ni,Hi,Ki,Gi,Vi,Ei,Ui,Wi,Yi,Xi,$i,Zi,Qi,_i,ts,is,ss,hs,as,es,os=p[0],rs=p[1],ns=p[2],ps=p[3],ls=os;Ti=ls.x,Oi=ls.y,Li=ls.z;var cs=rs;Fi=cs.x,Pi=cs.y,Ri=cs.z;var ys=ns;Ji=ys.x,Ni=ys.y,Hi=ys.z;var fs,us,bs,vs=ps;Ki=vs.x;var gs,xs,ds,zs=0<(Ei=Fi-Ti)*(fs=(as=(Gi=vs.y)-Pi)*(ss=Hi-Ri)-(es=(Vi=vs.z)-Ri)*(is=Ni-Pi))+(Ui=Pi-Oi)*(us=es*(ts=Ji-Fi)-(hs=Ki-Fi)*ss)+(Wi=Ri-Li)*(bs=hs*is-as*ts)?1:-1,ms=Ti*((Xi=Ni-Oi)*(_i=Vi-Li)-($i=Hi-Li)*(Qi=Gi-Oi))+Oi*($i*(Zi=Ki-Ti)-(Yi=Ji-Ti)*_i)+Li*(Yi*Qi-Xi*Zi),js=Ti*(Qi*Wi-_i*Ui)+Oi*(_i*Ei-Zi*Wi)+Li*(Zi*Ui-Qi*Ei),Ms=Fi*fs+Pi*us+Ri*bs,As=-1,ws=0;if(ds=xs=gs=0,0>(Ti*(Ui*$i-Wi*Xi)+Oi*(Wi*Yi-Ei*$i)+Li*(Ei*Xi-Ui*Yi))*zs){var Ds,Cs,Bs,qs,Ss,ks,Is,Ts,Os,Ls,Fs,Ps,Rs,Js,Ns,Hs,Ks,Gs,Vs=os;Ds=Vs.x,Cs=Vs.y,Bs=Vs.z;var Es=rs;qs=Es.x,Ss=Es.y,ks=Es.z;var Us,Ws,Ys,Xs=ns;Is=Xs.x;var $s,Zs,Qs,_s,th=qs*((Js=(Ts=Xs.y)-Ss)*(Ys=(Ls=qs-Ds)*Js-(Fs=Ss-Cs)*(Rs=Is-qs))-(Ns=(Os=Xs.z)-ks)*(Ws=(Ps=ks-Bs)*Rs-Ls*Ns))+Ss*(Ns*(Us=Fs*Ns-Ps*Js)-Rs*Ys)+ks*(Rs*Ws-Js*Us),ih=Is*((Ks=Cs-Ts)*Ys-(Gs=Bs-Os)*Ws)+Ts*(Gs*Us-(Hs=Ds-Is)*Ys)+Os*(Hs*Ws-Ks*Us),sh=-1,hh=0;if(Qs=Zs=$s=0,0>Ds*(Fs*Ys-Ps*Ws)+Cs*(Ps*Us-Ls*Ys)+Bs*(Ls*Ws-Fs*Us)){var ah,eh,oh,rh,nh,ph,lh=os;ah=lh.x,eh=lh.y,oh=lh.z;var ch,yh,fh,uh,bh,vh=rs;if(0>(uh=-(uh=(ch=(rh=vh.x)-ah)*ah+(yh=(nh=vh.y)-eh)*eh+(fh=(ph=vh.z)-oh)*oh)/(ch*ch+yh*yh+fh*fh))){var gh=y;gh.x=ah,gh.y=eh,gh.z=oh,bh=1}else if(1<uh){var xh=y;xh.x=rh,xh.y=nh,xh.z=ph,bh=2}else{var dh,zh,mh;dh=ah+ch*uh,zh=eh+yh*uh,mh=oh+fh*uh;var jh=y;jh.x=dh,jh.y=zh,jh.z=mh,bh=3}hh=bh,sh=y.x*y.x+y.y*y.y+y.z*y.z;var Mh=y;$s=Mh.x,Zs=Mh.y,Qs=Mh.z}if(0>th){var Ah,wh,Dh,Ch,Bh,qh,Sh=rs;Ah=Sh.x,wh=Sh.y,Dh=Sh.z;var kh,Ih,Th,Oh,Lh,Fh=ns;if(0>(Oh=-(Oh=(kh=(Ch=Fh.x)-Ah)*Ah+(Ih=(Bh=Fh.y)-wh)*wh+(Th=(qh=Fh.z)-Dh)*Dh)/(kh*kh+Ih*Ih+Th*Th))){var Ph=y;Ph.x=Ah,Ph.y=wh,Ph.z=Dh,Lh=1}else if(1<Oh){var Rh=y;Rh.x=Ch,Rh.y=Bh,Rh.z=qh,Lh=2}else{var Jh,Nh,Hh;Jh=Ah+kh*Oh,Nh=wh+Ih*Oh,Hh=Dh+Th*Oh;var Kh=y;Kh.x=Jh,Kh.y=Nh,Kh.z=Hh,Lh=3}var Gh=y.x*y.x+y.y*y.y+y.z*y.z;if(0>sh||Gh<sh){hh=Lh<<1,sh=Gh;var Vh=y;$s=Vh.x,Zs=Vh.y,Qs=Vh.z}}if(0>ih){var Eh,Uh,Wh,Yh,Xh,$h,Zh=os;Eh=Zh.x,Uh=Zh.y,Wh=Zh.z;var Qh,_h,ta,ia,sa,ha=ns;if(0>(ia=-(ia=(Qh=(Yh=ha.x)-Eh)*Eh+(_h=(Xh=ha.y)-Uh)*Uh+(ta=($h=ha.z)-Wh)*Wh)/(Qh*Qh+_h*_h+ta*ta))){var aa=y;aa.x=Eh,aa.y=Uh,aa.z=Wh,sa=1}else if(1<ia){var ea=y;ea.x=Yh,ea.y=Xh,ea.z=$h,sa=2}else{var oa,ra,na;oa=Eh+Qh*ia,ra=Uh+_h*ia,na=Wh+ta*ia;var pa=y;pa.x=oa,pa.y=ra,pa.z=na,sa=3}var la=y.x*y.x+y.y*y.y+y.z*y.z;if(0>sh||la<sh){hh=1&sa|(2&sa)<<1,sh=la;var ca=y;$s=ca.x,Zs=ca.y,Qs=ca.z}}if(0<sh){var ya=y;ya.x=$s,ya.y=Zs,ya.z=Qs,_s=hh}else{var fa,ua=Us*Us+Ws*Ws+Ys*Ys;0<ua&&(ua=1/Math.sqrt(ua)),$s=(Us*=ua)*(fa=(Ds*Us+Cs*(Ws*=ua)+Bs*(Ys*=ua))/(fa=Us*Us+Ws*Ws+Ys*Ys)),Zs=Ws*fa,Qs=Ys*fa;var ba=y;ba.x=$s,ba.y=Zs,ba.z=Qs,_s=7}ws=_s,As=y.x*y.x+y.y*y.y+y.z*y.z;var va=y;gs=va.x,xs=va.y,ds=va.z}if(0>ms*zs){var ga,xa,da,za,ma,ja,Ma,Aa,wa,Da,Ca,Ba,qa,Sa,ka,Ia,Ta,Oa,La=os;ga=La.x,xa=La.y,da=La.z;var Fa=ns;za=Fa.x,ma=Fa.y,ja=Fa.z;var Pa,Ra,Ja,Na=ps;Ma=Na.x;var Ha,Ka,Ga,Va,Ea=za*((Sa=(Aa=Na.y)-ma)*(Ja=(Da=za-ga)*Sa-(Ca=ma-xa)*(qa=Ma-za))-(ka=(wa=Na.z)-ja)*(Ra=(Ba=ja-da)*qa-Da*ka))+ma*(ka*(Pa=Ca*ka-Ba*Sa)-qa*Ja)+ja*(qa*Ra-Sa*Pa),Ua=Ma*((Ta=xa-Aa)*Ja-(Oa=da-wa)*Ra)+Aa*(Oa*Pa-(Ia=ga-Ma)*Ja)+wa*(Ia*Ra-Ta*Pa),Wa=-1,Ya=0;if(Ga=Ka=Ha=0,0>ga*(Ca*Ja-Ba*Ra)+xa*(Ba*Pa-Da*Ja)+da*(Da*Ra-Ca*Pa)){var Xa,$a,Za,Qa,_a,te,ie=os;Xa=ie.x,$a=ie.y,Za=ie.z;var se,he,ae,ee,oe,re=ns;if(0>(ee=-(ee=(se=(Qa=re.x)-Xa)*Xa+(he=(_a=re.y)-$a)*$a+(ae=(te=re.z)-Za)*Za)/(se*se+he*he+ae*ae))){var ne=y;ne.x=Xa,ne.y=$a,ne.z=Za,oe=1}else if(1<ee){var pe=y;pe.x=Qa,pe.y=_a,pe.z=te,oe=2}else{var le,ce,ye;le=Xa+se*ee,ce=$a+he*ee,ye=Za+ae*ee;var fe=y;fe.x=le,fe.y=ce,fe.z=ye,oe=3}Ya=oe,Wa=y.x*y.x+y.y*y.y+y.z*y.z;var ue=y;Ha=ue.x,Ka=ue.y,Ga=ue.z}if(0>Ea){var be,ve,ge,xe,de,ze,me=ns;be=me.x,ve=me.y,ge=me.z;var je,Me,Ae,we,De,Ce=ps;if(0>(we=-(we=(je=(xe=Ce.x)-be)*be+(Me=(de=Ce.y)-ve)*ve+(Ae=(ze=Ce.z)-ge)*ge)/(je*je+Me*Me+Ae*Ae))){var Be=y;Be.x=be,Be.y=ve,Be.z=ge,De=1}else if(1<we){var qe=y;qe.x=xe,qe.y=de,qe.z=ze,De=2}else{var Se,ke,Ie;Se=be+je*we,ke=ve+Me*we,Ie=ge+Ae*we;var Te=y;Te.x=Se,Te.y=ke,Te.z=Ie,De=3}var Oe=y.x*y.x+y.y*y.y+y.z*y.z;if(0>Wa||Oe<Wa){Ya=De<<1,Wa=Oe;var Le=y;Ha=Le.x,Ka=Le.y,Ga=Le.z}}if(0>Ua){var Fe,Pe,Re,Je,Ne,He,Ke=os;Fe=Ke.x,Pe=Ke.y,Re=Ke.z;var Ge,Ve,Ee,Ue,We,Ye=ps;if(0>(Ue=-(Ue=(Ge=(Je=Ye.x)-Fe)*Fe+(Ve=(Ne=Ye.y)-Pe)*Pe+(Ee=(He=Ye.z)-Re)*Re)/(Ge*Ge+Ve*Ve+Ee*Ee))){var Xe=y;Xe.x=Fe,Xe.y=Pe,Xe.z=Re,We=1}else if(1<Ue){var $e=y;$e.x=Je,$e.y=Ne,$e.z=He,We=2}else{var Ze,Qe,_e;Ze=Fe+Ge*Ue,Qe=Pe+Ve*Ue,_e=Re+Ee*Ue;var to=y;to.x=Ze,to.y=Qe,to.z=_e,We=3}var io=y.x*y.x+y.y*y.y+y.z*y.z;if(0>Wa||io<Wa){Ya=1&We|(2&We)<<1,Wa=io;var so=y;Ha=so.x,Ka=so.y,Ga=so.z}}if(0<Wa){var ho=y;ho.x=Ha,ho.y=Ka,ho.z=Ga,Va=Ya}else{var ao,eo=Pa*Pa+Ra*Ra+Ja*Ja;0<eo&&(eo=1/Math.sqrt(eo)),Ha=(Pa*=eo)*(ao=(ga*Pa+xa*(Ra*=eo)+da*(Ja*=eo))/(ao=Pa*Pa+Ra*Ra+Ja*Ja)),Ka=Ra*ao,Ga=Ja*ao;var oo=y;oo.x=Ha,oo.y=Ka,oo.z=Ga,Va=7}var ro=y.x*y.x+y.y*y.y+y.z*y.z;if(0>As||ro<As){ws=1&Va|(6&Va)<<1,As=ro;var no=y;gs=no.x,xs=no.y,ds=no.z}}if(0>js*zs){var po,lo,co,yo,fo,uo,bo,vo,go,xo,zo,mo,jo,Mo,Ao,wo,Do,Co,Bo=os;po=Bo.x,lo=Bo.y,co=Bo.z;var qo=rs;yo=qo.x,fo=qo.y,uo=qo.z;var So,ko,Io,To=ps;bo=To.x;var Oo,Lo,Fo,Po,Ro=yo*((Mo=(vo=To.y)-fo)*(Io=(xo=yo-po)*Mo-(zo=fo-lo)*(jo=bo-yo))-(Ao=(go=To.z)-uo)*(ko=(mo=uo-co)*jo-xo*Ao))+fo*(Ao*(So=zo*Ao-mo*Mo)-jo*Io)+uo*(jo*ko-Mo*So),Jo=bo*((Do=lo-vo)*Io-(Co=co-go)*ko)+vo*(Co*So-(wo=po-bo)*Io)+go*(wo*ko-Do*So),No=-1,Ho=0;if(Fo=Lo=Oo=0,0>po*(zo*Io-mo*ko)+lo*(mo*So-xo*Io)+co*(xo*ko-zo*So)){var Ko,Go,Vo,Eo,Uo,Wo,Yo=os;Ko=Yo.x,Go=Yo.y,Vo=Yo.z;var Xo,$o,Zo,Qo,_o,tr=rs;if(0>(Qo=-(Qo=(Xo=(Eo=tr.x)-Ko)*Ko+($o=(Uo=tr.y)-Go)*Go+(Zo=(Wo=tr.z)-Vo)*Vo)/(Xo*Xo+$o*$o+Zo*Zo))){var ir=y;ir.x=Ko,ir.y=Go,ir.z=Vo,_o=1}else if(1<Qo){var sr=y;sr.x=Eo,sr.y=Uo,sr.z=Wo,_o=2}else{var hr,ar,er;hr=Ko+Xo*Qo,ar=Go+$o*Qo,er=Vo+Zo*Qo;var or=y;or.x=hr,or.y=ar,or.z=er,_o=3}Ho=_o,No=y.x*y.x+y.y*y.y+y.z*y.z;var rr=y;Oo=rr.x,Lo=rr.y,Fo=rr.z}if(0>Ro){var nr,pr,lr,cr,yr,fr,ur=rs;nr=ur.x,pr=ur.y,lr=ur.z;var br,vr,gr,xr,dr,zr=ps;if(0>(xr=-(xr=(br=(cr=zr.x)-nr)*nr+(vr=(yr=zr.y)-pr)*pr+(gr=(fr=zr.z)-lr)*lr)/(br*br+vr*vr+gr*gr))){var mr=y;mr.x=nr,mr.y=pr,mr.z=lr,dr=1}else if(1<xr){var jr=y;jr.x=cr,jr.y=yr,jr.z=fr,dr=2}else{var Mr,Ar,wr;Mr=nr+br*xr,Ar=pr+vr*xr,wr=lr+gr*xr;var Dr=y;Dr.x=Mr,Dr.y=Ar,Dr.z=wr,dr=3}var Cr=y.x*y.x+y.y*y.y+y.z*y.z;if(0>No||Cr<No){Ho=dr<<1,No=Cr;var Br=y;Oo=Br.x,Lo=Br.y,Fo=Br.z}}if(0>Jo){var qr,Sr,kr,Ir,Tr,Or,Lr=os;qr=Lr.x,Sr=Lr.y,kr=Lr.z;var Fr,Pr,Rr,Jr,Nr,Hr=ps;if(0>(Jr=-(Jr=(Fr=(Ir=Hr.x)-qr)*qr+(Pr=(Tr=Hr.y)-Sr)*Sr+(Rr=(Or=Hr.z)-kr)*kr)/(Fr*Fr+Pr*Pr+Rr*Rr))){var Kr=y;Kr.x=qr,Kr.y=Sr,Kr.z=kr,Nr=1}else if(1<Jr){var Gr=y;Gr.x=Ir,Gr.y=Tr,Gr.z=Or,Nr=2}else{var Vr,Er,Ur;Vr=qr+Fr*Jr,Er=Sr+Pr*Jr,Ur=kr+Rr*Jr;var Wr=y;Wr.x=Vr,Wr.y=Er,Wr.z=Ur,Nr=3}var Yr=y.x*y.x+y.y*y.y+y.z*y.z;if(0>No||Yr<No){Ho=1&Nr|(2&Nr)<<1,No=Yr;var Xr=y;Oo=Xr.x,Lo=Xr.y,Fo=Xr.z}}if(0<No){var $r=y;$r.x=Oo,$r.y=Lo,$r.z=Fo,Po=Ho}else{var Zr,Qr=So*So+ko*ko+Io*Io;0<Qr&&(Qr=1/Math.sqrt(Qr)),Oo=(So*=Qr)*(Zr=(po*So+lo*(ko*=Qr)+co*(Io*=Qr))/(Zr=So*So+ko*ko+Io*Io)),Lo=ko*Zr,Fo=Io*Zr;var _r=y;_r.x=Oo,_r.y=Lo,_r.z=Fo,Po=7}var tn=y.x*y.x+y.y*y.y+y.z*y.z;if(0>As||tn<As){ws=3&Po|(4&Po)<<1,As=tn;var sn=y;gs=sn.x,xs=sn.y,ds=sn.z}}if(0>Ms*zs){var hn,an,en,on,rn,nn,pn,ln,cn,yn,fn,un,bn,vn,gn,xn,dn,zn,mn=rs;hn=mn.x,an=mn.y,en=mn.z;var jn=ns;on=jn.x,rn=jn.y,nn=jn.z;var Mn,An,wn,Dn=ps;pn=Dn.x;var Cn,Bn,qn,Sn,kn=on*((vn=(ln=Dn.y)-rn)*(wn=(yn=on-hn)*vn-(fn=rn-an)*(bn=pn-on))-(gn=(cn=Dn.z)-nn)*(An=(un=nn-en)*bn-yn*gn))+rn*(gn*(Mn=fn*gn-un*vn)-bn*wn)+nn*(bn*An-vn*Mn),In=pn*((dn=an-ln)*wn-(zn=en-cn)*An)+ln*(zn*Mn-(xn=hn-pn)*wn)+cn*(xn*An-dn*Mn),Tn=-1,On=0;if(qn=Bn=Cn=0,0>hn*(fn*wn-un*An)+an*(un*Mn-yn*wn)+en*(yn*An-fn*Mn)){var Ln,Fn,Pn,Rn,Jn,Nn,Hn=rs;Ln=Hn.x,Fn=Hn.y,Pn=Hn.z;var Kn,Gn,Vn,En,Un,Wn=ns;if(0>(En=-(En=(Kn=(Rn=Wn.x)-Ln)*Ln+(Gn=(Jn=Wn.y)-Fn)*Fn+(Vn=(Nn=Wn.z)-Pn)*Pn)/(Kn*Kn+Gn*Gn+Vn*Vn))){var Yn=y;Yn.x=Ln,Yn.y=Fn,Yn.z=Pn,Un=1}else if(1<En){var Xn=y;Xn.x=Rn,Xn.y=Jn,Xn.z=Nn,Un=2}else{var $n,Zn,Qn;$n=Ln+Kn*En,Zn=Fn+Gn*En,Qn=Pn+Vn*En;var _n=y;_n.x=$n,_n.y=Zn,_n.z=Qn,Un=3}On=Un,Tn=y.x*y.x+y.y*y.y+y.z*y.z;var tp=y;Cn=tp.x,Bn=tp.y,qn=tp.z}if(0>kn){var ip,sp,hp,ap,ep,op,rp=ns;ip=rp.x,sp=rp.y,hp=rp.z;var np,pp,lp,cp,yp,fp=ps;if(0>(cp=-(cp=(np=(ap=fp.x)-ip)*ip+(pp=(ep=fp.y)-sp)*sp+(lp=(op=fp.z)-hp)*hp)/(np*np+pp*pp+lp*lp))){var up=y;up.x=ip,up.y=sp,up.z=hp,yp=1}else if(1<cp){var bp=y;bp.x=ap,bp.y=ep,bp.z=op,yp=2}else{var vp,gp,xp;vp=ip+np*cp,gp=sp+pp*cp,xp=hp+lp*cp;var dp=y;dp.x=vp,dp.y=gp,dp.z=xp,yp=3}var zp=y.x*y.x+y.y*y.y+y.z*y.z;if(0>Tn||zp<Tn){On=yp<<1,Tn=zp;var mp=y;Cn=mp.x,Bn=mp.y,qn=mp.z}}if(0>In){var jp,Mp,Ap,wp,Dp,Cp,Bp=rs;jp=Bp.x,Mp=Bp.y,Ap=Bp.z;var qp,Sp,kp,Ip,Tp,Op=ps;if(0>(Ip=-(Ip=(qp=(wp=Op.x)-jp)*jp+(Sp=(Dp=Op.y)-Mp)*Mp+(kp=(Cp=Op.z)-Ap)*Ap)/(qp*qp+Sp*Sp+kp*kp))){var Lp=y;Lp.x=jp,Lp.y=Mp,Lp.z=Ap,Tp=1}else if(1<Ip){var Fp=y;Fp.x=wp,Fp.y=Dp,Fp.z=Cp,Tp=2}else{var Pp,Rp,Jp;Pp=jp+qp*Ip,Rp=Mp+Sp*Ip,Jp=Ap+kp*Ip;var Np=y;Np.x=Pp,Np.y=Rp,Np.z=Jp,Tp=3}var Hp=y.x*y.x+y.y*y.y+y.z*y.z;if(0>Tn||Hp<Tn){On=1&Tp|(2&Tp)<<1,Tn=Hp;var Kp=y;Cn=Kp.x,Bn=Kp.y,qn=Kp.z}}if(0<Tn){var Gp=y;Gp.x=Cn,Gp.y=Bn,Gp.z=qn,Sn=On}else{var Vp,Ep=Mn*Mn+An*An+wn*wn;0<Ep&&(Ep=1/Math.sqrt(Ep)),Cn=(Mn*=Ep)*(Vp=(hn*Mn+an*(An*=Ep)+en*(wn*=Ep))/(Vp=Mn*Mn+An*An+wn*wn)),Bn=An*Vp,qn=wn*Vp;var Up=y;Up.x=Cn,Up.y=Bn,Up.z=qn,Sn=7}var Wp=y.x*y.x+y.y*y.y+y.z*y.z;if(0>As||Wp<As){ws=Sn<<1,As=Wp;var Yp=y;gs=Yp.x,xs=Yp.y,ds=Yp.z}}if(0<As){var Xp=y;Xp.x=gs,Xp.y=xs,Xp.z=ds,z=ws}else y.Z(),z=15}if(1e-8>y.x*y.x+y.y*y.y+y.z*y.z){if(!e)return this.distance=0;switch(this.ya){case 1:this.Rn();break;case 2:this.El();break;case 3:this.Ll()}if(4==this.ya){var $p=this.mn(t,i,s,h,p,l,c);return 0!=$p?(this.distance=0,$p):(this.distance=-this.depth,0)}return this.distance=0,1}this.Hm(z),f.x=y.x,f.y=y.y,f.z=y.z;var Zp=f,Qp=-Zp.y,_p=-Zp.z;Zp.x=-Zp.x,Zp.y=Qp,Zp.z=_p,this.zf(!1),this.Af(!1);var tl=this.Na[this.ya],il=this.jb[this.ya];tl.x=il.x,tl.y=il.y,tl.z=il.z;var sl=tl,hl=this.qb[this.ya],al=sl.y-hl.y,el=sl.z-hl.z;if(sl.x=sl.x-hl.x,sl.y=al,sl.z=el,1e-8>f.x*f.x+f.y*f.y+f.z*f.z)throw Error("!?");var ol=p[this.ya];if(1e-8>ol.x*f.x+ol.y*f.y+ol.z*f.z-(y.x*f.x+y.y*f.y+y.z*f.z))return this.sm(),this.distance=Math.sqrt(y.x*y.x+y.y*y.y+y.z*y.z),null!=a&&null!=a.oi&&this.Yn(a.oi),0;this.ya++,++d}return 2},fm:function(t,i,s,h,a,e,o){this.wj=t,this.jl=i,this.tc=s,this.Ic=h;var r,n,p,l=this.Na,c=this.closest,y=this.dir;if(r=h.v-s.v,n=h.A-s.A,p=h.B-s.B,y.x=r,y.y=n,y.z=p,1e-6>y.x*y.x+y.y*y.y+y.z*y.z&&y.za(1,0,0),this.ya=0,null!=this.wj)this.zf(!0);else{var f=this.jb[this.ya];f.x=this.tc.v,f.y=this.tc.A,f.z=this.tc.B}this.Af(!0);var u=this.Na[this.ya],b=this.jb[this.ya];u.x=b.x,u.y=b.y,u.z=b.z;var v=this.qb[this.ya],g=u.y-v.y,x=u.z-v.z;u.x=u.x-v.x,u.y=g,u.z=x,this.ya=1;var d=0,z=0,m=this.Vn,j=this.Un;m.Z(),j.x=e.x,j.y=e.y,j.z=e.z;var M=j.y-a.y,A=j.z-a.z;for(j.x=j.x-a.x,j.y=M,j.z=A;40>d;){var w=0;switch(this.ya){case 1:var D=l[0];c.x=D.x,c.y=D.y,c.z=D.z,w=1;break;case 2:var C,B,q,S,k,I,T=l[0];C=T.x,B=T.y,q=T.z;var O,L,F,P,R=l[1];if(0>(P=-(P=(O=(S=R.x)-C)*C+(L=(k=R.y)-B)*B+(F=(I=R.z)-q)*q)/(O*O+L*L+F*F))){var J=c;J.x=C,J.y=B,J.z=q,w=1}else if(1<P){var N=c;N.x=S,N.y=k,N.z=I,w=2}else{var H,K,G;H=C+O*P,K=B+L*P,G=q+F*P;var V=c;V.x=H,V.y=K,V.z=G,w=3}break;case 3:var E,U,W,Y,X,$,Z,Q,_,tt,it,st,ht,at,et,ot,rt,nt,pt=l[0],lt=l[1],ct=l[2],yt=pt;E=yt.x,U=yt.y,W=yt.z;var ft=lt;Y=ft.x,X=ft.y,$=ft.z;var ut,bt,vt,gt=ct;Z=gt.x;var xt,dt,zt,mt=Y*((at=(Q=gt.y)-X)*(vt=(tt=Y-E)*at-(it=X-U)*(ht=Z-Y))-(et=(_=gt.z)-$)*(bt=(st=$-W)*ht-tt*et))+X*(et*(ut=it*et-st*at)-ht*vt)+$*(ht*bt-at*ut),jt=Z*((rt=U-Q)*vt-(nt=W-_)*bt)+Q*(nt*ut-(ot=E-Z)*vt)+_*(ot*bt-rt*ut),Mt=-1,At=0;if(zt=dt=xt=0,0>E*(it*vt-st*bt)+U*(st*ut-tt*vt)+W*(tt*bt-it*ut)){var wt,Dt,Ct,Bt,qt,St,kt=pt;wt=kt.x,Dt=kt.y,Ct=kt.z;var It,Tt,Ot,Lt,Ft,Pt=lt;if(0>(Lt=-(Lt=(It=(Bt=Pt.x)-wt)*wt+(Tt=(qt=Pt.y)-Dt)*Dt+(Ot=(St=Pt.z)-Ct)*Ct)/(It*It+Tt*Tt+Ot*Ot))){var Rt=c;Rt.x=wt,Rt.y=Dt,Rt.z=Ct,Ft=1}else if(1<Lt){var Jt=c;Jt.x=Bt,Jt.y=qt,Jt.z=St,Ft=2}else{var Nt,Ht,Kt;Nt=wt+It*Lt,Ht=Dt+Tt*Lt,Kt=Ct+Ot*Lt;var Gt=c;Gt.x=Nt,Gt.y=Ht,Gt.z=Kt,Ft=3}At=Ft,Mt=c.x*c.x+c.y*c.y+c.z*c.z;var Vt=c;xt=Vt.x,dt=Vt.y,zt=Vt.z}if(0>mt){var Et,Ut,Wt,Yt,Xt,$t,Zt=lt;Et=Zt.x,Ut=Zt.y,Wt=Zt.z;var Qt,_t,ti,ii,si,hi=ct;if(0>(ii=-(ii=(Qt=(Yt=hi.x)-Et)*Et+(_t=(Xt=hi.y)-Ut)*Ut+(ti=($t=hi.z)-Wt)*Wt)/(Qt*Qt+_t*_t+ti*ti))){var ai=c;ai.x=Et,ai.y=Ut,ai.z=Wt,si=1}else if(1<ii){var ei=c;ei.x=Yt,ei.y=Xt,ei.z=$t,si=2}else{var oi,ri,ni;oi=Et+Qt*ii,ri=Ut+_t*ii,ni=Wt+ti*ii;var pi=c;pi.x=oi,pi.y=ri,pi.z=ni,si=3}var li=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Mt||li<Mt){At=si<<1,Mt=li;var ci=c;xt=ci.x,dt=ci.y,zt=ci.z}}if(0>jt){var yi,fi,ui,bi,vi,gi,xi=pt;yi=xi.x,fi=xi.y,ui=xi.z;var di,zi,mi,ji,Mi,Ai=ct;if(0>(ji=-(ji=(di=(bi=Ai.x)-yi)*yi+(zi=(vi=Ai.y)-fi)*fi+(mi=(gi=Ai.z)-ui)*ui)/(di*di+zi*zi+mi*mi))){var wi=c;wi.x=yi,wi.y=fi,wi.z=ui,Mi=1}else if(1<ji){var Di=c;Di.x=bi,Di.y=vi,Di.z=gi,Mi=2}else{var Ci,Bi,qi;Ci=yi+di*ji,Bi=fi+zi*ji,qi=ui+mi*ji;var Si=c;Si.x=Ci,Si.y=Bi,Si.z=qi,Mi=3}var ki=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Mt||ki<Mt){At=1&Mi|(2&Mi)<<1,Mt=ki;var Ii=c;xt=Ii.x,dt=Ii.y,zt=Ii.z}}if(0<Mt){var Ti=c;Ti.x=xt,Ti.y=dt,Ti.z=zt,w=At}else{var Oi,Li=ut*ut+bt*bt+vt*vt;0<Li&&(Li=1/Math.sqrt(Li)),xt=(ut*=Li)*(Oi=(E*ut+U*(bt*=Li)+W*(vt*=Li))/(Oi=ut*ut+bt*bt+vt*vt)),dt=bt*Oi,zt=vt*Oi;var Fi=c;Fi.x=xt,Fi.y=dt,Fi.z=zt,w=7}break;case 4:var Pi,Ri,Ji,Ni,Hi,Ki,Gi,Vi,Ei,Ui,Wi,Yi,Xi,$i,Zi,Qi,_i,ts,is,ss,hs,as,es,os,rs,ns,ps,ls=l[0],cs=l[1],ys=l[2],fs=l[3],us=ls;Pi=us.x,Ri=us.y,Ji=us.z;var bs=cs;Ni=bs.x,Hi=bs.y,Ki=bs.z;var vs=ys;Gi=vs.x,Vi=vs.y,Ei=vs.z;var gs,xs,ds,zs=fs;Ui=zs.x;var ms,js,Ms,As=0<(Xi=Ni-Pi)*(gs=(ns=(Wi=zs.y)-Hi)*(os=Ei-Ki)-(ps=(Yi=zs.z)-Ki)*(es=Vi-Hi))+($i=Hi-Ri)*(xs=ps*(as=Gi-Ni)-(rs=Ui-Ni)*os)+(Zi=Ki-Ji)*(ds=rs*es-ns*as)?1:-1,ws=Pi*((_i=Vi-Ri)*(hs=Yi-Ji)-(ts=Ei-Ji)*(ss=Wi-Ri))+Ri*(ts*(is=Ui-Pi)-(Qi=Gi-Pi)*hs)+Ji*(Qi*ss-_i*is),Ds=Pi*(ss*Zi-hs*$i)+Ri*(hs*Xi-is*Zi)+Ji*(is*$i-ss*Xi),Cs=Ni*gs+Hi*xs+Ki*ds,Bs=-1,qs=0;if(Ms=js=ms=0,0>(Pi*($i*ts-Zi*_i)+Ri*(Zi*Qi-Xi*ts)+Ji*(Xi*_i-$i*Qi))*As){var Ss,ks,Is,Ts,Os,Ls,Fs,Ps,Rs,Js,Ns,Hs,Ks,Gs,Vs,Es,Us,Ws,Ys=ls;Ss=Ys.x,ks=Ys.y,Is=Ys.z;var Xs=cs;Ts=Xs.x,Os=Xs.y,Ls=Xs.z;var $s,Zs,Qs,_s=ys;Fs=_s.x;var th,ih,sh,hh,ah=Ts*((Gs=(Ps=_s.y)-Os)*(Qs=(Js=Ts-Ss)*Gs-(Ns=Os-ks)*(Ks=Fs-Ts))-(Vs=(Rs=_s.z)-Ls)*(Zs=(Hs=Ls-Is)*Ks-Js*Vs))+Os*(Vs*($s=Ns*Vs-Hs*Gs)-Ks*Qs)+Ls*(Ks*Zs-Gs*$s),eh=Fs*((Us=ks-Ps)*Qs-(Ws=Is-Rs)*Zs)+Ps*(Ws*$s-(Es=Ss-Fs)*Qs)+Rs*(Es*Zs-Us*$s),oh=-1,rh=0;if(sh=ih=th=0,0>Ss*(Ns*Qs-Hs*Zs)+ks*(Hs*$s-Js*Qs)+Is*(Js*Zs-Ns*$s)){var nh,ph,lh,ch,yh,fh,uh=ls;nh=uh.x,ph=uh.y,lh=uh.z;var bh,vh,gh,xh,dh,zh=cs;if(0>(xh=-(xh=(bh=(ch=zh.x)-nh)*nh+(vh=(yh=zh.y)-ph)*ph+(gh=(fh=zh.z)-lh)*lh)/(bh*bh+vh*vh+gh*gh))){var mh=c;mh.x=nh,mh.y=ph,mh.z=lh,dh=1}else if(1<xh){var jh=c;jh.x=ch,jh.y=yh,jh.z=fh,dh=2}else{var Mh,Ah,wh;Mh=nh+bh*xh,Ah=ph+vh*xh,wh=lh+gh*xh;var Dh=c;Dh.x=Mh,Dh.y=Ah,Dh.z=wh,dh=3}rh=dh,oh=c.x*c.x+c.y*c.y+c.z*c.z;var Ch=c;th=Ch.x,ih=Ch.y,sh=Ch.z}if(0>ah){var Bh,qh,Sh,kh,Ih,Th,Oh=cs;Bh=Oh.x,qh=Oh.y,Sh=Oh.z;var Lh,Fh,Ph,Rh,Jh,Nh=ys;if(0>(Rh=-(Rh=(Lh=(kh=Nh.x)-Bh)*Bh+(Fh=(Ih=Nh.y)-qh)*qh+(Ph=(Th=Nh.z)-Sh)*Sh)/(Lh*Lh+Fh*Fh+Ph*Ph))){var Hh=c;Hh.x=Bh,Hh.y=qh,Hh.z=Sh,Jh=1}else if(1<Rh){var Kh=c;Kh.x=kh,Kh.y=Ih,Kh.z=Th,Jh=2}else{var Gh,Vh,Eh;Gh=Bh+Lh*Rh,Vh=qh+Fh*Rh,Eh=Sh+Ph*Rh;var Uh=c;Uh.x=Gh,Uh.y=Vh,Uh.z=Eh,Jh=3}var Wh=c.x*c.x+c.y*c.y+c.z*c.z;if(0>oh||Wh<oh){rh=Jh<<1,oh=Wh;var Yh=c;th=Yh.x,ih=Yh.y,sh=Yh.z}}if(0>eh){var Xh,$h,Zh,Qh,_h,ta,ia=ls;Xh=ia.x,$h=ia.y,Zh=ia.z;var sa,ha,aa,ea,oa,ra=ys;if(0>(ea=-(ea=(sa=(Qh=ra.x)-Xh)*Xh+(ha=(_h=ra.y)-$h)*$h+(aa=(ta=ra.z)-Zh)*Zh)/(sa*sa+ha*ha+aa*aa))){var na=c;na.x=Xh,na.y=$h,na.z=Zh,oa=1}else if(1<ea){var pa=c;pa.x=Qh,pa.y=_h,pa.z=ta,oa=2}else{var la,ca,ya;la=Xh+sa*ea,ca=$h+ha*ea,ya=Zh+aa*ea;var fa=c;fa.x=la,fa.y=ca,fa.z=ya,oa=3}var ua=c.x*c.x+c.y*c.y+c.z*c.z;if(0>oh||ua<oh){rh=1&oa|(2&oa)<<1,oh=ua;var ba=c;th=ba.x,ih=ba.y,sh=ba.z}}if(0<oh){var va=c;va.x=th,va.y=ih,va.z=sh,hh=rh}else{var ga,xa=$s*$s+Zs*Zs+Qs*Qs;0<xa&&(xa=1/Math.sqrt(xa)),th=($s*=xa)*(ga=(Ss*$s+ks*(Zs*=xa)+Is*(Qs*=xa))/(ga=$s*$s+Zs*Zs+Qs*Qs)),ih=Zs*ga,sh=Qs*ga;var da=c;da.x=th,da.y=ih,da.z=sh,hh=7}qs=hh,Bs=c.x*c.x+c.y*c.y+c.z*c.z;var za=c;ms=za.x,js=za.y,Ms=za.z}if(0>ws*As){var ma,ja,Ma,Aa,wa,Da,Ca,Ba,qa,Sa,ka,Ia,Ta,Oa,La,Fa,Pa,Ra,Ja=ls;ma=Ja.x,ja=Ja.y,Ma=Ja.z;var Na=ys;Aa=Na.x,wa=Na.y,Da=Na.z;var Ha,Ka,Ga,Va=fs;Ca=Va.x;var Ea,Ua,Wa,Ya,Xa=Aa*((Oa=(Ba=Va.y)-wa)*(Ga=(Sa=Aa-ma)*Oa-(ka=wa-ja)*(Ta=Ca-Aa))-(La=(qa=Va.z)-Da)*(Ka=(Ia=Da-Ma)*Ta-Sa*La))+wa*(La*(Ha=ka*La-Ia*Oa)-Ta*Ga)+Da*(Ta*Ka-Oa*Ha),$a=Ca*((Pa=ja-Ba)*Ga-(Ra=Ma-qa)*Ka)+Ba*(Ra*Ha-(Fa=ma-Ca)*Ga)+qa*(Fa*Ka-Pa*Ha),Za=-1,Qa=0;if(Wa=Ua=Ea=0,0>ma*(ka*Ga-Ia*Ka)+ja*(Ia*Ha-Sa*Ga)+Ma*(Sa*Ka-ka*Ha)){var _a,te,ie,se,he,ae,ee=ls;_a=ee.x,te=ee.y,ie=ee.z;var oe,re,ne,pe,le,ce=ys;if(0>(pe=-(pe=(oe=(se=ce.x)-_a)*_a+(re=(he=ce.y)-te)*te+(ne=(ae=ce.z)-ie)*ie)/(oe*oe+re*re+ne*ne))){var ye=c;ye.x=_a,ye.y=te,ye.z=ie,le=1}else if(1<pe){var fe=c;fe.x=se,fe.y=he,fe.z=ae,le=2}else{var ue,be,ve;ue=_a+oe*pe,be=te+re*pe,ve=ie+ne*pe;var ge=c;ge.x=ue,ge.y=be,ge.z=ve,le=3}Qa=le,Za=c.x*c.x+c.y*c.y+c.z*c.z;var xe=c;Ea=xe.x,Ua=xe.y,Wa=xe.z}if(0>Xa){var de,ze,me,je,Me,Ae,we=ys;de=we.x,ze=we.y,me=we.z;var De,Ce,Be,qe,Se,ke=fs;if(0>(qe=-(qe=(De=(je=ke.x)-de)*de+(Ce=(Me=ke.y)-ze)*ze+(Be=(Ae=ke.z)-me)*me)/(De*De+Ce*Ce+Be*Be))){var Ie=c;Ie.x=de,Ie.y=ze,Ie.z=me,Se=1}else if(1<qe){var Te=c;Te.x=je,Te.y=Me,Te.z=Ae,Se=2}else{var Oe,Le,Fe;Oe=de+De*qe,Le=ze+Ce*qe,Fe=me+Be*qe;var Pe=c;Pe.x=Oe,Pe.y=Le,Pe.z=Fe,Se=3}var Re=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Za||Re<Za){Qa=Se<<1,Za=Re;var Je=c;Ea=Je.x,Ua=Je.y,Wa=Je.z}}if(0>$a){var Ne,He,Ke,Ge,Ve,Ee,Ue=ls;Ne=Ue.x,He=Ue.y,Ke=Ue.z;var We,Ye,Xe,$e,Ze,Qe=fs;if(0>($e=-($e=(We=(Ge=Qe.x)-Ne)*Ne+(Ye=(Ve=Qe.y)-He)*He+(Xe=(Ee=Qe.z)-Ke)*Ke)/(We*We+Ye*Ye+Xe*Xe))){var _e=c;_e.x=Ne,_e.y=He,_e.z=Ke,Ze=1}else if(1<$e){var to=c;to.x=Ge,to.y=Ve,to.z=Ee,Ze=2}else{var io,so,ho;io=Ne+We*$e,so=He+Ye*$e,ho=Ke+Xe*$e;var ao=c;ao.x=io,ao.y=so,ao.z=ho,Ze=3}var eo=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Za||eo<Za){Qa=1&Ze|(2&Ze)<<1,Za=eo;var oo=c;Ea=oo.x,Ua=oo.y,Wa=oo.z}}if(0<Za){var ro=c;ro.x=Ea,ro.y=Ua,ro.z=Wa,Ya=Qa}else{var no,po=Ha*Ha+Ka*Ka+Ga*Ga;0<po&&(po=1/Math.sqrt(po)),Ea=(Ha*=po)*(no=(ma*Ha+ja*(Ka*=po)+Ma*(Ga*=po))/(no=Ha*Ha+Ka*Ka+Ga*Ga)),Ua=Ka*no,Wa=Ga*no;var lo=c;lo.x=Ea,lo.y=Ua,lo.z=Wa,Ya=7}var co=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Bs||co<Bs){qs=1&Ya|(6&Ya)<<1,Bs=co;var yo=c;ms=yo.x,js=yo.y,Ms=yo.z}}if(0>Ds*As){var fo,uo,bo,vo,go,xo,zo,mo,jo,Mo,Ao,wo,Do,Co,Bo,qo,So,ko,Io=ls;fo=Io.x,uo=Io.y,bo=Io.z;var To=cs;vo=To.x,go=To.y,xo=To.z;var Oo,Lo,Fo,Po=fs;zo=Po.x;var Ro,Jo,No,Ho,Ko=vo*((Co=(mo=Po.y)-go)*(Fo=(Mo=vo-fo)*Co-(Ao=go-uo)*(Do=zo-vo))-(Bo=(jo=Po.z)-xo)*(Lo=(wo=xo-bo)*Do-Mo*Bo))+go*(Bo*(Oo=Ao*Bo-wo*Co)-Do*Fo)+xo*(Do*Lo-Co*Oo),Go=zo*((So=uo-mo)*Fo-(ko=bo-jo)*Lo)+mo*(ko*Oo-(qo=fo-zo)*Fo)+jo*(qo*Lo-So*Oo),Vo=-1,Eo=0;if(No=Jo=Ro=0,0>fo*(Ao*Fo-wo*Lo)+uo*(wo*Oo-Mo*Fo)+bo*(Mo*Lo-Ao*Oo)){var Uo,Wo,Yo,Xo,$o,Zo,Qo=ls;Uo=Qo.x,Wo=Qo.y,Yo=Qo.z;var _o,tr,ir,sr,hr,ar=cs;if(0>(sr=-(sr=(_o=(Xo=ar.x)-Uo)*Uo+(tr=($o=ar.y)-Wo)*Wo+(ir=(Zo=ar.z)-Yo)*Yo)/(_o*_o+tr*tr+ir*ir))){var er=c;er.x=Uo,er.y=Wo,er.z=Yo,hr=1}else if(1<sr){var or=c;or.x=Xo,or.y=$o,or.z=Zo,hr=2}else{var rr,nr,pr;rr=Uo+_o*sr,nr=Wo+tr*sr,pr=Yo+ir*sr;var lr=c;lr.x=rr,lr.y=nr,lr.z=pr,hr=3}Eo=hr,Vo=c.x*c.x+c.y*c.y+c.z*c.z;var cr=c;Ro=cr.x,Jo=cr.y,No=cr.z}if(0>Ko){var yr,fr,ur,br,vr,gr,xr=cs;yr=xr.x,fr=xr.y,ur=xr.z;var dr,zr,mr,jr,Mr,Ar=fs;if(0>(jr=-(jr=(dr=(br=Ar.x)-yr)*yr+(zr=(vr=Ar.y)-fr)*fr+(mr=(gr=Ar.z)-ur)*ur)/(dr*dr+zr*zr+mr*mr))){var wr=c;wr.x=yr,wr.y=fr,wr.z=ur,Mr=1}else if(1<jr){var Dr=c;Dr.x=br,Dr.y=vr,Dr.z=gr,Mr=2}else{var Cr,Br,qr;Cr=yr+dr*jr,Br=fr+zr*jr,qr=ur+mr*jr;var Sr=c;Sr.x=Cr,Sr.y=Br,Sr.z=qr,Mr=3}var kr=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Vo||kr<Vo){Eo=Mr<<1,Vo=kr;var Ir=c;Ro=Ir.x,Jo=Ir.y,No=Ir.z}}if(0>Go){var Tr,Or,Lr,Fr,Pr,Rr,Jr=ls;Tr=Jr.x,Or=Jr.y,Lr=Jr.z;var Nr,Hr,Kr,Gr,Vr,Er=fs;if(0>(Gr=-(Gr=(Nr=(Fr=Er.x)-Tr)*Tr+(Hr=(Pr=Er.y)-Or)*Or+(Kr=(Rr=Er.z)-Lr)*Lr)/(Nr*Nr+Hr*Hr+Kr*Kr))){var Ur=c;Ur.x=Tr,Ur.y=Or,Ur.z=Lr,Vr=1}else if(1<Gr){var Wr=c;Wr.x=Fr,Wr.y=Pr,Wr.z=Rr,Vr=2}else{var Yr,Xr,$r;Yr=Tr+Nr*Gr,Xr=Or+Hr*Gr,$r=Lr+Kr*Gr;var Zr=c;Zr.x=Yr,Zr.y=Xr,Zr.z=$r,Vr=3}var Qr=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Vo||Qr<Vo){Eo=1&Vr|(2&Vr)<<1,Vo=Qr;var _r=c;Ro=_r.x,Jo=_r.y,No=_r.z}}if(0<Vo){var tn=c;tn.x=Ro,tn.y=Jo,tn.z=No,Ho=Eo}else{var sn,hn=Oo*Oo+Lo*Lo+Fo*Fo;0<hn&&(hn=1/Math.sqrt(hn)),Ro=(Oo*=hn)*(sn=(fo*Oo+uo*(Lo*=hn)+bo*(Fo*=hn))/(sn=Oo*Oo+Lo*Lo+Fo*Fo)),Jo=Lo*sn,No=Fo*sn;var an=c;an.x=Ro,an.y=Jo,an.z=No,Ho=7}var en=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Bs||en<Bs){qs=3&Ho|(4&Ho)<<1,Bs=en;var on=c;ms=on.x,js=on.y,Ms=on.z}}if(0>Cs*As){var rn,nn,pn,ln,cn,yn,fn,un,bn,vn,gn,xn,dn,zn,mn,jn,Mn,An,wn=cs;rn=wn.x,nn=wn.y,pn=wn.z;var Dn=ys;ln=Dn.x,cn=Dn.y,yn=Dn.z;var Cn,Bn,qn,Sn=fs;fn=Sn.x;var kn,In,Tn,On,Ln=ln*((zn=(un=Sn.y)-cn)*(qn=(vn=ln-rn)*zn-(gn=cn-nn)*(dn=fn-ln))-(mn=(bn=Sn.z)-yn)*(Bn=(xn=yn-pn)*dn-vn*mn))+cn*(mn*(Cn=gn*mn-xn*zn)-dn*qn)+yn*(dn*Bn-zn*Cn),Fn=fn*((Mn=nn-un)*qn-(An=pn-bn)*Bn)+un*(An*Cn-(jn=rn-fn)*qn)+bn*(jn*Bn-Mn*Cn),Pn=-1,Rn=0;if(Tn=In=kn=0,0>rn*(gn*qn-xn*Bn)+nn*(xn*Cn-vn*qn)+pn*(vn*Bn-gn*Cn)){var Jn,Nn,Hn,Kn,Gn,Vn,En=cs;Jn=En.x,Nn=En.y,Hn=En.z;var Un,Wn,Yn,Xn,$n,Zn=ys;if(0>(Xn=-(Xn=(Un=(Kn=Zn.x)-Jn)*Jn+(Wn=(Gn=Zn.y)-Nn)*Nn+(Yn=(Vn=Zn.z)-Hn)*Hn)/(Un*Un+Wn*Wn+Yn*Yn))){var Qn=c;Qn.x=Jn,Qn.y=Nn,Qn.z=Hn,$n=1}else if(1<Xn){var _n=c;_n.x=Kn,_n.y=Gn,_n.z=Vn,$n=2}else{var tp,ip,sp;tp=Jn+Un*Xn,ip=Nn+Wn*Xn,sp=Hn+Yn*Xn;var hp=c;hp.x=tp,hp.y=ip,hp.z=sp,$n=3}Rn=$n,Pn=c.x*c.x+c.y*c.y+c.z*c.z;var ap=c;kn=ap.x,In=ap.y,Tn=ap.z}if(0>Ln){var ep,op,rp,np,pp,lp,cp=ys;ep=cp.x,op=cp.y,rp=cp.z;var yp,fp,up,bp,vp,gp=fs;if(0>(bp=-(bp=(yp=(np=gp.x)-ep)*ep+(fp=(pp=gp.y)-op)*op+(up=(lp=gp.z)-rp)*rp)/(yp*yp+fp*fp+up*up))){var xp=c;xp.x=ep,xp.y=op,xp.z=rp,vp=1}else if(1<bp){var dp=c;dp.x=np,dp.y=pp,dp.z=lp,vp=2}else{var zp,mp,jp;zp=ep+yp*bp,mp=op+fp*bp,jp=rp+up*bp;var Mp=c;Mp.x=zp,Mp.y=mp,Mp.z=jp,vp=3}var Ap=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Pn||Ap<Pn){Rn=vp<<1,Pn=Ap;var wp=c;kn=wp.x,In=wp.y,Tn=wp.z}}if(0>Fn){var Dp,Cp,Bp,qp,Sp,kp,Ip=cs;Dp=Ip.x,Cp=Ip.y,Bp=Ip.z;var Tp,Op,Lp,Fp,Pp,Rp=fs;if(0>(Fp=-(Fp=(Tp=(qp=Rp.x)-Dp)*Dp+(Op=(Sp=Rp.y)-Cp)*Cp+(Lp=(kp=Rp.z)-Bp)*Bp)/(Tp*Tp+Op*Op+Lp*Lp))){var Jp=c;Jp.x=Dp,Jp.y=Cp,Jp.z=Bp,Pp=1}else if(1<Fp){var Np=c;Np.x=qp,Np.y=Sp,Np.z=kp,Pp=2}else{var Hp,Kp,Gp;Hp=Dp+Tp*Fp,Kp=Cp+Op*Fp,Gp=Bp+Lp*Fp;var Vp=c;Vp.x=Hp,Vp.y=Kp,Vp.z=Gp,Pp=3}var Ep=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Pn||Ep<Pn){Rn=1&Pp|(2&Pp)<<1,Pn=Ep;var Up=c;kn=Up.x,In=Up.y,Tn=Up.z}}if(0<Pn){var Wp=c;Wp.x=kn,Wp.y=In,Wp.z=Tn,On=Rn}else{var Yp,Xp=Cn*Cn+Bn*Bn+qn*qn;0<Xp&&(Xp=1/Math.sqrt(Xp)),kn=(Cn*=Xp)*(Yp=(rn*Cn+nn*(Bn*=Xp)+pn*(qn*=Xp))/(Yp=Cn*Cn+Bn*Bn+qn*qn)),In=Bn*Yp,Tn=qn*Yp;var $p=c;$p.x=kn,$p.y=In,$p.z=Tn,On=7}var Zp=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Bs||Zp<Bs){qs=On<<1,Bs=Zp;var Qp=c;ms=Qp.x,js=Qp.y,Ms=Qp.z}}if(0<Bs){var _p=c;_p.x=ms,_p.y=js,_p.z=Ms,w=qs}else c.Z(),w=15}if(this.Hm(w),1e-8>c.x*c.x+c.y*c.y+c.z*c.z){if(!z||4==this.ya){o.fraction=z;break}this.sm(),o.fraction=z;var tl=o.normal;tl.x=y.x,tl.y=y.y,tl.z=y.z;var il=tl,sl=Math.sqrt(il.x*il.x+il.y*il.y+il.z*il.z);0<sl&&(sl=1/sl);var hl=il.y*sl,al=il.z*sl;il.x=il.x*sl,il.y=hl,il.z=al;var el=o.position,ol=this.closestPoint1;el.x=ol.x,el.y=ol.y,el.z=ol.z;var rl=el,nl=rl.y+a.y*z,pl=rl.z+a.z*z;return rl.x+=a.x*z,rl.y=nl,rl.z=pl,!0}y.x=c.x,y.y=c.y,y.z=c.z;var ll=y,cl=-ll.y,yl=-ll.z;if(ll.x=-ll.x,ll.y=cl,ll.z=yl,null!=this.wj)this.zf(!0);else{var fl=this.jb[this.ya];fl.x=this.tc.v,fl.y=this.tc.A,fl.z=this.tc.B}this.Af(!0);var ul=this.Na[this.ya],bl=this.jb[this.ya];ul.x=bl.x,ul.y=bl.y,ul.z=bl.z;var vl=ul,gl=this.qb[this.ya],xl=vl.y-gl.y,dl=vl.z-gl.z;vl.x=vl.x-gl.x,vl.y=xl,vl.z=dl;var zl=l[this.ya],ml=zl.y-m.y,jl=zl.z-m.z;if(zl.x=zl.x-m.x,zl.y=ml,zl.z=jl,1e-8>y.x*y.x+y.y*y.y+y.z*y.z)throw Error("!?");var Ml=l[this.ya],Al=y,wl=Ml.x*Al.x+Ml.y*Al.y+Ml.z*Al.z;if(0>wl){if(0<=j.x*Al.x+j.y*Al.y+j.z*Al.z)break;var Dl=wl/(j.x*Al.x+j.y*Al.y+j.z*Al.z);if(1<=(z=z+Dl))break;var Cl=m.y+j.y*Dl,Bl=m.z+j.z*Dl;m.x=m.x+j.x*Dl,m.y=Cl,m.z=Bl;for(var ql=0,Sl=this.ya+1;ql<Sl;){var kl=l[ql++],Il=-Dl,Tl=kl.y+j.y*Il,Ol=kl.z+j.z*Il;kl.x=kl.x+j.x*Il,kl.y=Tl,kl.z=Ol}}for(var Ll=!1,Fl=0,Pl=this.ya;Fl<Pl;){var Rl=Fl++,Jl=l[Rl].x-l[this.ya].x,Nl=l[Rl].y-l[this.ya].y,Hl=l[Rl].z-l[this.ya].z;if(1e-8>Jl*Jl+Nl*Nl+Hl*Hl){Ll=!0;break}}Ll||this.ya++,++d}return!1},sm:function(){switch(this.ya){case 1:var t=this.closestPoint1,i=this.jb[0];t.x=i.x,t.y=i.y,t.z=i.z;var s=this.closestPoint2,h=this.qb[0];s.x=h.x,s.y=h.y,s.z=h.z;break;case 2:var a,e,o,r=this.closest;a=r.x,e=r.y,o=r.z;var n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M=this.Na[0];n=M.x,p=M.y,l=M.z;var A=this.jb[0];c=A.x,y=A.y,f=A.z;var w=this.qb[0];u=w.x,b=w.y,v=w.z;var D=this.Na[1];g=D.x,x=D.y,d=D.z;var C=this.jb[1];z=C.x,m=C.y,j=C.z;var B,q,S,k=this.qb[1],I=(B=g-n)*B+(q=x-p)*q+(S=d-l)*S;I&&(I=1/I);var T,O,L,F,P,R,J=((a-n)*B+(e-p)*q+(o-l)*S)*I;T=c+(z-c)*J,O=y+(m-y)*J,L=f+(j-f)*J,F=u+(k.x-u)*J,P=b+(k.y-b)*J,R=v+(k.z-v)*J;var N=this.closestPoint1;N.x=T,N.y=O,N.z=L;var H=this.closestPoint2;H.x=F,H.y=P,H.z=R;break;case 3:var K,G,V,E=this.closest;K=E.x,G=E.y,V=E.z;var U,W,Y,X,$,Z,Q,_,tt,it,st,ht,at,et,ot,rt,nt,pt,lt,ct,yt,ft,ut,bt,vt=this.Na[0];U=vt.x,W=vt.y,Y=vt.z;var gt=this.jb[0];X=gt.x,$=gt.y,Z=gt.z;var xt=this.qb[0];Q=xt.x,_=xt.y,tt=xt.z;var dt=this.Na[1];it=dt.x,st=dt.y,ht=dt.z;var zt=this.jb[1];at=zt.x,et=zt.y,ot=zt.z;var mt=this.qb[1];rt=mt.x,nt=mt.y,pt=mt.z;var jt=this.Na[2];lt=jt.x,ct=jt.y,yt=jt.z;var Mt=this.jb[2];ft=Mt.x,ut=Mt.y,bt=Mt.z;var At,wt,Dt,Ct,Bt,qt,St,kt,It,Tt=this.qb[2],Ot=(At=it-U)*At+(wt=st-W)*wt+(Dt=ht-Y)*Dt,Lt=At*(Ct=lt-U)+wt*(Bt=ct-W)+Dt*(qt=yt-Y),Ft=Ct*Ct+Bt*Bt+qt*qt,Pt=At*(St=K-U)+wt*(kt=G-W)+Dt*(It=V-Y),Rt=Ct*St+Bt*kt+qt*It,Jt=Ot*Ft-Lt*Lt;Jt&&(Jt=1/Jt);var Nt,Ht,Kt,Gt,Vt,Et,Ut=(Pt*Ft-Rt*Lt)*Jt,Wt=(-Pt*Lt+Rt*Ot)*Jt;Nt=X+(at-X)*Ut,Ht=$+(et-$)*Ut,Kt=Z+(ot-Z)*Ut,Nt+=(ft-X)*Wt,Ht+=(ut-$)*Wt,Kt+=(bt-Z)*Wt,Gt=Q+(rt-Q)*Ut,Vt=_+(nt-_)*Ut,Et=tt+(pt-tt)*Ut,Gt+=(Tt.x-Q)*Wt,Vt+=(Tt.y-_)*Wt,Et+=(Tt.z-tt)*Wt;var Yt=this.closestPoint1;Yt.x=Nt,Yt.y=Ht,Yt.z=Kt;var Xt=this.closestPoint2;Xt.x=Gt,Xt.y=Vt,Xt.z=Et;break;default:throw Error("!?")}},Pn:function(t){var i=this.dir;t=t.Il,i.x=t.x,i.y=t.y,i.z=t.z},Yn:function(t){t=t.Il;var i=this.closest;t.x=i.x,t.y=i.y,t.z=i.z;i=-t.y;var s=-t.z;t.x=-t.x,t.y=i,t.z=s},Hm:function(t){switch(this.ya=t,this.ya=(5&this.ya)+(this.ya>>1&5),this.ya=(3&this.ya)+(this.ya>>2&3),t){case 2:t=this.Na[0];var i=this.Na[1];t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[1],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[1],t.x=i.x,t.y=i.y,t.z=i.z;break;case 4:t=this.Na[0],i=this.Na[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[2],t.x=i.x,t.y=i.y,t.z=i.z;break;case 5:t=this.Na[1],i=this.Na[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[1],i=this.jb[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[1],i=this.qb[2],t.x=i.x,t.y=i.y,t.z=i.z;break;case 6:t=this.Na[0],i=this.Na[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[2],t.x=i.x,t.y=i.y,t.z=i.z;break;case 8:t=this.Na[0],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z;break;case 9:t=this.Na[1],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[1],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[1],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z;break;case 10:t=this.Na[0],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z;break;case 11:t=this.Na[2],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[2],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[2],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z;break;case 12:t=this.Na[0],i=this.Na[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[2],t.x=i.x,t.y=i.y,t.z=i.z,t=this.Na[1],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[1],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[1],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z;break;case 13:t=this.Na[1],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[1],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[1],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z;break;case 14:t=this.Na[0],i=this.Na[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.jb[0],i=this.jb[3],t.x=i.x,t.y=i.y,t.z=i.z,t=this.qb[0],i=this.qb[3],t.x=i.x,t.y=i.y,t.z=i.z}},zf:function(t){var i,s,h,a,e,o,r;a=(o=this.dir).x,e=o.y,o=o.z,s=this.tc.o*a+this.tc.i*e+this.tc.l*o,r=this.tc.f*a+this.tc.m*e+this.tc.g*o,i=this.tc.h*a+this.tc.j*e+this.tc.s*o,(h=this.dir).x=s,h.y=r,h.z=i,this.wj.Pd(this.dir,this.jb[this.ya]),t&&(t=this.dir,0<(i=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z))&&(i=1/i),s=t.y*i,r=t.z*i,t.x=t.x*i,t.y=s,t.z=r,t=this.jb[this.ya],i=this.dir,s=this.wj.Rb,r=t.y+i.y*s,h=t.z+i.z*s,t.x+=i.x*s,t.y=r,t.z=h),i=(t=this.jb[this.ya]).x,s=t.y,h=t.z,r=this.tc.o*i+this.tc.f*s+this.tc.h*h,t=this.tc.i*i+this.tc.m*s+this.tc.j*h,s=this.tc.l*i+this.tc.g*s+this.tc.s*h,i=r+this.tc.v,t+=this.tc.A,s+=this.tc.B,(r=this.jb[this.ya]).x=i,r.y=t,r.z=s,(t=this.dir).x=a,t.y=e,t.z=o},Af:function(t){var i,s,h,a,e,o,r;a=(o=this.dir).x,e=o.y,o=o.z,i=this.Ic.o*a+this.Ic.i*e+this.Ic.l*o,s=this.Ic.f*a+this.Ic.m*e+this.Ic.g*o,r=this.Ic.h*a+this.Ic.j*e+this.Ic.s*o,(h=this.dir).x=-i,h.y=-s,h.z=-r,this.jl.Pd(this.dir,this.qb[this.ya]),t&&(t=this.dir,0<(i=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z))&&(i=1/i),s=t.y*i,r=t.z*i,t.x=t.x*i,t.y=s,t.z=r,t=this.qb[this.ya],i=this.dir,s=this.jl.Rb,r=t.y+i.y*s,h=t.z+i.z*s,t.x+=i.x*s,t.y=r,t.z=h),i=(t=this.qb[this.ya]).x,s=t.y,h=t.z,r=this.Ic.o*i+this.Ic.f*s+this.Ic.h*h,t=this.Ic.i*i+this.Ic.m*s+this.Ic.j*h,s=this.Ic.l*i+this.Ic.g*s+this.Ic.s*h,i=r+this.Ic.v,t+=this.Ic.A,s+=this.Ic.B,(r=this.qb[this.ya]).x=i,r.y=t,r.z=s,(t=this.dir).x=a,t.y=e,t.z=o},Rn:function(){for(var t=0;3>t;){var i=t++,s=this.dir;i=this.uj[i];s.x=i.x,s.y=i.y,s.z=i.z,this.zf(!1),this.Af(!1),s=this.Na[this.ya],i=this.jb[this.ya],s.x=i.x,s.y=i.y,s.z=i.z;i=this.qb[this.ya];var h=s.y-i.y,a=s.z-i.z;if(s.x=s.x-i.x,s.y=h,s.z=a,this.ya++,this.El(),4==this.ya)break;if(this.ya--,i=-(s=this.dir).y,h=-s.z,s.x=-s.x,s.y=i,s.z=h,this.zf(!1),this.Af(!1),s=this.Na[this.ya],i=this.jb[this.ya],s.x=i.x,s.y=i.y,s.z=i.z,i=this.qb[this.ya],h=s.y-i.y,a=s.z-i.z,s.x=s.x-i.x,s.y=h,s.z=a,this.ya++,this.El(),4==this.ya)break;this.ya--}},El:function(){var t,i,s,h,a,e,o,r,n;for(t=(s=this.dir).x,i=s.y,s=s.z,h=(e=this.Na[0]).x,a=e.y,e=e.z,h-=o=(n=this.Na[1]).x,a-=r=n.y,e-=n=n.z,r=0;3>r;){var p,l;if(n=r++,o=(n=this.uj[n]).x,p=n.y,n=a*(l=n.z)-e*p,l=e*o-h*l,o=h*p-a*o,(p=this.dir).x=n,p.y=l,p.z=o,this.zf(!1),this.Af(!1),n=this.Na[this.ya],o=this.jb[this.ya],n.x=o.x,n.y=o.y,n.z=o.z,o=this.qb[this.ya],p=n.y-o.y,l=n.z-o.z,n.x=n.x-o.x,n.y=p,n.z=l,this.ya++,this.Ll(),4==this.ya)break;if(this.ya--,o=-(n=this.dir).y,p=-n.z,n.x=-n.x,n.y=o,n.z=p,this.zf(!1),this.Af(!1),n=this.Na[this.ya],o=this.jb[this.ya],n.x=o.x,n.y=o.y,n.z=o.z,o=this.qb[this.ya],p=n.y-o.y,l=n.z-o.z,n.x=n.x-o.x,n.y=p,n.z=l,this.ya++,this.Ll(),4==this.ya)break;this.ya--}(h=this.dir).x=t,h.y=i,h.z=s},Ll:function(){var t,i,s;for(t=(s=this.dir).x,i=s.y,s=s.z;;){var h,a,e,o,r,n,p,l,c;if(h=(e=this.Na[0]).x,a=e.y,e=e.z,o=(l=this.Na[1]).x,r=l.y,n=l.z,p=(c=this.Na[2]).x,o-=h,r-=a,a=(l=c.y)-a,e=r*(l=(c=c.z)-e)-(n-=e)*a,l=n*(h=p-h)-o*l,a=o*a-r*h,(o=this.dir).x=e,o.y=l,o.z=a,this.zf(!1),this.Af(!1),a=this.Na[this.ya],e=this.jb[this.ya],a.x=e.x,a.y=e.y,a.z=e.z,e=this.qb[this.ya],o=a.y-e.y,h=a.z-e.z,a.x=a.x-e.x,a.y=o,a.z=h,this.ya++,this.tm())break;if(this.ya--,e=-(a=this.dir).y,o=-a.z,a.x=-a.x,a.y=e,a.z=o,this.zf(!1),this.Af(!1),a=this.Na[this.ya],e=this.jb[this.ya],a.x=e.x,a.y=e.y,a.z=e.z,e=this.qb[this.ya],o=a.y-e.y,h=a.z-e.z,a.x=a.x-e.x,a.y=o,a.z=h,this.ya++,this.tm())break;this.ya--;break}(a=this.dir).x=t,a.y=i,a.z=s},tm:function(){var t=this.Na[2].x-this.Na[0].x,i=this.Na[2].y-this.Na[0].y,s=this.Na[2].z-this.Na[0].z,h=this.Na[3].x-this.Na[0].x,a=this.Na[3].y-this.Na[0].y,e=this.Na[3].z-this.Na[0].z;return 1e-12<(t=(this.Na[1].x-this.Na[0].x)*(i*e-s*a)-(this.Na[1].y-this.Na[0].y)*(t*e-s*h)+(this.Na[1].z-this.Na[0].z)*(t*a-i*h))||-1e-12>t},mn:function(t,i,s,h,a,e,o){for(var r=this.Og;0<r.lh;){var n=r.jd;r.lh--;var p=n.ia,l=n.M;null!=p&&(p.M=l),null!=l&&(l.ia=p),n==r.jd&&(r.jd=r.jd.M),n==r.Rc&&(r.Rc=r.Rc.ia),n.M=null,n.ia=null,n.tk(),n.M=r.De,r.De=n}for(;0<r.Ne;){var c=r.zb[--r.Ne];c.tk(),c.M=r.bf,r.bf=c}var y=this.Og,f=this.Og,u=f.bf;null!=u?(f.bf=u.M,u.M=null):u=new mt;var b=u.za(a[0],e[0],o[0]),v=this.Og,g=v.bf;null!=g?(v.bf=g.M,g.M=null):g=new mt;var x=g.za(a[1],e[1],o[1]),d=this.Og,z=d.bf;null!=z?(d.bf=z.M,z.M=null):z=new mt;var m=z.za(a[2],e[2],o[2]),j=this.Og,M=j.bf;if(null!=M?(j.bf=M.M,M.M=null):M=new mt,!y.fh(b,x,m,M.za(a[3],e[3],o[3])))return bt.EPA_FAILED_TO_INIT;this.ya=0;for(var A=this.Na[0],w=this.jb[0],D=this.qb[0],C=0;40>C;){for(var B=this.Og.jd,q=1/0,S=null;null!=B;){var k=B.M;B.Wj<q&&(q=B.Wj,S=B),B=k}var I=S,T=this.dir,O=I.dk;T.x=O.x,T.y=O.y,T.z=O.z;var L=T,F=Math.sqrt(L.x*L.x+L.y*L.y+L.z*L.z);0<F&&(F=1/F);var P=L.y*F,R=L.z*F;L.x=L.x*F,L.y=P,L.z=R,this.zf(!1),this.Af(!1);var J=this.Na[this.ya],N=this.jb[this.ya];J.x=N.x,J.y=N.y,J.z=N.z;var H=J,K=this.qb[this.ya],G=H.y-K.y,V=H.z-K.z;H.x=H.x-K.x,H.y=G,H.z=V;var E=I.zb[0],U=I.zb[1],W=I.zb[2],Y=E.xd,X=this.dir,$=this.dir;if(1e-6>A.x*$.x+A.y*$.y+A.z*$.z-(Y.x*X.x+Y.y*X.y+Y.z*X.z)||39==C){var Z=this.closest,Q=this.dir;Z.x=Q.x,Z.y=Q.y,Z.z=Q.z;var _=Z,tt=this.dir,it=E.xd,st=this.dir,ht=(tt.x*it.x+tt.y*it.y+tt.z*it.z)/(st.x*st.x+st.y*st.y+st.z*st.z),at=_.y*ht,et=_.z*ht;_.x=_.x*ht,_.y=at,_.z=et;var ot,rt,nt,pt=this.closest;ot=pt.x,rt=pt.y,nt=pt.z;var lt,ct,yt,ft,ut,vt,gt,xt,dt,zt,jt,Mt,At,wt,Dt,Ct,Bt,qt,St,kt,It,Tt,Ot,Lt,Ft=E.xd;lt=Ft.x,ct=Ft.y,yt=Ft.z;var Pt=E.jb;ft=Pt.x,ut=Pt.y,vt=Pt.z;var Rt=E.qb;gt=Rt.x,xt=Rt.y,dt=Rt.z;var Jt=U.xd;zt=Jt.x,jt=Jt.y,Mt=Jt.z;var Nt=U.jb;At=Nt.x,wt=Nt.y,Dt=Nt.z;var Ht=U.qb;Ct=Ht.x,Bt=Ht.y,qt=Ht.z;var Kt=W.xd;St=Kt.x,kt=Kt.y,It=Kt.z;var Gt=W.jb;Tt=Gt.x,Ot=Gt.y,Lt=Gt.z;var Vt,Et,Ut,Wt,Yt,Xt,$t,Zt,Qt,_t=W.qb,ti=(Vt=zt-lt)*Vt+(Et=jt-ct)*Et+(Ut=Mt-yt)*Ut,ii=Vt*(Wt=St-lt)+Et*(Yt=kt-ct)+Ut*(Xt=It-yt),si=Wt*Wt+Yt*Yt+Xt*Xt,hi=Vt*($t=ot-lt)+Et*(Zt=rt-ct)+Ut*(Qt=nt-yt),ai=Wt*$t+Yt*Zt+Xt*Qt,ei=ti*si-ii*ii;ei&&(ei=1/ei);var oi,ri,ni,pi,li,ci,yi=(hi*si-ai*ii)*ei,fi=(-hi*ii+ai*ti)*ei;oi=ft+(At-ft)*yi,ri=ut+(wt-ut)*yi,ni=vt+(Dt-vt)*yi,oi+=(Tt-ft)*fi,ri+=(Ot-ut)*fi,ni+=(Lt-vt)*fi,pi=gt+(Ct-gt)*yi,li=xt+(Bt-xt)*yi,ci=dt+(qt-dt)*yi,pi+=(_t.x-gt)*fi,li+=(_t.y-xt)*fi,ci+=(_t.z-dt)*fi;var ui=this.closestPoint1;ui.x=oi,ui.y=ri,ui.z=ni;var bi=this.closestPoint2;bi.x=pi,bi.y=li,bi.z=ci;var vi=this.closest;return this.depth=Math.sqrt(vi.x*vi.x+vi.y*vi.y+vi.z*vi.z),bt.SUCCEEDED}var gi=this.Og,xi=gi.bf;null!=xi?(gi.bf=xi.M,xi.M=null):xi=new mt;var di=xi.za(A,w,D);if(!this.Og.Vm(di,I))return bt.EPA_FAILED_TO_ADD_VERTEX;++C}return bt.EPA_DID_NOT_CONVERGE},ua:function(t,i,s,h,a){return this.zj(t,i,s,h,a,!0)},cb:function(t,i,s,h,a){return this.zj(t,i,s,h,a,!1)},Bf:function(t,i,s,h,a,e,o){return this.fm(t,i,s,h,a,e,o)},Vd:function(t,i,s,h,a){var e=this.ao;e.v=s.x,e.A=s.y,e.B=s.z;var o=this.bo,r=this.co;o.x=h.x,o.y=h.y,o.z=h.z,h=o.y-s.y;var n=o.z-s.z;return o.x=o.x-s.x,o.y=h,o.z=n,r.Z(),this.fm(null,t,e,i,o,r,a)}},ut.qc=function(t,i,s){var h,a,e,o,r,n,p,l;return h=t.x,a=t.y,t=t.z,0>(l=-((r=(e=i.x)-h)*h+(n=(o=i.y)-a)*a+(p=(i=i.z)-t)*t)/(r*r+n*n+p*p))?(s.x=h,s.y=a,s.z=t,1):1<l?(s.x=e,s.y=o,s.z=i,2):(s.x=h+r*l,s.y=a+n*l,s.z=t+p*l,3)},ut.uc=function(t,i,s,h){var a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A;a=t.x,e=t.y,o=t.z,r=i.x,n=i.y,p=i.z,d=a-(l=s.x),z=e-(c=s.y),m=o-(y=s.z);var w,D,C,B,q,S=-1,k=0;(C=D=w=0,0>a*((u=n-e)*(A=(f=r-a)*(g=c-n)-u*(v=l-r))-(b=p-o)*(M=b*v-f*(x=y-p)))+e*(b*(j=u*x-b*g)-f*A)+o*(f*M-u*j))&&(f=t.x,S=t.y,w=t.z,0>(k=-((q=(u=i.x)-f)*f+(C=(b=i.y)-S)*S+(D=(B=i.z)-w)*w)/(q*q+C*C+D*D))?(h.x=f,h.y=S,h.z=w,D=1):1<k?(h.x=u,h.y=b,h.z=B,D=2):(f+=q*k,S+=C*k,w+=D*k,h.x=f,h.y=S,h.z=w,D=3),k=D,S=w=h.x*h.x+h.y*h.y+h.z*h.z,w=h.x,D=h.y,C=h.z);return 0>r*(g*A-x*M)+n*(x*j-v*A)+p*(v*M-g*j)&&(v=i.x,r=i.y,i=i.z,0>(p=-((b=(x=s.x)-v)*v+(g=(f=s.y)-r)*r+(n=(u=s.z)-i)*i)/(b*b+g*g+n*n))?(h.x=v,h.y=r,h.z=i,i=1):1<p?(h.x=x,h.y=f,h.z=u,i=2):(v+=b*p,r+=g*p,i+=n*p,h.x=v,h.y=r,h.z=i,i=3),r=h.x*h.x+h.y*h.y+h.z*h.z,0>S||r<S)&&(k=i<<1,S=r,w=h.x,D=h.y,C=h.z),0>l*(z*A-m*M)+c*(m*j-d*A)+y*(d*M-z*j)&&(c=t.x,l=t.y,t=t.z,0>(y=-((r=(d=s.x)-c)*c+(m=(z=s.y)-l)*l+(s=(i=s.z)-t)*t)/(r*r+m*m+s*s))?(h.x=c,h.y=l,h.z=t,s=1):1<y?(h.x=d,h.y=z,h.z=i,s=2):(c+=r*y,l+=m*y,s=t+s*y,h.x=c,h.y=l,h.z=s,s=3),t=h.x*h.x+h.y*h.y+h.z*h.z,0>S||t<S)&&(k=1&s|(2&s)<<1,S=t,w=h.x,D=h.y,C=h.z),0<S?(h.x=w,h.y=D,h.z=C,k):(0<(s=j*j+M*M+A*A)&&(s=1/Math.sqrt(s)),w=(j*=s)*(a=(a*j+e*(M*=s)+o*(A*=s))/(j*j+M*M+A*A)),D=M*a,C=A*a,h.x=w,h.y=D,h.z=C,7)},ut.vc=function(t,i,s,h,a){var e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A,w,D,C,B,q,S,k,I,T,O;e=t.x,o=t.y,r=t.z,n=i.x,p=i.y,l=i.z,c=s.x,y=s.y,f=s.z,u=h.x;var L,F,P,R=0<(g=n-e)*(I=(S=(b=h.y)-p)*(B=f-l)-(k=(v=h.z)-l)*(C=y-p))+(x=p-o)*(T=k*(D=c-n)-(q=u-n)*B)+(d=l-r)*(O=q*C-S*D)?1:-1,J=e*((m=y-o)*(w=v-r)-(j=f-r)*(A=b-o))+o*(j*(M=u-e)-(z=c-e)*w)+r*(z*A-m*M),N=e*(A*d-w*x)+o*(w*g-M*d)+r*(M*x-A*g),H=n*I+p*T+l*O,K=-1,G=0;if(P=F=L=0,0>(e*(x*j-d*m)+o*(d*z-g*j)+r*(g*m-x*z))*R){var V,E,U,W,Y,X,$,Z,Q,_,tt,it,st,ht,at,et,ot,rt,nt,pt,lt;V=t.x,E=t.y,U=t.z,W=i.x,Y=i.y,X=i.z,$=s.x;var ct,yt,ft,ut,bt=W*((ht=(Z=s.y)-Y)*(lt=(_=W-V)*ht-(tt=Y-E)*(st=$-W))-(at=(Q=s.z)-X)*(pt=(it=X-U)*st-_*at))+Y*(at*(nt=tt*at-it*ht)-st*lt)+X*(st*pt-ht*nt),vt=$*((ot=E-Z)*lt-(rt=U-Q)*pt)+Z*(rt*nt-(et=V-$)*lt)+Q*(et*pt-ot*nt),gt=-1,xt=0;if(ft=yt=ct=0,0>V*(tt*lt-it*pt)+E*(it*nt-_*lt)+U*(_*pt-tt*nt)){var dt,zt,mt,jt,Mt,At,wt,Dt,Ct,Bt,qt;if(dt=t.x,zt=t.y,mt=t.z,0>(Bt=-(Bt=(wt=(jt=i.x)-dt)*dt+(Dt=(Mt=i.y)-zt)*zt+(Ct=(At=i.z)-mt)*mt)/(wt*wt+Dt*Dt+Ct*Ct)))a.x=dt,a.y=zt,a.z=mt,qt=1;else if(1<Bt)a.x=jt,a.y=Mt,a.z=At,qt=2;else{var St,kt,It;St=dt+wt*Bt,kt=zt+Dt*Bt,It=mt+Ct*Bt,a.x=St,a.y=kt,a.z=It,qt=3}xt=qt,gt=a.x*a.x+a.y*a.y+a.z*a.z;ct=a.x,yt=a.y,ft=a.z}if(0>bt){var Tt,Ot,Lt,Ft,Pt,Rt,Jt,Nt,Ht,Kt,Gt;if(Tt=i.x,Ot=i.y,Lt=i.z,0>(Kt=-(Kt=(Jt=(Ft=s.x)-Tt)*Tt+(Nt=(Pt=s.y)-Ot)*Ot+(Ht=(Rt=s.z)-Lt)*Lt)/(Jt*Jt+Nt*Nt+Ht*Ht)))a.x=Tt,a.y=Ot,a.z=Lt,Gt=1;else if(1<Kt)a.x=Ft,a.y=Pt,a.z=Rt,Gt=2;else{var Vt,Et,Ut;Vt=Tt+Jt*Kt,Et=Ot+Nt*Kt,Ut=Lt+Ht*Kt,a.x=Vt,a.y=Et,a.z=Ut,Gt=3}var Wt=a.x*a.x+a.y*a.y+a.z*a.z;(0>gt||Wt<gt)&&(xt=Gt<<1,gt=Wt,ct=a.x,yt=a.y,ft=a.z)}if(0>vt){var Yt,Xt,$t,Zt,Qt,_t,ti,ii,si,hi,ai;if(Yt=t.x,Xt=t.y,$t=t.z,0>(hi=-(hi=(ti=(Zt=s.x)-Yt)*Yt+(ii=(Qt=s.y)-Xt)*Xt+(si=(_t=s.z)-$t)*$t)/(ti*ti+ii*ii+si*si)))a.x=Yt,a.y=Xt,a.z=$t,ai=1;else if(1<hi)a.x=Zt,a.y=Qt,a.z=_t,ai=2;else{var ei,oi,ri;ei=Yt+ti*hi,oi=Xt+ii*hi,ri=$t+si*hi,a.x=ei,a.y=oi,a.z=ri,ai=3}var ni=a.x*a.x+a.y*a.y+a.z*a.z;(0>gt||ni<gt)&&(xt=1&ai|(2&ai)<<1,gt=ni,ct=a.x,yt=a.y,ft=a.z)}if(0<gt)a.x=ct,a.y=yt,a.z=ft,ut=xt;else{var pi,li=nt*nt+pt*pt+lt*lt;0<li&&(li=1/Math.sqrt(li)),ct=(nt*=li)*(pi=(V*nt+E*(pt*=li)+U*(lt*=li))/(pi=nt*nt+pt*pt+lt*lt)),yt=pt*pi,ft=lt*pi,a.x=ct,a.y=yt,a.z=ft,ut=7}G=ut,K=a.x*a.x+a.y*a.y+a.z*a.z;L=a.x,F=a.y,P=a.z}if(0>J*R){var ci,yi,fi,ui,bi,vi,gi,xi,di,zi,mi,ji,Mi,Ai,wi,Di,Ci,Bi,qi,Si,ki;ci=t.x,yi=t.y,fi=t.z,ui=s.x,bi=s.y,vi=s.z,gi=h.x;var Ii,Ti,Oi,Li,Fi=ui*((Ai=(xi=h.y)-bi)*(ki=(zi=ui-ci)*Ai-(mi=bi-yi)*(Mi=gi-ui))-(wi=(di=h.z)-vi)*(Si=(ji=vi-fi)*Mi-zi*wi))+bi*(wi*(qi=mi*wi-ji*Ai)-Mi*ki)+vi*(Mi*Si-Ai*qi),Pi=gi*((Ci=yi-xi)*ki-(Bi=fi-di)*Si)+xi*(Bi*qi-(Di=ci-gi)*ki)+di*(Di*Si-Ci*qi),Ri=-1,Ji=0;if(Oi=Ti=Ii=0,0>ci*(mi*ki-ji*Si)+yi*(ji*qi-zi*ki)+fi*(zi*Si-mi*qi)){var Ni,Hi,Ki,Gi,Vi,Ei,Ui,Wi,Yi,Xi,$i;if(Ni=t.x,Hi=t.y,Ki=t.z,0>(Xi=-(Xi=(Ui=(Gi=s.x)-Ni)*Ni+(Wi=(Vi=s.y)-Hi)*Hi+(Yi=(Ei=s.z)-Ki)*Ki)/(Ui*Ui+Wi*Wi+Yi*Yi)))a.x=Ni,a.y=Hi,a.z=Ki,$i=1;else if(1<Xi)a.x=Gi,a.y=Vi,a.z=Ei,$i=2;else{var Zi,Qi,_i;Zi=Ni+Ui*Xi,Qi=Hi+Wi*Xi,_i=Ki+Yi*Xi,a.x=Zi,a.y=Qi,a.z=_i,$i=3}Ji=$i,Ri=a.x*a.x+a.y*a.y+a.z*a.z;Ii=a.x,Ti=a.y,Oi=a.z}if(0>Fi){var ts,is,ss,hs,as,es,os,rs,ns,ps,ls;if(ts=s.x,is=s.y,ss=s.z,0>(ps=-(ps=(os=(hs=h.x)-ts)*ts+(rs=(as=h.y)-is)*is+(ns=(es=h.z)-ss)*ss)/(os*os+rs*rs+ns*ns)))a.x=ts,a.y=is,a.z=ss,ls=1;else if(1<ps)a.x=hs,a.y=as,a.z=es,ls=2;else{var cs,ys,fs;cs=ts+os*ps,ys=is+rs*ps,fs=ss+ns*ps,a.x=cs,a.y=ys,a.z=fs,ls=3}var us=a.x*a.x+a.y*a.y+a.z*a.z;(0>Ri||us<Ri)&&(Ji=ls<<1,Ri=us,Ii=a.x,Ti=a.y,Oi=a.z)}if(0>Pi){var bs,vs,gs,xs,ds,zs,ms,js,Ms,As,ws;if(bs=t.x,vs=t.y,gs=t.z,0>(As=-(As=(ms=(xs=h.x)-bs)*bs+(js=(ds=h.y)-vs)*vs+(Ms=(zs=h.z)-gs)*gs)/(ms*ms+js*js+Ms*Ms)))a.x=bs,a.y=vs,a.z=gs,ws=1;else if(1<As)a.x=xs,a.y=ds,a.z=zs,ws=2;else{var Ds,Cs,Bs;Ds=bs+ms*As,Cs=vs+js*As,Bs=gs+Ms*As,a.x=Ds,a.y=Cs,a.z=Bs,ws=3}var qs=a.x*a.x+a.y*a.y+a.z*a.z;(0>Ri||qs<Ri)&&(Ji=1&ws|(2&ws)<<1,Ri=qs,Ii=a.x,Ti=a.y,Oi=a.z)}if(0<Ri)a.x=Ii,a.y=Ti,a.z=Oi,Li=Ji;else{var Ss,ks=qi*qi+Si*Si+ki*ki;0<ks&&(ks=1/Math.sqrt(ks)),Ii=(qi*=ks)*(Ss=(ci*qi+yi*(Si*=ks)+fi*(ki*=ks))/(Ss=qi*qi+Si*Si+ki*ki)),Ti=Si*Ss,Oi=ki*Ss,a.x=Ii,a.y=Ti,a.z=Oi,Li=7}var Is=a.x*a.x+a.y*a.y+a.z*a.z;(0>K||Is<K)&&(G=1&Li|(6&Li)<<1,K=Is,L=a.x,F=a.y,P=a.z)}if(0>N*R){var Ts,Os,Ls,Fs,Ps,Rs,Js,Ns,Hs,Ks,Gs,Vs,Es,Us,Ws,Ys,Xs,$s,Zs,Qs,_s;Ts=t.x,Os=t.y,Ls=t.z,Fs=i.x,Ps=i.y,Rs=i.z,Js=h.x;var th,ih,sh,hh,ah=Fs*((Us=(Ns=h.y)-Ps)*(_s=(Ks=Fs-Ts)*Us-(Gs=Ps-Os)*(Es=Js-Fs))-(Ws=(Hs=h.z)-Rs)*(Qs=(Vs=Rs-Ls)*Es-Ks*Ws))+Ps*(Ws*(Zs=Gs*Ws-Vs*Us)-Es*_s)+Rs*(Es*Qs-Us*Zs),eh=Js*((Xs=Os-Ns)*_s-($s=Ls-Hs)*Qs)+Ns*($s*Zs-(Ys=Ts-Js)*_s)+Hs*(Ys*Qs-Xs*Zs),oh=-1,rh=0;if(sh=ih=th=0,0>Ts*(Gs*_s-Vs*Qs)+Os*(Vs*Zs-Ks*_s)+Ls*(Ks*Qs-Gs*Zs)){var nh,ph,lh,ch,yh,fh,uh,bh,vh,gh,xh;if(nh=t.x,ph=t.y,lh=t.z,0>(gh=-(gh=(uh=(ch=i.x)-nh)*nh+(bh=(yh=i.y)-ph)*ph+(vh=(fh=i.z)-lh)*lh)/(uh*uh+bh*bh+vh*vh)))a.x=nh,a.y=ph,a.z=lh,xh=1;else if(1<gh)a.x=ch,a.y=yh,a.z=fh,xh=2;else{var dh,zh,mh;dh=nh+uh*gh,zh=ph+bh*gh,mh=lh+vh*gh,a.x=dh,a.y=zh,a.z=mh,xh=3}rh=xh,oh=a.x*a.x+a.y*a.y+a.z*a.z;th=a.x,ih=a.y,sh=a.z}if(0>ah){var jh,Mh,Ah,wh,Dh,Ch,Bh,qh,Sh,kh,Ih;if(jh=i.x,Mh=i.y,Ah=i.z,0>(kh=-(kh=(Bh=(wh=h.x)-jh)*jh+(qh=(Dh=h.y)-Mh)*Mh+(Sh=(Ch=h.z)-Ah)*Ah)/(Bh*Bh+qh*qh+Sh*Sh)))a.x=jh,a.y=Mh,a.z=Ah,Ih=1;else if(1<kh)a.x=wh,a.y=Dh,a.z=Ch,Ih=2;else{var Th,Oh,Lh;Th=jh+Bh*kh,Oh=Mh+qh*kh,Lh=Ah+Sh*kh,a.x=Th,a.y=Oh,a.z=Lh,Ih=3}var Fh=a.x*a.x+a.y*a.y+a.z*a.z;(0>oh||Fh<oh)&&(rh=Ih<<1,oh=Fh,th=a.x,ih=a.y,sh=a.z)}if(0>eh){var Ph,Rh,Jh,Nh,Hh,Kh,Gh,Vh,Eh,Uh,Wh;if(Ph=t.x,Rh=t.y,Jh=t.z,0>(Uh=-(Uh=(Gh=(Nh=h.x)-Ph)*Ph+(Vh=(Hh=h.y)-Rh)*Rh+(Eh=(Kh=h.z)-Jh)*Jh)/(Gh*Gh+Vh*Vh+Eh*Eh)))a.x=Ph,a.y=Rh,a.z=Jh,Wh=1;else if(1<Uh)a.x=Nh,a.y=Hh,a.z=Kh,Wh=2;else{var Yh,Xh,$h;Yh=Ph+Gh*Uh,Xh=Rh+Vh*Uh,$h=Jh+Eh*Uh,a.x=Yh,a.y=Xh,a.z=$h,Wh=3}var Zh=a.x*a.x+a.y*a.y+a.z*a.z;(0>oh||Zh<oh)&&(rh=1&Wh|(2&Wh)<<1,oh=Zh,th=a.x,ih=a.y,sh=a.z)}if(0<oh)a.x=th,a.y=ih,a.z=sh,hh=rh;else{var Qh,_h=Zs*Zs+Qs*Qs+_s*_s;0<_h&&(_h=1/Math.sqrt(_h)),th=(Zs*=_h)*(Qh=(Ts*Zs+Os*(Qs*=_h)+Ls*(_s*=_h))/(Qh=Zs*Zs+Qs*Qs+_s*_s)),ih=Qs*Qh,sh=_s*Qh,a.x=th,a.y=ih,a.z=sh,hh=7}var ta=a.x*a.x+a.y*a.y+a.z*a.z;(0>K||ta<K)&&(G=3&hh|(4&hh)<<1,K=ta,L=a.x,F=a.y,P=a.z)}if(0>H*R){var ia,sa,ha,aa,ea,oa,ra,na,pa,la,ca,ya,fa,ua,ba,va,ga,xa,da,za,ma;ia=i.x,sa=i.y,ha=i.z,aa=s.x,ea=s.y,oa=s.z,ra=h.x;var ja,Ma,Aa,wa,Da=aa*((ua=(na=h.y)-ea)*(ma=(la=aa-ia)*ua-(ca=ea-sa)*(fa=ra-aa))-(ba=(pa=h.z)-oa)*(za=(ya=oa-ha)*fa-la*ba))+ea*(ba*(da=ca*ba-ya*ua)-fa*ma)+oa*(fa*za-ua*da),Ca=ra*((ga=sa-na)*ma-(xa=ha-pa)*za)+na*(xa*da-(va=ia-ra)*ma)+pa*(va*za-ga*da),Ba=-1,qa=0;if(Aa=Ma=ja=0,0>ia*(ca*ma-ya*za)+sa*(ya*da-la*ma)+ha*(la*za-ca*da)){var Sa,ka,Ia,Ta,Oa,La,Fa,Pa,Ra,Ja,Na;if(Sa=i.x,ka=i.y,Ia=i.z,0>(Ja=-(Ja=(Fa=(Ta=s.x)-Sa)*Sa+(Pa=(Oa=s.y)-ka)*ka+(Ra=(La=s.z)-Ia)*Ia)/(Fa*Fa+Pa*Pa+Ra*Ra)))a.x=Sa,a.y=ka,a.z=Ia,Na=1;else if(1<Ja)a.x=Ta,a.y=Oa,a.z=La,Na=2;else{var Ha,Ka,Ga;Ha=Sa+Fa*Ja,Ka=ka+Pa*Ja,Ga=Ia+Ra*Ja,a.x=Ha,a.y=Ka,a.z=Ga,Na=3}qa=Na,Ba=a.x*a.x+a.y*a.y+a.z*a.z;ja=a.x,Ma=a.y,Aa=a.z}if(0>Da){var Va,Ea,Ua,Wa,Ya,Xa,$a,Za,Qa,_a,te;if(Va=s.x,Ea=s.y,Ua=s.z,0>(_a=-(_a=($a=(Wa=h.x)-Va)*Va+(Za=(Ya=h.y)-Ea)*Ea+(Qa=(Xa=h.z)-Ua)*Ua)/($a*$a+Za*Za+Qa*Qa)))a.x=Va,a.y=Ea,a.z=Ua,te=1;else if(1<_a)a.x=Wa,a.y=Ya,a.z=Xa,te=2;else{var ie,se,he;ie=Va+$a*_a,se=Ea+Za*_a,he=Ua+Qa*_a,a.x=ie,a.y=se,a.z=he,te=3}var ae=a.x*a.x+a.y*a.y+a.z*a.z;(0>Ba||ae<Ba)&&(qa=te<<1,Ba=ae,ja=a.x,Ma=a.y,Aa=a.z)}if(0>Ca){var ee,oe,re,ne,pe,le,ce,ye,fe,ue,be;if(ee=i.x,oe=i.y,re=i.z,0>(ue=-(ue=(ce=(ne=h.x)-ee)*ee+(ye=(pe=h.y)-oe)*oe+(fe=(le=h.z)-re)*re)/(ce*ce+ye*ye+fe*fe)))a.x=ee,a.y=oe,a.z=re,be=1;else if(1<ue)a.x=ne,a.y=pe,a.z=le,be=2;else{var ve,ge,xe;ve=ee+ce*ue,ge=oe+ye*ue,xe=re+fe*ue,a.x=ve,a.y=ge,a.z=xe,be=3}var de=a.x*a.x+a.y*a.y+a.z*a.z;(0>Ba||de<Ba)&&(qa=1&be|(2&be)<<1,Ba=de,ja=a.x,Ma=a.y,Aa=a.z)}if(0<Ba)a.x=ja,a.y=Ma,a.z=Aa,wa=qa;else{var ze,me=da*da+za*za+ma*ma;0<me&&(me=1/Math.sqrt(me)),ja=(da*=me)*(ze=(ia*da+sa*(za*=me)+ha*(ma*=me))/(ze=da*da+za*za+ma*ma)),Ma=za*ze,Aa=ma*ze,a.x=ja,a.y=Ma,a.z=Aa,wa=7}var je=a.x*a.x+a.y*a.y+a.z*a.z;(0>K||je<K)&&(G=wa<<1,K=je,L=a.x,F=a.y,P=a.z)}return 0<K?(a.x=L,a.y=F,a.z=P,G):(a.Z(),15)},ft.prototype={za:function(t,i,s,h,a,e,o,r,n){return this.e00=t,this.e01=i,this.e02=s,this.e10=h,this.e11=a,this.e12=e,this.e20=o,this.e21=r,this.e22=n,this},Wf:function(){return this.e00=1,this.e10=this.e02=this.e01=0,this.e11=1,this.e21=this.e20=this.e12=0,this.e22=1,this},Ac:function(t){return new ft(this.e00+t.e00,this.e01+t.e01,this.e02+t.e02,this.e10+t.e10,this.e11+t.e11,this.e12+t.e12,this.e20+t.e20,this.e21+t.e21,this.e22+t.e22)},Ug:function(t){return new ft(this.e00-t.e00,this.e01-t.e01,this.e02-t.e02,this.e10-t.e10,this.e11-t.e11,this.e12-t.e12,this.e20-t.e20,this.e21-t.e21,this.e22-t.e22)},Mf:function(t){return new ft(this.e00*t,this.e01*t,this.e02*t,this.e10*t,this.e11*t,this.e12*t,this.e20*t,this.e21*t,this.e22*t)},re:function(t){return new ft(this.e00*t.e00+this.e01*t.e10+this.e02*t.e20,this.e00*t.e01+this.e01*t.e11+this.e02*t.e21,this.e00*t.e02+this.e01*t.e12+this.e02*t.e22,this.e10*t.e00+this.e11*t.e10+this.e12*t.e20,this.e10*t.e01+this.e11*t.e11+this.e12*t.e21,this.e10*t.e02+this.e11*t.e12+this.e12*t.e22,this.e20*t.e00+this.e21*t.e10+this.e22*t.e20,this.e20*t.e01+this.e21*t.e11+this.e22*t.e21,this.e20*t.e02+this.e21*t.e12+this.e22*t.e22)},Ec:function(t){var i=this.e01+t.e01,s=this.e02+t.e02,h=this.e10+t.e10,a=this.e11+t.e11,e=this.e12+t.e12,o=this.e20+t.e20,r=this.e21+t.e21,n=this.e22+t.e22;return this.e00+=t.e00,this.e01=i,this.e02=s,this.e10=h,this.e11=a,this.e12=e,this.e20=o,this.e21=r,this.e22=n,this},Vg:function(t){var i=this.e01-t.e01,s=this.e02-t.e02,h=this.e10-t.e10,a=this.e11-t.e11,e=this.e12-t.e12,o=this.e20-t.e20,r=this.e21-t.e21,n=this.e22-t.e22;return this.e00=this.e00-t.e00,this.e01=i,this.e02=s,this.e10=h,this.e11=a,this.e12=e,this.e20=o,this.e21=r,this.e22=n,this},Tg:function(t){var i=this.e01*t,s=this.e02*t,h=this.e10*t,a=this.e11*t,e=this.e12*t,o=this.e20*t,r=this.e21*t,n=this.e22*t;return this.e00=this.e00*t,this.e01=i,this.e02=s,this.e10=h,this.e11=a,this.e12=e,this.e20=o,this.e21=r,this.e22=n,this},se:function(t){var i=this.e00*t.e01+this.e01*t.e11+this.e02*t.e21,s=this.e00*t.e02+this.e01*t.e12+this.e02*t.e22,h=this.e10*t.e00+this.e11*t.e10+this.e12*t.e20,a=this.e10*t.e01+this.e11*t.e11+this.e12*t.e21,e=this.e10*t.e02+this.e11*t.e12+this.e12*t.e22,o=this.e20*t.e00+this.e21*t.e10+this.e22*t.e20,r=this.e20*t.e01+this.e21*t.e11+this.e22*t.e21,n=this.e20*t.e02+this.e21*t.e12+this.e22*t.e22;return this.e00=this.e00*t.e00+this.e01*t.e10+this.e02*t.e20,this.e01=i,this.e02=s,this.e10=h,this.e11=a,this.e12=e,this.e20=o,this.e21=r,this.e22=n,this},Ue:function(t,i,s){return new ft(this.e00*t,this.e01*t,this.e02*t,this.e10*i,this.e11*i,this.e12*i,this.e20*s,this.e21*s,this.e22*s)},Lc:function(t,i,s){return new ft(this.e00*t,this.e01*i,this.e02*s,this.e10*t,this.e11*i,this.e12*s,this.e20*t,this.e21*i,this.e22*s)},te:function(t,i,s,h){var a=Math.sin(t),e=Math.cos(t),o=1-e;t=i*i*o+e;var r=i*s*o-h*a,n=i*h*o+s*a,p=s*i*o+h*a,l=s*s*o+e,c=s*h*o-i*a,y=h*i*o-s*a;return i=h*s*o+i*a,h=h*h*o+e,new ft(t*this.e00+r*this.e10+n*this.e20,t*this.e01+r*this.e11+n*this.e21,t*this.e02+r*this.e12+n*this.e22,p*this.e00+l*this.e10+c*this.e20,p*this.e01+l*this.e11+c*this.e21,p*this.e02+l*this.e12+c*this.e22,y*this.e00+i*this.e10+h*this.e20,y*this.e01+i*this.e11+h*this.e21,y*this.e02+i*this.e12+h*this.e22)},Jc:function(t,i,s,h){var a=Math.sin(t),e=Math.cos(t),o=1-e;t=i*i*o+e;var r=i*s*o-h*a,n=i*h*o+s*a,p=s*i*o+h*a,l=s*s*o+e,c=s*h*o-i*a,y=h*i*o-s*a;return i=h*s*o+i*a,h=h*h*o+e,new ft(this.e00*t+this.e01*p+this.e02*y,this.e00*r+this.e01*l+this.e02*i,this.e00*n+this.e01*c+this.e02*h,this.e10*t+this.e11*p+this.e12*y,this.e10*r+this.e11*l+this.e12*i,this.e10*n+this.e11*c+this.e12*h,this.e20*t+this.e21*p+this.e22*y,this.e20*r+this.e21*l+this.e22*i,this.e20*n+this.e21*c+this.e22*h)},Ve:function(t,i,s){var h=this.e01*t,a=this.e02*t,e=this.e10*i,o=this.e11*i;i=this.e12*i;var r=this.e20*s,n=this.e21*s;return s=this.e22*s,this.e00=this.e00*t,this.e01=h,this.e02=a,this.e10=e,this.e11=o,this.e12=i,this.e20=r,this.e21=n,this.e22=s,this},fd:function(t,i,s){var h=this.e01*i,a=this.e02*s,e=this.e10*t,o=this.e11*i,r=this.e12*s,n=this.e20*t;return i=this.e21*i,s=this.e22*s,this.e00=this.e00*t,this.e01=h,this.e02=a,this.e10=e,this.e11=o,this.e12=r,this.e20=n,this.e21=i,this.e22=s,this},ue:function(t,i,s,h){var a=Math.sin(t),e=Math.cos(t),o=1-e;t=i*i*o+e;var r=i*s*o-h*a,n=i*h*o+s*a,p=s*i*o+h*a,l=s*s*o+e,c=s*h*o-i*a,y=h*i*o-s*a;return i=h*s*o+i*a,o=h*h*o+e,h=t*this.e01+r*this.e11+n*this.e21,s=t*this.e02+r*this.e12+n*this.e22,a=p*this.e00+l*this.e10+c*this.e20,e=p*this.e01+l*this.e11+c*this.e21,p=p*this.e02+l*this.e12+c*this.e22,l=y*this.e00+i*this.e10+o*this.e20,c=y*this.e01+i*this.e11+o*this.e21,y=y*this.e02+i*this.e12+o*this.e22,this.e00=t*this.e00+r*this.e10+n*this.e20,this.e01=h,this.e02=s,this.e10=a,this.e11=e,this.e12=p,this.e20=l,this.e21=c,this.e22=y,this},Kc:function(t,i,s,h){var a=Math.sin(t);t=i*i*(f=1-(y=Math.cos(t)))+y;var e=i*s*f-h*a,o=i*h*f+s*a,r=s*i*f+h*a,n=s*s*f+y,p=s*h*f-i*a,l=h*i*f-s*a;i=h*s*f+i*a;var c=h*h*f+y;h=this.e00*e+this.e01*n+this.e02*i,s=this.e00*o+this.e01*p+this.e02*c;a=this.e10*t+this.e11*r+this.e12*l;var y=this.e10*e+this.e11*n+this.e12*i,f=this.e10*o+this.e11*p+this.e12*c,u=this.e20*t+this.e21*r+this.e22*l;e=this.e20*e+this.e21*n+this.e22*i,o=this.e20*o+this.e21*p+this.e22*c;return this.e00=this.e00*t+this.e01*r+this.e02*l,this.e01=h,this.e02=s,this.e10=a,this.e11=y,this.e12=f,this.e20=u,this.e21=e,this.e22=o,this},ji:function(){return new ft(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},ki:function(){var t=this.e10,i=this.e20,s=this.e01,h=this.e11,a=this.e21,e=this.e02,o=this.e12,r=this.e22;return this.e00=this.e00,this.e01=t,this.e02=i,this.e10=s,this.e11=h,this.e12=a,this.e20=e,this.e21=o,this.e22=r,this},Yd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Xg:function(){return this.e00+this.e11+this.e22},pe:function(){var t=this.e11*this.e22-this.e12*this.e21,i=this.e10*this.e22-this.e12*this.e20,s=this.e10*this.e21-this.e11*this.e20,h=this.e01*this.e22-this.e02*this.e21,a=this.e00*this.e22-this.e02*this.e20,e=this.e00*this.e21-this.e01*this.e20,o=this.e01*this.e12-this.e02*this.e11,r=this.e00*this.e12-this.e02*this.e10,n=this.e00*this.e11-this.e01*this.e10,p=this.e00*t-this.e01*i+this.e02*s;return p&&(p=1/p),new ft(t*p,-h*p,o*p,-i*p,a*p,-r*p,s*p,-e*p,n*p)},qe:function(){var t=this.e11*this.e22-this.e12*this.e21,i=this.e10*this.e22-this.e12*this.e20,s=this.e10*this.e21-this.e11*this.e20,h=this.e01*this.e22-this.e02*this.e21,a=this.e00*this.e22-this.e02*this.e20,e=this.e00*this.e21-this.e01*this.e20,o=this.e01*this.e12-this.e02*this.e11,r=this.e00*this.e12-this.e02*this.e10,n=this.e00*this.e11-this.e01*this.e10,p=this.e00*t-this.e01*i+this.e02*s;return p&&(p=1/p),this.e00=t*p,this.e01=-h*p,this.e02=o*p,this.e10=-i*p,this.e11=a*p,this.e12=-r*p,this.e20=s*p,this.e21=-e*p,this.e22=n*p,this},Wg:function(t){return null==t&&(t=!1),t?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},de:function(t){return this.e00=t.e00,this.e01=t.e01,this.e02=t.e02,this.e10=t.e10,this.e11=t.e11,this.e12=t.e12,this.e20=t.e20,this.e21=t.e21,this.e22=t.e22,this},clone:function(){return new ft(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},Hb:function(t){var i=t.x,s=t.y,h=t.z,a=t.w,e=2*h;t=i*(n=2*i);var o=s*(p=2*s),r=(h=h*e,i*p),n=(s=s*e,i=i*e,a*n),p=a*p;a*=e;return this.e00=1-o-h,this.e01=r-a,this.e02=i+p,this.e10=r+a,this.e11=1-t-h,this.e12=s-n,this.e20=i-p,this.e21=s+n,this.e22=1-t-o,this},Pj:function(){var t=new pt,i=this.e00,s=this.e11,h=this.e22,a=i+s+h;return 0<a?(i=Math.sqrt(a+1),t.w=.5*i,i=.5/i,t.x=(this.e21-this.e12)*i,t.y=(this.e02-this.e20)*i,t.z=(this.e10-this.e01)*i):i>s?i>h?(i=Math.sqrt(i-s-h+1),t.x=.5*i,i=.5/i,t.y=(this.e01+this.e10)*i,t.z=(this.e02+this.e20)*i,t.w=(this.e21-this.e12)*i):(i=Math.sqrt(h-i-s+1),t.z=.5*i,i=.5/i,t.x=(this.e02+this.e20)*i,t.y=(this.e12+this.e21)*i,t.w=(this.e10-this.e01)*i):s>h?(i=Math.sqrt(s-h-i+1),t.y=.5*i,i=.5/i,t.x=(this.e01+this.e10)*i,t.z=(this.e12+this.e21)*i,t.w=(this.e02-this.e20)*i):(i=Math.sqrt(h-i-s+1),t.z=.5*i,i=.5/i,t.x=(this.e02+this.e20)*i,t.y=(this.e12+this.e21)*i,t.w=(this.e10-this.e01)*i),t},cb:function(t){var i=Math.sin(t.x),s=Math.sin(t.y),h=Math.sin(t.z),a=Math.cos(t.x),e=Math.cos(t.y);return t=Math.cos(t.z),this.e00=e*t,this.e01=-e*h,this.e02=s,this.e10=a*h+t*i*s,this.e11=a*t-i*s*h,this.e12=-e*i,this.e20=i*h-a*t*s,this.e21=t*i+a*s*h,this.e22=a*e,this},li:function(){var t=this.e02;return-1>=t?new dt(.5*(t=Math.atan2(this.e21,this.e11)),-1.570796326794895,.5*-t):1<=t?new dt(.5*(t=Math.atan2(this.e21,this.e11)),1.570796326794895,.5*t):new dt(Math.atan2(-this.e12,this.e22),Math.asin(t),Math.atan2(-this.e01,this.e00))},uc:function(t){return 0==t?new dt(this.e00,this.e01,this.e02):1==t?new dt(this.e10,this.e11,this.e12):2==t?new dt(this.e20,this.e21,this.e22):null},pc:function(t){return 0==t?new dt(this.e00,this.e10,this.e20):1==t?new dt(this.e01,this.e11,this.e21):2==t?new dt(this.e02,this.e12,this.e22):null},vc:function(t,i){0==t?i.za(this.e00,this.e01,this.e02):1==t?i.za(this.e10,this.e11,this.e12):2==t?i.za(this.e20,this.e21,this.e22):i.Z()},qc:function(t,i){0==t?i.za(this.e00,this.e10,this.e20):1==t?i.za(this.e01,this.e11,this.e21):2==t?i.za(this.e02,this.e12,this.e22):i.Z()},Mb:function(t,i,s){var h=t.y,a=t.z,e=i.x,o=i.y;i=i.z;var r=s.x,n=s.y;return s=s.z,this.e00=t.x,this.e01=h,this.e02=a,this.e10=e,this.e11=o,this.e12=i,this.e20=r,this.e21=n,this.e22=s,this},ua:function(t,i,s){var h=i.x,a=s.x,e=t.y,o=i.y,r=s.y,n=t.z;return i=i.z,s=s.z,this.e00=t.x,this.e01=h,this.e02=a,this.e10=e,this.e11=o,this.e12=r,this.e20=n,this.e21=i,this.e22=s,this},toString:function(){return"Mat3["+(0<this.e00?(1e7*this.e00+.5|0)/1e7:(1e7*this.e00-.5|0)/1e7)+", "+(0<this.e01?(1e7*this.e01+.5|0)/1e7:(1e7*this.e01-.5|0)/1e7)+", "+(0<this.e02?(1e7*this.e02+.5|0)/1e7:(1e7*this.e02-.5|0)/1e7)+",\n     "+(0<this.e10?(1e7*this.e10+.5|0)/1e7:(1e7*this.e10-.5|0)/1e7)+", "+(0<this.e11?(1e7*this.e11+.5|0)/1e7:(1e7*this.e11-.5|0)/1e7)+", "+(0<this.e12?(1e7*this.e12+.5|0)/1e7:(1e7*this.e12-.5|0)/1e7)+",\n     "+(0<this.e20?(1e7*this.e20+.5|0)/1e7:(1e7*this.e20-.5|0)/1e7)+", "+(0<this.e21?(1e7*this.e21+.5|0)/1e7:(1e7*this.e21-.5|0)/1e7)+", "+(0<this.e22?(1e7*this.e22+.5|0)/1e7:(1e7*this.e22-.5|0)/1e7)+"]"}},yt.prototype={za:function(t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b){return this.e00=t,this.e01=i,this.e02=s,this.e03=h,this.e10=a,this.e11=e,this.e12=o,this.e13=r,this.e20=n,this.e21=p,this.e22=l,this.e23=c,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},Wf:function(){return this.e00=1,this.e10=this.e03=this.e02=this.e01=0,this.e11=1,this.e21=this.e20=this.e13=this.e12=0,this.e22=1,this.e32=this.e31=this.e30=this.e23=0,this.e33=1,this},pc:function(t){return new yt(this.e00+t.e00,this.e01+t.e01,this.e02+t.e02,this.e03+t.e03,this.e10+t.e10,this.e11+t.e11,this.e12+t.e12,this.e13+t.e13,this.e20+t.e20,this.e21+t.e21,this.e22+t.e22,this.e23+t.e23,this.e30+t.e30,this.e31+t.e31,this.e32+t.e32,this.e33+t.e33)},Mf:function(t){return new yt(this.e00-t.e00,this.e01-t.e01,this.e02-t.e02,this.e03-t.e03,this.e10-t.e10,this.e11-t.e11,this.e12-t.e12,this.e13-t.e13,this.e20-t.e20,this.e21-t.e21,this.e22-t.e22,this.e23-t.e23,this.e30-t.e30,this.e31-t.e31,this.e32-t.e32,this.e33-t.e33)},Ue:function(t){return new yt(this.e00*t,this.e01*t,this.e02*t,this.e03*t,this.e10*t,this.e11*t,this.e12*t,this.e13*t,this.e20*t,this.e21*t,this.e22*t,this.e23*t,this.e30*t,this.e31*t,this.e32*t,this.e33*t)},Yd:function(t){return new yt(this.e00*t.e00+this.e01*t.e10+this.e02*t.e20+this.e03*t.e30,this.e00*t.e01+this.e01*t.e11+this.e02*t.e21+this.e03*t.e31,this.e00*t.e02+this.e01*t.e12+this.e02*t.e22+this.e03*t.e32,this.e00*t.e03+this.e01*t.e13+this.e02*t.e23+this.e03*t.e33,this.e10*t.e00+this.e11*t.e10+this.e12*t.e20+this.e13*t.e30,this.e10*t.e01+this.e11*t.e11+this.e12*t.e21+this.e13*t.e31,this.e10*t.e02+this.e11*t.e12+this.e12*t.e22+this.e13*t.e32,this.e10*t.e03+this.e11*t.e13+this.e12*t.e23+this.e13*t.e33,this.e20*t.e00+this.e21*t.e10+this.e22*t.e20+this.e23*t.e30,this.e20*t.e01+this.e21*t.e11+this.e22*t.e21+this.e23*t.e31,this.e20*t.e02+this.e21*t.e12+this.e22*t.e22+this.e23*t.e32,this.e20*t.e03+this.e21*t.e13+this.e22*t.e23+this.e23*t.e33,this.e30*t.e00+this.e31*t.e10+this.e32*t.e20+this.e33*t.e30,this.e30*t.e01+this.e31*t.e11+this.e32*t.e21+this.e33*t.e31,this.e30*t.e02+this.e31*t.e12+this.e32*t.e22+this.e33*t.e32,this.e30*t.e03+this.e31*t.e13+this.e32*t.e23+this.e33*t.e33)},qc:function(t){var i=this.e01+t.e01,s=this.e02+t.e02,h=this.e03+t.e03,a=this.e10+t.e10,e=this.e11+t.e11,o=this.e12+t.e12,r=this.e13+t.e13,n=this.e20+t.e20,p=this.e21+t.e21,l=this.e22+t.e22,c=this.e23+t.e23,y=this.e30+t.e30,f=this.e31+t.e31,u=this.e32+t.e32,b=this.e33+t.e33;return this.e00+=t.e00,this.e01=i,this.e02=s,this.e03=h,this.e10=a,this.e11=e,this.e12=o,this.e13=r,this.e20=n,this.e21=p,this.e22=l,this.e23=c,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},Tg:function(t){var i=this.e01-t.e01,s=this.e02-t.e02,h=this.e03-t.e03,a=this.e10-t.e10,e=this.e11-t.e11,o=this.e12-t.e12,r=this.e13-t.e13,n=this.e20-t.e20,p=this.e21-t.e21,l=this.e22-t.e22,c=this.e23-t.e23,y=this.e30-t.e30,f=this.e31-t.e31,u=this.e32-t.e32,b=this.e33-t.e33;return this.e00=this.e00-t.e00,this.e01=i,this.e02=s,this.e03=h,this.e10=a,this.e11=e,this.e12=o,this.e13=r,this.e20=n,this.e21=p,this.e22=l,this.e23=c,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},Ve:function(t){var i=this.e01*t,s=this.e02*t,h=this.e03*t,a=this.e10*t,e=this.e11*t,o=this.e12*t,r=this.e13*t,n=this.e20*t,p=this.e21*t,l=this.e22*t,c=this.e23*t,y=this.e30*t,f=this.e31*t,u=this.e32*t,b=this.e33*t;return this.e00=this.e00*t,this.e01=i,this.e02=s,this.e03=h,this.e10=a,this.e11=e,this.e12=o,this.e13=r,this.e20=n,this.e21=p,this.e22=l,this.e23=c,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},pe:function(t){var i=this.e00*t.e01+this.e01*t.e11+this.e02*t.e21+this.e03*t.e31,s=this.e00*t.e02+this.e01*t.e12+this.e02*t.e22+this.e03*t.e32,h=this.e00*t.e03+this.e01*t.e13+this.e02*t.e23+this.e03*t.e33,a=this.e10*t.e00+this.e11*t.e10+this.e12*t.e20+this.e13*t.e30,e=this.e10*t.e01+this.e11*t.e11+this.e12*t.e21+this.e13*t.e31,o=this.e10*t.e02+this.e11*t.e12+this.e12*t.e22+this.e13*t.e32,r=this.e10*t.e03+this.e11*t.e13+this.e12*t.e23+this.e13*t.e33,n=this.e20*t.e00+this.e21*t.e10+this.e22*t.e20+this.e23*t.e30,p=this.e20*t.e01+this.e21*t.e11+this.e22*t.e21+this.e23*t.e31,l=this.e20*t.e02+this.e21*t.e12+this.e22*t.e22+this.e23*t.e32,c=this.e20*t.e03+this.e21*t.e13+this.e22*t.e23+this.e23*t.e33,y=this.e30*t.e00+this.e31*t.e10+this.e32*t.e20+this.e33*t.e30,f=this.e30*t.e01+this.e31*t.e11+this.e32*t.e21+this.e33*t.e31,u=this.e30*t.e02+this.e31*t.e12+this.e32*t.e22+this.e33*t.e32,b=this.e30*t.e03+this.e31*t.e13+this.e32*t.e23+this.e33*t.e33;return this.e00=this.e00*t.e00+this.e01*t.e10+this.e02*t.e20+this.e03*t.e30,this.e01=i,this.e02=s,this.e03=h,this.e10=a,this.e11=e,this.e12=o,this.e13=r,this.e20=n,this.e21=p,this.e22=l,this.e23=c,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},te:function(t,i,s){return new yt(this.e00*t,this.e01*t,this.e02*t,this.e03*t,this.e10*i,this.e11*i,this.e12*i,this.e13*i,this.e20*s,this.e21*s,this.e22*s,this.e23*s,this.e30,this.e31,this.e32,this.e33)},Ac:function(t,i,s){return new yt(this.e00*t,this.e01*i,this.e02*s,this.e03,this.e10*t,this.e11*i,this.e12*s,this.e13,this.e20*t,this.e21*i,this.e22*s,this.e23,this.e30*t,this.e31*i,this.e32*s,this.e33)},re:function(t,i,s,h){var a=Math.sin(t),e=Math.cos(t),o=1-e;t=i*i*o+e;var r=i*s*o-h*a,n=i*h*o+s*a,p=s*i*o+h*a,l=s*s*o+e,c=s*h*o-i*a,y=h*i*o-s*a;return i=h*s*o+i*a,h=h*h*o+e,new yt(t*this.e00+r*this.e10+n*this.e20,t*this.e01+r*this.e11+n*this.e21,t*this.e02+r*this.e12+n*this.e22,t*this.e03+r*this.e13+n*this.e23,p*this.e00+l*this.e10+c*this.e20,p*this.e01+l*this.e11+c*this.e21,p*this.e02+l*this.e12+c*this.e22,p*this.e03+l*this.e13+c*this.e23,y*this.e00+i*this.e10+h*this.e20,y*this.e01+i*this.e11+h*this.e21,y*this.e02+i*this.e12+h*this.e22,y*this.e03+i*this.e13+h*this.e23,this.e30,this.e31,this.e32,this.e33)},uc:function(t,i,s,h){var a=Math.sin(t),e=Math.cos(t),o=1-e;t=i*i*o+e;var r=i*s*o-h*a,n=i*h*o+s*a,p=s*i*o+h*a,l=s*s*o+e,c=s*h*o-i*a,y=h*i*o-s*a;return i=h*s*o+i*a,h=h*h*o+e,new yt(this.e00*t+this.e01*p+this.e02*y,this.e00*r+this.e01*l+this.e02*i,this.e00*n+this.e01*c+this.e02*h,this.e03,this.e10*t+this.e11*p+this.e12*y,this.e10*r+this.e11*l+this.e12*i,this.e10*n+this.e11*c+this.e12*h,this.e13,this.e20*t+this.e21*p+this.e22*y,this.e20*r+this.e21*l+this.e22*i,this.e20*n+this.e21*c+this.e22*h,this.e23,this.e30*t+this.e31*p+this.e32*y,this.e30*r+this.e31*l+this.e32*i,this.e30*n+this.e31*c+this.e32*h,this.e33)},ki:function(t,i,s){return new yt(this.e00+t*this.e30,this.e01+t*this.e31,this.e02+t*this.e32,this.e03+t*this.e33,this.e10+i*this.e30,this.e11+i*this.e31,this.e12+i*this.e32,this.e13+i*this.e33,this.e20+s*this.e30,this.e21+s*this.e31,this.e22+s*this.e32,this.e23+s*this.e33,this.e30,this.e31,this.e32,this.e33)},ua:function(t,i,s){return new yt(this.e00,this.e01,this.e02,this.e00*t+this.e01*i+this.e02*s+this.e03,this.e10,this.e11,this.e12,this.e10*t+this.e11*i+this.e12*s+this.e13,this.e20,this.e21,this.e22,this.e20*t+this.e21*i+this.e22*s+this.e23,this.e30,this.e31,this.e32,this.e30*t+this.e31*i+this.e32*s+this.e33)},ue:function(t,i,s){var h=this.e01*t,a=this.e02*t,e=this.e03*t,o=this.e10*i,r=this.e11*i,n=this.e12*i;i=this.e13*i;var p=this.e20*s,l=this.e21*s,c=this.e22*s;s=this.e23*s;var y=this.e30,f=this.e31,u=this.e32,b=this.e33;return this.e00=this.e00*t,this.e01=h,this.e02=a,this.e03=e,this.e10=o,this.e11=r,this.e12=n,this.e13=i,this.e20=p,this.e21=l,this.e22=c,this.e23=s,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},Ec:function(t,i,s){var h=this.e01*i,a=this.e02*s,e=this.e03,o=this.e10*t,r=this.e11*i,n=this.e12*s,p=this.e13,l=this.e20*t,c=this.e21*i,y=this.e22*s,f=this.e23,u=this.e30*t;i=this.e31*i,s=this.e32*s;var b=this.e33;return this.e00=this.e00*t,this.e01=h,this.e02=a,this.e03=e,this.e10=o,this.e11=r,this.e12=n,this.e13=p,this.e20=l,this.e21=c,this.e22=y,this.e23=f,this.e30=u,this.e31=i,this.e32=s,this.e33=b,this},se:function(t,i,s,h){var a=Math.sin(t),e=i*s*(u=1-(f=Math.cos(t)))-h*a,o=i*h*u+s*a,r=s*i*u+h*a,n=s*s*u+f,p=s*h*u-i*a,l=h*i*u-s*a,c=h*s*u+i*a,y=h*h*u+f;h=(t=i*i*u+f)*this.e01+e*this.e11+o*this.e21,i=t*this.e02+e*this.e12+o*this.e22,s=t*this.e03+e*this.e13+o*this.e23;a=r*this.e00+n*this.e10+p*this.e20;var f=r*this.e01+n*this.e11+p*this.e21,u=r*this.e02+n*this.e12+p*this.e22,b=(r=r*this.e03+n*this.e13+p*this.e23,n=l*this.e00+c*this.e10+y*this.e20,p=l*this.e01+c*this.e11+y*this.e21,l*this.e02+c*this.e12+y*this.e22),v=(l=l*this.e03+c*this.e13+y*this.e23,c=this.e30,y=this.e31,this.e32),g=this.e33;return this.e00=t*this.e00+e*this.e10+o*this.e20,this.e01=h,this.e02=i,this.e03=s,this.e10=a,this.e11=f,this.e12=u,this.e13=r,this.e20=n,this.e21=p,this.e22=b,this.e23=l,this.e30=c,this.e31=y,this.e32=v,this.e33=g,this},vc:function(t,i,s,h){var a=Math.sin(t);t=i*i*(f=1-(y=Math.cos(t)))+y;var e=i*s*f-h*a,o=i*h*f+s*a,r=s*i*f+h*a,n=s*s*f+y,p=s*h*f-i*a,l=h*i*f-s*a;i=h*s*f+i*a;var c=h*h*f+y;h=this.e00*e+this.e01*n+this.e02*i,s=this.e00*o+this.e01*p+this.e02*c;a=this.e03;var y=this.e10*t+this.e11*r+this.e12*l,f=this.e10*e+this.e11*n+this.e12*i,u=this.e10*o+this.e11*p+this.e12*c,b=this.e13,v=this.e20*t+this.e21*r+this.e22*l,g=this.e20*e+this.e21*n+this.e22*i,x=this.e20*o+this.e21*p+this.e22*c,d=this.e23,z=this.e30*t+this.e31*r+this.e32*l;e=this.e30*e+this.e31*n+this.e32*i,o=this.e30*o+this.e31*p+this.e32*c,p=this.e33;return this.e00=this.e00*t+this.e01*r+this.e02*l,this.e01=h,this.e02=s,this.e03=a,this.e10=y,this.e11=f,this.e12=u,this.e13=b,this.e20=v,this.e21=g,this.e22=x,this.e23=d,this.e30=z,this.e31=e,this.e32=o,this.e33=p,this},li:function(t,i,s){var h=this.e01+t*this.e31,a=this.e02+t*this.e32,e=this.e03+t*this.e33,o=this.e10+i*this.e30,r=this.e11+i*this.e31,n=this.e12+i*this.e32;i=this.e13+i*this.e33;var p=this.e20+s*this.e30,l=this.e21+s*this.e31,c=this.e22+s*this.e32;s=this.e23+s*this.e33;var y=this.e30,f=this.e31,u=this.e32,b=this.e33;return this.e00+=t*this.e30,this.e01=h,this.e02=a,this.e03=e,this.e10=o,this.e11=r,this.e12=n,this.e13=i,this.e20=p,this.e21=l,this.e22=c,this.e23=s,this.e30=y,this.e31=f,this.e32=u,this.e33=b,this},cb:function(t,i,s){var h=this.e01,a=this.e02,e=this.e00*t+this.e01*i+this.e02*s+this.e03,o=this.e10,r=this.e11,n=this.e12,p=this.e10*t+this.e11*i+this.e12*s+this.e13,l=this.e20,c=this.e21,y=this.e22,f=this.e20*t+this.e21*i+this.e22*s+this.e23,u=this.e30,b=this.e31,v=this.e32;return t=this.e30*t+this.e31*i+this.e32*s+this.e33,this.e00=this.e00,this.e01=h,this.e02=a,this.e03=e,this.e10=o,this.e11=r,this.e12=n,this.e13=p,this.e20=l,this.e21=c,this.e22=y,this.e23=f,this.e30=u,this.e31=b,this.e32=v,this.e33=t,this},Wg:function(){return new yt(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Xg:function(){var t=this.e10,i=this.e20,s=this.e30,h=this.e01,a=this.e11,e=this.e21,o=this.e31,r=this.e02,n=this.e12,p=this.e22,l=this.e32,c=this.e03,y=this.e13,f=this.e23,u=this.e33;return this.e00=this.e00,this.e01=t,this.e02=i,this.e03=s,this.e10=h,this.e11=a,this.e12=e,this.e13=o,this.e20=r,this.e21=n,this.e22=p,this.e23=l,this.e30=c,this.e31=y,this.e32=f,this.e33=u,this},Jc:function(){var t=this.e20*this.e31-this.e21*this.e30,i=this.e20*this.e32-this.e22*this.e30,s=this.e20*this.e33-this.e23*this.e30,h=this.e21*this.e32-this.e22*this.e31,a=this.e21*this.e33-this.e23*this.e31,e=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*e-this.e12*a+this.e13*h)-this.e01*(this.e10*e-this.e12*s+this.e13*i)+this.e02*(this.e10*a-this.e11*s+this.e13*t)-this.e03*(this.e10*h-this.e11*i+this.e12*t)},Vg:function(){return this.e00+this.e11+this.e22+this.e33},Lc:function(){var t=this.e00*this.e11-this.e01*this.e10,i=this.e00*this.e12-this.e02*this.e10,s=this.e00*this.e13-this.e03*this.e10,h=this.e01*this.e12-this.e02*this.e11,a=this.e01*this.e13-this.e03*this.e11,e=this.e02*this.e13-this.e03*this.e12,o=this.e20*this.e31-this.e21*this.e30,r=this.e20*this.e32-this.e22*this.e30,n=this.e20*this.e33-this.e23*this.e30,p=this.e21*this.e32-this.e22*this.e31,l=this.e21*this.e33-this.e23*this.e31,c=this.e22*this.e33-this.e23*this.e32,y=this.e11*c-this.e12*l+this.e13*p,f=this.e10*c-this.e12*n+this.e13*r,u=this.e10*l-this.e11*n+this.e13*o,b=this.e10*p-this.e11*r+this.e12*o,v=this.e01*c-this.e02*l+this.e03*p,g=(c=this.e00*c-this.e02*n+this.e03*r,n=this.e00*l-this.e01*n+this.e03*o,o=this.e00*p-this.e01*r+this.e02*o,r=this.e31*e-this.e32*a+this.e33*h,p=this.e30*e-this.e32*s+this.e33*i,l=this.e30*a-this.e31*s+this.e33*t,this.e30*h-this.e31*i+this.e32*t),x=this.e21*e-this.e22*a+this.e23*h;e=this.e20*e-this.e22*s+this.e23*i,s=this.e20*a-this.e21*s+this.e23*t,t=this.e20*h-this.e21*i+this.e22*t;return(i=this.e00*y-this.e01*f+this.e02*u-this.e03*b)&&(i=1/i),new yt(y*i,-v*i,r*i,-x*i,-f*i,c*i,-p*i,e*i,u*i,-n*i,l*i,-s*i,-b*i,o*i,-g*i,t*i)},fd:function(){var t=this.e00*this.e11-this.e01*this.e10,i=this.e00*this.e12-this.e02*this.e10,s=this.e00*this.e13-this.e03*this.e10,h=this.e01*this.e12-this.e02*this.e11,a=this.e01*this.e13-this.e03*this.e11,e=this.e02*this.e13-this.e03*this.e12,o=this.e20*this.e31-this.e21*this.e30,r=this.e20*this.e32-this.e22*this.e30,n=this.e20*this.e33-this.e23*this.e30,p=this.e21*this.e32-this.e22*this.e31,l=this.e21*this.e33-this.e23*this.e31,c=this.e22*this.e33-this.e23*this.e32,y=this.e11*c-this.e12*l+this.e13*p,f=this.e10*c-this.e12*n+this.e13*r,u=this.e10*l-this.e11*n+this.e13*o,b=this.e10*p-this.e11*r+this.e12*o,v=this.e01*c-this.e02*l+this.e03*p,g=(c=this.e00*c-this.e02*n+this.e03*r,n=this.e00*l-this.e01*n+this.e03*o,o=this.e00*p-this.e01*r+this.e02*o,r=this.e31*e-this.e32*a+this.e33*h,p=this.e30*e-this.e32*s+this.e33*i,l=this.e30*a-this.e31*s+this.e33*t,this.e30*h-this.e31*i+this.e32*t),x=this.e21*e-this.e22*a+this.e23*h;e=this.e20*e-this.e22*s+this.e23*i,s=this.e20*a-this.e21*s+this.e23*t,t=this.e20*h-this.e21*i+this.e22*t;return(i=this.e00*y-this.e01*f+this.e02*u-this.e03*b)&&(i=1/i),this.e00=y*i,this.e01=-v*i,this.e02=r*i,this.e03=-x*i,this.e10=-f*i,this.e11=c*i,this.e12=-p*i,this.e13=e*i,this.e20=u*i,this.e21=-n*i,this.e22=l*i,this.e23=-s*i,this.e30=-b*i,this.e31=o*i,this.e32=-g*i,this.e33=t*i,this},Mb:function(t,i,s,h,a,e,o,r,n){h=t-h,a=i-a,e=s-e,h*=l=1/Math.sqrt(h*h+a*a+e*e);var p=r*(e*=l)-n*(a*=l);n=n*h-o*e,o=o*a-r*h,r=a*(o*=l=1/Math.sqrt(p*p+n*n+o*o))-e*(n*=l);var l=e*(p*=l)-h*o,c=h*n-a*p;return this.e00=p,this.e01=n,this.e02=o,this.e03=-(p*t+n*i+o*s),this.e10=r,this.e11=l,this.e12=c,this.e13=-(r*t+l*i+c*s),this.e20=h,this.e21=a,this.e22=e,this.e23=-(h*t+a*i+e*s),this.e32=this.e31=this.e30=0,this.e33=1,this},qe:function(t,i,s,h){return t=1/Math.tan(.5*t),h/=s-h,this.e00=t/i,this.e10=this.e03=this.e02=this.e01=0,this.e11=t,this.e21=this.e20=this.e13=this.e12=0,this.e22=h,this.e23=s*h,this.e31=this.e30=0,this.e32=-1,this.e33=0,this},ji:function(t,i,s,h){return h=1/(s-h),this.e00=2/t,this.e10=this.e03=this.e02=this.e01=0,this.e11=2/i,this.e21=this.e20=this.e13=this.e12=0,this.e22=h,this.e23=s*h,this.e32=this.e31=this.e30=0,this.e33=1,this},Ug:function(t){return null==t&&(t=!1),t?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},de:function(t){return this.e00=t.e00,this.e01=t.e01,this.e02=t.e02,this.e03=t.e03,this.e10=t.e10,this.e11=t.e11,this.e12=t.e12,this.e13=t.e13,this.e20=t.e20,this.e21=t.e21,this.e22=t.e22,this.e23=t.e23,this.e30=t.e30,this.e31=t.e31,this.e32=t.e32,this.e33=t.e33,this},Kc:function(t){var i=t.e01,s=t.e02,h=t.e10,a=t.e11,e=t.e12,o=t.e20,r=t.e21,n=t.e22;return this.e00=t.e00,this.e01=i,this.e02=s,this.e03=0,this.e10=h,this.e11=a,this.e12=e,this.e13=0,this.e20=o,this.e21=r,this.e22=n,this.e32=this.e31=this.e30=this.e23=0,this.e33=1,this},Hb:function(t){return this.e00=t.o,this.e01=t.f,this.e02=t.h,this.e10=t.i,this.e11=t.m,this.e12=t.j,this.e20=t.l,this.e21=t.g,this.e22=t.s,this.e03=t.v,this.e13=t.A,this.e23=t.B,this.e32=this.e31=this.e30=0,this.e33=1,this},clone:function(){return new yt(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1e7*this.e00+.5|0)/1e7:(1e7*this.e00-.5|0)/1e7)+", "+(0<this.e01?(1e7*this.e01+.5|0)/1e7:(1e7*this.e01-.5|0)/1e7)+", "+(0<this.e02?(1e7*this.e02+.5|0)/1e7:(1e7*this.e02-.5|0)/1e7)+", "+(0<this.e03?(1e7*this.e03+.5|0)/1e7:(1e7*this.e03-.5|0)/1e7)+",\n    "+(0<this.e10?(1e7*this.e10+.5|0)/1e7:(1e7*this.e10-.5|0)/1e7)+", "+(0<this.e11?(1e7*this.e11+.5|0)/1e7:(1e7*this.e11-.5|0)/1e7)+", "+(0<this.e12?(1e7*this.e12+.5|0)/1e7:(1e7*this.e12-.5|0)/1e7)+", "+(0<this.e13?(1e7*this.e13+.5|0)/1e7:(1e7*this.e13-.5|0)/1e7)+",\n    "+(0<this.e20?(1e7*this.e20+.5|0)/1e7:(1e7*this.e20-.5|0)/1e7)+", "+(0<this.e21?(1e7*this.e21+.5|0)/1e7:(1e7*this.e21-.5|0)/1e7)+", "+(0<this.e22?(1e7*this.e22+.5|0)/1e7:(1e7*this.e22-.5|0)/1e7)+", "+(0<this.e23?(1e7*this.e23+.5|0)/1e7:(1e7*this.e23-.5|0)/1e7)+",\n    "+(0<this.e30?(1e7*this.e30+.5|0)/1e7:(1e7*this.e30-.5|0)/1e7)+", "+(0<this.e31?(1e7*this.e31+.5|0)/1e7:(1e7*this.e31-.5|0)/1e7)+", "+(0<this.e32?(1e7*this.e32+.5|0)/1e7:(1e7*this.e32-.5|0)/1e7)+", "+(0<this.e33?(1e7*this.e33+.5|0)/1e7:(1e7*this.e33-.5|0)/1e7)+"]"}},ct.abs=function(t){return 0<t?t:-t},ct.sin=function(t){return Math.sin(t)},ct.cos=function(t){return Math.cos(t)},ct.tan=function(t){return Math.tan(t)},ct.asin=function(t){return Math.asin(t)},ct.acos=function(t){return Math.acos(t)},ct.atan=function(t){return Math.atan(t)},ct.fd=function(t){return-1>=t?-1.570796326794895:1<=t?1.570796326794895:Math.asin(t)},ct.Lc=function(t){return-1>=t?3.14159265358979:1<=t?0:Math.acos(t)},ct.atan2=function(t,i){return Math.atan2(t,i)},ct.sqrt=function(t){return Math.sqrt(t)},ct.Hb=function(t,i,s){return t<i?i:t>s?s:t},ct.Ac=function(){return Math.random()},ct.Ec=function(t,i){return t+Math.random()*(i-t)},ct.Kc=function(t,i){return new dt(t+Math.random()*(i-t),t+Math.random()*(i-t),t+Math.random()*(i-t))},ct.Jc=function(){return new dt(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1)},lt.prototype={Ac:function(){return 0==this.c?new dt:this.b[--this.c]},qc:function(){return 0==this.eb?new ft:this.bb[--this.eb]},uc:function(){return 0==this.dg?new yt:this.Lf[--this.dg]},vc:function(){return 0==this.ee?new pt:this.Wd[--this.ee]},ua:function(t,i,s,h){if(null!=t){if(t.Z(),this.c==this.b.length){for(var a=Array(this.c<<1),e=0,o=this.c;e<o;){var r=e++;a[r]=this.b[r],this.b[r]=null}this.b=a}this.b[this.c++]=t}if(null!=i){if(i.e00=1,i.e01=0,i.e02=0,i.e10=0,i.e11=1,i.e12=0,i.e20=0,i.e21=0,i.e22=1,this.eb==this.bb.length){for(t=Array(this.eb<<1),a=0,e=this.eb;a<e;)t[o=a++]=this.bb[o],this.bb[o]=null;this.bb=t}this.bb[this.eb++]=i}if(null!=s){if(s.e00=1,s.e01=0,s.e02=0,s.e03=0,s.e10=0,s.e11=1,s.e12=0,s.e13=0,s.e20=0,s.e21=0,s.e22=1,s.e23=0,s.e30=0,s.e31=0,s.e32=0,s.e33=1,this.dg==this.Lf.length){for(i=Array(this.dg<<1),t=0,a=this.dg;t<a;)i[e=t++]=this.Lf[e],this.Lf[e]=null;this.Lf=i}this.Lf[this.dg++]=s}if(null!=h){if(h.x=0,h.y=0,h.z=0,h.w=1,this.ee==this.Wd.length){for(s=Array(this.ee<<1),i=0,t=this.ee;i<t;)s[a=i++]=this.Wd[a],this.Wd[a]=null;this.Wd=s}this.Wd[this.ee++]=h}},pc:function(t){if(t.Z(),this.c==this.b.length){for(var i=Array(this.c<<1),s=0,h=this.c;s<h;){var a=s++;i[a]=this.b[a],this.b[a]=null}this.b=i}this.b[this.c++]=t},cb:function(t){if(t.e00=1,t.e01=0,t.e02=0,t.e10=0,t.e11=1,t.e12=0,t.e20=0,t.e21=0,t.e22=1,this.eb==this.bb.length){for(var i=Array(this.eb<<1),s=0,h=this.eb;s<h;){var a=s++;i[a]=this.bb[a],this.bb[a]=null}this.bb=i}this.bb[this.eb++]=t},Hb:function(t){if(t.e00=1,t.e01=0,t.e02=0,t.e03=0,t.e10=0,t.e11=1,t.e12=0,t.e13=0,t.e20=0,t.e21=0,t.e22=1,t.e23=0,t.e30=0,t.e31=0,t.e32=0,t.e33=1,this.dg==this.Lf.length){for(var i=Array(this.dg<<1),s=0,h=this.dg;s<h;){var a=s++;i[a]=this.Lf[a],this.Lf[a]=null}this.Lf=i}this.Lf[this.dg++]=t},Mb:function(t){if(t.x=0,t.y=0,t.z=0,t.w=1,this.ee==this.Wd.length){for(var i=Array(this.ee<<1),s=0,h=this.ee;s<h;){var a=s++;i[a]=this.Wd[a],this.Wd[a]=null}this.Wd=i}this.Wd[this.ee++]=t}},pt.prototype={Wf:function(){return this.z=this.y=this.x=0,this.w=1,this},za:function(t,i,s,h){return this.x=t,this.y=i,this.z=s,this.w=h,this},ua:function(t){return new pt(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},Ec:function(t){return new pt(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},vc:function(t){return new pt(this.x*t,this.y*t,this.z*t,this.w*t)},cb:function(t){var i=this.y+t.y,s=this.z+t.z,h=this.w+t.w;return this.x+=t.x,this.y=i,this.z=s,this.w=h,this},Jc:function(t){var i=this.y-t.y,s=this.z-t.z,h=this.w-t.w;return this.x=this.x-t.x,this.y=i,this.z=s,this.w=h,this},Ac:function(t){var i=this.y*t,s=this.z*t,h=this.w*t;return this.x=this.x*t,this.y=i,this.z=s,this.w=h,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},pc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Hb:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},uc:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0<t&&(t=1/t),new pt(this.x*t,this.y*t,this.z*t,this.w*t)},qc:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<t&&(t=1/t);var i=this.y*t,s=this.z*t,h=this.w*t;return this.x=this.x*t,this.y=i,this.z=s,this.w=h,this},Kc:function(t,i){var s=t.x,h=t.y;t=t.z;var a,e=i.x,o=i.y;return i=i.z,this.w=Math.sqrt(.5*(s*e+h*o+t*i+1)),this.w?(a=.5/this.w,this.x=(h*i-t*o)*a,this.y=(t*e-s*i)*a,this.z=(s*o-h*e)*a,this):(i=t*t,(e=s*s)<(o=h*h)?e<i?(a=1/Math.sqrt(o+i),this.x=0,this.y=t*a,this.z=-h*a):(a=1/Math.sqrt(e+o),this.z=0,this.x=h*a,this.y=-s*a):o<i?(a=1/Math.sqrt(i+e),this.y=0,this.z=s*a,this.x=-t*a):(a=1/Math.sqrt(e+o),this.z=0,this.x=h*a,this.y=-s*a),this)},Lc:function(t,i){var s,h,a;if(0>(e=this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w)?(e=-e,s=-t.x,h=-t.y,a=-t.z,t=-t.w):(s=t.x,h=t.y,a=t.z,t=t.w),.999999<e)return s=new pt(this.x+(s-this.x)*i,this.y+(h-this.y)*i,this.z+(a-this.z)*i,this.w+(t-this.w)*i),0<(h=Math.sqrt(s.x*s.x+s.y*s.y+s.z*s.z+s.w*s.w))&&(h=1/h),a=s.y*h,t=s.z*h,e=s.w*h,s.x=s.x*h,s.y=a,s.z=t,s.w=e,s;i*=Math.acos(e),s-=this.x*e,h-=this.y*e,a-=this.z*e,t-=this.w*e;var e=1/Math.sqrt(s*s+h*h+a*a+t*t),o=Math.sin(i);return i=Math.cos(i),new pt(this.x*i+s*e*o,this.y*i+h*e*o,this.z*i+a*e*o,this.w*i+t*e*o)},de:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},clone:function(){return new pt(this.x,this.y,this.z,this.w)},Mb:function(t){var i=t.e00,s=t.e11,h=t.e22,a=i+s+h;return 0<a?(i=Math.sqrt(a+1),this.w=.5*i,i=.5/i,this.x=(t.e21-t.e12)*i,this.y=(t.e02-t.e20)*i,this.z=(t.e10-t.e01)*i):i>s?i>h?(i=Math.sqrt(i-s-h+1),this.x=.5*i,i=.5/i,this.y=(t.e01+t.e10)*i,this.z=(t.e02+t.e20)*i,this.w=(t.e21-t.e12)*i):(i=Math.sqrt(h-i-s+1),this.z=.5*i,i=.5/i,this.x=(t.e02+t.e20)*i,this.y=(t.e12+t.e21)*i,this.w=(t.e10-t.e01)*i):s>h?(i=Math.sqrt(s-h-i+1),this.y=.5*i,i=.5/i,this.x=(t.e01+t.e10)*i,this.z=(t.e12+t.e21)*i,this.w=(t.e02-t.e20)*i):(i=Math.sqrt(h-i-s+1),this.z=.5*i,i=.5/i,this.x=(t.e02+t.e20)*i,this.y=(t.e12+t.e21)*i,this.w=(t.e10-t.e01)*i),this},fd:function(){var t=new ft,i=this.x,s=this.y,h=2*(o=this.z),a=i*(n=2*i),e=s*(p=2*s),o=o*h,r=i*p,n=(s=s*h,i=i*h,(l=this.w)*n),p=l*p,l=l*h;return t.e00=1-e-o,t.e01=r-l,t.e02=i+p,t.e10=r+l,t.e11=1-a-o,t.e12=s-n,t.e20=i-p,t.e21=s+n,t.e22=1-a-e,t},toString:function(){return"Quat["+(0<this.x?(1e7*this.x+.5|0)/1e7:(1e7*this.x-.5|0)/1e7)+" i,\n    "+(0<this.y?(1e7*this.y+.5|0)/1e7:(1e7*this.y-.5|0)/1e7)+" j,\n    "+(0<this.z?(1e7*this.z+.5|0)/1e7:(1e7*this.z-.5|0)/1e7)+" k,\n    "+(0<this.w?(1e7*this.w+.5|0)/1e7:(1e7*this.w-.5|0)/1e7)+"]"}},nt.prototype={hn:function(){if(null!=this.Lh){var t=this.Td,i=this.Ym;if(this.Lh.hm(i,this.Zb.Kb,this.$b.Kb,this.Zb.a,this.$b.a,this.$i),(this.Td=0<i.numPoints)?(this.Ja.Wm(i.normal),this.Ye.Hc=i.mm()>gt.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?gt.alternativeContactPositionCorrectionAlgorithm:gt.defaultContactPositionCorrectionAlgorithm,i.incremental?this.Zl.On(i,this.C.a,this.D.a):this.Zl.eo(i,this.C.a,this.D.a)):this.Ja.Xe(),this.Td&&!t){i=this.Zb.yd;var s=this.$b.yd;i==s&&(s=null),null!=i&&i.beginContact(this),null!=s&&s.beginContact(this)}!this.Td&&t&&((t=this.Zb.yd)==(i=this.$b.yd)&&(i=null),null!=t&&t.endContact(this),null!=i&&i.endContact(this)),this.Td&&((t=this.Zb.yd)==(i=this.$b.yd)&&(i=null),null!=t&&t.preSolve(this),null!=i&&i.preSolve(this))}},Vk:function(){var t=this.Zb.yd,i=this.$b.yd;t==i&&(i=null),null!=t&&t.postSolve(this),null!=i&&i.postSolve(this)},pc:function(){return this.Zb},qc:function(){return this.$b},sk:function(){return this.Td},cb:function(){return this.Ja},ua:function(){return this.Ye},Mb:function(){return this.ia},Hb:function(){return this.M}},rt.prototype={ua:function(){return this.Zd},Hb:function(){return this.Qc},Mb:function(){return this.ia},cb:function(){return this.M}},ot.prototype={pn:function(){for(var t=this.jc.ce;null!=t;){for(var i=t.M;;){var s;if(t.mh.Cc<t.nh.Cc?(s=t.mh.userData,t=t.nh.userData):(s=t.nh.userData,t=t.mh.userData),!this.Gm(s,t))break;var h,a=s.Yb,e=t.Yb;h=a.Ae<e.Ae?a.Ob:e.Ob;a=s.Cc,e=t.Cc;for(var o=!1;null!=h;){var r=h.M;if((h=h.Zd).Zb.Cc==a&&h.$b.Cc==e){o=h.Zj=!0;break}h=r}o||(null!=(a=this.lg)?(this.lg=a.M,a.M=null):a=new nt,null==this.zd?this.zd=a:(this.ye.M=a,a.ia=this.ye),this.ye=a,a.Zj=!0,e=this.Xm.Jb[s.Kb.Lb][t.Kb.Lb],a.Zb=s,a.$b=t,a.C=s.Yb,a.D=t.Yb,a.Td=!1,null==a.C.Ob?a.C.Ob=a.rb:(a.C.kc.M=a.rb,a.rb.ia=a.C.kc),a.C.kc=a.rb,null==a.D.Ob?a.D.Ob=a.sb:(a.D.kc.M=a.sb,a.sb.ia=a.D.kc),a.D.kc=a.sb,a.C.Ae++,a.D.Ae++,a.rb.Qc=a.D,a.sb.Qc=a.C,a.rb.Zd=a,a.sb.Zd=a,a.Lh=e,(a=a.Ye).Zb=s,a.$b=t,a.C=a.Zb.Yb,a.D=a.$b.Yb,a.pj=a.C.a,a.qj=a.D.a,this.Bi++);break}t=i}},qn:function(){for(var t=this.jc.Yj,i=this.zd;null!=i;){for(var s=i.M;;){if(i.Zj){i.Zj=!1,i.ik=!1;break}if(!t){var h=i.ia,a=i.M;null!=h&&(h.M=a),null!=a&&(a.ia=h),i==this.zd&&(this.zd=this.zd.M),i==this.ye&&(this.ye=this.ye.ia),i.M=null,i.ia=null,i.Td&&((h=i.Zb.yd)==(a=i.$b.yd)&&(a=null),null!=h&&h.endContact(i),null!=a&&a.endContact(i)),h=i.rb.ia,a=i.rb.M,null!=h&&(h.M=a),null!=a&&(a.ia=h),i.rb==i.C.Ob&&(i.C.Ob=i.C.Ob.M),i.rb==i.C.kc&&(i.C.kc=i.C.kc.ia),i.rb.M=null,i.rb.ia=null,h=i.sb.ia,a=i.sb.M,null!=h&&(h.M=a),null!=a&&(a.ia=h),i.sb==i.D.Ob&&(i.D.Ob=i.D.Ob.M),i.sb==i.D.kc&&(i.D.kc=i.D.kc.ia),i.sb.M=null,i.sb.ia=null,i.C.Ae--,i.D.Ae--,i.rb.Qc=null,i.sb.Qc=null,i.rb.Zd=null,i.sb.Zd=null,i.Zb=null,i.$b=null,i.C=null,i.D=null,i.Td=!1,i.$i.Xe(),i.Ja.Xe(),i.Lh=null,(h=i.Ye).Zb=null,h.$b=null,h.C=null,h.D=null,h.pj=null,h.qj=null,i.M=this.lg,this.lg=i,this.Bi--;break}h=i.Zb,a=i.$b;var e=h.Yb,o=!(o=a.Yb).Gb&&1!=o.Lb;if((e.Gb||1==e.Lb)&&!o){i.ik=!0;break}e=h.u,o=a.u;var r=h.tb,n=a.tb;if(!(r.J<n.G&&r.G>n.J&&r.K<n.H&&r.H>n.K&&r.L<n.I&&r.I>n.L&&this.Gm(h,a))){h=i.ia,a=i.M,null!=h&&(h.M=a),null!=a&&(a.ia=h),i==this.zd&&(this.zd=this.zd.M),i==this.ye&&(this.ye=this.ye.ia),i.M=null,i.ia=null,i.Td&&((h=i.Zb.yd)==(a=i.$b.yd)&&(a=null),null!=h&&h.endContact(i),null!=a&&a.endContact(i)),h=i.rb.ia,a=i.rb.M,null!=h&&(h.M=a),null!=a&&(a.ia=h),i.rb==i.C.Ob&&(i.C.Ob=i.C.Ob.M),i.rb==i.C.kc&&(i.C.kc=i.C.kc.ia),i.rb.M=null,i.rb.ia=null,h=i.sb.ia,a=i.sb.M,null!=h&&(h.M=a),null!=a&&(a.ia=h),i.sb==i.D.Ob&&(i.D.Ob=i.D.Ob.M),i.sb==i.D.kc&&(i.D.kc=i.D.kc.ia),i.sb.M=null,i.sb.ia=null,i.C.Ae--,i.D.Ae--,i.rb.Qc=null,i.sb.Qc=null,i.rb.Zd=null,i.sb.Zd=null,i.Zb=null,i.$b=null,i.C=null,i.D=null,i.Td=!1,i.$i.Xe(),i.Ja.Xe(),i.Lh=null,(h=i.Ye).Zb=null,h.$b=null,h.C=null,h.D=null,h.pj=null,h.qj=null,i.M=this.lg,this.lg=i,this.Bi--;break}i.ik=!(e.ma<o.ja&&e.ja>o.ma&&e.na<o.ka&&e.ka>o.na&&e.oa<o.la&&e.la>o.oa);break}i=s}},Gm:function(t,i){var s=t.Yb,h=i.Yb;if(s==h||0!=s.Lb&&0!=h.Lb||!(t.Tj&i.Uj&&i.Tj&t.Uj))return!1;for(s.kh<h.kh?(t=s.ze,s=h):t=h.ze;null!=t;){if(t.Qc==s&&!t.Pk.Ak)return!1;t=t.M}return!0},gl:function(){this.jc.Ii(),this.pn(),this.qn()},Vk:function(){for(var t=this.zd;null!=t;){var i=t.M;t.Td&&t.Vk(),t=i}},cb:function(){return this.Bi},ua:function(){return this.zd}},et.prototype={Xe:function(){for(;0<this.Hf;)this.Jf[--this.Hf]=null;for(;0<this.If;)this.Kf[--this.If]=null;for(;0<this.wh;)this.Eh[--this.wh]=null;for(;0<this.vh;)this.Dh[--this.vh]=null},zk:function(t){if(this.Hf==this.Jf.length){for(var i=Array(this.Hf<<1),s=0,h=this.Hf;s<h;){var a=s++;i[a]=this.Jf[a],this.Jf[a]=null}this.Jf=i}t.Nf=!0,this.Jf[this.Hf++]=t},Ol:function(t,i){if(this.If==this.Kf.length){for(var s=Array(this.If<<1),h=0,a=this.If;h<a;){var e=h++;s[e]=this.Kf[e],this.Kf[e]=null}this.Kf=s}if(t.Nf=!0,this.Kf[this.If++]=t,i==W.SPLIT_IMPULSE){if(this.wh==this.Eh.length){for(s=Array(this.wh<<1),h=0,a=this.wh;h<a;)s[e=h++]=this.Eh[e],this.Eh[e]=null;this.Eh=s}this.Eh[this.wh++]=t}if(i==W.NGS){if(this.vh==this.Dh.length){for(i=Array(this.vh<<1),s=0,h=this.vh;s<h;)i[a=s++]=this.Dh[a],this.Dh[a]=null;this.Dh=i}this.Dh[this.vh++]=t}},gn:function(t,i){t=t.dt;var s=i.pa,h=i.a;if(s.v=h.v,s.A=h.A,s.B=h.B,s.o=h.o,s.f=h.f,s.h=h.h,s.i=h.i,s.m=h.m,s.j=h.j,s.l=h.l,s.g=h.g,s.s=h.s,i.Bk&&i.gb*i.gb+i.hb*i.hb+i.ib*i.ib<gt.sleepingVelocityThreshold*gt.sleepingVelocityThreshold&&i.kb*i.kb+i.lb*i.lb+i.mb*i.mb<gt.sleepingAngularVelocityThreshold*gt.sleepingAngularVelocityThreshold?(i.yb+=t,i.yb>gt.sleepingTimeThreshold&&(i.Gb=!0,i.yb=0)):i.yb=0,!i.Gb){if(0==i.Lb){s=1/(1+(s=t*i.$j)+(h=s*s)*(.5+.16666666666666666*s+.041666666666666664*h)),h=1/(1+(h=t*i.Qj)+(p=h*h)*(.5+.16666666666666666*h+.041666666666666664*p));var a,e,o,r,n,p=this.nm*i.eh;a=this.om*i.eh,e=this.pm*i.eh,p+=i.Mh*i.$a,a+=i.Nh*i.$a,e+=i.Oh*i.$a,r=i.P*i.vf+i.R*i.wf+i.S*i.xf,n=i.T*i.vf+i.U*i.wf+i.V*i.xf,o=i.W*i.vf+i.X*i.wf+i.Y*i.xf,i.gb+=p*t,i.hb+=a*t,i.ib+=e*t,i.gb*=s,i.hb*=s,i.ib*=s,i.kb+=r*t,i.lb+=n*t,i.mb+=o*t,i.kb*=h,i.lb*=h,i.mb*=h}for(i.Wl(t),t=i.Dc;null!=t;){var l,c,y,f,u;s=t.M,h=t.pa,a=t.ha,e=(p=i.pa).o*a.o+p.f*a.i+p.h*a.l,o=p.o*a.f+p.f*a.m+p.h*a.g,r=p.o*a.h+p.f*a.j+p.h*a.s,n=p.i*a.o+p.m*a.i+p.j*a.l,l=p.i*a.f+p.m*a.m+p.j*a.g,c=p.i*a.h+p.m*a.j+p.j*a.s,y=p.l*a.o+p.g*a.i+p.s*a.l,f=p.l*a.f+p.g*a.m+p.s*a.g,u=p.l*a.h+p.g*a.j+p.s*a.s,h.o=e,h.f=o,h.h=r,h.i=n,h.m=l,h.j=c,h.l=y,h.g=f,h.s=u,e=p.o*a.v+p.f*a.A+p.h*a.B,o=p.i*a.v+p.m*a.A+p.j*a.B,a=p.l*a.v+p.g*a.A+p.s*a.B,h.v=e,h.A=o,h.B=a,h.v+=p.v,h.A+=p.A,h.B+=p.B,h=t.a,a=t.ha,e=(p=i.a).o*a.o+p.f*a.i+p.h*a.l,o=p.o*a.f+p.f*a.m+p.h*a.g,r=p.o*a.h+p.f*a.j+p.h*a.s,n=p.i*a.o+p.m*a.i+p.j*a.l,l=p.i*a.f+p.m*a.m+p.j*a.g,c=p.i*a.h+p.m*a.j+p.j*a.s,y=p.l*a.o+p.g*a.i+p.s*a.l,f=p.l*a.f+p.g*a.m+p.s*a.g,u=p.l*a.h+p.g*a.j+p.s*a.s,h.o=e,h.f=o,h.h=r,h.i=n,h.m=l,h.j=c,h.l=y,h.g=f,h.s=u,e=p.o*a.v+p.f*a.A+p.h*a.B,o=p.i*a.v+p.m*a.A+p.j*a.B,a=p.l*a.v+p.g*a.A+p.s*a.B,h.v=e,h.A=o,h.B=a,h.v+=p.v,h.A+=p.A,h.B+=p.B,t.Kb.Nb(t.u,t.pa),h=t.u.ma,p=t.u.na,a=t.u.oa,e=t.u.ja,o=t.u.ka,r=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=h<t.u.ma?h:t.u.ma,t.u.na=p<t.u.na?p:t.u.na,t.u.oa=a<t.u.oa?a:t.u.oa,t.u.ja=e>t.u.ja?e:t.u.ja,t.u.ka=o>t.u.ka?o:t.u.ka,t.u.la=r>t.u.la?r:t.u.la,null!=t.tb&&(h=t.a.v-t.pa.v,p=t.a.A-t.pa.A,a=t.a.B-t.pa.B,(e=t.rc).x=h,e.y=p,e.z=a,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=s}}},fn:function(t,i,s){for(var h=t.dt,a=!0,e=0,o=this.Hf;e<o;){var r=e++,n=this.Jf[r],p=n.pa,l=n.a;if(p.v=l.v,p.A=l.A,p.B=l.B,p.o=l.o,p.f=l.f,p.h=l.h,p.i=l.i,p.m=l.m,p.j=l.j,p.l=l.l,p.g=l.g,p.s=l.s,n.Gb=!1,n.Bk&&n.gb*n.gb+n.hb*n.hb+n.ib*n.ib<gt.sleepingVelocityThreshold*gt.sleepingVelocityThreshold&&n.kb*n.kb+n.lb*n.lb+n.mb*n.mb<gt.sleepingAngularVelocityThreshold*gt.sleepingAngularVelocityThreshold?n.yb+=h:n.yb=0,n.yb<gt.sleepingTimeThreshold&&(a=!1),0==n.Lb){var c,y,f,u,b,v,g=h*n.$j,x=g*g,d=1/(1+g+x*(.5+.16666666666666666*g+.041666666666666664*x)),z=h*n.Qj,m=z*z,j=1/(1+z+m*(.5+.16666666666666666*z+.041666666666666664*m));c=this.nm*n.eh,y=this.om*n.eh,f=this.pm*n.eh,c+=n.Mh*n.$a,y+=n.Nh*n.$a,f+=n.Oh*n.$a,u=n.P*n.vf+n.R*n.wf+n.S*n.xf,b=n.T*n.vf+n.U*n.wf+n.V*n.xf,v=n.W*n.vf+n.X*n.wf+n.Y*n.xf,n.gb+=c*h,n.hb+=y*h,n.ib+=f*h,n.gb*=d,n.hb*=d,n.ib*=d,n.kb+=u*h,n.lb+=b*h,n.mb+=v*h,n.kb*=j,n.lb*=j,n.mb*=j}}if(a)for(var M=0,A=this.Hf;M<A;){var w=M++,D=this.Jf[w];D.Gb=!0,D.yb=0}else{for(var C=0,B=this.If;C<B;){var q=C++;this.Kf[q].xh(t)}for(var S=0,k=this.If;S<k;){var I=S++;this.Kf[I].Gh(t)}for(var T=0;T<i;){T++;for(var O=0,L=this.If;O<L;){var F=O++;this.Kf[F].Ch()}}for(var P=0,R=this.If;P<R;){var J=P++;this.Kf[J].Li(t)}for(var N=0,H=this.Hf;N<H;){var K=N++;this.Jf[K].Wl(h)}for(var G=0,V=this.wh;G<V;){var E=G++;this.Eh[E].Pg(t)}for(var U=0;U<s;){U++;for(var W=0,Y=this.wh;W<Y;){var X=W++;this.Eh[X].Bh()}}for(var $=0,Z=this.Hf;$<Z;){var Q=$++;this.Jf[Q].dn()}for(var _=0,tt=this.vh;_<tt;){var it=_++;this.Dh[it].Pg(t)}for(var st=0;st<s;){st++;for(var ht=0,at=this.vh;ht<at;){var et=ht++;this.Dh[et].Ah(t)}}for(var ot=0,rt=this.If;ot<rt;){var nt=ot++;this.Kf[nt].postSolve()}for(var pt=0,lt=this.Hf;pt<lt;)for(var ct=pt++,yt=this.Jf[ct],ft=yt.Dc;null!=ft;){var ut,bt,vt,xt,dt,zt,mt,jt,Mt,At,wt,Dt,Ct=ft.M,Bt=ft.pa,qt=ft.ha,St=yt.pa;ut=St.o*qt.o+St.f*qt.i+St.h*qt.l,bt=St.o*qt.f+St.f*qt.m+St.h*qt.g,vt=St.o*qt.h+St.f*qt.j+St.h*qt.s,xt=St.i*qt.o+St.m*qt.i+St.j*qt.l,dt=St.i*qt.f+St.m*qt.m+St.j*qt.g,zt=St.i*qt.h+St.m*qt.j+St.j*qt.s,mt=St.l*qt.o+St.g*qt.i+St.s*qt.l,jt=St.l*qt.f+St.g*qt.m+St.s*qt.g,Mt=St.l*qt.h+St.g*qt.j+St.s*qt.s,Bt.o=ut,Bt.f=bt,Bt.h=vt,Bt.i=xt,Bt.m=dt,Bt.j=zt,Bt.l=mt,Bt.g=jt,Bt.s=Mt,At=St.o*qt.v+St.f*qt.A+St.h*qt.B,wt=St.i*qt.v+St.m*qt.A+St.j*qt.B,Dt=St.l*qt.v+St.g*qt.A+St.s*qt.B,Bt.v=At,Bt.A=wt,Bt.B=Dt,Bt.v+=St.v,Bt.A+=St.A,Bt.B+=St.B;var kt,It,Tt,Ot,Lt,Ft,Pt,Rt,Jt,Nt,Ht,Kt,Gt,Vt,Et,Ut,Wt,Yt,Xt=ft.a,$t=ft.ha,Zt=yt.a;if(kt=Zt.o*$t.o+Zt.f*$t.i+Zt.h*$t.l,It=Zt.o*$t.f+Zt.f*$t.m+Zt.h*$t.g,Tt=Zt.o*$t.h+Zt.f*$t.j+Zt.h*$t.s,Ot=Zt.i*$t.o+Zt.m*$t.i+Zt.j*$t.l,Lt=Zt.i*$t.f+Zt.m*$t.m+Zt.j*$t.g,Ft=Zt.i*$t.h+Zt.m*$t.j+Zt.j*$t.s,Pt=Zt.l*$t.o+Zt.g*$t.i+Zt.s*$t.l,Rt=Zt.l*$t.f+Zt.g*$t.m+Zt.s*$t.g,Jt=Zt.l*$t.h+Zt.g*$t.j+Zt.s*$t.s,Xt.o=kt,Xt.f=It,Xt.h=Tt,Xt.i=Ot,Xt.m=Lt,Xt.j=Ft,Xt.l=Pt,Xt.g=Rt,Xt.s=Jt,Nt=Zt.o*$t.v+Zt.f*$t.A+Zt.h*$t.B,Ht=Zt.i*$t.v+Zt.m*$t.A+Zt.j*$t.B,Kt=Zt.l*$t.v+Zt.g*$t.A+Zt.s*$t.B,Xt.v=Nt,Xt.A=Ht,Xt.B=Kt,Xt.v+=Zt.v,Xt.A+=Zt.A,Xt.B+=Zt.B,ft.Kb.Nb(ft.u,ft.pa),Gt=ft.u.ma,Vt=ft.u.na,Et=ft.u.oa,Ut=ft.u.ja,Wt=ft.u.ka,Yt=ft.u.la,ft.Kb.Nb(ft.u,ft.a),ft.u.ma=Gt<ft.u.ma?Gt:ft.u.ma,ft.u.na=Vt<ft.u.na?Vt:ft.u.na,ft.u.oa=Et<ft.u.oa?Et:ft.u.oa,ft.u.ja=Ut>ft.u.ja?Ut:ft.u.ja,ft.u.ka=Wt>ft.u.ka?Wt:ft.u.ka,ft.u.la=Yt>ft.u.la?Yt:ft.u.la,null!=ft.tb){var Qt,_t,ti;Qt=ft.a.v-ft.pa.v,_t=ft.a.A-ft.pa.A,ti=ft.a.B-ft.pa.B;var ii=ft.rc;ii.x=Qt,ii.y=_t,ii.z=ti,ft.Yb.oc.jc.wd(ft.tb,ft.u,ft.rc)}ft=Ct}}}},ht.prototype={gl:function(){var t=(new Date).getTime()/1e3;this.Kh.gl(),X.broadPhaseCollisionTime=1e3*((new Date).getTime()/1e3-t);t=(new Date).getTime()/1e3;for(var i=this.Kh.zd;null!=i;){var s=i.M;i.ik||i.hn(),i=s}X.narrowPhaseCollisionTime=1e3*((new Date).getTime()/1e3-t)},en:function(){var t=(new Date).getTime()/1e3;if(gt.disableSleeping)for(var i=this.uf;null!=i;){var s=i.M;i.Gb=!1,i.yb=0,i=s}if(this.ph.length<this.jj){for(i=this.ph.length<<1;i<this.jj;)i<<=1;this.ph=Array(i)}for(this.ek=0,i=this.vg,s=this.Fk,i.nm=s.x,i.om=s.y,i.pm=s.z,i=this.uf,this.tf=0;null!=i;){for(s=i.M;!i.Nf&&!i.Gb&&1!=i.Lb;){if(0==i.Ae&&0==i.kh){this.vg.gn(this.Sh,i),this.ek++;break}this.kn(i),this.vg.fn(this.Sh,this.Uk,this.Tk),this.vg.Xe(),this.ek++;break}i=s}for(this.Kh.Vk(),i=this.uf;null!=i;)s=i.M,i.Nf=!1,i=s;for(i=this.uf;null!=i;)s=i.M,i.Mh=0,i.Nh=0,i.Oh=0,i.vf=0,i.wf=0,i.xf=0,i=s;for(;0<this.tf;)this.af[--this.tf].Nf=!1,this.af[this.tf]=null;X.dynamicsTime=1e3*((new Date).getTime()/1e3-t)},kn:function(t){var i=1;for(this.vg.zk(t),this.ph[0]=t;0<i;)if(t=this.ph[--i],this.ph[i]=null,1!=t.Lb){for(var s=t.Ob;null!=s;){var h=s.M,a=s.Zd.Ye,e=s.Zd.Ye.jk;if(a.sk()&&!e.Nf){if(this.af.length==this.tf){for(var o=Array(this.tf<<1),r=0,n=this.tf;r<n;){var p=r++;o[p]=this.af[p],this.af[p]=null}this.af=o}this.af[this.tf++]=e,this.vg.Ol(e,a.Hc),(s=s.Qc).Nf||(this.vg.zk(s),this.ph[i++]=s)}s=h}for(h=t.ze;null!=h;){if(t=h.M,!(a=(s=h.Pk).jk).Nf){if(this.af.length==this.tf){for(e=Array(this.tf<<1),o=0,r=this.tf;o<r;)e[n=o++]=this.af[n],this.af[n]=null;this.af=e}this.af[this.tf++]=a,this.vg.Ol(a,s.Hc),(h=h.Qc).Nf||(this.vg.zk(h),this.ph[i++]=h)}h=t}}},pe:function(t){0<this.Sh.dt&&(this.Sh.dtRatio=t/this.Sh.dt),this.Sh.dt=t,this.Sh.invDt=1/t,t=(new Date).getTime()/1e3,this.gl(),this.en(),X.totalTime=1e3*((new Date).getTime()/1e3-t)},cb:function(t){if(null!=t.oc)throw Error("A rigid body cannot belong to multiple worlds.");for(null==this.uf?this.uf=t:(this.Ei.M=t,t.ia=this.Ei),this.Ei=t,t.oc=this,t=t.Dc;null!=t;){var i=t.M;t.tb=this.jc.Vh(t,t.u),t.Cc=this.Xl++,this.zg++,t=i}this.jj++},qe:function(t){if(t.oc!=this)throw Error("The rigid body doesn't belong to the world.");var i=t.ia,s=t.M;for(null!=i&&(i.M=s),null!=s&&(s.ia=i),t==this.uf&&(this.uf=this.uf.M),t==this.Ei&&(this.Ei=this.Ei.ia),t.M=null,t.ia=null,t.oc=null,t=t.Dc;null!=t;){i=t.M,this.jc.Wh(t.tb),t.tb=null,t.Cc=-1;for(var h=t.Yb.Ob;null!=h;){s=h.M;var a=h.Zd;if(a.Zb==t||a.$b==t){(h=h.Qc).Gb=!1,h.yb=0;h=this.Kh;var e=a.ia,o=a.M;null!=e&&(e.M=o),null!=o&&(o.ia=e),a==h.zd&&(h.zd=h.zd.M),a==h.ye&&(h.ye=h.ye.ia),a.M=null,a.ia=null,a.Td&&((e=a.Zb.yd)==(o=a.$b.yd)&&(o=null),null!=e&&e.endContact(a),null!=o&&o.endContact(a)),e=a.rb.ia,o=a.rb.M,null!=e&&(e.M=o),null!=o&&(o.ia=e),a.rb==a.C.Ob&&(a.C.Ob=a.C.Ob.M),a.rb==a.C.kc&&(a.C.kc=a.C.kc.ia),a.rb.M=null,a.rb.ia=null,e=a.sb.ia,o=a.sb.M,null!=e&&(e.M=o),null!=o&&(o.ia=e),a.sb==a.D.Ob&&(a.D.Ob=a.D.Ob.M),a.sb==a.D.kc&&(a.D.kc=a.D.kc.ia),a.sb.M=null,a.sb.ia=null,a.C.Ae--,a.D.Ae--,a.rb.Qc=null,a.sb.Qc=null,a.rb.Zd=null,a.sb.Zd=null,a.Zb=null,a.$b=null,a.C=null,a.D=null,a.Td=!1,a.$i.Xe(),a.Ja.Xe(),a.Lh=null,(e=a.Ye).Zb=null,e.$b=null,e.C=null,e.D=null,e.pj=null,e.qj=null,a.M=h.lg,h.lg=a,h.Bi--}h=s}this.zg--,t=i}this.jj--},ua:function(t){if(null!=t.oc)throw Error("A joint cannot belong to multiple worlds.");null==this.Ph?this.Ph=t:(this.zi.M=t,t.ia=this.zi),this.zi=t,t.oc=this,t.rb.Qc=t.D,t.sb.Qc=t.C,null==t.C.ze?t.C.ze=t.rb:(t.C.Ze.M=t.rb,t.rb.ia=t.C.Ze),t.C.Ze=t.rb,null==t.D.ze?t.D.ze=t.sb:(t.D.Ze.M=t.sb,t.sb.ia=t.D.Ze),t.D.Ze=t.sb,t.C.kh++,t.D.kh++;var i=t.C;i.Gb=!1,i.yb=0,(i=t.D).Gb=!1,i.yb=0,t.hd(),this.Sk++},Kl:function(t){if(t.oc!=this)throw Error("The joint doesn't belong to the world.");var i=t.ia,s=t.M;null!=i&&(i.M=s),null!=s&&(s.ia=i),t==this.Ph&&(this.Ph=this.Ph.M),t==this.zi&&(this.zi=this.zi.ia),t.M=null,t.ia=null,t.oc=null,i=t.rb.ia,s=t.rb.M,null!=i&&(i.M=s),null!=s&&(s.ia=i),t.rb==t.C.ze&&(t.C.ze=t.C.ze.M),t.rb==t.C.Ze&&(t.C.Ze=t.C.Ze.ia),t.rb.M=null,t.rb.ia=null,i=t.sb.ia,s=t.sb.M,null!=i&&(i.M=s),null!=s&&(s.ia=i),t.sb==t.D.ze&&(t.D.ze=t.D.ze.M),t.sb==t.D.Ze&&(t.D.Ze=t.D.Ze.ia),t.sb.M=null,t.sb.ia=null,t.rb.Qc=null,t.sb.Qc=null,t.C.kh--,t.D.kh--,(i=t.C).Gb=!1,i.yb=0,(t=t.D).Gb=!1,t.yb=0,this.Sk--},Hb:function(){null!=this.ni&&(2==this.jc.Lb&&this.Zm(this.ni,this.jc.ge),this.bn(this.ni),this.$m(this.ni))},Vd:function(t,i,s){var h=this.gk.vj;h.x=t.x,h.y=t.y,h.z=t.z,(h=this.gk.end).x=i.x,h.y=i.y,h.z=i.z,this.gk.xj=s,this.jc.Vd(t,i,this.gk)},Bf:function(t,i,s,h){this.aj.em=t;var a=this.aj.vj;a.v=i.v,a.A=i.A,a.B=i.B,a.o=i.o,a.f=i.f,a.h=i.h,a.i=i.i,a.m=i.m,a.j=i.j,a.l=i.l,a.g=i.g,a.s=i.s,(a=this.aj.eg).x=s.x,a.y=s.y,a.z=s.z,this.aj.xj=h,this.jc.Bf(t,i,s,this.aj)},qh:function(t,i){this.yk.u.de(t),this.yk.Ql=i,this.jc.qh(t,this.yk)},fd:function(){return this.uf},vc:function(){return this.Ph},Mb:function(){return this.jc},pc:function(){return this.Kh},Kc:function(){return this.jj},Ec:function(){return this.Sk},Yd:function(){return this.zg},Ac:function(){return this.ek},Lc:function(){return this.Uk},ue:function(t){this.Uk=t},Jc:function(){return this.Tk},te:function(t){this.Tk=t},uc:function(){return this.Fk},se:function(t){var i=this.Fk;i.x=t.x,i.y=t.y,i.z=t.z}},st.ua=ii,st.prototype=ri(ii.prototype,{process:function(t){(t=t.userData).Kb.Vd(this.vj,this.end,t.a,this.Mi)&&this.xj.process(t,this.Mi)}}),it.ua=ii,it.prototype=ri(ii.prototype,{process:function(t){var i=(t=t.userData).Kb.Lb;0>i||5<i||vt.cb.Bf(this.em,t.Kb,this.vj,t.a,this.eg,this.Z,this.Mi)&&this.xj.process(t,this.Mi)}}),tt.ua=ii,tt.prototype=ri(ii.prototype,{process:function(t){var i=(t=t.userData).u;i.ma<this.u.ja&&i.ja>this.u.ma&&i.na<this.u.ka&&i.ka>this.u.na&&i.oa<this.u.la&&i.la>this.u.oa&&this.Ql.process(t)}}),_.prototype={process:function(){}},Q.prototype={beginContact:function(){},preSolve:function(){},postSolve:function(){},endContact:function(){}},Z.prototype={process:function(){}},$.ua=Z,$.prototype=ri(Z.prototype,{clear:function(){this.shape=null,this.fraction=1,this.position.Z(),this.normal.Z(),this.hit=!1},process:function(t,i){if(i.fraction<this.fraction){this.shape=t,this.hit=!0,this.fraction=i.fraction,t=this.position;var s=i.position;t.x=s.x,t.y=s.y,t.z=s.z,t=this.normal,i=i.normal,t.x=i.x,t.y=i.y,t.z=i.z}}}),Y.prototype={xh:function(){},Gh:function(){},Ch:function(){},Li:function(){},Pg:function(){},Bh:function(){},Ah:function(){},postSolve:function(){}},U.prototype={$d:function(t,i){var s,h,a,e,o,r,n,p,l;i.Qe=this.C,i.Re=this.D,s=this.Ja.wg,h=this.Ja.xg,a=this.Ja.yg,e=this.Ja.lj,o=this.Ja.mj,r=this.Ja.nj,n=this.Ja.Vi,p=this.Ja.Wi,l=this.Ja.Xi;for(var c=Math.sqrt(this.Zb.Xj*this.$b.Xj),y=Math.sqrt(this.Zb.hk*this.$b.hk),f=this.Ja.be,u=i.Ka=0;u<f;){var b=u++;if(0>(b=this.Ja.wc[b]).Gc)b.lf=!0,(b=b.ae).bd=0,b.zc=0,b.yc=0,b.ub=0,b.df=0,b.ef=0,b.ff=0;else{b.lf=!1;var v=i.rows[i.Ka++];v.friction=c,v.Ma=0;var g=v.Ng;g.va=s,g.wa=h,g.xa=a,g.Ba=s,g.Ca=h,g.Da=a,g.aa=b.Eb*a-b.Fb*h,g.ba=b.Fb*s-b.Db*a,g.ca=b.Db*h-b.Eb*s,g.ea=b.fc*a-b.gc*h,g.fa=b.gc*s-b.ec*a,g.ga=b.ec*h-b.fc*s,(g=v.Lj).va=e,g.wa=o,g.xa=r,g.Ba=e,g.Ca=o,g.Da=r,g.aa=b.Eb*r-b.Fb*o,g.ba=b.Fb*e-b.Db*r,g.ca=b.Db*o-b.Eb*e,g.ea=b.fc*r-b.gc*o,g.fa=b.gc*e-b.ec*r,g.ga=b.ec*o-b.fc*e,(g=v.Kj).va=n,g.wa=p,g.xa=l,g.Ba=n,g.Ca=p,g.Da=l,g.aa=b.Eb*l-b.Fb*p,g.ba=b.Fb*n-b.Db*l,g.ca=b.Db*p-b.Eb*n,g.ea=b.fc*l-b.gc*p,g.fa=b.gc*n-b.ec*l,g.ga=b.ec*p-b.fc*n,g=(g=v.Ng).va*this.C.gb+g.wa*this.C.hb+g.xa*this.C.ib+(g.aa*this.C.kb+g.ba*this.C.lb+g.ca*this.C.mb)-(g.Ba*this.D.gb+g.Ca*this.D.hb+g.Da*this.D.ib+(g.ea*this.D.kb+g.fa*this.D.lb+g.ga*this.D.mb)),v.Fa=g<-gt.contactEnableBounceThreshold&&!b.Pe?-g*y:0,this.Hc==W.BAUMGARTE&&b.Gc>gt.linearSlop&&(g=(b.Gc-gt.linearSlop)*gt.velocityBaumgarte*t.invDt,v.Fa<g&&(v.Fa=g)),b.Pe||((g=b.ae).bd=0,g.zc=0,g.yc=0,g.ub=0,g.df=0,g.ef=0,g.ff=0),v.ta=b.ae}}},gd:function(t){var i,s,h;t.Qe=this.C,t.Re=this.D,i=this.Ja.wg,s=this.Ja.xg,h=this.Ja.yg;for(var a=this.Ja.be,e=t.Ka=0;e<a;){var o=e++;if(!(o=this.Ja.wc[o]).lf){var r=t.rows[t.Ka++],n=r.Ng;n.va=i,n.wa=s,n.xa=h,n.Ba=i,n.Ca=s,n.Da=h,n.aa=o.Eb*h-o.Fb*s,n.ba=o.Fb*i-o.Db*h,n.ca=o.Db*s-o.Eb*i,n.ea=o.fc*h-o.gc*s,n.fa=o.gc*i-o.ec*h,n.ga=o.ec*s-o.fc*i,r.Fa=o.Gc-gt.linearSlop,0>r.Fa&&(r.Fa=0),r.ta=o.ae}}},al:function(){this.Ja.Yl(this.pj,this.qj)},cb:function(){return this.Zb},Hb:function(){return this.$b},ua:function(){return this.Ja},sk:function(){for(var t=0,i=this.Ja.be;t<i;){var s=t++;if(0<=this.Ja.wc[s].Gc)return!0}return!1}},E.prototype={de:function(t){this.bd=t.bd,this.zc=t.zc,this.yc=t.yc,this.df=t.df,this.ef=t.ef,this.ff=t.ff}},V.prototype={Xe:function(){for(var t=0,i=this.be;t<i;){var s=t++;(s=this.wc[s]).mf=0,s.nf=0,s.pf=0,s.qf=0,s.rf=0,s.sf=0,s.Db=0,s.Eb=0,s.Fb=0,s.ec=0,s.fc=0,s.gc=0,s.Jd=0,s.Kd=0,s.Ld=0,s.Md=0,s.Nd=0,s.Od=0,s.Gc=0;var h=s.ae;h.bd=0,h.zc=0,h.yc=0,h.ub=0,h.df=0,h.ef=0,h.ff=0,s.Pe=!1,s.lf=!1,s.Cc=-1}this.be=0},Wm:function(t){this.wg=t.x,this.xg=t.y,this.yg=t.z;var i,s=t.x,h=t.y,a=s*s,e=h*h,o=(t=t.z)*t;a<e?a<o?(a=0,e=-t*(o=1/Math.sqrt(e+o)),i=h*(o*=h)-t*e,t=-s*o,s*=e):(a=-h*(e=1/Math.sqrt(a+e)),o=0,i=-t*(e*=s),t*=a,s=s*e-h*a):e<o?(a=t*(o=1/Math.sqrt(a+o)),e=0,i=h*(o*=-s),t=t*a-s*o,s=-h*a):(a=-h*(e=1/Math.sqrt(a+e)),o=0,i=-t*(e*=s),t*=a,s=s*e-h*a),this.lj=a,this.mj=e,this.nj=o,this.Vi=i,this.Wi=t,this.Xi=s},Yl:function(t,i){for(var s=0,h=this.be;s<h;){var a,e,o,r=s++;r=this.wc[r];a=t.o*r.mf+t.f*r.nf+t.h*r.pf,e=t.i*r.mf+t.m*r.nf+t.j*r.pf,o=t.l*r.mf+t.g*r.nf+t.s*r.pf,r.Db=a,r.Eb=e,r.Fb=o,a=i.o*r.qf+i.f*r.rf+i.h*r.sf,e=i.i*r.qf+i.m*r.rf+i.j*r.sf,o=i.l*r.qf+i.g*r.rf+i.s*r.sf,r.ec=a,r.fc=e,r.gc=o,r.Jd=r.Db+t.v,r.Kd=r.Eb+t.A,r.Ld=r.Fb+t.B,r.Md=r.ec+i.v,r.Nd=r.fc+i.A,r.Od=r.gc+i.B,r.Gc=-((r.Jd-r.Md)*this.wg+(r.Kd-r.Nd)*this.xg+(r.Ld-r.Od)*this.yg)}},Hb:function(){var t=new dt;return t.x=this.wg,t.y=this.xg,t.z=this.yg,t},Mb:function(t){t.x=this.wg,t.y=this.xg,t.z=this.yg},uc:function(){var t=new dt;return t.x=this.lj,t.y=this.mj,t.z=this.nj,t},vc:function(t){t.x=this.lj,t.y=this.mj,t.z=this.nj},ua:function(){var t=new dt;return t.x=this.Vi,t.y=this.Wi,t.z=this.Xi,t},cb:function(t){t.x=this.Vi,t.y=this.Wi,t.z=this.Xi},qc:function(){return this.wc},pc:function(){return this.be}},G.prototype={Mb:function(){var t=new dt;return t.x=this.Jd,t.y=this.Kd,t.z=this.Ld,t},pc:function(t){t.x=this.Jd,t.y=this.Kd,t.z=this.Ld},qc:function(){var t=new dt;return t.x=this.Md,t.y=this.Nd,t.z=this.Od,t},uc:function(t){t.x=this.Md,t.y=this.Nd,t.z=this.Od},cb:function(){return this.Gc},Ac:function(){return this.Pe},Hb:function(){return this.ae.bd},vc:function(){return this.ae.zc},ua:function(){return this.ae.yc},Ec:function(){return!this.lf}},K.prototype={Wn:function(){for(var t=this.Ja.be;0<=--t;){var i,s;i=(h=this.Ja.wc[t]).Jd-h.Md,s=h.Kd-h.Nd;var h=h.Ld-h.Od,a=this.Ja.wg*i+this.Ja.xg*s+this.Ja.yg*h;a>gt.contactPersistenceThreshold?this.Fm(t):(i+=this.Ja.wg*-a)*i+(s+=this.Ja.xg*-a)*s+(h+=this.Ja.yg*-a)*h>gt.contactPersistenceThreshold*gt.contactPersistenceThreshold&&this.Fm(t)}},Fm:function(t){var i=--this.Ja.be;if(t!=i){var s=this.Ja.wc[t];this.Ja.wc[t]=this.Ja.wc[i],this.Ja.wc[i]=s}(t=this.Ja.wc[i]).mf=0,t.nf=0,t.pf=0,t.qf=0,t.rf=0,t.sf=0,t.Db=0,t.Eb=0,t.Fb=0,t.ec=0,t.fc=0,t.gc=0,t.Jd=0,t.Kd=0,t.Ld=0,t.Md=0,t.Nd=0,t.Od=0,t.Gc=0,(i=t.ae).bd=0,i.zc=0,i.yc=0,i.ub=0,i.df=0,i.ef=0,i.ff=0,t.Pe=!1,t.lf=!1,t.Cc=-1},jn:function(t,i,s){if((h=this.Ja.be)==gt.maxManifoldPoints){var h=this.Ja.wc[this.on(t,i,s)],a=t.position1;h.Jd=a.x,h.Kd=a.y,h.Ld=a.z,a=t.position2,h.Md=a.x,h.Nd=a.y,h.Od=a.z,h.Db=h.Jd-i.v,h.Eb=h.Kd-i.A,h.Fb=h.Ld-i.B,h.ec=h.Md-s.v,h.fc=h.Nd-s.A,h.gc=h.Od-s.B;var e;a=i.o*h.Db+i.i*h.Eb+i.l*h.Fb;e=i.f*h.Db+i.m*h.Eb+i.g*h.Fb,i=i.h*h.Db+i.j*h.Eb+i.s*h.Fb,h.mf=a,h.nf=e,h.pf=i,i=s.o*h.ec+s.i*h.fc+s.l*h.gc,a=s.f*h.ec+s.m*h.fc+s.g*h.gc,s=s.h*h.ec+s.j*h.fc+s.s*h.gc,h.qf=i,h.rf=a,h.sf=s,h.Gc=t.depth,(s=h.ae).bd=0,s.zc=0,s.yc=0,s.ub=0,s.df=0,s.ef=0,s.ff=0,h.Cc=t.id,h.Pe=!1,h.lf=!1}else h=this.Ja.wc[h],a=t.position1,h.Jd=a.x,h.Kd=a.y,h.Ld=a.z,a=t.position2,h.Md=a.x,h.Nd=a.y,h.Od=a.z,h.Db=h.Jd-i.v,h.Eb=h.Kd-i.A,h.Fb=h.Ld-i.B,h.ec=h.Md-s.v,h.fc=h.Nd-s.A,h.gc=h.Od-s.B,a=i.o*h.Db+i.i*h.Eb+i.l*h.Fb,e=i.f*h.Db+i.m*h.Eb+i.g*h.Fb,i=i.h*h.Db+i.j*h.Eb+i.s*h.Fb,h.mf=a,h.nf=e,h.pf=i,i=s.o*h.ec+s.i*h.fc+s.l*h.gc,a=s.f*h.ec+s.m*h.fc+s.g*h.gc,s=s.h*h.ec+s.j*h.fc+s.s*h.gc,h.qf=i,h.rf=a,h.sf=s,h.Gc=t.depth,(s=h.ae).bd=0,s.zc=0,s.yc=0,s.ub=0,s.df=0,s.ef=0,s.ff=0,h.Cc=t.id,h.Pe=!1,h.lf=!1,this.Ja.be++},on:function(t,i){var s=this.Ja.wc[0],h=this.Ja.wc[1],a=this.Ja.wc[2],e=this.Ja.wc[3],o=s.Gc,r=0;h.Gc>o&&(o=h.Gc,r=1),a.Gc>o&&(o=a.Gc,r=2),e.Gc>o&&(o=e.Gc,r=3);var n,p,l,c=t.position1;n=c.x,p=c.y,l=c.z,n-=i.v,p-=i.A,l-=i.B;var y,f,u,b,v,g,x,d,z,m,j,M,A,w,D,C,B,q,S,k,I,T,O,L,F,P,R,J,N,H,K,G,V,E,U,W,Y,X,$,Z,Q,_,tt,it,st,ht,at,et,ot,rt,nt,pt,lt,ct,yt,ft,ut,bt,vt,gt,xt,dt,zt,mt,jt,Mt,At,wt,Dt,Ct,Bt,qt,St,kt,It,Tt,Ot,Lt,Ft,Pt,Rt,Jt,Nt,Ht,Kt,Gt,Vt,Et,Ut,Wt,Yt,Xt,$t,Zt,Qt,_t,ti,ii,si,hi,ai,ei,oi,ri,ni,pi,li,ci,yi=h.Db,fi=h.Eb,ui=h.Fb,bi=a.Db,vi=a.Eb,gi=a.Fb,xi=e.Db,di=e.Eb,zi=e.Fb,mi=(S=(f=vi-fi)*(g=l-zi)-(u=gi-ui)*(v=p-di))*S+(k=u*(b=n-xi)-(y=bi-yi)*g)*k+(I=y*v-f*b)*I,ji=(T=(d=di-fi)*(M=l-gi)-(z=zi-ui)*(j=p-vi))*T+(O=z*(m=n-bi)-(x=xi-yi)*M)*O+(L=x*j-d*m)*L,Mi=(F=(w=p-fi)*(q=zi-gi)-(D=l-ui)*(B=di-vi))*F+(P=D*(C=xi-bi)-(A=n-yi)*q)*P+(R=A*B-w*C)*R,Ai=mi>ji?mi>Mi?mi:Mi:ji>Mi?ji:Mi,wi=s.Db,Di=s.Eb,Ci=s.Fb,Bi=a.Db,qi=a.Eb,Si=a.Fb,ki=e.Db,Ii=e.Eb,Ti=e.Fb,Oi=(ht=(N=qi-Di)*(V=l-Ti)-(H=Si-Ci)*(G=p-Ii))*ht+(at=H*(K=n-ki)-(J=Bi-wi)*V)*at+(et=J*G-N*K)*et,Li=(ot=(U=Ii-Di)*($=l-Si)-(W=Ti-Ci)*(X=p-qi))*ot+(rt=W*(Y=n-Bi)-(E=ki-wi)*$)*rt+(nt=E*X-U*Y)*nt,Fi=(pt=(Q=p-Di)*(st=Ti-Si)-(_=l-Ci)*(it=Ii-qi))*pt+(lt=_*(tt=ki-Bi)-(Z=n-wi)*st)*lt+(ct=Z*it-Q*tt)*ct,Pi=Oi>Li?Oi>Fi?Oi:Fi:Li>Fi?Li:Fi,Ri=s.Db,Ji=s.Eb,Ni=s.Fb,Hi=h.Db,Ki=h.Eb,Gi=h.Fb,Vi=e.Db,Ei=e.Eb,Ui=e.Fb,Wi=(St=(ft=Ki-Ji)*(gt=l-Ui)-(ut=Gi-Ni)*(vt=p-Ei))*St+(kt=ut*(bt=n-Vi)-(yt=Hi-Ri)*gt)*kt+(It=yt*vt-ft*bt)*It,Yi=(Tt=(dt=Ei-Ji)*(Mt=l-Gi)-(zt=Ui-Ni)*(jt=p-Ki))*Tt+(Ot=zt*(mt=n-Hi)-(xt=Vi-Ri)*Mt)*Ot+(Lt=xt*jt-dt*mt)*Lt,Xi=(Ft=(wt=p-Ji)*(qt=Ui-Gi)-(Dt=l-Ni)*(Bt=Ei-Ki))*Ft+(Pt=Dt*(Ct=Vi-Hi)-(At=n-Ri)*qt)*Pt+(Rt=At*Bt-wt*Ct)*Rt,$i=Wi>Yi?Wi>Xi?Wi:Xi:Yi>Xi?Yi:Xi,Zi=s.Db,Qi=s.Eb,_i=s.Fb,ts=h.Db,is=h.Eb,ss=h.Fb,hs=a.Db,as=a.Eb,es=a.Fb,os=(hi=(Nt=is-Qi)*(Vt=l-es)-(Ht=ss-_i)*(Gt=p-as))*hi+(ai=Ht*(Kt=n-hs)-(Jt=ts-Zi)*Vt)*ai+(ei=Jt*Gt-Nt*Kt)*ei,rs=(oi=(Ut=as-Qi)*($t=l-ss)-(Wt=es-_i)*(Xt=p-is))*oi+(ri=Wt*(Yt=n-ts)-(Et=hs-Zi)*$t)*ri+(ni=Et*Xt-Ut*Yt)*ni,ns=(pi=(Qt=p-Qi)*(si=es-ss)-(_t=l-_i)*(ii=as-is))*pi+(li=_t*(ti=hs-ts)-(Zt=n-Zi)*si)*li+(ci=Zt*ii-Qt*ti)*ci,ps=os>rs?os>ns?os:ns:rs>ns?rs:ns,ls=Ai,cs=0;return(Pi>ls&&1!=r||!r)&&(ls=Pi,cs=1),$i>ls&&2!=r&&(ls=$i,cs=2),ps>ls&&3!=r&&(ls=ps,cs=3),cs},rn:function(t,i,s){for(var h=gt.contactPersistenceThreshold*gt.contactPersistenceThreshold,a=-1,e=0,o=this.Ja.be;e<o;){var r,n,p,l,c,y,f=e++,u=this.Ja.wc[f];r=(c=t.position1).x,n=c.y,p=c.z,l=(y=t.position2).x,c=y.y,y=y.z,r-=i.v,n-=i.A,p-=i.B,l-=s.v,c-=s.A,y-=s.B,r=u.Db-r,n=u.Eb-n,p=u.Fb-p,l=u.ec-l,c=u.fc-c,u=u.gc-y,(u=(y=r*r+n*n+p*p)<(u=l*l+c*c+u*u)?y:u)<h&&(h=u,a=f)}return a},eo:function(t,i,s){this.Gl=this.Ja.be;for(var h=0,a=this.Gl;h<a;){var e=h++,o=this.Hl[e];e=this.Ja.wc[e];o.mf=e.mf,o.nf=e.nf,o.pf=e.pf,o.qf=e.qf,o.rf=e.rf,o.sf=e.sf,o.Db=e.Db,o.Eb=e.Eb,o.Fb=e.Fb,o.ec=e.ec,o.fc=e.fc,o.gc=e.gc,o.Jd=e.Jd,o.Kd=e.Kd,o.Ld=e.Ld,o.Md=e.Md,o.Nd=e.Nd,o.Od=e.Od,o.Gc=e.Gc,o.ae.de(e.ae),o.Cc=e.Cc,o.Pe=e.Pe,o.lf=!1}for(h=t.numPoints,this.Ja.be=h,a=0;a<h;){e=a++,o=this.Ja.wc[e];var r=(e=t.points[e]).position1;o.Jd=r.x,o.Kd=r.y,o.Ld=r.z,r=e.position2,o.Md=r.x,o.Nd=r.y,o.Od=r.z,o.Db=o.Jd-i.v,o.Eb=o.Kd-i.A,o.Fb=o.Ld-i.B,o.ec=o.Md-s.v,o.fc=o.Nd-s.A,o.gc=o.Od-s.B;var n,p;r=i.o*o.Db+i.i*o.Eb+i.l*o.Fb;for(n=i.f*o.Db+i.m*o.Eb+i.g*o.Fb,p=i.h*o.Db+i.j*o.Eb+i.s*o.Fb,o.mf=r,o.nf=n,o.pf=p,r=s.o*o.ec+s.i*o.fc+s.l*o.gc,n=s.f*o.ec+s.m*o.fc+s.g*o.gc,p=s.h*o.ec+s.j*o.fc+s.s*o.gc,o.qf=r,o.rf=n,o.sf=p,o.Gc=e.depth,(r=o.ae).bd=0,r.zc=0,r.yc=0,r.ub=0,r.df=0,r.ef=0,r.ff=0,o.Cc=e.id,o.Pe=!1,o.lf=!1,e=0,r=this.Gl;e<r;)if(n=e++,n=this.Hl[n],o.Cc==n.Cc){o.ae.de(n.ae),o.Pe=!0;break}}},On:function(t,i,s){this.Ja.Yl(i,s);for(var h=0,a=this.Ja.be;h<a;){var e=h++;this.Ja.wc[e].Pe=!0}t=t.points[0],-1==(h=this.rn(t,i,s))?this.jn(t,i,s):(h=this.Ja.wc[h],a=t.position1,h.Jd=a.x,h.Kd=a.y,h.Ld=a.z,a=t.position2,h.Md=a.x,h.Nd=a.y,h.Od=a.z,h.Db=h.Jd-i.v,h.Eb=h.Kd-i.A,h.Fb=h.Ld-i.B,h.ec=h.Md-s.v,h.fc=h.Nd-s.A,h.gc=h.Od-s.B,a=i.o*h.Db+i.i*h.Eb+i.l*h.Fb,e=i.f*h.Db+i.m*h.Eb+i.g*h.Fb,i=i.h*h.Db+i.j*h.Eb+i.s*h.Fb,h.mf=a,h.nf=e,h.pf=i,i=s.o*h.ec+s.i*h.fc+s.l*h.gc,a=s.f*h.ec+s.m*h.fc+s.g*h.gc,s=s.h*h.ec+s.j*h.fc+s.s*h.gc,h.qf=i,h.rf=a,h.sf=s,h.Gc=t.depth),this.Wn()}},H.prototype={Im:function(){this.xc=0,0==this.va&&0==this.wa&&0==this.xa&&0==this.Ba&&0==this.Ca&&0==this.Da||(this.xc|=1),0==this.aa&&0==this.ba&&0==this.ca&&0==this.ea&&0==this.fa&&0==this.ga||(this.xc|=2)}},F.prototype={hd:function(){var t,i,s,h=this.C.a,a=this.D.a;t=h.o*this.dj+h.f*this.ej+h.h*this.fj,i=h.i*this.dj+h.m*this.ej+h.j*this.fj,s=h.l*this.dj+h.g*this.ej+h.s*this.fj,this.Sb=t,this.Tb=i,this.Ub=s,t=a.o*this.gj+a.f*this.hj+a.h*this.ij,i=a.i*this.gj+a.m*this.hj+a.j*this.ij,s=a.l*this.gj+a.g*this.hj+a.s*this.ij,this.Vb=t,this.Wb=i,this.Xb=s,this.Of=this.Sb+h.v,this.Pf=this.Tb+h.A,this.Qf=this.Ub+h.B,this.Rf=this.Vb+a.v,this.Sf=this.Wb+a.A,this.Tf=this.Xb+a.B,t=h.o*this.qa+h.f*this.ra+h.h*this.sa,i=h.i*this.qa+h.m*this.ra+h.j*this.sa,s=h.l*this.qa+h.g*this.ra+h.s*this.sa,this.vb=t,this.wb=i,this.xb=s,t=h.o*this.Ab+h.f*this.Bb+h.h*this.Cb,i=h.i*this.Ab+h.m*this.Bb+h.j*this.Cb,s=h.l*this.Ab+h.g*this.Bb+h.s*this.Cb,this.He=t,this.Ie=i,this.Je=s,t=h.o*this.lc+h.f*this.mc+h.h*this.nc,i=h.i*this.lc+h.m*this.mc+h.j*this.nc,h=h.l*this.lc+h.g*this.mc+h.s*this.nc,this.Hh=t,this.Ih=i,this.Jh=h,h=a.o*this.nb+a.f*this.ob+a.h*this.pb,t=a.i*this.nb+a.m*this.ob+a.j*this.pb,i=a.l*this.nb+a.g*this.ob+a.s*this.pb,this.bc=h,this.cc=t,this.dc=i,h=a.o*this.gh+a.f*this.hh+a.h*this.ih,t=a.i*this.gh+a.m*this.hh+a.j*this.ih,i=a.l*this.gh+a.g*this.hh+a.s*this.ih,this.ve=h,this.we=t,this.xe=i,h=a.o*this.Mc+a.f*this.Nc+a.h*this.Oc,t=a.i*this.Mc+a.m*this.Nc+a.j*this.Oc,a=a.l*this.Mc+a.g*this.Nc+a.s*this.Oc,this.ah=h,this.bh=t,this.dh=a},$d:function(t,i){i.Qe=this.C,i.Re=this.D,i.Ka=0},gd:function(t){t.Qe=this.C,t.Re=this.D,t.Ka=0},Rl:function(){var t=this.Pi*this.Pi+this.Qi*this.Qi+this.Ri*this.Ri,i=this.Si*this.Si+this.Ti*this.Ti+this.Ui*this.Ui;0<this.Yi&&t>this.Yi*this.Yi?(this.oc.Kl(this),this.component.dispatchEvent({type:"break",force:Math.sqrt(t)})):0<this.Zi&&i>this.Zi*this.Zi&&(this.oc.Kl(this),this.component.dispatchEvent({type:"break",torque:Math.sqrt(i)}))},ue:function(){return this.C},Ue:function(){return this.D},Tg:function(){return this.Lb},cb:function(){var t=new dt;return t.x=this.Of,t.y=this.Pf,t.z=this.Qf,t},Mb:function(){var t=new dt;return t.x=this.Rf,t.y=this.Sf,t.z=this.Tf,t},Hb:function(t){t.x=this.Of,t.y=this.Pf,t.z=this.Qf},pc:function(t){t.x=this.Rf,t.y=this.Sf,t.z=this.Tf},pe:function(){var t=new dt;return t.x=this.dj,t.y=this.ej,t.z=this.fj,t},re:function(){var t=new dt;return t.x=this.gj,t.y=this.hj,t.z=this.ij,t},qe:function(t){t.x=this.dj,t.y=this.ej,t.z=this.fj},se:function(t){t.x=this.gj,t.y=this.hj,t.z=this.ij},Ec:function(){var t,i,s,h,a,e,o,r,n,p=new ft;return t=this.vb,i=this.He,s=this.Hh,h=this.wb,a=this.Ie,e=this.Ih,o=this.xb,r=this.Je,n=this.Jh,p.e00=t,p.e01=i,p.e02=s,p.e10=h,p.e11=a,p.e12=e,p.e20=o,p.e21=r,p.e22=n,p},Kc:function(){var t,i,s,h,a,e,o,r,n,p=new ft;return t=this.bc,i=this.ve,s=this.ah,h=this.cc,a=this.we,e=this.bh,o=this.dc,r=this.xe,n=this.dh,p.e00=t,p.e01=i,p.e02=s,p.e10=h,p.e11=a,p.e12=e,p.e20=o,p.e21=r,p.e22=n,p},Jc:function(t){var i,s,h,a,e,o,r,n,p;i=this.vb,s=this.He,h=this.Hh,a=this.wb,e=this.Ie,o=this.Ih,r=this.xb,n=this.Je,p=this.Jh,t.e00=i,t.e01=s,t.e02=h,t.e10=a,t.e11=e,t.e12=o,t.e20=r,t.e21=n,t.e22=p},Lc:function(t){var i,s,h,a,e,o,r,n,p;i=this.bc,s=this.ve,h=this.ah,a=this.cc,e=this.we,o=this.bh,r=this.dc,n=this.xe,p=this.dh,t.e00=i,t.e01=s,t.e02=h,t.e10=a,t.e11=e,t.e12=o,t.e20=r,t.e21=n,t.e22=p},ua:function(){return this.Ak},Ug:function(t){this.Ak=t},fd:function(){return this.Yi},Vg:function(t){this.Yi=t},Yd:function(){return this.Zi},Wg:function(t){this.Zi=t},te:function(){return this.Hc},Xg:function(t){switch(t){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+t)}this.Hc=t},qc:function(){var t=new dt;return t.x=this.Pi,t.y=this.Qi,t.z=this.Ri,t},uc:function(t){t.x=this.Pi,t.y=this.Qi,t.z=this.Ri},vc:function(){var t=new dt;return t.x=this.Si,t.y=this.Ti,t.z=this.Ui,t},Ac:function(t){t.x=this.Si,t.y=this.Ti,t.z=this.Ui},Mf:function(){return this.ia},Ve:function(){return this.M}},L.ua=F,L.prototype=ri(F.prototype,{Ud:function(t,i,s){var h,a,e,o,r,n,p,l,c,y,f,u,b=s?1:this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0,v=this.Df*b,g=this.Ef*b,x=this.Ee*b;b=this.Fe*b;h=-this.Ub,a=this.Tb,e=this.Ub,o=-this.Sb,r=-this.Tb,n=this.Sb,p=-this.Xb,l=this.Wb,c=this.Xb,y=-this.Vb,f=-this.Wb,u=this.Vb;var d,z=1/(this.C.$a+this.D.$a),m=this.da.cd,j=this.da.dd,M=this.da.ed,A=(this.C.P*m+this.C.R*j+this.C.S*M)*m+(this.C.T*m+this.C.U*j+this.C.V*M)*j+(this.C.W*m+this.C.X*j+this.C.Y*M)*M;if(d=(this.D.P*m+this.D.R*j+this.D.S*M)*m+(this.D.T*m+this.D.U*j+this.D.V*M)*j+(this.D.W*m+this.D.X*j+this.D.Y*M)*M,0<A){var w=m*this.Sb+j*this.Tb+M*this.Ub;0<(w=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-w*w)&&(A=0<this.C.$a?1/(1/A+this.C.Pc*w):0)}if(0<d&&(m=m*this.Vb+j*this.Wb+M*this.Xb,0<(m=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-m*m)&&(d=0<this.D.$a?1/(1/d+this.D.Pc*m):0)),A=A+d?1/(A+d):0,0>=this.dl.frequency||!s){d=this.Pb[0],(j=(m=t.rows[t.Ka++]).Aa).va=0,j.wa=0,j.xa=0,j.Ba=0,j.Ca=0,j.Da=0,j.aa=0,j.ba=0,j.ca=0,j.ea=0,j.fa=0,j.ga=0,m.Fa=0,m.Ma=0,m.Ia=0,m.Ha=0,m.motorSpeed=0,m.fb=0,m.ta=null,m.ta=d,d=m;var D;m=this.eg,w=this.cl,M=this.dl,j=gt.linearSlop;if(s)M=0,D=1;else{if(0<M.frequency){j=0;var C=6.28318530717958*M.frequency;(B=M.dampingRatio)<gt.minSpringDamperDampingRatio&&(B=gt.minSpringDamperDampingRatio),D=i.dt,B=2*B*C,C*=C,M.useSymplecticEuler?(M=1/(D*B),D=C/B):(M=1/(D*(D*C+B)),D=C/(D*C+B))}else M=0,D=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;0<w.motorForce?(d.motorSpeed=w.motorSpeed,d.fb=w.motorForce*i.dt):(d.motorSpeed=0,d.fb=0)}var B=w.lowerLimit,q=w.upperLimit;B>q?m=C=w=0:B==q?(w=-1/0,C=1/0,m-=B):m<B?(w=-1/0,C=0,0<(m=m-B+j)&&(m=0)):m>q?(w=0,C=1/0,0>(m=m-q-j)&&(m=0)):m=C=w=0,d.Ia=w,d.Ha=C,d.Ma=M*(z?1/z:0),d.Fa=m*D,(d=d.Aa).va=this.da.cd,d.wa=this.da.dd,d.xa=this.da.ed,d.Ba=this.da.cd,d.Ca=this.da.dd,d.Da=this.da.ed,d.aa=-0,d.ba=-h,d.ca=-a,d.ea=-0,d.fa=-p,d.ga=-l}d=this.Pb[1],(a=(h=t.rows[t.Ka++]).Aa).va=0,a.wa=0,a.xa=0,a.Ba=0,a.Ca=0,a.Da=0,a.aa=0,a.ba=0,a.ca=0,a.ea=0,a.fa=0,a.ga=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.fb=0,h.ta=d,(d=h).Fa=v,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).va=this.da.Qd,d.wa=this.da.Rd,d.xa=this.da.Sd,d.Ba=this.da.Qd,d.Ca=this.da.Rd,d.Da=this.da.Sd,d.aa=-e,d.ba=-0,d.ca=-o,d.ea=-c,d.fa=-0,d.ga=-y,v=this.Pb[2],(e=(d=t.rows[t.Ka++]).Aa).va=0,e.wa=0,e.xa=0,e.Ba=0,e.Ca=0,e.Da=0,e.aa=0,e.ba=0,e.ca=0,e.ea=0,e.fa=0,e.ga=0,d.Fa=0,d.Ma=0,d.Ia=0,d.Ha=0,d.motorSpeed=0,d.fb=0,d.ta=v,d.Fa=g,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).va=this.da.me,d.wa=this.da.ne,d.xa=this.da.oe,d.Ba=this.da.me,d.Ca=this.da.ne,d.Da=this.da.oe,d.aa=-r,d.ba=-n,d.ca=-0,d.ea=-f,d.fa=-u,d.ga=-0,(0>=this.Xk.frequency||!s)&&(g=this.Pb[3],(n=(r=t.rows[t.Ka++]).Aa).va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,r.Fa=0,r.Ma=0,r.Ia=0,r.Ha=0,r.motorSpeed=0,r.fb=0,r.ta=g,d=r,g=this.angle,n=this.Wk,f=this.Xk,r=gt.angularSlop,s?(s=0,f=1):(0<f.frequency?(r=0,s=6.28318530717958*f.frequency,(v=f.dampingRatio)<gt.minSpringDamperDampingRatio&&(v=gt.minSpringDamperDampingRatio),u=i.dt,v=2*v*s,e=s*s,f.useSymplecticEuler?(s=1/(u*v),f=e/v):(s=1/(u*(u*e+v)),f=e/(u*e+v))):(s=0,f=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0),0<n.motorTorque?(d.motorSpeed=n.motorSpeed,d.fb=n.motorTorque*i.dt):(d.motorSpeed=0,d.fb=0)),g=((g-(u=.5*((i=n.lowerLimit)+(n=n.upperLimit)))+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+u,i>n?i=v=u=0:i==n?(u=-1/0,v=1/0,i=g-i):g<i?(u=-1/0,v=0,0<(i=g-i+r)&&(i=0)):g>n?(u=0,v=1/0,0>(i=g-n-r)&&(i=0)):i=v=u=0,d.Ia=u,d.Ha=v,d.Ma=s*(A?1/A:0),d.Fa=i*f,(d=d.Aa).aa=this.da.cd,d.ba=this.da.dd,d.ca=this.da.ed,d.ea=this.da.cd,d.fa=this.da.dd,d.ga=this.da.ed),i=this.Pb[4],(s=(A=t.rows[t.Ka++]).Aa).va=0,s.wa=0,s.xa=0,s.Ba=0,s.Ca=0,s.Da=0,s.aa=0,s.ba=0,s.ca=0,s.ea=0,s.fa=0,s.ga=0,A.Fa=0,A.Ma=0,A.Ia=0,A.Ha=0,A.motorSpeed=0,A.fb=0,A.ta=i,(d=A).Fa=x,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).aa=this.da.Qd,d.ba=this.da.Rd,d.ca=this.da.Sd,d.ea=this.da.Qd,d.fa=this.da.Rd,d.ga=this.da.Sd,x=this.Pb[5],(i=(t=t.rows[t.Ka++]).Aa).va=0,i.wa=0,i.xa=0,i.Ba=0,i.Ca=0,i.Da=0,i.aa=0,i.ba=0,i.ca=0,i.ea=0,i.fa=0,i.ga=0,t.Fa=0,t.Ma=0,t.Ia=0,t.Ha=0,t.motorSpeed=0,t.fb=0,t.ta=x,(d=t).Fa=b,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).aa=this.da.me,d.ba=this.da.ne,d.ca=this.da.oe,d.ea=this.da.me,d.fa=this.da.ne,d.ga=this.da.oe},hd:function(){F.prototype.hd.call(this);var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A,w,D,C,B,q,S,k,I,T,O,L,P,R=this.da,J=R.$.C.$a,N=R.$.D.$a;if(-.999999999>(tt=R.$.vb*R.$.bc+R.$.wb*R.$.cc+R.$.xb*R.$.dc)){var H,K,G,V,E=R.$.vb,U=R.$.wb,W=R.$.xb,Y=E*E,X=U*U,$=W*W;Y<X?Y<$?(H=0,K=W*(V=1/Math.sqrt(X+$)),G=-U*V):(H=U*(V=1/Math.sqrt(Y+X)),K=-E*V,G=0):X<$?(H=-W*(V=1/Math.sqrt($+Y)),K=0,G=E*V):(H=U*(V=1/Math.sqrt(Y+X)),K=-E*V,G=0),t=H,i=K,s=G,h=0}else{var Z,Q,_;Z=R.$.wb*R.$.dc-R.$.xb*R.$.cc,Q=R.$.xb*R.$.bc-R.$.vb*R.$.dc,_=R.$.vb*R.$.cc-R.$.wb*R.$.bc;var tt,it=Math.sqrt(.5*(1+tt));t=Z*=tt=.5/it,i=Q*=tt,s=_*=tt,h=it}k=S=q=0;var st=q*(T=t)+S*(O=i)+k*(L=s)+(I=1)*(P=h);if(0>st&&(st=-st,T=-T,O=-O,L=-L,P=-P),.999999<st){var ht=(T=q+J/(J+N)*(T-q))*T+(O=S+J/(J+N)*(O-S))*O+(L=k+J/(J+N)*(L-k))*L+(P=I+J/(J+N)*(P-I))*P;1e-32<ht&&(ht=1/Math.sqrt(ht)),a=T*ht,e=O*ht,o=L*ht,r=P*ht}else{var at=J/(J+N)*Math.acos(st),et=(T+=q*-st)*T+(O+=S*-st)*O+(L+=k*-st)*L+(P+=I*-st)*P;1e-32<et&&(et=1/Math.sqrt(et)),T*=et,O*=et,L*=et,P*=et;var ot=Math.sin(at),rt=Math.cos(at);a=(q*=rt)+T*ot,e=(S*=rt)+O*ot,o=(k*=rt)+L*ot,r=(I*=rt)+P*ot}var nt,pt,lt=2*a,ct=2*e,yt=2*o,ft=a*lt,ut=e*ct,bt=o*yt,vt=a*ct,gt=e*yt,xt=a*yt,dt=r*lt,zt=r*ct,mt=r*yt;if(n=vt-mt,p=xt+zt,l=vt+mt,c=1-ft-bt,y=gt-dt,f=xt-zt,u=gt+dt,b=1-ft-ut,nt=(1-ut-bt)*R.$.vb+n*R.$.wb+p*R.$.xb,pt=l*R.$.vb+c*R.$.wb+y*R.$.xb,v=f*R.$.vb+u*R.$.wb+b*R.$.xb,M=R.cd,A=R.dd,w=R.ed,D=R.Qd,C=R.Rd,B=R.Sd,-.999999999>(It=M*nt+A*pt+w*v)){var jt,Mt,At,wt,Dt=M*M,Ct=A*A,Bt=w*w;Dt<Ct?Dt<Bt?(jt=0,Mt=w*(wt=1/Math.sqrt(Ct+Bt)),At=-A*wt):(jt=A*(wt=1/Math.sqrt(Dt+Ct)),Mt=-M*wt,At=0):Ct<Bt?(jt=-w*(wt=1/Math.sqrt(Bt+Dt)),Mt=0,At=M*wt):(jt=A*(wt=1/Math.sqrt(Dt+Ct)),Mt=-M*wt,At=0),a=jt,e=Mt,o=At,r=0}else{var qt,St,kt;qt=A*v-w*pt,St=w*nt-M*v,kt=M*pt-A*nt;var It,Tt=Math.sqrt(.5*(1+It));a=qt*=It=.5/Tt,e=St*=It,o=kt*=It,r=Tt}var Ot,Lt,Ft,Pt=2*a,Rt=2*e,Jt=2*o,Nt=a*Pt,Ht=e*Rt,Kt=o*Jt,Gt=a*Rt,Vt=e*Jt,Et=a*Jt,Ut=r*Pt,Wt=r*Rt,Yt=r*Jt;if(1e-6<(z=pt*(d=(f=Et-Wt)*D+(u=Vt+Ut)*C+(b=1-Nt-Ht)*B)-v*(x=(l=Gt+Yt)*D+(c=1-Nt-Kt)*C+(y=Vt-Ut)*B))*z+(m=v*(g=(1-Ht-Kt)*D+(n=Gt-Yt)*C+(p=Et+Wt)*B)-nt*d)*m+(j=nt*x-pt*g)*j){var Xt=z*z+m*m+j*j;0<Xt&&(Xt=1/Math.sqrt(Xt)),z*=Xt,m*=Xt,j*=Xt}else{var $t,Zt=nt*nt,Qt=pt*pt,_t=v*v;Zt<Qt?Zt<_t?(z=0,m=v*($t=1/Math.sqrt(Qt+_t)),j=-pt*$t):(z=pt*($t=1/Math.sqrt(Zt+Qt)),m=-nt*$t,j=0):Qt<_t?(z=-v*($t=1/Math.sqrt(_t+Zt)),m=0,j=nt*$t):(z=pt*($t=1/Math.sqrt(Zt+Qt)),m=-nt*$t,j=0)}g=m*v-j*pt,x=j*nt-z*v,d=z*pt-m*nt,R.cd=nt,R.dd=pt,R.ed=v,R.Qd=g,R.Rd=x,R.Sd=d,R.me=z,R.ne=m,R.oe=j,Ot=this.wb*this.dc-this.xb*this.cc,Lt=this.xb*this.bc-this.vb*this.dc,Ft=this.vb*this.cc-this.wb*this.bc;var ti,ii,si,hi,ai,ei,oi=this.vb*this.bc+this.wb*this.cc+this.xb*this.dc,ri=-1>=oi?3.14159265358979:1<=oi?0:Math.acos(oi),ni=Ot*Ot+Lt*Lt+Ft*Ft;0<ni&&(ni=1/Math.sqrt(ni)),Ot*=ni,Lt*=ni,Ft*=ni,Ot*=ri,Lt*=ri,Ft*=ri,this.Ee=Ot*this.da.Qd+Lt*this.da.Rd+Ft*this.da.Sd,this.Fe=Ot*this.da.me+Lt*this.da.ne+Ft*this.da.oe,ti=this.Ie*this.xe-this.Je*this.we,ii=this.Je*this.ve-this.He*this.xe,si=this.He*this.we-this.Ie*this.ve,oi=this.He*this.ve+this.Ie*this.we+this.Je*this.xe,this.angle=-1>=oi?3.14159265358979:1<=oi?0:Math.acos(oi),0>ti*this.da.cd+ii*this.da.dd+si*this.da.ed&&(this.angle=-this.angle),hi=this.Rf-this.Of,ai=this.Sf-this.Pf,ei=this.Tf-this.Qf,this.eg=hi*this.da.cd+ai*this.da.dd+ei*this.da.ed,this.Df=hi*this.da.Qd+ai*this.da.Rd+ei*this.da.Sd,this.Ef=hi*this.da.me+ai*this.da.ne+ei*this.da.oe},$d:function(t,i){F.prototype.$d.call(this,t,i),this.Ud(i,t,!1)},gd:function(t){F.prototype.gd.call(this,t),this.Ud(t,null,!0)},Eg:function(){var t=new dt;return t.x=this.vb,t.y=this.wb,t.z=this.xb,t},Gg:function(){var t=new dt;return t.x=this.bc,t.y=this.cc,t.z=this.dc,t},Fg:function(t){t.x=this.vb,t.y=this.wb,t.z=this.xb},Hg:function(t){t.x=this.bc,t.y=this.cc,t.z=this.dc},Ig:function(){var t=new dt;return t.x=this.qa,t.y=this.ra,t.z=this.sa,t},Kg:function(){var t=new dt;return t.x=this.nb,t.y=this.ob,t.z=this.pb,t},Jg:function(t){t.x=this.qa,t.y=this.ra,t.z=this.sa},Lg:function(t){t.x=this.nb,t.y=this.ob,t.z=this.pb},In:function(){return this.dl},An:function(){return this.Xk},Hn:function(){return this.cl},zn:function(){return this.Wk},ol:function(){return this.angle},rl:function(){return this.eg}}),O.prototype={fh:function(t,i,s){this.rigidBody1=t,this.rigidBody2=i;var h,a,e,o=this.rigidBody1;h=s.x,a=s.y,e=s.z,h-=o.a.v,a-=o.a.A,e-=o.a.B,t=o.a.o*h+o.a.i*a+o.a.l*e,i=o.a.f*h+o.a.m*a+o.a.g*e,o=o.a.h*h+o.a.j*a+o.a.s*e,(h=this.localAnchor1).x=t,h.y=i,h.z=o,i=this.rigidBody2,o=s.x,h=s.y,a=s.z,o-=i.a.v,h-=i.a.A,a-=i.a.B,s=i.a.o*o+i.a.i*h+i.a.l*a,t=i.a.f*o+i.a.m*h+i.a.g*a,i=i.a.h*o+i.a.j*h+i.a.s*a,(o=this.localAnchor2).x=s,o.y=t,o.z=i}},T.ua=O,T.prototype=ri(O.prototype,{za:function(t,i,s,h){var a,e,o,r;return this.fh(t,i,s),a=h.x,e=h.y,o=h.z,s=t.a.o*a+t.a.i*e+t.a.l*o,r=t.a.f*a+t.a.m*e+t.a.g*o,t=t.a.h*a+t.a.j*e+t.a.s*o,(a=this.localAxis1).x=s,a.y=r,a.z=t,r=h.x,t=h.y,a=h.z,h=i.a.o*r+i.a.i*t+i.a.l*a,s=i.a.f*r+i.a.m*t+i.a.g*a,i=i.a.h*r+i.a.j*t+i.a.s*a,(r=this.localAxis2).x=h,r.y=s,r.z=i,this}}),S.prototype={ua:function(){return this.Pk},Hb:function(){return this.Qc},Mb:function(){return this.ia},cb:function(){return this.M}},B.ua=F,B.prototype=ri(F.prototype,{Ud:function(t,i,s){var h,a,e,o,r,n,p,l,c,y,f,u,b,v,g=s?1:this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0,x=this.Df*g,d=this.Ef*g,z=this.rh*g,m=this.Ee*g;g=this.Fe*g;if(h=-this.Ub,a=this.Tb,e=this.Ub,o=-this.Sb,r=-this.Tb,n=this.Sb,p=-this.Xb,l=this.Wb,c=this.Xb,y=-this.Vb,f=-this.Wb,u=this.Vb,v=1/(this.C.$a+this.D.$a),0>=this.Ce.frequency||!s){b=this.Pb[0],(w=(j=t.rows[t.Ka++]).Aa).va=0,w.wa=0,w.xa=0,w.Ba=0,w.Ca=0,w.Da=0,w.aa=0,w.ba=0,w.ca=0,w.ea=0,w.fa=0,w.ga=0,j.Fa=0,j.Ma=0,j.Ia=0,j.Ha=0,j.motorSpeed=0,j.fb=0,j.ta=b,b=j;var j=this.eg,M=this.Rh,A=this.Ce,w=gt.linearSlop;if(s)A=0,s=1;else{if(0<A.frequency){w=0;var D=6.28318530717958*A.frequency,C=A.dampingRatio;C<gt.minSpringDamperDampingRatio&&(C=gt.minSpringDamperDampingRatio),s=i.dt,C=2*C*D,D*=D,A.useSymplecticEuler?(A=1/(s*C),s=D/C):(A=1/(s*(s*D+C)),s=D/(s*D+C))}else A=0,s=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;0<M.motorForce?(b.motorSpeed=M.motorSpeed,b.fb=M.motorForce*i.dt):(b.motorSpeed=0,b.fb=0)}(i=M.lowerLimit)>(D=M.upperLimit)?i=C=M=0:i==D?(M=-1/0,C=1/0,i=j-i):j<i?(M=-1/0,C=0,0<(i=j-i+w)&&(i=0)):j>D?(M=0,C=1/0,0>(i=j-D-w)&&(i=0)):i=C=M=0,b.Ia=M,b.Ha=C,b.Ma=A*(v?1/v:0),b.Fa=i*s,(v=b.Aa).va=this.da.cd,v.wa=this.da.dd,v.xa=this.da.ed,v.Ba=this.da.cd,v.Ca=this.da.dd,v.Da=this.da.ed,v.aa=-0,v.ba=-h,v.ca=-a,v.ea=-0,v.fa=-p,v.ga=-l}h=this.Pb[1],(p=(a=t.rows[t.Ka++]).Aa).va=0,p.wa=0,p.xa=0,p.Ba=0,p.Ca=0,p.Da=0,p.aa=0,p.ba=0,p.ca=0,p.ea=0,p.fa=0,p.ga=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.fb=0,a.ta=h,(b=a).Fa=x,b.Ma=0,b.Ia=-1/0,b.Ha=1/0,(v=b.Aa).va=this.da.Qd,v.wa=this.da.Rd,v.xa=this.da.Sd,v.Ba=this.da.Qd,v.Ca=this.da.Rd,v.Da=this.da.Sd,v.aa=-e,v.ba=-0,v.ca=-o,v.ea=-c,v.fa=-0,v.ga=-y,x=this.Pb[2],(o=(e=t.rows[t.Ka++]).Aa).va=0,o.wa=0,o.xa=0,o.Ba=0,o.Ca=0,o.Da=0,o.aa=0,o.ba=0,o.ca=0,o.ea=0,o.fa=0,o.ga=0,e.Fa=0,e.Ma=0,e.Ia=0,e.Ha=0,e.motorSpeed=0,e.fb=0,e.ta=x,(b=e).Fa=d,b.Ma=0,b.Ia=-1/0,b.Ha=1/0,(v=b.Aa).va=this.da.me,v.wa=this.da.ne,v.xa=this.da.oe,v.Ba=this.da.me,v.Ca=this.da.ne,v.Da=this.da.oe,v.aa=-r,v.ba=-n,v.ca=-0,v.ea=-f,v.fa=-u,v.ga=-0,d=this.Pb[3],(n=(r=t.rows[t.Ka++]).Aa).va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,r.Fa=0,r.Ma=0,r.Ia=0,r.Ha=0,r.motorSpeed=0,r.fb=0,r.ta=d,(b=r).Fa=z,b.Ma=0,b.Ia=-1/0,b.Ha=1/0,(v=b.Aa).aa=1,v.ba=0,v.ca=0,v.ea=1,v.fa=0,v.ga=0,z=this.Pb[4],(r=(d=t.rows[t.Ka++]).Aa).va=0,r.wa=0,r.xa=0,r.Ba=0,r.Ca=0,r.Da=0,r.aa=0,r.ba=0,r.ca=0,r.ea=0,r.fa=0,r.ga=0,d.Fa=0,d.Ma=0,d.Ia=0,d.Ha=0,d.motorSpeed=0,d.fb=0,d.ta=z,(b=d).Fa=m,b.Ma=0,b.Ia=-1/0,b.Ha=1/0,(v=b.Aa).aa=0,v.ba=1,v.ca=0,v.ea=0,v.fa=1,v.ga=0,m=this.Pb[5],(z=(t=t.rows[t.Ka++]).Aa).va=0,z.wa=0,z.xa=0,z.Ba=0,z.Ca=0,z.Da=0,z.aa=0,z.ba=0,z.ca=0,z.ea=0,z.fa=0,z.ga=0,t.Fa=0,t.Ma=0,t.Ia=0,t.Ha=0,t.motorSpeed=0,t.fb=0,t.ta=m,(b=t).Fa=g,b.Ma=0,b.Ia=-1/0,b.Ha=1/0,(v=b.Aa).aa=0,v.ba=0,v.ca=1,v.ea=0,v.fa=0,v.ga=1},hd:function(){F.prototype.hd.call(this);var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A,w,D,C,B,q,S,k,I,T,O,L,P,R=this.da,J=R.$.C.$a,N=R.$.D.$a;if(-.999999999>(tt=R.$.vb*R.$.bc+R.$.wb*R.$.cc+R.$.xb*R.$.dc)){var H,K,G,V,E=R.$.vb,U=R.$.wb,W=R.$.xb,Y=E*E,X=U*U,$=W*W;Y<X?Y<$?(H=0,K=W*(V=1/Math.sqrt(X+$)),G=-U*V):(H=U*(V=1/Math.sqrt(Y+X)),K=-E*V,G=0):X<$?(H=-W*(V=1/Math.sqrt($+Y)),K=0,G=E*V):(H=U*(V=1/Math.sqrt(Y+X)),K=-E*V,G=0),t=H,i=K,s=G,h=0}else{var Z,Q,_;Z=R.$.wb*R.$.dc-R.$.xb*R.$.cc,Q=R.$.xb*R.$.bc-R.$.vb*R.$.dc,_=R.$.vb*R.$.cc-R.$.wb*R.$.bc;var tt,it=Math.sqrt(.5*(1+tt));t=Z*=tt=.5/it,i=Q*=tt,s=_*=tt,h=it}k=S=q=0;var st=q*(T=t)+S*(O=i)+k*(L=s)+(I=1)*(P=h);if(0>st&&(st=-st,T=-T,O=-O,L=-L,P=-P),.999999<st){var ht=(T=q+J/(J+N)*(T-q))*T+(O=S+J/(J+N)*(O-S))*O+(L=k+J/(J+N)*(L-k))*L+(P=I+J/(J+N)*(P-I))*P;1e-32<ht&&(ht=1/Math.sqrt(ht)),a=T*ht,e=O*ht,o=L*ht,r=P*ht}else{var at=J/(J+N)*Math.acos(st),et=(T+=q*-st)*T+(O+=S*-st)*O+(L+=k*-st)*L+(P+=I*-st)*P;1e-32<et&&(et=1/Math.sqrt(et)),T*=et,O*=et,L*=et,P*=et;var ot=Math.sin(at),rt=Math.cos(at);a=(q*=rt)+T*ot,e=(S*=rt)+O*ot,o=(k*=rt)+L*ot,r=(I*=rt)+P*ot}var nt,pt,lt=2*a,ct=2*e,yt=2*o,ft=a*lt,ut=e*ct,bt=o*yt,vt=a*ct,gt=e*yt,xt=a*yt,dt=r*lt,zt=r*ct,mt=r*yt;if(n=vt-mt,p=xt+zt,l=vt+mt,c=1-ft-bt,y=gt-dt,f=xt-zt,u=gt+dt,b=1-ft-ut,nt=(1-ut-bt)*R.$.vb+n*R.$.wb+p*R.$.xb,pt=l*R.$.vb+c*R.$.wb+y*R.$.xb,v=f*R.$.vb+u*R.$.wb+b*R.$.xb,M=R.cd,A=R.dd,w=R.ed,D=R.Qd,C=R.Rd,B=R.Sd,-.999999999>(It=M*nt+A*pt+w*v)){var jt,Mt,At,wt,Dt=M*M,Ct=A*A,Bt=w*w;Dt<Ct?Dt<Bt?(jt=0,Mt=w*(wt=1/Math.sqrt(Ct+Bt)),At=-A*wt):(jt=A*(wt=1/Math.sqrt(Dt+Ct)),Mt=-M*wt,At=0):Ct<Bt?(jt=-w*(wt=1/Math.sqrt(Bt+Dt)),Mt=0,At=M*wt):(jt=A*(wt=1/Math.sqrt(Dt+Ct)),Mt=-M*wt,At=0),a=jt,e=Mt,o=At,r=0}else{var qt,St,kt;qt=A*v-w*pt,St=w*nt-M*v,kt=M*pt-A*nt;var It,Tt=Math.sqrt(.5*(1+It));a=qt*=It=.5/Tt,e=St*=It,o=kt*=It,r=Tt}var Ot,Lt,Ft,Pt,Rt,Jt,Nt,Ht,Kt,Gt,Vt,Et,Ut,Wt,Yt,Xt,$t,Zt,Qt,_t,ti,ii,si,hi,ai,ei,oi=2*a,ri=2*e,ni=2*o,pi=a*oi,li=e*ri,ci=o*ni,yi=a*ri,fi=e*ni,ui=a*ni,bi=r*oi,vi=r*ri,gi=r*ni;if(1e-6<(z=pt*(d=(f=ui-vi)*D+(u=fi+bi)*C+(b=1-pi-li)*B)-v*(x=(l=yi+gi)*D+(c=1-pi-ci)*C+(y=fi-bi)*B))*z+(m=v*(g=(1-li-ci)*D+(n=yi-gi)*C+(p=ui+vi)*B)-nt*d)*m+(j=nt*x-pt*g)*j){var xi=z*z+m*m+j*j;0<xi&&(xi=1/Math.sqrt(xi)),z*=xi,m*=xi,j*=xi}else{var di,zi=nt*nt,mi=pt*pt,ji=v*v;zi<mi?zi<ji?(z=0,m=v*(di=1/Math.sqrt(mi+ji)),j=-pt*di):(z=pt*(di=1/Math.sqrt(zi+mi)),m=-nt*di,j=0):mi<ji?(z=-v*(di=1/Math.sqrt(ji+zi)),m=0,j=nt*di):(z=pt*(di=1/Math.sqrt(zi+mi)),m=-nt*di,j=0)}g=m*v-j*pt,x=j*nt-z*v,d=z*pt-m*nt,R.cd=nt,R.dd=pt,R.ed=v,R.Qd=g,R.Rd=x,R.Sd=d,R.me=z,R.ne=m,R.oe=j,Ot=this.vb,Lt=this.He,Ft=this.Hh,Pt=this.wb,Rt=this.Ie,Jt=this.Ih,Nt=this.xb,Ht=this.Je,Kt=this.Jh,_t=(Gt=this.bc)*Pt+(Vt=this.ve)*Rt+(Et=this.ah)*Jt,ti=Gt*Nt+Vt*Ht+Et*Kt,ii=(Ut=this.cc)*Ot+(Wt=this.we)*Lt+(Yt=this.bh)*Ft,hi=Ut*Nt+Wt*Ht+Yt*Kt,ai=(Xt=this.dc)*Ot+($t=this.xe)*Lt+(Zt=this.dh)*Ft,ei=Xt*Pt+$t*Rt+Zt*Jt;var Mi,Ai,wi,Di,Ci,Bi=Xt*Nt+$t*Ht+Zt*Kt,qi=(Qt=Gt*Ot+Vt*Lt+Et*Ft)+(si=Ut*Pt+Wt*Rt+Yt*Jt)+Bi;0<qi?(Di=.5*(Ci=Math.sqrt(qi+1)),Mi=(ei-hi)*(Ci=.5/Ci),Ai=(ti-ai)*Ci,wi=(ii-_t)*Ci):Qt>si?Qt>Bi?(Mi=.5*(Ci=Math.sqrt(Qt-si-Bi+1)),Ai=(_t+ii)*(Ci=.5/Ci),wi=(ti+ai)*Ci,Di=(ei-hi)*Ci):(wi=.5*(Ci=Math.sqrt(Bi-Qt-si+1)),Mi=(ti+ai)*(Ci=.5/Ci),Ai=(hi+ei)*Ci,Di=(ii-_t)*Ci):si>Bi?(Ai=.5*(Ci=Math.sqrt(si-Bi-Qt+1)),Mi=(_t+ii)*(Ci=.5/Ci),wi=(hi+ei)*Ci,Di=(ti-ai)*Ci):(wi=.5*(Ci=Math.sqrt(Bi-Qt-si+1)),Mi=(ti+ai)*(Ci=.5/Ci),Ai=(hi+ei)*Ci,Di=(ii-_t)*Ci);var Si=Di,ki=2*(-1>=Si?3.14159265358979:1<=Si?0:Math.acos(Si));this.rh=Mi,this.Ee=Ai,this.Fe=wi;var Ii,Ti,Oi,Li=this.rh*this.rh+this.Ee*this.Ee+this.Fe*this.Fe;0<Li&&(Li=1/Math.sqrt(Li)),this.rh*=Li,this.Ee*=Li,this.Fe*=Li,this.rh*=ki,this.Ee*=ki,this.Fe*=ki,Ii=this.Rf-this.Of,Ti=this.Sf-this.Pf,Oi=this.Tf-this.Qf,this.eg=Ii*this.da.cd+Ti*this.da.dd+Oi*this.da.ed,this.Df=Ii*this.da.Qd+Ti*this.da.Rd+Oi*this.da.Sd,this.Ef=Ii*this.da.me+Ti*this.da.ne+Oi*this.da.oe},$d:function(t,i){F.prototype.$d.call(this,t,i),this.Ud(i,t,!1)},gd:function(t){F.prototype.gd.call(this,t),this.Ud(t,null,!0)},Eg:function(){var t=new dt;return t.x=this.vb,t.y=this.wb,t.z=this.xb,t},Gg:function(){var t=new dt;return t.x=this.bc,t.y=this.cc,t.z=this.dc,t},Fg:function(t){t.x=this.vb,t.y=this.wb,t.z=this.xb},Hg:function(t){t.x=this.bc,t.y=this.cc,t.z=this.dc},Ig:function(){var t=new dt;return t.x=this.qa,t.y=this.ra,t.z=this.sa,t},Kg:function(){var t=new dt;return t.x=this.nb,t.y=this.ob,t.z=this.pb,t},Jg:function(t){t.x=this.qa,t.y=this.ra,t.z=this.sa},Lg:function(t){t.x=this.nb,t.y=this.ob,t.z=this.pb},Cj:function(){return this.Ce},ql:function(){return this.Rh},rl:function(){return this.eg}}),C.ua=O,C.prototype=ri(O.prototype,{za:function(t,i,s,h){var a,e,o,r;return this.fh(t,i,s),a=h.x,e=h.y,o=h.z,s=t.a.o*a+t.a.i*e+t.a.l*o,r=t.a.f*a+t.a.m*e+t.a.g*o,t=t.a.h*a+t.a.j*e+t.a.s*o,(a=this.localAxis1).x=s,a.y=r,a.z=t,r=h.x,t=h.y,a=h.z,h=i.a.o*r+i.a.i*t+i.a.l*a,s=i.a.f*r+i.a.m*t+i.a.g*a,i=i.a.h*r+i.a.j*t+i.a.s*a,(r=this.localAxis2).x=h,r.y=s,r.z=i,this}}),D.ua=F,D.prototype=ri(F.prototype,{Ud:function(t,i,s){var h,a,e=s?1:this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;h=this.Mj*e,a=this.Df*e;var o,r,n,p,l,c,y,f,u,b,v,g,x=this.Ef*e;o=-this.Ub,r=this.Tb,n=this.Ub,p=-this.Sb,l=-this.Tb,c=this.Sb,y=-this.Xb,f=this.Wb,u=this.Xb,b=-this.Vb,v=-this.Wb,g=this.Vb;var d=this.je,z=this.ke,m=this.le,j=(e=(this.C.P*d+this.C.R*z+this.C.S*m)*d+(this.C.T*d+this.C.U*z+this.C.V*m)*z+(this.C.W*d+this.C.X*z+this.C.Y*m)*m,(this.D.P*d+this.D.R*z+this.D.S*m)*d+(this.D.T*d+this.D.U*z+this.D.V*m)*z+(this.D.W*d+this.D.X*z+this.D.Y*m)*m);if(0<e){var M=d*this.Sb+z*this.Tb+m*this.Ub;0<(M=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-M*M)&&(e=0<this.C.$a?1/(1/e+this.C.Pc*M):0)}if(0<j&&(d=d*this.Vb+z*this.Wb+m*this.Xb,0<(d=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-d*d)&&(j=0<this.D.$a?1/(1/j+this.D.Pc*d):0)),j=e+j?1/(e+j):0,z=this.bc,m=this.cc,M=this.dc,e=(this.C.P*z+this.C.R*m+this.C.S*M)*z+(this.C.T*z+this.C.U*m+this.C.V*M)*m+(this.C.W*z+this.C.X*m+this.C.Y*M)*M,d=(this.D.P*z+this.D.R*m+this.D.S*M)*z+(this.D.T*z+this.D.U*m+this.D.V*M)*m+(this.D.W*z+this.D.X*m+this.D.Y*M)*M,0<e){var A=z*this.Sb+m*this.Tb+M*this.Ub;0<(A=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-A*A)&&(e=0<this.C.$a?1/(1/e+this.C.Pc*A):0)}0<d&&(z=z*this.Vb+m*this.Wb+M*this.Xb,0<(z=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-z*z)&&(d=0<this.D.$a?1/(1/d+this.D.Pc*z):0)),e=e+d?1/(e+d):0,d=this.Pb[0],(m=(z=t.rows[t.Ka++]).Aa).va=0,m.wa=0,m.xa=0,m.Ba=0,m.Ca=0,m.Da=0,m.aa=0,m.ba=0,m.ca=0,m.ea=0,m.fa=0,m.ga=0,z.Fa=0,z.Ma=0,z.Ia=0,z.Ha=0,z.motorSpeed=0,z.fb=0,z.ta=d,(d=z).Fa=h,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).va=1,d.wa=0,d.xa=0,d.Ba=1,d.Ca=0,d.Da=0,d.aa=-0,d.ba=-o,d.ca=-r,d.ea=-0,d.fa=-y,d.ga=-f,d=this.Pb[1],(o=(h=t.rows[t.Ka++]).Aa).va=0,o.wa=0,o.xa=0,o.Ba=0,o.Ca=0,o.Da=0,o.aa=0,o.ba=0,o.ca=0,o.ea=0,o.fa=0,o.ga=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.fb=0,h.ta=d,(d=h).Fa=a,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).va=0,d.wa=1,d.xa=0,d.Ba=0,d.Ca=1,d.Da=0,d.aa=-n,d.ba=-0,d.ca=-p,d.ea=-u,d.fa=-0,d.ga=-b,d=this.Pb[2],(n=(a=t.rows[t.Ka++]).Aa).va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.fb=0,a.ta=d,(d=a).Fa=x,d.Ma=0,d.Ia=-1/0,d.Ha=1/0,(d=d.Aa).va=0,d.wa=0,d.xa=1,d.Ba=0,d.Ca=0,d.Da=1,d.aa=-l,d.ba=-c,d.ca=-0,d.ea=-v,d.fa=-g,d.ga=-0,0<this.Nj&&(0>=this.$k.frequency||!s)&&(d=this.Pb[3],(l=(x=t.rows[t.Ka++]).Aa).va=0,l.wa=0,l.xa=0,l.Ba=0,l.Ca=0,l.Da=0,l.aa=0,l.ba=0,l.ca=0,l.ea=0,l.fa=0,l.ga=0,x.Fa=0,x.Ma=0,x.Ia=0,x.Ha=0,x.motorSpeed=0,x.fb=0,x.ta=d,d=x,x=this.Nj,v=this.nl,c=this.$k,l=gt.angularSlop,s?(c=0,g=1):(0<c.frequency?(l=0,n=6.28318530717958*c.frequency,(a=c.dampingRatio)<gt.minSpringDamperDampingRatio&&(a=gt.minSpringDamperDampingRatio),g=i.dt,a=2*a*n,n*=n,c.useSymplecticEuler?(c=1/(g*a),g=n/a):(c=1/(g*(g*n+a)),g=n/(g*n+a))):(c=0,g=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0),0<v.motorTorque?(d.motorSpeed=v.motorSpeed,d.fb=v.motorTorque*i.dt):(d.motorSpeed=0,d.fb=0)),x=((x-(n=.5*((a=v.lowerLimit)+(v=v.upperLimit)))+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,x+=n,a>v?x=p=n=0:a==v?(n=-1/0,p=1/0,x-=a):x<a?(n=-1/0,p=0,0<(x=x-a+l)&&(x=0)):x>v?(n=0,p=1/0,0>(x=x-v-l)&&(x=0)):x=p=n=0,d.Ia=n,d.Ha=p,d.Ma=c*(j?1/j:0),d.Fa=x*g,(d=d.Aa).aa=this.je,d.ba=this.ke,d.ca=this.le,d.ea=this.je,d.fa=this.ke,d.ga=this.le),(0>=this.fl.frequency||!s)&&(j=this.Pb[4],(d=(t=t.rows[t.Ka++]).Aa).va=0,d.wa=0,d.xa=0,d.Ba=0,d.Ca=0,d.Da=0,d.aa=0,d.ba=0,d.ca=0,d.ea=0,d.fa=0,d.ga=0,t.Fa=0,t.Ma=0,t.Ia=0,t.Ha=0,t.motorSpeed=0,t.fb=0,t.ta=j,d=t,t=this.tj,x=this.el,l=this.fl,j=gt.angularSlop,s?(s=0,l=1):(0<l.frequency?(j=0,s=6.28318530717958*l.frequency,(v=l.dampingRatio)<gt.minSpringDamperDampingRatio&&(v=gt.minSpringDamperDampingRatio),c=i.dt,v=2*v*s,g=s*s,l.useSymplecticEuler?(s=1/(c*v),l=g/v):(s=1/(c*(c*g+v)),l=g/(c*g+v))):(s=0,l=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0),0<x.motorTorque?(d.motorSpeed=x.motorSpeed,d.fb=x.motorTorque*i.dt):(d.motorSpeed=0,d.fb=0)),t=((t-(c=.5*((i=x.lowerLimit)+(x=x.upperLimit)))+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,t+=c,i>x?i=v=c=0:i==x?(c=-1/0,v=1/0,i=t-i):t<i?(c=-1/0,v=0,0<(i=t-i+j)&&(i=0)):t>x?(c=0,v=1/0,0>(i=t-x-j)&&(i=0)):i=v=c=0,d.Ia=c,d.Ha=v,d.Ma=s*(e?1/e:0),d.Fa=i*l,(d=d.Aa).aa=this.gi,d.ba=this.hi,d.ca=this.ii,d.ea=this.gi,d.fa=this.hi,d.ga=this.ii)},hd:function(){var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j;F.prototype.hd.call(this),t=this.vb,i=this.wb,s=this.xb,h=this.bc,a=this.cc,e=this.dc,o=this.vb,r=this.He,n=this.Hh,p=this.wb,l=this.Ie,c=this.Ih,y=this.xb,f=this.Je,u=this.Jh,-.999999999>(z=t*h+i*a+s*e)?(a=s*s,(d=t*t)<(h=i*i)?d<a?(d=0,s*=h=1/Math.sqrt(h+a),t=-i*h):(d=i*(h=1/Math.sqrt(d+h)),s=-t*h,t=0):h<a?(d=-s*(h=1/Math.sqrt(a+d)),s=0,t*=h):(d=i*(h=1/Math.sqrt(d+h)),s=-t*h,t=0),b=d,v=s,g=t,x=0):(b=(i*e-s*a)*(z=.5/(d=Math.sqrt(.5*(1+z)))),v=(s*h-t*e)*z,g=(t*a-i*h)*z,x=d),m=(z=b)*(a=2*z),j=(e=v)*(s=2*e),h=(d=g)*(i=2*d),d=z*s,e*=i,z*=i;var M=(t=x)*a,A=t*s;a=t*i,t=1-j-h,i=d-a,s=z+A,d+=a,h=1-m-h,a=e-M,z-=A,e+=M,m=1-m-j,this.kj=2*(-1>=x?3.14159265358979:1<=x?0:Math.acos(x)),x=b,j=g,g=t*this.ve+d*this.we+z*this.xe,M=i*this.ve+h*this.we+e*this.xe,b=s*this.ve+a*this.we+m*this.xe,this.tj=Math.atan2(this.Hh*g+this.Ih*M+this.Jh*b,this.He*g+this.Ie*M+this.Je*b),this.gi=this.vb+this.bc,this.hi=this.wb+this.cc,this.ii=this.xb+this.dc,0<(b=this.gi*this.gi+this.hi*this.hi+this.ii*this.ii)&&(b=1/Math.sqrt(b)),this.gi*=b,this.hi*=b,this.ii*=b,0<(g=Math.sqrt(x*x+v*v+j*j))&&(g=1/g),b=r*(x*=g*this.kj)+l*(v*=g*this.kj)+f*(j*=g*this.kj),v=n*x+c*v+u*j,(x=b*b*(g=1/((g=this.bk)*g))+v*v*(j=1/((x=this.ck)*x)))?(A=(x=b*(M=Math.sqrt(1/x)))*g,j*=M*=v,0<(b=(b-x)*(A*=g=1/Math.sqrt(A*A+j*j))+(v-M)*(j*=g))?(this.Nj=b,this.je=0,this.ke=A,this.le=j,o=o*this.je+r*this.ke+n*this.le,p=p*this.je+l*this.ke+c*this.le,y=y*this.je+f*this.ke+u*this.le,this.je=o,this.ke=p,this.le=y,y=t*this.je+i*this.ke+s*this.le,f=d*this.je+h*this.ke+a*this.le,u=z*this.je+e*this.ke+m*this.le,this.je=y,this.ke=f,this.le=u):this.Nj=0):this.Nj=this.le=this.ke=this.je=0,this.Mj=this.Rf-this.Of,this.Df=this.Sf-this.Pf,this.Ef=this.Tf-this.Qf},$d:function(t,i){F.prototype.$d.call(this,t,i),this.Ud(i,t,!1)},gd:function(t){F.prototype.gd.call(this,t),this.Ud(t,null,!0)},Eg:function(){var t=new dt;return t.x=this.vb,t.y=this.wb,t.z=this.xb,t},Gg:function(){var t=new dt;return t.x=this.bc,t.y=this.cc,t.z=this.dc,t},Fg:function(t){t.x=this.vb,t.y=this.wb,t.z=this.xb},Hg:function(t){t.x=this.bc,t.y=this.cc,t.z=this.dc},Ig:function(){var t=new dt;return t.x=this.qa,t.y=this.ra,t.z=this.sa,t},Kg:function(){var t=new dt;return t.x=this.nb,t.y=this.ob,t.z=this.pb,t},Jg:function(t){t.x=this.qa,t.y=this.ra,t.z=this.sa},Lg:function(t){t.x=this.nb,t.y=this.ob,t.z=this.pb},Mn:function(){return this.fl},Ln:function(){return this.el},Gn:function(){return this.$k},En:function(){var t=new dt;return t.x=this.je,t.y=this.ke,t.z=this.le,t},Fn:function(t){t.x=this.je,t.y=this.ke,t.z=this.le},Dn:function(){return this.kj},Kn:function(){return this.tj}}),w.ua=O,w.prototype=ri(O.prototype,{za:function(t,i,s,h,a){var e,o,r,n;return this.fh(t,i,s),e=h.x,o=h.y,r=h.z,s=t.a.o*e+t.a.i*o+t.a.l*r,n=t.a.f*e+t.a.m*o+t.a.g*r,e=t.a.h*e+t.a.j*o+t.a.s*r,(o=this.localTwistAxis1).x=s,o.y=n,o.z=e,n=h.x,e=h.y,o=h.z,h=i.a.o*n+i.a.i*e+i.a.l*o,s=i.a.f*n+i.a.m*e+i.a.g*o,i=i.a.h*n+i.a.j*e+i.a.s*o,(n=this.localTwistAxis2).x=h,n.y=s,n.z=i,h=a.x,s=a.y,n=a.z,a=t.a.o*h+t.a.i*s+t.a.l*n,i=t.a.f*h+t.a.m*s+t.a.g*n,t=t.a.h*h+t.a.j*s+t.a.s*n,(h=this.localSwingAxis1).x=a,h.y=i,h.z=t,this}}),A.ua=F,A.prototype=ri(F.prototype,{Ud:function(t,i,s){var h,a,e=s?1:this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;h=this.Mj*e,a=this.Df*e;var o,r,n,p,l,c,y,f,u,b,v,g,x=this.Ef*e,d=this.Ee*e;e=this.Fe*e;o=-this.Ub,r=this.Tb,n=this.Ub,p=-this.Sb,l=-this.Tb,c=this.Sb,y=-this.Xb,f=this.Wb,u=this.Xb,b=-this.Vb,v=-this.Wb,g=this.Vb;var z=this.da.cd,m=this.da.dd,j=this.da.ed,M=(this.C.P*z+this.C.R*m+this.C.S*j)*z+(this.C.T*z+this.C.U*m+this.C.V*j)*m+(this.C.W*z+this.C.X*m+this.C.Y*j)*j,A=(this.D.P*z+this.D.R*m+this.D.S*j)*z+(this.D.T*z+this.D.U*m+this.D.V*j)*m+(this.D.W*z+this.D.X*m+this.D.Y*j)*j;if(0<M){var w=z*this.Sb+m*this.Tb+j*this.Ub;0<(w=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-w*w)&&(M=0<this.C.$a?1/(1/M+this.C.Pc*w):0)}0<A&&(z=z*this.Vb+m*this.Wb+j*this.Xb,0<(z=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-z*z)&&(A=0<this.D.$a?1/(1/A+this.D.Pc*z):0)),M=M+A?1/(M+A):0,A=this.Pb[0],(m=(z=t.rows[t.Ka++]).Aa).va=0,m.wa=0,m.xa=0,m.Ba=0,m.Ca=0,m.Da=0,m.aa=0,m.ba=0,m.ca=0,m.ea=0,m.fa=0,m.ga=0,z.Fa=0,z.Ma=0,z.Ia=0,z.Ha=0,z.motorSpeed=0,z.fb=0,z.ta=A,(A=z).Fa=h,A.Ma=0,A.Ia=-1/0,A.Ha=1/0,(A=A.Aa).va=1,A.wa=0,A.xa=0,A.Ba=1,A.Ca=0,A.Da=0,A.aa=-0,A.ba=-o,A.ca=-r,A.ea=-0,A.fa=-y,A.ga=-f,A=this.Pb[1],(o=(h=t.rows[t.Ka++]).Aa).va=0,o.wa=0,o.xa=0,o.Ba=0,o.Ca=0,o.Da=0,o.aa=0,o.ba=0,o.ca=0,o.ea=0,o.fa=0,o.ga=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.fb=0,h.ta=A,(A=h).Fa=a,A.Ma=0,A.Ia=-1/0,A.Ha=1/0,(A=A.Aa).va=0,A.wa=1,A.xa=0,A.Ba=0,A.Ca=1,A.Da=0,A.aa=-n,A.ba=-0,A.ca=-p,A.ea=-u,A.fa=-0,A.ga=-b,a=this.Pb[2],(n=(A=t.rows[t.Ka++]).Aa).va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,A.Fa=0,A.Ma=0,A.Ia=0,A.Ha=0,A.motorSpeed=0,A.fb=0,A.ta=a,A.Fa=x,A.Ma=0,A.Ia=-1/0,A.Ha=1/0,(A=A.Aa).va=0,A.wa=0,A.xa=1,A.Ba=0,A.Ca=0,A.Da=1,A.aa=-l,A.ba=-c,A.ca=-0,A.ea=-v,A.fa=-g,A.ga=-0,(0>=this.Ce.frequency||!s)&&(x=this.Pb[3],(c=(l=t.rows[t.Ka++]).Aa).va=0,c.wa=0,c.xa=0,c.Ba=0,c.Ca=0,c.Da=0,c.aa=0,c.ba=0,c.ca=0,c.ea=0,c.fa=0,c.ga=0,l.Fa=0,l.Ma=0,l.Ia=0,l.Ha=0,l.motorSpeed=0,l.fb=0,l.ta=x,A=l,x=this.angle,c=this.Rh,v=this.Ce,l=gt.angularSlop,s?(s=0,v=1):(0<v.frequency?(l=0,s=6.28318530717958*v.frequency,(a=v.dampingRatio)<gt.minSpringDamperDampingRatio&&(a=gt.minSpringDamperDampingRatio),g=i.dt,a=2*a*s,n=s*s,v.useSymplecticEuler?(s=1/(g*a),v=n/a):(s=1/(g*(g*n+a)),v=n/(g*n+a))):(s=0,v=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0),0<c.motorTorque?(A.motorSpeed=c.motorSpeed,A.fb=c.motorTorque*i.dt):(A.motorSpeed=0,A.fb=0)),x=((x-(g=.5*((i=c.lowerLimit)+(c=c.upperLimit)))+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+g,i>c?i=a=g=0:i==c?(g=-1/0,a=1/0,i=x-i):x<i?(g=-1/0,a=0,0<(i=x-i+l)&&(i=0)):x>c?(g=0,a=1/0,0>(i=x-c-l)&&(i=0)):i=a=g=0,A.Ia=g,A.Ha=a,A.Ma=s*(M?1/M:0),A.Fa=i*v,(A=A.Aa).aa=this.da.cd,A.ba=this.da.dd,A.ca=this.da.ed,A.ea=this.da.cd,A.fa=this.da.dd,A.ga=this.da.ed),i=this.Pb[4],(s=(M=t.rows[t.Ka++]).Aa).va=0,s.wa=0,s.xa=0,s.Ba=0,s.Ca=0,s.Da=0,s.aa=0,s.ba=0,s.ca=0,s.ea=0,s.fa=0,s.ga=0,M.Fa=0,M.Ma=0,M.Ia=0,M.Ha=0,M.motorSpeed=0,M.fb=0,M.ta=i,(A=M).Fa=d,A.Ma=0,A.Ia=-1/0,A.Ha=1/0,(A=A.Aa).aa=this.da.Qd,A.ba=this.da.Rd,A.ca=this.da.Sd,A.ea=this.da.Qd,A.fa=this.da.Rd,A.ga=this.da.Sd,d=this.Pb[5],(i=(t=t.rows[t.Ka++]).Aa).va=0,i.wa=0,i.xa=0,i.Ba=0,i.Ca=0,i.Da=0,i.aa=0,i.ba=0,i.ca=0,i.ea=0,i.fa=0,i.ga=0,t.Fa=0,t.Ma=0,t.Ia=0,t.Ha=0,t.motorSpeed=0,t.fb=0,t.ta=d,(A=t).Fa=e,A.Ma=0,A.Ia=-1/0,A.Ha=1/0,(A=A.Aa).aa=this.da.me,A.ba=this.da.ne,A.ca=this.da.oe,A.ea=this.da.me,A.fa=this.da.ne,A.ga=this.da.oe},hd:function(){F.prototype.hd.call(this);var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A,w,D,C,B,q,S,k,I,T,O,L,P,R=this.da,J=R.$.C.$a,N=R.$.D.$a;if(-.999999999>(tt=R.$.vb*R.$.bc+R.$.wb*R.$.cc+R.$.xb*R.$.dc)){var H,K,G,V,E=R.$.vb,U=R.$.wb,W=R.$.xb,Y=E*E,X=U*U,$=W*W;Y<X?Y<$?(H=0,K=W*(V=1/Math.sqrt(X+$)),G=-U*V):(H=U*(V=1/Math.sqrt(Y+X)),K=-E*V,G=0):X<$?(H=-W*(V=1/Math.sqrt($+Y)),K=0,G=E*V):(H=U*(V=1/Math.sqrt(Y+X)),K=-E*V,G=0),t=H,i=K,s=G,h=0}else{var Z,Q,_;Z=R.$.wb*R.$.dc-R.$.xb*R.$.cc,Q=R.$.xb*R.$.bc-R.$.vb*R.$.dc,_=R.$.vb*R.$.cc-R.$.wb*R.$.bc;var tt,it=Math.sqrt(.5*(1+tt));t=Z*=tt=.5/it,i=Q*=tt,s=_*=tt,h=it}k=S=q=0;var st=q*(T=t)+S*(O=i)+k*(L=s)+(I=1)*(P=h);if(0>st&&(st=-st,T=-T,O=-O,L=-L,P=-P),.999999<st){var ht=(T=q+J/(J+N)*(T-q))*T+(O=S+J/(J+N)*(O-S))*O+(L=k+J/(J+N)*(L-k))*L+(P=I+J/(J+N)*(P-I))*P;1e-32<ht&&(ht=1/Math.sqrt(ht)),a=T*ht,e=O*ht,o=L*ht,r=P*ht}else{var at=J/(J+N)*Math.acos(st),et=(T+=q*-st)*T+(O+=S*-st)*O+(L+=k*-st)*L+(P+=I*-st)*P;1e-32<et&&(et=1/Math.sqrt(et)),T*=et,O*=et,L*=et,P*=et;var ot=Math.sin(at),rt=Math.cos(at);a=(q*=rt)+T*ot,e=(S*=rt)+O*ot,o=(k*=rt)+L*ot,r=(I*=rt)+P*ot}var nt,pt,lt=2*a,ct=2*e,yt=2*o,ft=a*lt,ut=e*ct,bt=o*yt,vt=a*ct,gt=e*yt,xt=a*yt,dt=r*lt,zt=r*ct,mt=r*yt;if(n=vt-mt,p=xt+zt,l=vt+mt,c=1-ft-bt,y=gt-dt,f=xt-zt,u=gt+dt,b=1-ft-ut,nt=(1-ut-bt)*R.$.vb+n*R.$.wb+p*R.$.xb,pt=l*R.$.vb+c*R.$.wb+y*R.$.xb,v=f*R.$.vb+u*R.$.wb+b*R.$.xb,M=R.cd,A=R.dd,w=R.ed,D=R.Qd,C=R.Rd,B=R.Sd,-.999999999>(It=M*nt+A*pt+w*v)){var jt,Mt,At,wt,Dt=M*M,Ct=A*A,Bt=w*w;Dt<Ct?Dt<Bt?(jt=0,Mt=w*(wt=1/Math.sqrt(Ct+Bt)),At=-A*wt):(jt=A*(wt=1/Math.sqrt(Dt+Ct)),Mt=-M*wt,At=0):Ct<Bt?(jt=-w*(wt=1/Math.sqrt(Bt+Dt)),Mt=0,At=M*wt):(jt=A*(wt=1/Math.sqrt(Dt+Ct)),Mt=-M*wt,At=0),a=jt,e=Mt,o=At,r=0}else{var qt,St,kt;qt=A*v-w*pt,St=w*nt-M*v,kt=M*pt-A*nt;var It,Tt=Math.sqrt(.5*(1+It));a=qt*=It=.5/Tt,e=St*=It,o=kt*=It,r=Tt}var Ot,Lt,Ft,Pt=2*a,Rt=2*e,Jt=2*o,Nt=a*Pt,Ht=e*Rt,Kt=o*Jt,Gt=a*Rt,Vt=e*Jt,Et=a*Jt,Ut=r*Pt,Wt=r*Rt,Yt=r*Jt;if(1e-6<(z=pt*(d=(f=Et-Wt)*D+(u=Vt+Ut)*C+(b=1-Nt-Ht)*B)-v*(x=(l=Gt+Yt)*D+(c=1-Nt-Kt)*C+(y=Vt-Ut)*B))*z+(m=v*(g=(1-Ht-Kt)*D+(n=Gt-Yt)*C+(p=Et+Wt)*B)-nt*d)*m+(j=nt*x-pt*g)*j){var Xt=z*z+m*m+j*j;0<Xt&&(Xt=1/Math.sqrt(Xt)),z*=Xt,m*=Xt,j*=Xt}else{var $t,Zt=nt*nt,Qt=pt*pt,_t=v*v;Zt<Qt?Zt<_t?(z=0,m=v*($t=1/Math.sqrt(Qt+_t)),j=-pt*$t):(z=pt*($t=1/Math.sqrt(Zt+Qt)),m=-nt*$t,j=0):Qt<_t?(z=-v*($t=1/Math.sqrt(_t+Zt)),m=0,j=nt*$t):(z=pt*($t=1/Math.sqrt(Zt+Qt)),m=-nt*$t,j=0)}g=m*v-j*pt,x=j*nt-z*v,d=z*pt-m*nt,R.cd=nt,R.dd=pt,R.ed=v,R.Qd=g,R.Rd=x,R.Sd=d,R.me=z,R.ne=m,R.oe=j,Ot=this.wb*this.dc-this.xb*this.cc,Lt=this.xb*this.bc-this.vb*this.dc,Ft=this.vb*this.cc-this.wb*this.bc;var ti,ii,si,hi=this.vb*this.bc+this.wb*this.cc+this.xb*this.dc,ai=-1>=hi?3.14159265358979:1<=hi?0:Math.acos(hi),ei=Ot*Ot+Lt*Lt+Ft*Ft;0<ei&&(ei=1/Math.sqrt(ei)),Ot*=ei,Lt*=ei,Ft*=ei,Ot*=ai,Lt*=ai,Ft*=ai,this.Ee=Ot*this.da.Qd+Lt*this.da.Rd+Ft*this.da.Sd,this.Fe=Ot*this.da.me+Lt*this.da.ne+Ft*this.da.oe,ti=this.Ie*this.xe-this.Je*this.we,ii=this.Je*this.ve-this.He*this.xe,si=this.He*this.we-this.Ie*this.ve,hi=this.He*this.ve+this.Ie*this.we+this.Je*this.xe,this.angle=-1>=hi?3.14159265358979:1<=hi?0:Math.acos(hi),0>ti*this.da.cd+ii*this.da.dd+si*this.da.ed&&(this.angle=-this.angle),this.Mj=this.Rf-this.Of,this.Df=this.Sf-this.Pf,this.Ef=this.Tf-this.Qf},$d:function(t,i){F.prototype.$d.call(this,t,i),this.Ud(i,t,!1)},gd:function(t){F.prototype.gd.call(this,t),this.Ud(t,null,!0)},Eg:function(){var t=new dt;return t.x=this.vb,t.y=this.wb,t.z=this.xb,t},Gg:function(){var t=new dt;return t.x=this.bc,t.y=this.cc,t.z=this.dc,t},Fg:function(t){t.x=this.vb,t.y=this.wb,t.z=this.xb},Hg:function(t){t.x=this.bc,t.y=this.cc,t.z=this.dc},Ig:function(){var t=new dt;return t.x=this.qa,t.y=this.ra,t.z=this.sa,t},Kg:function(){var t=new dt;return t.x=this.nb,t.y=this.ob,t.z=this.pb,t},Jg:function(t){t.x=this.qa,t.y=this.ra,t.z=this.sa},Lg:function(t){t.x=this.nb,t.y=this.ob,t.z=this.pb},Cj:function(){return this.Ce},ql:function(){return this.Rh},ol:function(){return this.angle}}),M.ua=O,M.prototype=ri(O.prototype,{za:function(t,i,s,h){var a,e,o,r;return this.fh(t,i,s),a=h.x,e=h.y,o=h.z,s=t.a.o*a+t.a.i*e+t.a.l*o,r=t.a.f*a+t.a.m*e+t.a.g*o,t=t.a.h*a+t.a.j*e+t.a.s*o,(a=this.localAxis1).x=s,a.y=r,a.z=t,r=h.x,t=h.y,a=h.z,h=i.a.o*r+i.a.i*t+i.a.l*a,s=i.a.f*r+i.a.m*t+i.a.g*a,i=i.a.h*r+i.a.j*t+i.a.s*a,(r=this.localAxis2).x=h,r.y=s,r.z=i,this}}),j.prototype={ua:function(t,i){return this.lowerLimit=t,this.upperLimit=i,this},cb:function(t,i){return this.motorSpeed=t,this.motorTorque=i,this},clone:function(){var t=new j;return t.lowerLimit=this.lowerLimit,t.upperLimit=this.upperLimit,t.motorSpeed=this.motorSpeed,t.motorTorque=this.motorTorque,t}},m.ua=F,m.prototype=ri(F.prototype,{Ud:function(t,i,s){if(!(0<this.Ce.frequency&&s)){var h,a,e,o,r,n,p,l,c,y,f,u,b,v;if(h=this.Rf-this.Of,a=this.Sf-this.Pf,e=this.Tf-this.Qf,0<this.Ce.frequency){o=6.28318530717958*this.Ce.frequency,(s=this.Ce.dampingRatio)<gt.minSpringDamperDampingRatio&&(s=gt.minSpringDamperDampingRatio),i=i.dt,s=2*s*o;var g=o*o;this.Ce.useSymplecticEuler?(o=1/(i*s),i=g/s):(o=1/(i*(i*g+s)),i=g/(i*g+s)),o*=this.C.$a+this.D.$a}else o=0,i=s?1:this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;r=-this.Ub,n=this.Tb,p=this.Ub,l=-this.Sb,s=-this.Tb,g=this.Sb,c=-this.Xb,y=this.Wb,f=this.Xb,u=-this.Vb,b=-this.Wb,v=this.Vb;var x=this.Pb[0],d=t.rows[t.Ka++],z=d.Aa;z.va=0,z.wa=0,z.xa=0,z.Ba=0,z.Ca=0,z.Da=0,z.aa=0,z.ba=0,z.ca=0,z.ea=0,z.fa=0,z.ga=0,d.Fa=0,d.Ma=0,d.Ia=0,d.Ha=0,d.motorSpeed=0,d.fb=0,d.ta=x,(x=d).Fa=h*i,x.Ma=o,x.Ia=-1/0,x.Ha=1/0,(h=x.Aa).va=1,h.wa=0,h.xa=0,h.Ba=1,h.Ca=0,h.Da=0,h.aa=-0,h.ba=-r,h.ca=-n,h.ea=-0,h.fa=-c,h.ga=-y,h=this.Pb[1],(n=(r=t.rows[t.Ka++]).Aa).va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,r.Fa=0,r.Ma=0,r.Ia=0,r.Ha=0,r.motorSpeed=0,r.fb=0,r.ta=h,(x=r).Fa=a*i,x.Ma=o,x.Ia=-1/0,x.Ha=1/0,(h=x.Aa).va=0,h.wa=1,h.xa=0,h.Ba=0,h.Ca=1,h.Da=0,h.aa=-p,h.ba=-0,h.ca=-l,h.ea=-f,h.fa=-0,h.ga=-u,a=this.Pb[2],(h=(t=t.rows[t.Ka++]).Aa).va=0,h.wa=0,h.xa=0,h.Ba=0,h.Ca=0,h.Da=0,h.aa=0,h.ba=0,h.ca=0,h.ea=0,h.fa=0,h.ga=0,t.Fa=0,t.Ma=0,t.Ia=0,t.Ha=0,t.motorSpeed=0,t.fb=0,t.ta=a,(x=t).Fa=e*i,x.Ma=o,x.Ia=-1/0,x.Ha=1/0,(h=x.Aa).va=0,h.wa=0,h.xa=1,h.Ba=0,h.Ca=0,h.Da=1,h.aa=-s,h.ba=-g,h.ca=-0,h.ea=-b,h.fa=-v,h.ga=-0}},$d:function(t,i){F.prototype.$d.call(this,t,i),this.Ud(i,t,!1)},gd:function(t){F.prototype.gd.call(this,t),this.Ud(t,null,!0)},Cj:function(){return this.Ce}}),z.ua=O,z.prototype=ri(O.prototype,{za:function(t,i,s){return this.fh(t,i,s),this}}),d.prototype={ua:function(t,i){return this.frequency=t,this.dampingRatio=i,this},cb:function(t){return this.useSymplecticEuler=t,this},clone:function(){var t=new d;return t.frequency=this.frequency,t.dampingRatio=this.dampingRatio,t.useSymplecticEuler=this.useSymplecticEuler,t}},x.prototype={ua:function(t,i){return this.lowerLimit=t,this.upperLimit=i,this},cb:function(t,i){return this.motorSpeed=t,this.motorForce=i,this},clone:function(){var t=new x;return t.lowerLimit=this.lowerLimit,t.upperLimit=this.upperLimit,t.motorSpeed=this.motorSpeed,t.motorForce=this.motorForce,t}},g.ua=F,g.prototype=ri(F.prototype,{Ud:function(t,i,s){var h,a,e=s?1:this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;h=this.Mj*e,a=this.Df*e;var o,r,n,p,l,c,y,f,u,b,v,g,x,d,z,m,j,M,A=this.Ef*e,w=this.Pl*e;b=u=0,o=-(o=0),r=-(r=-this.Ub),n=-(n=this.Tb),p=-(p=this.Ub),l=-(l=0),c=-(c=-this.Sb),y=-(y=-this.Tb),f=-(f=this.Sb),u=-u,b=-b,v=-(v=-this.Xb),g=-(g=this.Wb),x=-(x=this.Xb),d=-(d=0),z=-(z=-this.Vb),m=-(m=-this.Wb),j=-(j=this.Vb),M=-(M=0);var D=this.fg,C=this.gg,B=this.hg,q=(this.C.P*D+this.C.R*C+this.C.S*B)*D+(this.C.T*D+this.C.U*C+this.C.V*B)*C+(this.C.W*D+this.C.X*C+this.C.Y*B)*B,S=(this.D.P*D+this.D.R*C+this.D.S*B)*D+(this.D.T*D+this.D.U*C+this.D.V*B)*C+(this.D.W*D+this.D.X*C+this.D.Y*B)*B;if(0<q){var k=D*this.Sb+C*this.Tb+B*this.Ub,I=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-k*k;0<I&&(q=0<this.C.$a?1/(1/q+this.C.Pc*I):0)}if(0<S){var T=D*this.Vb+C*this.Wb+B*this.Xb,O=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-T*T;0<O&&(S=0<this.D.$a?1/(1/S+this.D.Pc*O):0)}var L=q+S?1/(q+S):0,F=this.ig,P=this.jg,R=this.kg,J=(this.C.P*F+this.C.R*P+this.C.S*R)*F+(this.C.T*F+this.C.U*P+this.C.V*R)*P+(this.C.W*F+this.C.X*P+this.C.Y*R)*R,N=(this.D.P*F+this.D.R*P+this.D.S*R)*F+(this.D.T*F+this.D.U*P+this.D.V*R)*P+(this.D.W*F+this.D.X*P+this.D.Y*R)*R;if(0<J){var H=F*this.Sb+P*this.Tb+R*this.Ub,K=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-H*H;0<K&&(J=0<this.C.$a?1/(1/J+this.C.Pc*K):0)}if(0<N){var G=F*this.Vb+P*this.Wb+R*this.Xb,V=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-G*G;0<V&&(N=0<this.D.$a?1/(1/N+this.D.Pc*V):0)}var E=J+N?1/(J+N):0,U=this.Pb[0],Y=t.rows[t.Ka++],X=Y.Aa;X.va=0,X.wa=0,X.xa=0,X.Ba=0,X.Ca=0,X.Da=0,X.aa=0,X.ba=0,X.ca=0,X.ea=0,X.fa=0,X.ga=0,Y.Fa=0,Y.Ma=0,Y.Ia=0,Y.Ha=0,Y.motorSpeed=0,Y.fb=0,Y.ta=U,(nt=Y).Fa=h,nt.Ma=0,nt.Ia=-1/0,nt.Ha=1/0;var $=nt.Aa;$.va=1,$.wa=0,$.xa=0,$.Ba=1,$.Ca=0,$.Da=0,$.aa=o,$.ba=r,$.ca=n,$.ea=b,$.fa=v,$.ga=g;var Z=this.Pb[1],Q=t.rows[t.Ka++],_=Q.Aa;_.va=0,_.wa=0,_.xa=0,_.Ba=0,_.Ca=0,_.Da=0,_.aa=0,_.ba=0,_.ca=0,_.ea=0,_.fa=0,_.ga=0,Q.Fa=0,Q.Ma=0,Q.Ia=0,Q.Ha=0,Q.motorSpeed=0,Q.fb=0,Q.ta=Z,(nt=Q).Fa=a,nt.Ma=0,nt.Ia=-1/0,nt.Ha=1/0,($=nt.Aa).va=0,$.wa=1,$.xa=0,$.Ba=0,$.Ca=1,$.Da=0,$.aa=p,$.ba=l,$.ca=c,$.ea=x,$.fa=d,$.ga=z;var tt=this.Pb[2],it=t.rows[t.Ka++],st=it.Aa;if(st.va=0,st.wa=0,st.xa=0,st.Ba=0,st.Ca=0,st.Da=0,st.aa=0,st.ba=0,st.ca=0,st.ea=0,st.fa=0,st.ga=0,it.Fa=0,it.Ma=0,it.Ia=0,it.Ha=0,it.motorSpeed=0,it.fb=0,it.ta=tt,(nt=it).Fa=A,nt.Ma=0,nt.Ia=-1/0,nt.Ha=1/0,($=nt.Aa).va=0,$.wa=0,$.xa=1,$.Ba=0,$.Ca=0,$.Da=1,$.aa=y,$.ba=f,$.ca=u,$.ea=m,$.fa=j,$.ga=M,!this.Jm&&(0>=this.Yk.frequency||!s)){var ht=this.Pb[3],at=t.rows[t.Ka++],et=at.Aa;et.va=0,et.wa=0,et.xa=0,et.Ba=0,et.Ca=0,et.Da=0,et.aa=0,et.ba=0,et.ca=0,et.ea=0,et.fa=0,et.ga=0,at.Fa=0,at.Ma=0,at.Ia=0,at.Ha=0,at.motorSpeed=0,at.fb=0,at.ta=ht;var ot,rt,nt=at,pt=this.Ni,lt=this.Qk,ct=this.Yk,yt=gt.angularSlop;if(s)ot=0,rt=1;else{if(0<ct.frequency){yt=0;var ft=6.28318530717958*ct.frequency,ut=ct.dampingRatio;ut<gt.minSpringDamperDampingRatio&&(ut=gt.minSpringDamperDampingRatio);var bt=i.dt,vt=2*ut*ft,xt=ft*ft;ct.useSymplecticEuler?(ot=1/(bt*vt),rt=xt/vt):(ot=1/(bt*(bt*xt+vt)),rt=xt/(bt*xt+vt))}else ot=0,rt=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;0<lt.motorTorque?(nt.motorSpeed=lt.motorSpeed,nt.fb=lt.motorTorque*i.dt):(nt.motorSpeed=0,nt.fb=0)}var dt,zt,mt,jt=lt.lowerLimit,Mt=lt.upperLimit,At=.5*(jt+Mt);pt=(pt=(((pt=pt-At)+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979)+At;jt>Mt?mt=zt=dt=0:jt==Mt?(dt=-1/0,zt=1/0,mt=pt-jt):pt<jt?(dt=-1/0,zt=0,0<(mt=pt-jt+yt)&&(mt=0)):pt>Mt?(dt=0,zt=1/0,0>(mt=pt-Mt-yt)&&(mt=0)):mt=zt=dt=0;var wt=L?1/L:0;nt.Ia=dt,nt.Ha=zt,nt.Ma=ot*wt,nt.Fa=mt*rt,($=nt.Aa).aa=this.fg,$.ba=this.gg,$.ca=this.hg,$.ea=this.fg,$.fa=this.gg,$.ga=this.hg}if(!this.Km){var Dt=this.Pb[4],Ct=t.rows[t.Ka++],Bt=Ct.Aa;Bt.va=0,Bt.wa=0,Bt.xa=0,Bt.Ba=0,Bt.Ca=0,Bt.Da=0,Bt.aa=0,Bt.ba=0,Bt.ca=0,Bt.ea=0,Bt.fa=0,Bt.ga=0,Ct.Fa=0,Ct.Ma=0,Ct.Ia=0,Ct.Ha=0,Ct.motorSpeed=0,Ct.fb=0,Ct.ta=Dt,(nt=Ct).Fa=w,nt.Ma=0,nt.Ia=-1/0,nt.Ha=1/0,($=nt.Aa).aa=this.Yg,$.ba=this.Zg,$.ca=this.$g,$.ea=this.Yg,$.fa=this.Zg,$.ga=this.$g}if(!this.Lm&&(0>=this.Zk.frequency||!s)){var qt=this.Pb[5],St=t.rows[t.Ka++],kt=St.Aa;kt.va=0,kt.wa=0,kt.xa=0,kt.Ba=0,kt.Ca=0,kt.Da=0,kt.aa=0,kt.ba=0,kt.ca=0,kt.ea=0,kt.fa=0,kt.ga=0,St.Fa=0,St.Ma=0,St.Ia=0,St.Ha=0,St.motorSpeed=0,St.fb=0,St.ta=qt;nt=St;var It,Tt,Ot=this.Oi,Lt=this.Rk,Ft=this.Zk,Pt=gt.angularSlop;if(s)It=0,Tt=1;else{if(0<Ft.frequency){Pt=0;var Rt=6.28318530717958*Ft.frequency,Jt=Ft.dampingRatio;Jt<gt.minSpringDamperDampingRatio&&(Jt=gt.minSpringDamperDampingRatio);var Nt=i.dt,Ht=2*Jt*Rt,Kt=Rt*Rt;Ft.useSymplecticEuler?(It=1/(Nt*Ht),Tt=Kt/Ht):(It=1/(Nt*(Nt*Kt+Ht)),Tt=Kt/(Nt*Kt+Ht))}else It=0,Tt=this.Hc==W.BAUMGARTE?i.invDt*gt.velocityBaumgarte:0;0<Lt.motorTorque?(nt.motorSpeed=Lt.motorSpeed,nt.fb=Lt.motorTorque*i.dt):(nt.motorSpeed=0,nt.fb=0)}var Gt,Vt,Et,Ut=Lt.lowerLimit,Wt=Lt.upperLimit,Yt=.5*(Ut+Wt);Ot=(Ot=(((Ot=Ot-Yt)+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979)+Yt;Ut>Wt?Et=Vt=Gt=0:Ut==Wt?(Gt=-1/0,Vt=1/0,Et=Ot-Ut):Ot<Ut?(Gt=-1/0,Vt=0,0<(Et=Ot-Ut+Pt)&&(Et=0)):Ot>Wt?(Gt=0,Vt=1/0,0>(Et=Ot-Wt-Pt)&&(Et=0)):Et=Vt=Gt=0;var Xt=E?1/E:0;nt.Ia=Gt,nt.Ha=Vt,nt.Ma=It*Xt,nt.Fa=Et*Tt,($=nt.Aa).aa=this.ig,$.ba=this.jg,$.ca=this.kg,$.ea=this.ig,$.fa=this.jg,$.ga=this.kg}},hd:function(){var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d,z;F.prototype.hd.call(this),t=this.vb,i=this.wb,s=this.xb,o=this.ah,h=(r=this.bh)*s-(n=this.dh)*i,a=n*t-o*s,e=o*i-r*t,this.fg=a*n-e*r,this.gg=e*o-h*n,this.hg=h*r-a*o,this.Yg=h,this.Zg=a,this.$g=e,this.ig=i*e-s*a,this.jg=s*h-t*e,this.kg=t*a-i*h,0<(t=this.fg*this.fg+this.gg*this.gg+this.hg*this.hg)&&(t=1/Math.sqrt(t)),this.fg*=t,this.gg*=t,this.hg*=t,0<(t=this.Yg*this.Yg+this.Zg*this.Zg+this.$g*this.$g)&&(t=1/Math.sqrt(t)),this.Yg*=t,this.Zg*=t,this.$g*=t,0<(t=this.ig*this.ig+this.jg*this.jg+this.kg*this.kg)&&(t=1/Math.sqrt(t)),this.ig*=t,this.jg*=t,this.kg*=t,this.Jm=!(this.fg*this.fg+this.gg*this.gg+this.hg*this.hg),this.Km=!(this.Yg*this.Yg+this.Zg*this.Zg+this.$g*this.$g),this.Lm=!(this.ig*this.ig+this.jg*this.jg+this.kg*this.kg),p=this.vb,t=this.He,i=this.Hh,l=this.wb,s=this.Ie,h=this.Ih,c=this.xb,a=this.Je,e=this.Jh,y=this.bc,f=this.ve,o=this.ah,u=this.cc,b=this.we,r=this.bh,v=this.dc,d=t*f+s*b+a*(g=this.xe),z=i*f+h*b+e*g,-1>=(x=p*o+l*r+c*(n=this.dh))?(t=.5*(s=Math.atan2(z,d)),i=-1.570796326794895,s=.5*-s):1<=x?(t=.5*(s=Math.atan2(z,d)),i=1.570796326794895,s*=.5):(x=Math.asin(x),p=Math.atan2(-(p*f+l*b+c*g),p*y+l*u+c*v),t=Math.atan2(-(t*o+s*r+a*n),i*o+h*r+e*n),i=x,s=p),this.Ni=t,this.Pl=i,this.Oi=s,this.Mj=this.Rf-this.Of,this.Df=this.Sf-this.Pf,this.Ef=this.Tf-this.Qf},$d:function(t,i){F.prototype.$d.call(this,t,i),this.Ud(i,t,!1)},gd:function(t){F.prototype.gd.call(this,t),this.Ud(t,null,!0)},Eg:function(){var t=new dt;return t.x=this.vb,t.y=this.wb,t.z=this.xb,t},Gg:function(){var t=new dt;return t.x=this.ah,t.y=this.bh,t.z=this.dh,t},Fg:function(t){t.x=this.vb,t.y=this.wb,t.z=this.xb},Hg:function(t){t.x=this.ah,t.y=this.bh,t.z=this.dh},Ig:function(){var t=new dt;return t.x=this.qa,t.y=this.ra,t.z=this.sa,t},Kg:function(){var t=new dt;return t.x=this.Mc,t.y=this.Nc,t.z=this.Oc,t},Jg:function(t){t.x=this.qa,t.y=this.ra,t.z=this.sa},Lg:function(t){t.x=this.Mc,t.y=this.Nc,t.z=this.Oc},Bn:function(){return this.Yk},Cn:function(){return this.Zk},xn:function(){return this.Qk},yn:function(){return this.Rk},sn:function(){return this.Ni},tn:function(){return this.Oi}}),v.ua=O,v.prototype=ri(O.prototype,{za:function(t,i,s,h,a){var e,o,r;return this.fh(t,i,s),e=h.x,o=h.y,r=h.z,h=t.a.o*e+t.a.i*o+t.a.l*r,s=t.a.f*e+t.a.m*o+t.a.g*r,t=t.a.h*e+t.a.j*o+t.a.s*r,(e=this.localAxis1).x=h,e.y=s,e.z=t,h=a.x,s=a.y,e=a.z,a=i.a.o*h+i.a.i*s+i.a.l*e,t=i.a.f*h+i.a.m*s+i.a.g*e,i=i.a.h*h+i.a.j*s+i.a.s*e,(h=this.localAxis2).x=a,h.y=t,h.z=i,this}}),y.prototype={za:function(t){this.Sc=t.Sc;for(var i=0,s=this.Sc;i<s;){var h=i++;this.uh[h]=t.uh[h],this.zh[h]=t.zh[h]}for(this.ie=t.ie,i=0,s=this.ie;i<s;)h=i++,this.Mg[h]=t.Mg[h]},kl:function(t,i,s,h,a,e,o){for(var r=0,n=this.ie;r<n;){var p=r++,l=(p=this.Mg[p],t.rows[p]);this.il[p]=l.Fa*e-s[p]-l.Ma*h[p]}for(r=i.cj,n=0,p=this.Sc;n<p;){var c=n++,y=(l=this.uh[c],c=this.zh[c],t.rows[l]);c=(0>c?y.Ia:0<c?y.Ha:0)-h[l];if(a[l]=c){y=0;for(var f=this.ie;y<f;){var u=y++,b=u=this.Mg[u];(v=this.il)[b]-=r[l][u]*c}}}for(n=this.Mg,p=this.ie,c=l=0;c<p;)l|=1<<n[y=c++];for(i.Sj[l]||(i.nn(l,n,p),i.Sj[l]=!0),n=i.Ck[l],i=!0,p=0,l=this.ie;p<l;){c=p++,y=this.Mg[c],f=t.rows[y],b=u=h[y];for(var v=0,g=this.ie;v<g;){var x=v++;b=b+this.il[this.Mg[x]]*n[c][x]}if(b<f.Ia-gt.directMlcpSolverEps||b>f.Ha+gt.directMlcpSolverEps){i=!1;break}a[y]=b-u}if(o)return!0;if(!i)return!1;for(o=0,n=this.Sc;o<n;){for(c=o++,p=this.uh[c],l=t.rows[p],c=this.zh[c],y=h[p]+a[p],f=s[p],u=0,b=t.Ka;u<b;)v=u++,f+=r[p][v]*a[v];if(p=l.Fa*e-f-l.Ma*y,0>c&&p>gt.directMlcpSolverEps||0<c&&p<-gt.directMlcpSolverEps){i=!1;break}}return i}},l.prototype={Uh:function(t,i){if(i==t.Ka)null==this.Th[this.jf]&&(this.Th[this.jf]=new y(this.Qn)),this.Th[this.jf++].za(this.cf);else{var s=t.rows[i],h=s.Ia>-1/0,a=s.Ha<1/0;0==s.Ia&&0==s.Ha?((a=this.cf).uh[a.Sc]=i,a.zh[a.Sc]=0,a.Sc++,this.Uh(t,i+1),this.cf.Sc--):((s=this.cf).Mg[s.ie]=i,s.ie++,this.Uh(t,i+1),this.cf.ie--,h&&((h=this.cf).uh[h.Sc]=i,h.zh[h.Sc]=-1,h.Sc++,this.Uh(t,i+1),this.cf.Sc--),a&&((a=this.cf).uh[a.Sc]=i,a.zh[a.Sc]=1,a.Sc++,this.Uh(t,i+1),this.cf.Sc--))}}},p.prototype={},n.ua=Y,n.prototype=ri(Y.prototype,{xh:function(t){this.$.hd(),this.$.$d(t,this.info),this.C=this.info.Qe,this.D=this.info.Re,this.ei.ll(this.info,this.ac),(t=this.Se).jf=0,(i=t.cf).Sc=0,i.ie=0,t.Uh(this.info,0),t=this.Ml;for(var i=this.Se.jf,s=0,h=0,a=0,e=t.n;a<e;){var o=a++;(o=t.sc[o])<i?(t.kf[s]=o,++s):(t.kf[i+h]=o,++h)}i=t.sc,t.sc=t.kf,t.kf=i},Gh:function(t){if(0>=(c=(c=this.$.Hc==W.BAUMGARTE?gt.jointWarmStartingFactorForBaungarte:gt.jointWarmStartingFactor)*t.dtRatio))for(c=0,t=this.info.Ka;c<t;){var i=c++;(i=this.info.rows[i].ta).ta=0,i.ad=0,i.ub=0}else{for(t=0,i=this.info.Ka;t<i;){var s=t++;(u=(y=(f=this.info.rows[s]).ta).ta*c)<f.Ia?u=f.Ia:u>f.Ha&&(u=f.Ha),y.ta=u,0<f.fb?((u=y.ad*c)<-(f=f.fb)?u=-f:u>f&&(u=f),y.ad=u):y.ad=0,this.Cf[s]=y.ta+y.ad}var h,a,e,o,r,n,p,l,c=this.Cf,y=(i=t=!1,s=this.C.gb,this.C.hb),f=this.C.ib,u=this.D.gb;h=this.D.hb,a=this.D.ib,e=this.C.kb,o=this.C.lb,r=this.C.mb,n=this.D.kb,p=this.D.lb,l=this.D.mb;for(var b=0,v=this.info.Ka;b<v;){var g=b++,x=this.info.rows[g].Aa,d=this.ac[g];g=c[g];1&x.xc&&(s+=d.qd*g,y+=d.rd*g,f+=d.sd*g,u+=d.td*-g,h+=d.ud*-g,a+=d.vd*-g,t=!0),2&x.xc&&(e+=d.kd*g,o+=d.ld*g,r+=d.md*g,n+=d.nd*-g,p+=d.od*-g,l+=d.pd*-g,i=!0)}t&&(this.C.gb=s,this.C.hb=y,this.C.ib=f,this.D.gb=u,this.D.hb=h,this.D.ib=a),i&&(this.C.kb=e,this.C.lb=o,this.C.mb=r,this.D.kb=n,this.D.lb=p,this.D.mb=l)}},Ch:function(){var t,i,s,h,a,e,o,r,n,p,l,c,y=this.info.Ka;t=this.C.gb,i=this.C.hb,s=this.C.ib,h=this.D.gb,a=this.D.hb,e=this.D.ib,o=this.C.kb,r=this.C.lb,n=this.C.mb,p=this.D.kb,l=this.D.lb,c=this.D.mb;for(var f=0;f<y;){var u,b=f++,v=(u=this.info.rows[b]).ta,g=(g=(g=(g=(g=0)+(t*(u=u.Aa).va+i*u.wa+s*u.xa))-(h*u.Ba+a*u.Ca+e*u.Da))+(o*u.aa+r*u.ba+n*u.ca))-(p*u.ea+l*u.fa+c*u.ga);this.Qg[b]=g,this.Yh[b]=v.ta,this.Aj[b]=0}for(t=this.ei.cj,i=0;i<y;)if(s=i++,h=(e=this.info.rows[s]).ta,o=this.ac[s],0<e.fb)for((e=(a=h.ad)+o.Ff*(-e.motorSpeed-this.Qg[s]))<-(o=h.ad)?e=-o:e>o&&(e=o),h.ad=e,h=e-a,this.Aj[s]=h,a=0,e=y;a<e;)r=o=a++,(n=this.Qg)[r]+=h*t[s][o];for(i=!1,s=0,h=this.Se.jf;s<h;)if(t=s++,t=this.Ml.sc[t],this.Se.Th[t].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,1,!1)){for(i=0;i<y;)h=i++,s=this.Cf[h],this.info.rows[h].ta.ta+=s,(a=this.Aj)[h]+=s;for(y=this.Aj,s=i=!1,h=this.C.gb,a=this.C.hb,e=this.C.ib,o=this.D.gb,r=this.D.hb,n=this.D.ib,p=this.C.kb,l=this.C.lb,c=this.C.mb,f=this.D.kb,b=this.D.lb,v=this.D.mb,u=0,g=this.info.Ka;u<g;){var x=u++,d=this.info.rows[x].Aa,z=this.ac[x];x=y[x];1&d.xc&&(h+=z.qd*x,a+=z.rd*x,e+=z.sd*x,o+=z.td*-x,r+=z.ud*-x,n+=z.vd*-x,i=!0),2&d.xc&&(p+=z.kd*x,l+=z.ld*x,c+=z.md*x,f+=z.nd*-x,b+=z.od*-x,v+=z.pd*-x,s=!0)}for(i&&(this.C.gb=h,this.C.hb=a,this.C.ib=e,this.D.gb=o,this.D.hb=r,this.D.ib=n),s&&(this.C.kb=p,this.C.lb=l,this.C.mb=c,this.D.kb=f,this.D.lb=b,this.D.mb=v),y=this.Ml,i=0;y.sc[i]!=t;)++i;for(;0<i;)t=y.sc[i],y.sc[i]=y.sc[i-1],y.sc[i-1]=t,--i;i=!0;break}i||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},Li:function(t){for(var i,s,h,a,e,o,r=o=e=a=h=s=i=0,n=this.info.Ka;r<n;){var p,l=r++;l=(p=this.info.rows[l]).ta;1&(p=p.Aa).xc?(i+=p.va*l.ta,s+=p.wa*l.ta,h+=p.xa*l.ta):2&p.xc&&(a+=p.aa*l.ta,e+=p.ba*l.ta,o+=p.ca*l.ta)}this.$.Pi=i*t.invDt,this.$.Qi=s*t.invDt,this.$.Ri=h*t.invDt,this.$.Si=a*t.invDt,this.$.Ti=e*t.invDt,this.$.Ui=o*t.invDt},Pg:function(){this.$.hd(),this.$.gd(this.info),this.C=this.info.Qe,this.D=this.info.Re,this.ei.ll(this.info,this.ac),(t=this.Se).jf=0,(i=t.cf).Sc=0,i.ie=0,t.Uh(this.info,0);for(var t=this.Ki,i=this.Se.jf,s=0,h=0,a=0,e=t.n;a<e;){var o=a++;(o=t.sc[o])<i?(t.kf[s]=o,++s):(t.kf[i+h]=o,++h)}for(i=t.sc,t.sc=t.kf,t.kf=i,t=0,i=this.info.Ka;t<i;)s=t++,this.info.rows[s].ta.ub=0},Bh:function(){var t,i,s,h,a,e,o,r,n,p,l,c,y=this.info.Ka;t=this.C.Yc,i=this.C.Zc,s=this.C.$c,h=this.D.Yc,a=this.D.Zc,e=this.D.$c,o=this.C.Uc,r=this.C.Vc,n=this.C.Wc,p=this.D.Uc,l=this.D.Vc,c=this.D.Wc;for(var f=0;f<y;){var u,b=f++,v=(u=this.info.rows[b]).ta,g=(g=(g=(g=(g=0)+(t*(u=u.Aa).va+i*u.wa+s*u.xa))-(h*u.Ba+a*u.Ca+e*u.Da))+(o*u.aa+r*u.ba+n*u.ca))-(p*u.ea+l*u.fa+c*u.ga);this.Qg[b]=g,this.Yh[b]=v.ub}for(i=!1,s=0,h=this.Se.jf;s<h;)if(t=s++,t=this.Ki.sc[t],this.Se.Th[t].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,gt.positionSplitImpulseBaumgarte,!1)){for(i=0;i<y;)s=i++,this.info.rows[s].ta.ub+=this.Cf[s];for(y=this.Cf,s=i=!1,h=this.C.Yc,a=this.C.Zc,e=this.C.$c,o=this.D.Yc,r=this.D.Zc,n=this.D.$c,p=this.C.Uc,l=this.C.Vc,c=this.C.Wc,f=this.D.Uc,b=this.D.Vc,v=this.D.Wc,u=0,g=this.info.Ka;u<g;){var x=u++,d=this.info.rows[x].Aa,z=this.ac[x];x=y[x];1&d.xc&&(h+=z.qd*x,a+=z.rd*x,e+=z.sd*x,o+=z.td*-x,r+=z.ud*-x,n+=z.vd*-x,i=!0),2&d.xc&&(p+=z.kd*x,l+=z.ld*x,c+=z.md*x,f+=z.nd*-x,b+=z.od*-x,v+=z.pd*-x,s=!0)}for(i&&(this.C.Yc=h,this.C.Zc=a,this.C.$c=e,this.D.Yc=o,this.D.Zc=r,this.D.$c=n),s&&(this.C.Uc=p,this.C.Vc=l,this.C.Wc=c,this.D.Uc=f,this.D.Vc=b,this.D.Wc=v),y=this.Ki,i=0;y.sc[i]!=t;)++i;for(;0<i;)t=y.sc[i],y.sc[i]=y.sc[i-1],y.sc[i-1]=t,--i;i=!0;break}i||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},Ah:function(){this.$.hd(),this.$.gd(this.info),this.C=this.info.Qe,this.D=this.info.Re,this.ei.ll(this.info,this.ac);var t=this.Se;t.jf=0;var i=t.cf;i.Sc=0,i.ie=0,t.Uh(this.info,0);for(var s=this.Ki,h=this.Se.jf,a=0,e=0,o=0,r=s.n;o<r;){var n=o++,p=s.sc[n];p<h?(s.kf[a]=p,++a):(s.kf[h+e]=p,++e)}var l=s.sc;s.sc=s.kf,s.kf=l;for(var c=this.info.Ka,y=0;y<c;){var f=y++,u=this.info.rows[f].ta;this.Qg[f]=0,this.Yh[f]=u.ub}for(var b=!1,v=0,g=this.Se.jf;v<g;){var x=v++,d=this.Ki.sc[x];if(this.Se.Th[d].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,gt.positionNgsBaumgarte,!1)){for(var z=0,m=c;z<m;){var j=z++;this.info.rows[j].ta.ub+=this.Cf[j]}for(var M,A,w,D,C,B,q,S,k,I,T,O,L=this.Cf,F=!1,P=!1,R=O=T=I=k=S=q=B=C=D=w=A=M=0,J=this.info.Ka;R<J;){var N=R++,H=this.info.rows[N].Aa,K=this.ac[N],G=L[N];1&H.xc&&(M+=K.qd*G,A+=K.rd*G,w+=K.sd*G,D+=K.td*-G,C+=K.ud*-G,B+=K.vd*-G,F=!0),2&H.xc&&(q+=K.kd*G,S+=K.ld*G,k+=K.md*G,I+=K.nd*-G,T+=K.od*-G,O+=K.pd*-G,P=!0)}if(F){var V=this.C;V.a.v+=M,V.a.A+=A,V.a.B+=w;var E=this.D;E.a.v+=D,E.a.A+=C,E.a.B+=B}if(P){var U,W,Y,X,$,Z,Q=this.C,_=Math.sqrt(q*q+S*S+k*k),tt=.5*_;if(.5>tt){var it=tt*tt;U=.5*(1-.16666666666666666*it+it*it*.008333333333333333),W=1-.5*it+it*it*.041666666666666664}else U=Math.sin(tt)/_,W=Math.cos(tt);Y=q*U,X=S*U,$=k*U,Z=W;var st,ht,at,et,ot,rt=Q.a.o,nt=Q.a.m,pt=Q.a.s,lt=rt+nt+pt;0<lt?(et=.5*(ot=Math.sqrt(lt+1)),ot=.5/ot,st=(Q.a.g-Q.a.j)*ot,ht=(Q.a.h-Q.a.l)*ot,at=(Q.a.i-Q.a.f)*ot):rt>nt?rt>pt?(st=.5*(ot=Math.sqrt(rt-nt-pt+1)),ot=.5/ot,ht=(Q.a.f+Q.a.i)*ot,at=(Q.a.h+Q.a.l)*ot,et=(Q.a.g-Q.a.j)*ot):(at=.5*(ot=Math.sqrt(pt-rt-nt+1)),ot=.5/ot,st=(Q.a.h+Q.a.l)*ot,ht=(Q.a.j+Q.a.g)*ot,et=(Q.a.i-Q.a.f)*ot):nt>pt?(ht=.5*(ot=Math.sqrt(nt-pt-rt+1)),ot=.5/ot,st=(Q.a.f+Q.a.i)*ot,at=(Q.a.j+Q.a.g)*ot,et=(Q.a.h-Q.a.l)*ot):(at=.5*(ot=Math.sqrt(pt-rt-nt+1)),ot=.5/ot,st=(Q.a.h+Q.a.l)*ot,ht=(Q.a.j+Q.a.g)*ot,et=(Q.a.i-Q.a.f)*ot);var ct=(st=Z*st+Y*et+X*at-$*ht)*st+(ht=Z*ht-Y*at+X*et+$*st)*ht+(at=Z*at+Y*ht-X*st+$*et)*at+(et=Z*et-Y*st-X*ht-$*at)*et;1e-32<ct&&(ct=1/Math.sqrt(ct));st*=ct,ht*=ct,at*=ct,et*=ct;var yt,ft,ut,bt,vt,xt,dt,zt,mt,jt,Mt,At,wt,Dt,Ct,Bt,qt,St,kt=2*st,It=2*ht,Tt=2*at,Ot=st*kt,Lt=ht*It,Ft=at*Tt,Pt=st*It,Rt=ht*Tt,Jt=st*Tt,Nt=et*kt,Ht=et*It,Kt=et*Tt;Q.a.o=1-Lt-Ft,Q.a.f=Pt-Kt,Q.a.h=Jt+Ht,Q.a.i=Pt+Kt,Q.a.m=1-Ot-Ft,Q.a.j=Rt-Nt,Q.a.l=Jt-Ht,Q.a.g=Rt+Nt,Q.a.s=1-Ot-Lt,yt=Q.a.o*Q.Ra+Q.a.f*Q.Ua+Q.a.h*Q.Xa,ft=Q.a.o*Q.Sa+Q.a.f*Q.Va+Q.a.h*Q.Ya,ut=Q.a.o*Q.Ta+Q.a.f*Q.Wa+Q.a.h*Q.Za,bt=Q.a.i*Q.Ra+Q.a.m*Q.Ua+Q.a.j*Q.Xa,vt=Q.a.i*Q.Sa+Q.a.m*Q.Va+Q.a.j*Q.Ya,xt=Q.a.i*Q.Ta+Q.a.m*Q.Wa+Q.a.j*Q.Za,dt=Q.a.l*Q.Ra+Q.a.g*Q.Ua+Q.a.s*Q.Xa,zt=Q.a.l*Q.Sa+Q.a.g*Q.Va+Q.a.s*Q.Ya,mt=Q.a.l*Q.Ta+Q.a.g*Q.Wa+Q.a.s*Q.Za,Q.P=yt,Q.R=ft,Q.S=ut,Q.T=bt,Q.U=vt,Q.V=xt,Q.W=dt,Q.X=zt,Q.Y=mt,jt=Q.P*Q.a.o+Q.R*Q.a.f+Q.S*Q.a.h,Mt=Q.P*Q.a.i+Q.R*Q.a.m+Q.S*Q.a.j,At=Q.P*Q.a.l+Q.R*Q.a.g+Q.S*Q.a.s,wt=Q.T*Q.a.o+Q.U*Q.a.f+Q.V*Q.a.h,Dt=Q.T*Q.a.i+Q.U*Q.a.m+Q.V*Q.a.j,Ct=Q.T*Q.a.l+Q.U*Q.a.g+Q.V*Q.a.s,Bt=Q.W*Q.a.o+Q.X*Q.a.f+Q.Y*Q.a.h,qt=Q.W*Q.a.i+Q.X*Q.a.m+Q.Y*Q.a.j,St=Q.W*Q.a.l+Q.X*Q.a.g+Q.Y*Q.a.s,Q.P=jt,Q.R=Mt,Q.S=At,Q.T=wt,Q.U=Dt,Q.V=Ct,Q.W=Bt,Q.X=qt,Q.Y=St,Q.P*=Q.N.x,Q.R*=Q.N.x,Q.S*=Q.N.x,Q.T*=Q.N.y,Q.U*=Q.N.y,Q.V*=Q.N.y,Q.W*=Q.N.z,Q.X*=Q.N.z,Q.Y*=Q.N.z;var Gt,Vt,Et,Ut,Wt,Yt,Xt=this.D,$t=Math.sqrt(I*I+T*T+O*O),Zt=.5*$t;if(.5>Zt){var Qt=Zt*Zt;Gt=.5*(1-.16666666666666666*Qt+Qt*Qt*.008333333333333333),Vt=1-.5*Qt+Qt*Qt*.041666666666666664}else Gt=Math.sin(Zt)/$t,Vt=Math.cos(Zt);Et=I*Gt,Ut=T*Gt,Wt=O*Gt,Yt=Vt;var _t,ti,ii,si,hi,ai=Xt.a.o,ei=Xt.a.m,oi=Xt.a.s,ri=ai+ei+oi;0<ri?(si=.5*(hi=Math.sqrt(ri+1)),hi=.5/hi,_t=(Xt.a.g-Xt.a.j)*hi,ti=(Xt.a.h-Xt.a.l)*hi,ii=(Xt.a.i-Xt.a.f)*hi):ai>ei?ai>oi?(_t=.5*(hi=Math.sqrt(ai-ei-oi+1)),hi=.5/hi,ti=(Xt.a.f+Xt.a.i)*hi,ii=(Xt.a.h+Xt.a.l)*hi,si=(Xt.a.g-Xt.a.j)*hi):(ii=.5*(hi=Math.sqrt(oi-ai-ei+1)),hi=.5/hi,_t=(Xt.a.h+Xt.a.l)*hi,ti=(Xt.a.j+Xt.a.g)*hi,si=(Xt.a.i-Xt.a.f)*hi):ei>oi?(ti=.5*(hi=Math.sqrt(ei-oi-ai+1)),hi=.5/hi,_t=(Xt.a.f+Xt.a.i)*hi,ii=(Xt.a.j+Xt.a.g)*hi,si=(Xt.a.h-Xt.a.l)*hi):(ii=.5*(hi=Math.sqrt(oi-ai-ei+1)),hi=.5/hi,_t=(Xt.a.h+Xt.a.l)*hi,ti=(Xt.a.j+Xt.a.g)*hi,si=(Xt.a.i-Xt.a.f)*hi);var ni=(_t=Yt*_t+Et*si+Ut*ii-Wt*ti)*_t+(ti=Yt*ti-Et*ii+Ut*si+Wt*_t)*ti+(ii=Yt*ii+Et*ti-Ut*_t+Wt*si)*ii+(si=Yt*si-Et*_t-Ut*ti-Wt*ii)*si;1e-32<ni&&(ni=1/Math.sqrt(ni));_t*=ni,ti*=ni,ii*=ni,si*=ni;var pi,li,ci,yi,fi,ui,bi,vi,gi,xi,di,zi,mi,ji,Mi,Ai,wi,Di,Ci=2*_t,Bi=2*ti,qi=2*ii,Si=_t*Ci,ki=ti*Bi,Ii=ii*qi,Ti=_t*Bi,Oi=ti*qi,Li=_t*qi,Fi=si*Ci,Pi=si*Bi,Ri=si*qi;Xt.a.o=1-ki-Ii,Xt.a.f=Ti-Ri,Xt.a.h=Li+Pi,Xt.a.i=Ti+Ri,Xt.a.m=1-Si-Ii,Xt.a.j=Oi-Fi,Xt.a.l=Li-Pi,Xt.a.g=Oi+Fi,Xt.a.s=1-Si-ki,pi=Xt.a.o*Xt.Ra+Xt.a.f*Xt.Ua+Xt.a.h*Xt.Xa,li=Xt.a.o*Xt.Sa+Xt.a.f*Xt.Va+Xt.a.h*Xt.Ya,ci=Xt.a.o*Xt.Ta+Xt.a.f*Xt.Wa+Xt.a.h*Xt.Za,yi=Xt.a.i*Xt.Ra+Xt.a.m*Xt.Ua+Xt.a.j*Xt.Xa,fi=Xt.a.i*Xt.Sa+Xt.a.m*Xt.Va+Xt.a.j*Xt.Ya,ui=Xt.a.i*Xt.Ta+Xt.a.m*Xt.Wa+Xt.a.j*Xt.Za,bi=Xt.a.l*Xt.Ra+Xt.a.g*Xt.Ua+Xt.a.s*Xt.Xa,vi=Xt.a.l*Xt.Sa+Xt.a.g*Xt.Va+Xt.a.s*Xt.Ya,gi=Xt.a.l*Xt.Ta+Xt.a.g*Xt.Wa+Xt.a.s*Xt.Za,Xt.P=pi,Xt.R=li,Xt.S=ci,Xt.T=yi,Xt.U=fi,Xt.V=ui,Xt.W=bi,Xt.X=vi,Xt.Y=gi,xi=Xt.P*Xt.a.o+Xt.R*Xt.a.f+Xt.S*Xt.a.h,di=Xt.P*Xt.a.i+Xt.R*Xt.a.m+Xt.S*Xt.a.j,zi=Xt.P*Xt.a.l+Xt.R*Xt.a.g+Xt.S*Xt.a.s,mi=Xt.T*Xt.a.o+Xt.U*Xt.a.f+Xt.V*Xt.a.h,ji=Xt.T*Xt.a.i+Xt.U*Xt.a.m+Xt.V*Xt.a.j,Mi=Xt.T*Xt.a.l+Xt.U*Xt.a.g+Xt.V*Xt.a.s,Ai=Xt.W*Xt.a.o+Xt.X*Xt.a.f+Xt.Y*Xt.a.h,wi=Xt.W*Xt.a.i+Xt.X*Xt.a.m+Xt.Y*Xt.a.j,Di=Xt.W*Xt.a.l+Xt.X*Xt.a.g+Xt.Y*Xt.a.s,Xt.P=xi,Xt.R=di,Xt.S=zi,Xt.T=mi,Xt.U=ji,Xt.V=Mi,Xt.W=Ai,Xt.X=wi,Xt.Y=Di,Xt.P*=Xt.N.x,Xt.R*=Xt.N.x,Xt.S*=Xt.N.x,Xt.T*=Xt.N.y,Xt.U*=Xt.N.y,Xt.V*=Xt.N.y,Xt.W*=Xt.N.z,Xt.X*=Xt.N.z,Xt.Y*=Xt.N.z}for(var Ji=this.Ki,Ni=0;Ji.sc[Ni]!=d;)++Ni;for(;0<Ni;){var Hi=Ji.sc[Ni];Ji.sc[Ni]=Ji.sc[Ni-1],Ji.sc[Ni-1]=Hi,--Ni}b=!0;break}}b||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},postSolve:function(){this.$.hd(),this.$.Rl()}}),r.prototype={nn:function(t,i,s){for(var h=0;h<s;)for(var a=h++,e=i[a],o=0,r=s;o<r;){var n=o++;this.wk[a][n]=this.$a[e][i[n]]}var p;switch(h=this.wk,t=this.Ck[t],s){case 4:a=h[0],i=t[0],s=1/a[0],i[0]=s,a[1]*=s,a[2]*=s,a[3]*=s,n=h[1],(p=t[1])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n=h[2],(p=t[2])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n=h[3],(p=t[3])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],a=h[1],i=t[1],s=1/a[1],i[1]=s,i[0]*=s,a[2]*=s,a[3]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n=h[2],(p=t[2])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n=h[3],(p=t[3])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],a=h[2],i=t[2],s=1/a[2],i[2]=s,i[0]*=s,i[1]*=s,a[3]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[2],n[3]-=a[3]*n[2],n=h[1],(p=t[1])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],n[3]-=a[3]*n[2],n=h[3],(p=t[3])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],p[2]=-s*n[2],n[3]-=a[3]*n[2],a=h[3],i=t[3],s=1/a[3],i[3]=s,i[0]*=s,i[1]*=s,i[2]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[3],n=h[1],(p=t[1])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],n=h[2],(p=t[2])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],p[2]-=i[2]*n[3],i=t[1],t[0][1]=i[0],i=t[2],t[0][2]=i[0],t[1][2]=i[1],i=t[3],t[0][3]=i[0],t[1][3]=i[1],t[2][3]=i[2];break;case 5:a=h[0],i=t[0],s=1/a[0],i[0]=s,a[1]*=s,a[2]*=s,a[3]*=s,a[4]*=s,n=h[1],(p=t[1])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n=h[2],(p=t[2])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n=h[3],(p=t[3])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n=h[4],(p=t[4])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],a=h[1],i=t[1],s=1/a[1],i[1]=s,i[0]*=s,a[2]*=s,a[3]*=s,a[4]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n=h[2],(p=t[2])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n=h[3],(p=t[3])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n=h[4],(p=t[4])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],a=h[2],i=t[2],s=1/a[2],i[2]=s,i[0]*=s,i[1]*=s,a[3]*=s,a[4]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n=h[1],(p=t[1])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n=h[3],(p=t[3])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],p[2]=-s*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n=h[4],(p=t[4])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],p[2]=-s*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],a=h[3],i=t[3],s=1/a[3],i[3]=s,i[0]*=s,i[1]*=s,i[2]*=s,a[4]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[3],n[4]-=a[4]*n[3],n=h[1],(p=t[1])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],n[4]-=a[4]*n[3],n=h[2],(p=t[2])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],p[2]-=i[2]*n[3],n[4]-=a[4]*n[3],n=h[4],(p=t[4])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],p[2]-=i[2]*n[3],p[3]=-s*n[3],n[4]-=a[4]*n[3],a=h[4],i=t[4],s=1/a[4],i[4]=s,i[0]*=s,i[1]*=s,i[2]*=s,i[3]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[4],n=h[1],(p=t[1])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],n=h[2],(p=t[2])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],p[2]-=i[2]*n[4],n=h[3],(p=t[3])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],p[2]-=i[2]*n[4],p[3]-=i[3]*n[4],i=t[1],t[0][1]=i[0],i=t[2],t[0][2]=i[0],t[1][2]=i[1],i=t[3],t[0][3]=i[0],t[1][3]=i[1],t[2][3]=i[2],i=t[4],t[0][4]=i[0],t[1][4]=i[1],t[2][4]=i[2],t[3][4]=i[3];break;case 6:a=h[0],i=t[0],s=1/a[0],i[0]=s,a[1]*=s,a[2]*=s,a[3]*=s,a[4]*=s,a[5]*=s,n=h[1],(p=t[1])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n[5]-=a[5]*n[0],n=h[2],(p=t[2])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n[5]-=a[5]*n[0],n=h[3],(p=t[3])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n[5]-=a[5]*n[0],n=h[4],(p=t[4])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n[5]-=a[5]*n[0],n=h[5],(p=t[5])[0]=-s*n[0],n[1]-=a[1]*n[0],n[2]-=a[2]*n[0],n[3]-=a[3]*n[0],n[4]-=a[4]*n[0],n[5]-=a[5]*n[0],a=h[1],i=t[1],s=1/a[1],i[1]=s,i[0]*=s,a[2]*=s,a[3]*=s,a[4]*=s,a[5]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n[5]-=a[5]*n[1],n=h[2],(p=t[2])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n[5]-=a[5]*n[1],n=h[3],(p=t[3])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n[5]-=a[5]*n[1],n=h[4],(p=t[4])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n[5]-=a[5]*n[1],n=h[5],(p=t[5])[0]-=i[0]*n[1],p[1]=-s*n[1],n[2]-=a[2]*n[1],n[3]-=a[3]*n[1],n[4]-=a[4]*n[1],n[5]-=a[5]*n[1],a=h[2],i=t[2],s=1/a[2],i[2]=s,i[0]*=s,i[1]*=s,a[3]*=s,a[4]*=s,a[5]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n[5]-=a[5]*n[2],n=h[1],(p=t[1])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n[5]-=a[5]*n[2],n=h[3],(p=t[3])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],p[2]=-s*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n[5]-=a[5]*n[2],n=h[4],(p=t[4])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],p[2]=-s*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n[5]-=a[5]*n[2],n=h[5],(p=t[5])[0]-=i[0]*n[2],p[1]-=i[1]*n[2],p[2]=-s*n[2],n[3]-=a[3]*n[2],n[4]-=a[4]*n[2],n[5]-=a[5]*n[2],a=h[3],i=t[3],s=1/a[3],i[3]=s,i[0]*=s,i[1]*=s,i[2]*=s,a[4]*=s,a[5]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[3],n[4]-=a[4]*n[3],n[5]-=a[5]*n[3],n=h[1],(p=t[1])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],n[4]-=a[4]*n[3],n[5]-=a[5]*n[3],n=h[2],(p=t[2])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],p[2]-=i[2]*n[3],n[4]-=a[4]*n[3],n[5]-=a[5]*n[3],n=h[4],(p=t[4])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],p[2]-=i[2]*n[3],p[3]=-s*n[3],n[4]-=a[4]*n[3],n[5]-=a[5]*n[3],n=h[5],(p=t[5])[0]-=i[0]*n[3],p[1]-=i[1]*n[3],p[2]-=i[2]*n[3],p[3]=-s*n[3],n[4]-=a[4]*n[3],n[5]-=a[5]*n[3],a=h[4],i=t[4],s=1/a[4],i[4]=s,i[0]*=s,i[1]*=s,i[2]*=s,i[3]*=s,a[5]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[4],n[5]-=a[5]*n[4],n=h[1],(p=t[1])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],n[5]-=a[5]*n[4],n=h[2],(p=t[2])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],p[2]-=i[2]*n[4],n[5]-=a[5]*n[4],n=h[3],(p=t[3])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],p[2]-=i[2]*n[4],p[3]-=i[3]*n[4],n[5]-=a[5]*n[4],n=h[5],(p=t[5])[0]-=i[0]*n[4],p[1]-=i[1]*n[4],p[2]-=i[2]*n[4],p[3]-=i[3]*n[4],p[4]=-s*n[4],n[5]-=a[5]*n[4],a=h[5],i=t[5],s=1/a[5],i[5]=s,i[0]*=s,i[1]*=s,i[2]*=s,i[3]*=s,i[4]*=s,n=h[0],(p=t[0])[0]-=i[0]*n[5],n=h[1],(p=t[1])[0]-=i[0]*n[5],p[1]-=i[1]*n[5],n=h[2],(p=t[2])[0]-=i[0]*n[5],p[1]-=i[1]*n[5],p[2]-=i[2]*n[5],n=h[3],(p=t[3])[0]-=i[0]*n[5],p[1]-=i[1]*n[5],p[2]-=i[2]*n[5],p[3]-=i[3]*n[5],n=h[4],(p=t[4])[0]-=i[0]*n[5],p[1]-=i[1]*n[5],p[2]-=i[2]*n[5],p[3]-=i[3]*n[5],p[4]-=i[4]*n[5],i=t[1],t[0][1]=i[0],i=t[2],t[0][2]=i[0],t[1][2]=i[1],i=t[3],t[0][3]=i[0],t[1][3]=i[1],t[2][3]=i[2],i=t[4],t[0][4]=i[0],t[1][4]=i[1],t[2][4]=i[2],t[3][4]=i[3],i=t[5],t[0][5]=i[0],t[1][5]=i[1],t[2][5]=i[2],t[3][5]=i[3],t[4][5]=i[4];break;default:for(e=0;e<s;){for(a=h[o=e++],i=t[o],r=1/a[o],i[o]=r,n=0,p=o;n<p;){i[l=n++]*=r}for(n=o+1,p=s;n<p;)a[l=n++]*=r;for(var l=0,c=o;l<c;){n=h[f=l++];p=t[f];for(var y=0,f=f+1;y<f;){var u=y++;p[u]-=i[u]*n[o]}for(p=o+1,y=s;p<y;)n[f=p++]-=a[f]*n[o]}for(l=o+1,c=s;l<c;){for(n=h[p=l++],p=t[p],y=0,f=o;y<f;)p[u=y++]-=i[u]*n[o];for(p[o]=-r*n[o],p=o+1,y=s;p<y;)n[f=p++]-=a[f]*n[o]}}for(h=1;h<s;)for(i=t[a=h++],e=0,o=a;e<o;)t[r=e++][a]=i[r]}},ll:function(t,i){var s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x=this.$a,d=this.cj,z=t.Ka,m=t.Qe,j=t.Re,M=m.$a,A=j.$a;s=m.P,h=m.R,a=m.S,e=m.T,o=m.U,r=m.V,n=m.W,p=m.X,m=m.Y,l=j.P,c=j.R,y=j.S,f=j.T,u=j.U,b=j.V,v=j.W,g=j.X;j=j.Y;for(var w=0;w<z;){var D,C,B,q=w++,S=t.rows[q].Aa;q=i[q];if(S.Im(),1&S.xc?(q.qd=S.va*M,q.rd=S.wa*M,q.sd=S.xa*M,q.td=S.Ba*A,q.ud=S.Ca*A,q.vd=S.Da*A):(q.qd=0,q.rd=0,q.sd=0,q.td=0,q.ud=0,q.vd=0),2&S.xc)D=s*S.aa+h*S.ba+a*S.ca,C=e*S.aa+o*S.ba+r*S.ca,B=n*S.aa+p*S.ba+m*S.ca,q.kd=D,q.ld=C,q.md=B,D=l*S.ea+c*S.fa+y*S.ga,C=f*S.ea+u*S.fa+b*S.ga,S=v*S.ea+g*S.fa+j*S.ga,q.nd=D,q.od=C,q.pd=S;else q.kd=0,q.ld=0,q.md=0,q.nd=0,q.od=0,q.pd=0}for(M=0;M<z;)for(A=M++,s=t.rows[A].Aa,h=A,a=z;h<a;)o=i[e=h++],r=s.va*o.qd+s.wa*o.rd+s.xa*o.sd+(s.aa*o.kd+s.ba*o.ld+s.ca*o.md)+(s.Ba*o.td+s.Ca*o.ud+s.Da*o.vd)+(s.ea*o.nd+s.fa*o.od+s.ga*o.pd),A==e?(x[A][e]=r+t.rows[A].Ma,d[A][e]=r,o.mass=r+t.rows[A].Ma,o.Ff=r,0!=o.mass&&(o.mass=1/o.mass),o.Ff&&(o.Ff=1/o.Ff)):(x[A][e]=r,x[e][A]=r,d[A][e]=r,d[e][A]=r);for(t=0,i=this.ak;t<i;)x=t++,this.Sj[x]=!1}},o.ua=Y,o.prototype=ri(Y.prototype,{xh:function(t){this.Ji.$d(t,this.info),this.C=this.info.Qe,this.D=this.info.Re,t=this.C.$a;var i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d=this.D.$a;i=this.C.P,s=this.C.R,h=this.C.S,a=this.C.T,e=this.C.U,o=this.C.V,r=this.C.W,n=this.C.X,p=this.C.Y,l=this.D.P,c=this.D.R,y=this.D.S,f=this.D.T,u=this.D.U,b=this.D.V,v=this.D.W,g=this.D.X,x=this.D.Y;for(var z=0,m=this.info.Ka;z<m;){var j,M,A,w=z++,D=this.info.rows[w],C=(w=this.ac[w],D.Ng);w.Zh=C.va*t,w.$h=C.wa*t,w.ai=C.xa*t,w.bi=C.Ba*d,w.ci=C.Ca*d,w.di=C.Da*d,j=i*C.aa+s*C.ba+h*C.ca,M=a*C.aa+e*C.ba+o*C.ca,A=r*C.aa+n*C.ba+p*C.ca,w.Xf=j,w.Yf=M,w.Zf=A,j=l*C.ea+c*C.fa+y*C.ga,M=f*C.ea+u*C.fa+b*C.ga,A=v*C.ea+g*C.fa+x*C.ga,w.$f=j,w.ag=M,w.bg=A,w.he=t+d+(w.Xf*C.aa+w.Yf*C.ba+w.Zf*C.ca)+(w.$f*C.ea+w.ag*C.fa+w.bg*C.ga),0!=w.he&&(w.he=1/w.he),C=D.Lj,D=D.Kj,w.yl=C.va*t,w.zl=C.wa*t,w.Al=C.xa*t,w.Bl=C.Ba*d,w.Cl=C.Ca*d,w.Dl=C.Da*d,w.sl=D.va*t,w.tl=D.wa*t,w.ul=D.xa*t,w.vl=D.Ba*d,w.wl=D.Ca*d,w.xl=D.Da*d,j=i*C.aa+s*C.ba+h*C.ca,M=a*C.aa+e*C.ba+o*C.ca,A=r*C.aa+n*C.ba+p*C.ca,w.Ej=j,w.Fj=M,w.Gj=A,j=l*C.ea+c*C.fa+y*C.ga,M=f*C.ea+u*C.fa+b*C.ga,A=v*C.ea+g*C.fa+x*C.ga,w.Hj=j,w.Ij=M,w.Jj=A,j=i*D.aa+s*D.ba+h*D.ca,M=a*D.aa+e*D.ba+o*D.ca,A=r*D.aa+n*D.ba+p*D.ca,w.lk=j,w.mk=M,w.nk=A,j=l*D.ea+c*D.fa+y*D.ga,M=f*D.ea+u*D.fa+b*D.ga,A=v*D.ea+g*D.fa+x*D.ga,w.pk=j,w.qk=M,w.rk=A,C=t+d+(w.Ej*C.aa+w.Fj*C.ba+w.Gj*C.ca)+(w.Hj*C.ea+w.Ij*C.fa+w.Jj*C.ga),M=j=w.Ej*D.aa+w.Fj*D.ba+w.Gj*D.ca+(w.Hj*D.ea+w.Ij*D.fa+w.Jj*D.ga),(A=C*(D=t+d+(w.lk*D.aa+w.mk*D.ba+w.nk*D.ca)+(w.pk*D.ea+w.qk*D.fa+w.rk*D.ga))-j*M)&&(A=1/A),w.ym=D*A,w.zm=-j*A,w.Am=-M*A,w.Bm=C*A}},Gh:function(t){var i,s,h,a,e,o,r,n,p,l,c,y;i=this.C.gb,s=this.C.hb,h=this.C.ib,a=this.D.gb,e=this.D.hb,o=this.D.ib,r=this.C.kb,n=this.C.lb,p=this.C.mb,l=this.D.kb,c=this.D.lb,y=this.D.mb;for(var f=0,u=this.info.Ka;f<u;){var b=f++,v=(d=this.info.rows[b]).ta,g=(b=this.ac[b],d.Lj),x=d.Kj,d=v.bd;g=v.df*g.va+v.ef*g.wa+v.ff*g.xa,x=v.df*x.va+v.ef*x.wa+v.ff*x.xa;v.zc=g,v.yc=x,v.bd*=t.dtRatio,v.zc*=t.dtRatio,v.yc*=t.dtRatio,i+=b.Zh*d,s+=b.$h*d,h+=b.ai*d,i+=b.yl*g,s+=b.zl*g,h+=b.Al*g,i+=b.sl*x,s+=b.tl*x,h+=b.ul*x,a+=b.bi*-d,e+=b.ci*-d,o+=b.di*-d,a+=b.Bl*-g,e+=b.Cl*-g,o+=b.Dl*-g,a+=b.vl*-x,e+=b.wl*-x,o+=b.xl*-x,r+=b.Xf*d,n+=b.Yf*d,p+=b.Zf*d,r+=b.Ej*g,n+=b.Fj*g,p+=b.Gj*g,r+=b.lk*x,n+=b.mk*x,p+=b.nk*x,l+=b.$f*-d,c+=b.ag*-d,y+=b.bg*-d,l+=b.Hj*-g,c+=b.Ij*-g,y+=b.Jj*-g,l+=b.pk*-x,c+=b.qk*-x,y+=b.rk*-x}this.C.gb=i,this.C.hb=s,this.C.ib=h,this.D.gb=a,this.D.hb=e,this.D.ib=o,this.C.kb=r,this.C.lb=n,this.C.mb=p,this.D.kb=l,this.D.lb=c,this.D.mb=y},Ch:function(){var t,i,s,h,a,e,o,r,n,p,l,c;t=this.C.gb,i=this.C.hb,s=this.C.ib,h=this.D.gb,a=this.D.hb,e=this.D.ib,o=this.C.kb,r=this.C.lb,n=this.C.mb,p=this.D.kb,l=this.D.lb,c=this.D.mb;for(var y=0,f=this.info.Ka;y<f;){var u=y++,b=this.info.rows[u],v=(u=this.ac[u],b.ta),g=(g=(g=(g=(g=0)+(t*(d=b.Lj).va+i*d.wa+s*d.xa))-(h*d.Ba+a*d.Ca+e*d.Da))+(o*d.aa+r*d.ba+n*d.ca))-(p*d.ea+l*d.fa+c*d.ga),x=(x=(x=(x=(x=0)+(t*(d=b.Kj).va+i*d.wa+s*d.xa))-(h*d.Ba+a*d.Ca+e*d.Da))+(o*d.aa+r*d.ba+n*d.ca))-(p*d.ea+l*d.fa+c*d.ga),d=-(g*u.ym+x*u.zm),z=-(g*u.Am+x*u.Bm);g=v.zc,x=v.yc;v.zc+=d,v.yc+=z,(b=b.friction*v.bd)?(d=v.zc*v.zc+v.yc*v.yc)>b*b&&(b/=Math.sqrt(d),v.zc*=b,v.yc*=b):(v.zc=0,v.yc=0),d=v.zc-g,z=v.yc-x,t+=u.yl*d,i+=u.zl*d,s+=u.Al*d,t+=u.sl*z,i+=u.tl*z,s+=u.ul*z,h+=u.Bl*-d,a+=u.Cl*-d,e+=u.Dl*-d,h+=u.vl*-z,a+=u.wl*-z,e+=u.xl*-z,o+=u.Ej*d,r+=u.Fj*d,n+=u.Gj*d,o+=u.lk*z,r+=u.mk*z,n+=u.nk*z,p+=u.Hj*-d,l+=u.Ij*-d,c+=u.Jj*-d,p+=u.pk*-z,l+=u.qk*-z,c+=u.rk*-z}for(y=0,f=this.info.Ka;y<f;)u=y++,b=this.info.rows[u],u=this.ac[u],v=b.ta,g=0,g+=t*(x=b.Ng).va+i*x.wa+s*x.xa,g-=h*x.Ba+a*x.Ca+e*x.Da,g+=o*x.aa+r*x.ba+n*x.ca,g-=p*x.ea+l*x.fa+c*x.ga,b=(b.Fa-g)*u.he,g=v.bd,v.bd+=b,0>v.bd&&(v.bd=0),b=v.bd-g,t+=u.Zh*b,i+=u.$h*b,s+=u.ai*b,h+=u.bi*-b,a+=u.ci*-b,e+=u.di*-b,o+=u.Xf*b,r+=u.Yf*b,n+=u.Zf*b,p+=u.$f*-b,l+=u.ag*-b,c+=u.bg*-b;this.C.gb=t,this.C.hb=i,this.C.ib=s,this.D.gb=h,this.D.hb=a,this.D.ib=e,this.C.kb=o,this.C.lb=r,this.C.mb=n,this.D.kb=p,this.D.lb=l,this.D.mb=c},Pg:function(){this.Ji.al(),this.Ji.gd(this.info);var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x=this.C.$a,d=this.D.$a;t=this.C.P,i=this.C.R,s=this.C.S,h=this.C.T,a=this.C.U,e=this.C.V,o=this.C.W,r=this.C.X,n=this.C.Y,p=this.D.P,l=this.D.R,c=this.D.S,y=this.D.T,f=this.D.U,u=this.D.V,b=this.D.W,v=this.D.X,g=this.D.Y;for(var z=0,m=this.info.Ka;z<m;){var j,M,A,w=z++,D=this.ac[w];w=this.info.rows[w].Ng;D.Zh=w.va*x,D.$h=w.wa*x,D.ai=w.xa*x,D.bi=w.Ba*d,D.ci=w.Ca*d,D.di=w.Da*d,j=t*w.aa+i*w.ba+s*w.ca,M=h*w.aa+a*w.ba+e*w.ca,A=o*w.aa+r*w.ba+n*w.ca,D.Xf=j,D.Yf=M,D.Zf=A,j=p*w.ea+l*w.fa+c*w.ga,M=y*w.ea+f*w.fa+u*w.ga,A=b*w.ea+v*w.fa+g*w.ga,D.$f=j,D.ag=M,D.bg=A,D.he=x+d+(D.Xf*w.aa+D.Yf*w.ba+D.Zf*w.ca)+(D.$f*w.ea+D.ag*w.fa+D.bg*w.ga),0!=D.he&&(D.he=1/D.he)}for(x=0,d=this.info.Ka;x<d;)t=x++,this.info.rows[t].ta.ub=0},Bh:function(){var t,i,s,h,a,e,o,r,n,p,l,c;t=this.C.Yc,i=this.C.Zc,s=this.C.$c,h=this.D.Yc,a=this.D.Zc,e=this.D.$c,o=this.C.Uc,r=this.C.Vc,n=this.C.Wc,p=this.D.Uc,l=this.D.Vc,c=this.D.Wc;for(var y=0,f=this.info.Ka;y<f;){var u=y++,b=this.info.rows[u],v=(u=this.ac[u],b.ta),g=(g=(g=(g=(g=0)+(t*(x=b.Ng).va+i*x.wa+s*x.xa))-(h*x.Ba+a*x.Ca+e*x.Da))+(o*x.aa+r*x.ba+n*x.ca))-(p*x.ea+l*x.fa+c*x.ga),x=(b=(b.Fa-g)*u.he*gt.positionSplitImpulseBaumgarte,v.ub);v.ub+=b,0>v.ub&&(v.ub=0),b=v.ub-x,t+=u.Zh*b,i+=u.$h*b,s+=u.ai*b,h+=u.bi*-b,a+=u.ci*-b,e+=u.di*-b,o+=u.Xf*b,r+=u.Yf*b,n+=u.Zf*b,p+=u.$f*-b,l+=u.ag*-b,c+=u.bg*-b}this.C.Yc=t,this.C.Zc=i,this.C.$c=s,this.D.Yc=h,this.D.Zc=a,this.D.$c=e,this.C.Uc=o,this.C.Vc=r,this.C.Wc=n,this.D.Uc=p,this.D.Vc=l,this.D.Wc=c},Ah:function(){this.Ji.al(),this.Ji.gd(this.info);var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x=this.C.$a,d=this.D.$a;t=this.C.P,i=this.C.R,s=this.C.S,h=this.C.T,a=this.C.U,e=this.C.V,o=this.C.W,r=this.C.X,n=this.C.Y,p=this.D.P,l=this.D.R,c=this.D.S,y=this.D.T,f=this.D.U,u=this.D.V,b=this.D.W,v=this.D.X,g=this.D.Y;for(var z=0,m=this.info.Ka;z<m;){var j,M,A,w,D,C,B=z++,q=this.ac[B],S=this.info.rows[B].Ng;q.Zh=S.va*x,q.$h=S.wa*x,q.ai=S.xa*x,q.bi=S.Ba*d,q.ci=S.Ca*d,q.di=S.Da*d,j=t*S.aa+i*S.ba+s*S.ca,M=h*S.aa+a*S.ba+e*S.ca,A=o*S.aa+r*S.ba+n*S.ca,q.Xf=j,q.Yf=M,q.Zf=A,w=p*S.ea+l*S.fa+c*S.ga,D=y*S.ea+f*S.fa+u*S.ga,C=b*S.ea+v*S.fa+g*S.ga,q.$f=w,q.ag=D,q.bg=C,q.he=x+d+(q.Xf*S.aa+q.Yf*S.ba+q.Zf*S.ca)+(q.$f*S.ea+q.ag*S.fa+q.bg*S.ga),0!=q.he&&(q.he=1/q.he)}for(var k,I,T,O,L,F,P,R,J,N,H,K,G=K=H=N=J=R=P=F=L=O=T=I=k=0,V=this.info.Ka;G<V;){var E=G++,U=this.info.rows[E],W=this.ac[E],Y=U.ta,X=U.Ng,$=($=($=($=($=0)+(k*X.va+I*X.wa+T*X.xa))-(O*X.Ba+L*X.Ca+F*X.Da))+(P*X.aa+R*X.ba+J*X.ca))-(N*X.ea+H*X.fa+K*X.ga),Z=(U.Fa-$)*W.he*gt.positionNgsBaumgarte,Q=Y.ub;Y.ub+=Z,0>Y.ub&&(Y.ub=0),Z=Y.ub-Q,k+=W.Zh*Z,I+=W.$h*Z,T+=W.ai*Z,O+=W.bi*-Z,L+=W.ci*-Z,F+=W.di*-Z,P+=W.Xf*Z,R+=W.Yf*Z,J+=W.Zf*Z,N+=W.$f*-Z,H+=W.ag*-Z,K+=W.bg*-Z}var _=this.C;_.a.v+=k,_.a.A+=I,_.a.B+=T;var tt=this.D;tt.a.v+=O,tt.a.A+=L,tt.a.B+=F;var it,st,ht,at,et,ot,rt=this.C,nt=Math.sqrt(P*P+R*R+J*J),pt=.5*nt;if(.5>pt){var lt=pt*pt;it=.5*(1-.16666666666666666*lt+lt*lt*.008333333333333333),st=1-.5*lt+lt*lt*.041666666666666664}else it=Math.sin(pt)/nt,st=Math.cos(pt);ht=P*it,at=R*it,et=J*it,ot=st;var ct,yt,ft,ut,bt,vt=rt.a.o,xt=rt.a.m,dt=rt.a.s,zt=vt+xt+dt;0<zt?(ut=.5*(bt=Math.sqrt(zt+1)),bt=.5/bt,ct=(rt.a.g-rt.a.j)*bt,yt=(rt.a.h-rt.a.l)*bt,ft=(rt.a.i-rt.a.f)*bt):vt>xt?vt>dt?(ct=.5*(bt=Math.sqrt(vt-xt-dt+1)),bt=.5/bt,yt=(rt.a.f+rt.a.i)*bt,ft=(rt.a.h+rt.a.l)*bt,ut=(rt.a.g-rt.a.j)*bt):(ft=.5*(bt=Math.sqrt(dt-vt-xt+1)),bt=.5/bt,ct=(rt.a.h+rt.a.l)*bt,yt=(rt.a.j+rt.a.g)*bt,ut=(rt.a.i-rt.a.f)*bt):xt>dt?(yt=.5*(bt=Math.sqrt(xt-dt-vt+1)),bt=.5/bt,ct=(rt.a.f+rt.a.i)*bt,ft=(rt.a.j+rt.a.g)*bt,ut=(rt.a.h-rt.a.l)*bt):(ft=.5*(bt=Math.sqrt(dt-vt-xt+1)),bt=.5/bt,ct=(rt.a.h+rt.a.l)*bt,yt=(rt.a.j+rt.a.g)*bt,ut=(rt.a.i-rt.a.f)*bt);var mt=(ct=ot*ct+ht*ut+at*ft-et*yt)*ct+(yt=ot*yt-ht*ft+at*ut+et*ct)*yt+(ft=ot*ft+ht*yt-at*ct+et*ut)*ft+(ut=ot*ut-ht*ct-at*yt-et*ft)*ut;1e-32<mt&&(mt=1/Math.sqrt(mt));ct*=mt,yt*=mt,ft*=mt,ut*=mt;var jt,Mt,At,wt,Dt,Ct,Bt,qt,St,kt,It,Tt,Ot,Lt,Ft,Pt,Rt,Jt,Nt=2*ct,Ht=2*yt,Kt=2*ft,Gt=ct*Nt,Vt=yt*Ht,Et=ft*Kt,Ut=ct*Ht,Wt=yt*Kt,Yt=ct*Kt,Xt=ut*Nt,$t=ut*Ht,Zt=ut*Kt;rt.a.o=1-Vt-Et,rt.a.f=Ut-Zt,rt.a.h=Yt+$t,rt.a.i=Ut+Zt,rt.a.m=1-Gt-Et,rt.a.j=Wt-Xt,rt.a.l=Yt-$t,rt.a.g=Wt+Xt,rt.a.s=1-Gt-Vt,jt=rt.a.o*rt.Ra+rt.a.f*rt.Ua+rt.a.h*rt.Xa,Mt=rt.a.o*rt.Sa+rt.a.f*rt.Va+rt.a.h*rt.Ya,At=rt.a.o*rt.Ta+rt.a.f*rt.Wa+rt.a.h*rt.Za,wt=rt.a.i*rt.Ra+rt.a.m*rt.Ua+rt.a.j*rt.Xa,Dt=rt.a.i*rt.Sa+rt.a.m*rt.Va+rt.a.j*rt.Ya,Ct=rt.a.i*rt.Ta+rt.a.m*rt.Wa+rt.a.j*rt.Za,Bt=rt.a.l*rt.Ra+rt.a.g*rt.Ua+rt.a.s*rt.Xa,qt=rt.a.l*rt.Sa+rt.a.g*rt.Va+rt.a.s*rt.Ya,St=rt.a.l*rt.Ta+rt.a.g*rt.Wa+rt.a.s*rt.Za,rt.P=jt,rt.R=Mt,rt.S=At,rt.T=wt,rt.U=Dt,rt.V=Ct,rt.W=Bt,rt.X=qt,rt.Y=St,kt=rt.P*rt.a.o+rt.R*rt.a.f+rt.S*rt.a.h,It=rt.P*rt.a.i+rt.R*rt.a.m+rt.S*rt.a.j,Tt=rt.P*rt.a.l+rt.R*rt.a.g+rt.S*rt.a.s,Ot=rt.T*rt.a.o+rt.U*rt.a.f+rt.V*rt.a.h,Lt=rt.T*rt.a.i+rt.U*rt.a.m+rt.V*rt.a.j,Ft=rt.T*rt.a.l+rt.U*rt.a.g+rt.V*rt.a.s,Pt=rt.W*rt.a.o+rt.X*rt.a.f+rt.Y*rt.a.h,Rt=rt.W*rt.a.i+rt.X*rt.a.m+rt.Y*rt.a.j,Jt=rt.W*rt.a.l+rt.X*rt.a.g+rt.Y*rt.a.s,rt.P=kt,rt.R=It,rt.S=Tt,rt.T=Ot,rt.U=Lt,rt.V=Ft,rt.W=Pt,rt.X=Rt,rt.Y=Jt,rt.P*=rt.N.x,rt.R*=rt.N.x,rt.S*=rt.N.x,rt.T*=rt.N.y,rt.U*=rt.N.y,rt.V*=rt.N.y,rt.W*=rt.N.z,rt.X*=rt.N.z,rt.Y*=rt.N.z;var Qt,_t,ti,ii,si,hi,ai=this.D,ei=Math.sqrt(N*N+H*H+K*K),oi=.5*ei;if(.5>oi){var ri=oi*oi;Qt=.5*(1-.16666666666666666*ri+ri*ri*.008333333333333333),_t=1-.5*ri+ri*ri*.041666666666666664}else Qt=Math.sin(oi)/ei,_t=Math.cos(oi);ti=N*Qt,ii=H*Qt,si=K*Qt,hi=_t;var ni,pi,li,ci,yi,fi=ai.a.o,ui=ai.a.m,bi=ai.a.s,vi=fi+ui+bi;0<vi?(ci=.5*(yi=Math.sqrt(vi+1)),yi=.5/yi,ni=(ai.a.g-ai.a.j)*yi,pi=(ai.a.h-ai.a.l)*yi,li=(ai.a.i-ai.a.f)*yi):fi>ui?fi>bi?(ni=.5*(yi=Math.sqrt(fi-ui-bi+1)),yi=.5/yi,pi=(ai.a.f+ai.a.i)*yi,li=(ai.a.h+ai.a.l)*yi,ci=(ai.a.g-ai.a.j)*yi):(li=.5*(yi=Math.sqrt(bi-fi-ui+1)),yi=.5/yi,ni=(ai.a.h+ai.a.l)*yi,pi=(ai.a.j+ai.a.g)*yi,ci=(ai.a.i-ai.a.f)*yi):ui>bi?(pi=.5*(yi=Math.sqrt(ui-bi-fi+1)),yi=.5/yi,ni=(ai.a.f+ai.a.i)*yi,li=(ai.a.j+ai.a.g)*yi,ci=(ai.a.h-ai.a.l)*yi):(li=.5*(yi=Math.sqrt(bi-fi-ui+1)),yi=.5/yi,ni=(ai.a.h+ai.a.l)*yi,pi=(ai.a.j+ai.a.g)*yi,ci=(ai.a.i-ai.a.f)*yi);var gi=(ni=hi*ni+ti*ci+ii*li-si*pi)*ni+(pi=hi*pi-ti*li+ii*ci+si*ni)*pi+(li=hi*li+ti*pi-ii*ni+si*ci)*li+(ci=hi*ci-ti*ni-ii*pi-si*li)*ci;1e-32<gi&&(gi=1/Math.sqrt(gi));ni*=gi,pi*=gi,li*=gi,ci*=gi;var xi,di,zi,mi,ji,Mi,Ai,wi,Di,Ci,Bi,qi,Si,ki,Ii,Ti,Oi,Li,Fi=2*ni,Pi=2*pi,Ri=2*li,Ji=ni*Fi,Ni=pi*Pi,Hi=li*Ri,Ki=ni*Pi,Gi=pi*Ri,Vi=ni*Ri,Ei=ci*Fi,Ui=ci*Pi,Wi=ci*Ri;ai.a.o=1-Ni-Hi,ai.a.f=Ki-Wi,ai.a.h=Vi+Ui,ai.a.i=Ki+Wi,ai.a.m=1-Ji-Hi,ai.a.j=Gi-Ei,ai.a.l=Vi-Ui,ai.a.g=Gi+Ei,ai.a.s=1-Ji-Ni,xi=ai.a.o*ai.Ra+ai.a.f*ai.Ua+ai.a.h*ai.Xa,di=ai.a.o*ai.Sa+ai.a.f*ai.Va+ai.a.h*ai.Ya,zi=ai.a.o*ai.Ta+ai.a.f*ai.Wa+ai.a.h*ai.Za,mi=ai.a.i*ai.Ra+ai.a.m*ai.Ua+ai.a.j*ai.Xa,ji=ai.a.i*ai.Sa+ai.a.m*ai.Va+ai.a.j*ai.Ya,Mi=ai.a.i*ai.Ta+ai.a.m*ai.Wa+ai.a.j*ai.Za,Ai=ai.a.l*ai.Ra+ai.a.g*ai.Ua+ai.a.s*ai.Xa,wi=ai.a.l*ai.Sa+ai.a.g*ai.Va+ai.a.s*ai.Ya,Di=ai.a.l*ai.Ta+ai.a.g*ai.Wa+ai.a.s*ai.Za,ai.P=xi,ai.R=di,ai.S=zi,ai.T=mi,ai.U=ji,ai.V=Mi,ai.W=Ai,ai.X=wi,ai.Y=Di,Ci=ai.P*ai.a.o+ai.R*ai.a.f+ai.S*ai.a.h,Bi=ai.P*ai.a.i+ai.R*ai.a.m+ai.S*ai.a.j,qi=ai.P*ai.a.l+ai.R*ai.a.g+ai.S*ai.a.s,Si=ai.T*ai.a.o+ai.U*ai.a.f+ai.V*ai.a.h,ki=ai.T*ai.a.i+ai.U*ai.a.m+ai.V*ai.a.j,Ii=ai.T*ai.a.l+ai.U*ai.a.g+ai.V*ai.a.s,Ti=ai.W*ai.a.o+ai.X*ai.a.f+ai.Y*ai.a.h,Oi=ai.W*ai.a.i+ai.X*ai.a.m+ai.Y*ai.a.j,Li=ai.W*ai.a.l+ai.X*ai.a.g+ai.Y*ai.a.s,ai.P=Ci,ai.R=Bi,ai.S=qi,ai.T=Si,ai.U=ki,ai.V=Ii,ai.W=Ti,ai.X=Oi,ai.Y=Li,ai.P*=ai.N.x,ai.R*=ai.N.x,ai.S*=ai.N.x,ai.T*=ai.N.y,ai.U*=ai.N.y,ai.V*=ai.N.y,ai.W*=ai.N.z,ai.X*=ai.N.z,ai.Y*=ai.N.z},postSolve:function(){for(var t=0,i=this.info.Ka;t<i;){var s,h,a,e=t++,o=(e=(r=this.info.rows[e]).ta,r.Lj),r=r.Kj;a=h=s=0,s+=o.va*e.zc,h+=o.wa*e.zc,a+=o.xa*e.zc,s+=r.va*e.yc,h+=r.wa*e.yc,a+=r.xa*e.yc,e.df=s,e.ef=h,e.ff=a}this.Ji.al()}}),e.ua=Y,e.prototype=ri(Y.prototype,{xh:function(t){this.$.hd(),this.$.$d(t,this.info),this.C=this.info.Qe,this.D=this.info.Re,t=this.C.$a;var i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x,d=this.D.$a;i=this.C.P,s=this.C.R,h=this.C.S,a=this.C.T,e=this.C.U,o=this.C.V,r=this.C.W,n=this.C.X,p=this.C.Y,l=this.D.P,c=this.D.R,y=this.D.S,f=this.D.T,u=this.D.U,b=this.D.V,v=this.D.W,g=this.D.X,x=this.D.Y;for(var z=0,m=this.info.Ka;z<m;){var j,M,A,w=z++,D=this.info.rows[w],C=(w=this.ac[w],D.Aa);if(C.Im(),1&C.xc?(w.qd=C.va*t,w.rd=C.wa*t,w.sd=C.xa*t,w.td=C.Ba*d,w.ud=C.Ca*d,w.vd=C.Da*d):(w.qd=0,w.rd=0,w.sd=0,w.td=0,w.ud=0,w.vd=0),2&C.xc)j=i*C.aa+s*C.ba+h*C.ca,M=a*C.aa+e*C.ba+o*C.ca,A=r*C.aa+n*C.ba+p*C.ca,w.kd=j,w.ld=M,w.md=A,j=l*C.ea+c*C.fa+y*C.ga,M=f*C.ea+u*C.fa+b*C.ga,A=v*C.ea+g*C.fa+x*C.ga,w.nd=j,w.od=M,w.pd=A;else w.kd=0,w.ld=0,w.md=0,w.nd=0,w.od=0,w.pd=0;w.Ff=w.qd*C.va+w.rd*C.wa+w.sd*C.xa+(w.td*C.Ba+w.ud*C.Ca+w.vd*C.Da)+(w.kd*C.aa+w.ld*C.ba+w.md*C.ca)+(w.nd*C.ea+w.od*C.fa+w.pd*C.ga),w.mass=w.Ff+D.Ma,w.Ff&&(w.Ff=1/w.Ff),0!=w.mass&&(w.mass=1/w.mass)}},Gh:function(t){var i;if(0>=(i=(i=this.$.Hc==W.BAUMGARTE?gt.jointWarmStartingFactorForBaungarte:gt.jointWarmStartingFactor)*t.dtRatio))for(i=0,t=this.info.Ka;i<t;){var s=i++;(s=this.info.rows[s].ta).ta=0,s.ad=0,s.ub=0}else{var h,a,e,o,r,n,p,l,c,y;t=this.C.gb,s=this.C.hb,h=this.C.ib,a=this.D.gb,e=this.D.hb,o=this.D.ib,r=this.C.kb,n=this.C.lb,p=this.C.mb,l=this.D.kb,c=this.D.lb,y=this.D.mb;for(var f=0,u=this.info.Ka;f<u;){var b=f++,v=this.ac[b];(b=this.info.rows[b].ta).ta*=i,b.ad*=i,b=b.ta+b.ad,t+=v.qd*b,s+=v.rd*b,h+=v.sd*b,a+=v.td*-b,e+=v.ud*-b,o+=v.vd*-b,r+=v.kd*b,n+=v.ld*b,p+=v.md*b,l+=v.nd*-b,c+=v.od*-b,y+=v.pd*-b}this.C.gb=t,this.C.hb=s,this.C.ib=h,this.D.gb=a,this.D.hb=e,this.D.ib=o,this.C.kb=r,this.C.lb=n,this.C.mb=p,this.D.kb=l,this.D.lb=c,this.D.mb=y}},Ch:function(){var t,i,s,h,a,e,o,r,n,p,l,c;t=this.C.gb,i=this.C.hb,s=this.C.ib,h=this.D.gb,a=this.D.hb,e=this.D.ib,o=this.C.kb,r=this.C.lb,n=this.C.mb,p=this.D.kb,l=this.D.lb,c=this.D.mb;for(var y=0,f=this.info.Ka;y<f;){var u=y++,b=this.info.rows[u],v=(u=this.ac[u],b.ta),g=b.Aa;if(0!=b.fb){var x=(x=(x=(x=(x=0)+(t*g.va+i*g.wa+s*g.xa))-(h*g.Ba+a*g.Ca+e*g.Da))+(o*g.aa+r*g.ba+n*g.ca))-(p*g.ea+l*g.fa+c*g.ga),d=(x=(-b.motorSpeed-x)*u.Ff,v.ad);v.ad+=x,v.ad<-b.fb?v.ad=-b.fb:v.ad>b.fb&&(v.ad=b.fb),x=v.ad-d,1&g.xc&&(t+=u.qd*x,i+=u.rd*x,s+=u.sd*x,h+=u.td*-x,a+=u.ud*-x,e+=u.vd*-x),2&g.xc&&(o+=u.kd*x,r+=u.ld*x,n+=u.md*x,p+=u.nd*-x,l+=u.od*-x,c+=u.pd*-x)}}for(y=0,f=this.info.Ka;y<f;)u=y++,b=this.info.rows[u],u=this.ac[u],v=b.ta,x=0,x+=t*(g=b.Aa).va+i*g.wa+s*g.xa,x-=h*g.Ba+a*g.Ca+e*g.Da,x+=o*g.aa+r*g.ba+n*g.ca,x-=p*g.ea+l*g.fa+c*g.ga,x=(b.Fa-x-v.ta*b.Ma)*u.mass,d=v.ta,v.ta+=x,v.ta<b.Ia?v.ta=b.Ia:v.ta>b.Ha&&(v.ta=b.Ha),x=v.ta-d,1&g.xc&&(t+=u.qd*x,i+=u.rd*x,s+=u.sd*x,h+=u.td*-x,a+=u.ud*-x,e+=u.vd*-x),2&g.xc&&(o+=u.kd*x,r+=u.ld*x,n+=u.md*x,p+=u.nd*-x,l+=u.od*-x,c+=u.pd*-x);this.C.gb=t,this.C.hb=i,this.C.ib=s,this.D.gb=h,this.D.hb=a,this.D.ib=e,this.C.kb=o,this.C.lb=r,this.C.mb=n,this.D.kb=p,this.D.lb=l,this.D.mb=c},Li:function(t){for(var i,s,h,a,e,o,r=o=e=a=h=s=i=0,n=this.info.Ka;r<n;){var p,l=r++;l=(p=this.info.rows[l]).ta;1&(p=p.Aa).xc?(i+=p.va*l.ta,s+=p.wa*l.ta,h+=p.xa*l.ta):2&p.xc&&(a+=p.aa*l.ta,e+=p.ba*l.ta,o+=p.ca*l.ta)}this.$.Pi=i*t.invDt,this.$.Qi=s*t.invDt,this.$.Ri=h*t.invDt,this.$.Si=a*t.invDt,this.$.Ti=e*t.invDt,this.$.Ui=o*t.invDt},Pg:function(){this.$.hd(),this.$.gd(this.info),this.C=this.info.Qe,this.D=this.info.Re;var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x=this.C.$a,d=this.D.$a;t=this.C.P,i=this.C.R,s=this.C.S,h=this.C.T,a=this.C.U,e=this.C.V,o=this.C.W,r=this.C.X,n=this.C.Y,p=this.D.P,l=this.D.R,c=this.D.S,y=this.D.T,f=this.D.U,u=this.D.V,b=this.D.W,v=this.D.X,g=this.D.Y;for(var z=0,m=this.info.Ka;z<m;){var j,M,A,w=z++,D=this.ac[w];w=this.info.rows[w].Aa;D.qd=w.va*x,D.rd=w.wa*x,D.sd=w.xa*x,D.td=w.Ba*d,D.ud=w.Ca*d,D.vd=w.Da*d,j=t*w.aa+i*w.ba+s*w.ca,M=h*w.aa+a*w.ba+e*w.ca,A=o*w.aa+r*w.ba+n*w.ca,D.kd=j,D.ld=M,D.md=A,j=p*w.ea+l*w.fa+c*w.ga,M=y*w.ea+f*w.fa+u*w.ga,A=b*w.ea+v*w.fa+g*w.ga,D.nd=j,D.od=M,D.pd=A,D.mass=D.qd*w.va+D.rd*w.wa+D.sd*w.xa+(D.td*w.Ba+D.ud*w.Ca+D.vd*w.Da)+(D.kd*w.aa+D.ld*w.ba+D.md*w.ca)+(D.nd*w.ea+D.od*w.fa+D.pd*w.ga),D.mass&&(D.mass=1/D.mass)}for(x=0,d=this.info.Ka;x<d;)t=x++,this.info.rows[t].ta.ub=0},Bh:function(){var t,i,s,h,a,e,o,r,n,p,l,c;t=this.C.Yc,i=this.C.Zc,s=this.C.$c,h=this.D.Yc,a=this.D.Zc,e=this.D.$c,o=this.C.Uc,r=this.C.Vc,n=this.C.Wc,p=this.D.Uc,l=this.D.Vc,c=this.D.Wc;for(var y=0,f=this.info.Ka;y<f;){var u=y++,b=this.info.rows[u],v=(u=this.ac[u],b.ta),g=(g=(g=(g=(g=0)+(t*(x=b.Aa).va+i*x.wa+s*x.xa))-(h*x.Ba+a*x.Ca+e*x.Da))+(o*x.aa+r*x.ba+n*x.ca))-(p*x.ea+l*x.fa+c*x.ga),x=(b.Fa*gt.positionSplitImpulseBaumgarte-g)*u.mass;g=v.ub;v.ub+=x,v.ub<b.Ia?v.ub=b.Ia:v.ub>b.Ha&&(v.ub=b.Ha),x=v.ub-g,t+=u.qd*x,i+=u.rd*x,s+=u.sd*x,h+=u.td*-x,a+=u.ud*-x,e+=u.vd*-x,o+=u.kd*x,r+=u.ld*x,n+=u.md*x,p+=u.nd*-x,l+=u.od*-x,c+=u.pd*-x}this.C.Yc=t,this.C.Zc=i,this.C.$c=s,this.D.Yc=h,this.D.Zc=a,this.D.$c=e,this.C.Uc=o,this.C.Vc=r,this.C.Wc=n,this.D.Uc=p,this.D.Vc=l,this.D.Wc=c},Ah:function(){this.$.hd(),this.$.gd(this.info),this.C=this.info.Qe,this.D=this.info.Re;var t,i,s,h,a,e,o,r,n,p,l,c,y,f,u,b,v,g,x=this.C.$a,d=this.D.$a;t=this.C.P,i=this.C.R,s=this.C.S,h=this.C.T,a=this.C.U,e=this.C.V,o=this.C.W,r=this.C.X,n=this.C.Y,p=this.D.P,l=this.D.R,c=this.D.S,y=this.D.T,f=this.D.U,u=this.D.V,b=this.D.W,v=this.D.X,g=this.D.Y;for(var z=0,m=this.info.Ka;z<m;){var j,M,A,w,D,C,B=z++,q=this.ac[B],S=this.info.rows[B].Aa;q.qd=S.va*x,q.rd=S.wa*x,q.sd=S.xa*x,q.td=S.Ba*d,q.ud=S.Ca*d,q.vd=S.Da*d,j=t*S.aa+i*S.ba+s*S.ca,M=h*S.aa+a*S.ba+e*S.ca,A=o*S.aa+r*S.ba+n*S.ca,q.kd=j,q.ld=M,q.md=A,w=p*S.ea+l*S.fa+c*S.ga,D=y*S.ea+f*S.fa+u*S.ga,C=b*S.ea+v*S.fa+g*S.ga,q.nd=w,q.od=D,q.pd=C,q.mass=q.qd*S.va+q.rd*S.wa+q.sd*S.xa+(q.td*S.Ba+q.ud*S.Ca+q.vd*S.Da)+(q.kd*S.aa+q.ld*S.ba+q.md*S.ca)+(q.nd*S.ea+q.od*S.fa+q.pd*S.ga),q.mass&&(q.mass=1/q.mass)}for(var k,I,T,O,L,F,P,R,J,N,H,K,G=K=H=N=J=R=P=F=L=O=T=I=k=0,V=this.info.Ka;G<V;){var E=G++,U=this.info.rows[E],W=this.ac[E],Y=U.ta,X=U.Aa,$=($=($=($=($=0)+(k*X.va+I*X.wa+T*X.xa))-(O*X.Ba+L*X.Ca+F*X.Da))+(P*X.aa+R*X.ba+J*X.ca))-(N*X.ea+H*X.fa+K*X.ga),Z=(U.Fa*gt.positionNgsBaumgarte-$)*W.mass,Q=Y.ub;Y.ub+=Z,Y.ub<U.Ia?Y.ub=U.Ia:Y.ub>U.Ha&&(Y.ub=U.Ha),Z=Y.ub-Q,k+=W.qd*Z,I+=W.rd*Z,T+=W.sd*Z,O+=W.td*-Z,L+=W.ud*-Z,F+=W.vd*-Z,P+=W.kd*Z,R+=W.ld*Z,J+=W.md*Z,N+=W.nd*-Z,H+=W.od*-Z,K+=W.pd*-Z}var _=this.C;_.a.v+=k,_.a.A+=I,_.a.B+=T;var tt=this.D;tt.a.v+=O,tt.a.A+=L,tt.a.B+=F;var it,st,ht,at,et,ot,rt=this.C,nt=Math.sqrt(P*P+R*R+J*J),pt=.5*nt;if(.5>pt){var lt=pt*pt;it=.5*(1-.16666666666666666*lt+lt*lt*.008333333333333333),st=1-.5*lt+lt*lt*.041666666666666664}else it=Math.sin(pt)/nt,st=Math.cos(pt);ht=P*it,at=R*it,et=J*it,ot=st;var ct,yt,ft,ut,bt,vt=rt.a.o,xt=rt.a.m,dt=rt.a.s,zt=vt+xt+dt;0<zt?(ut=.5*(bt=Math.sqrt(zt+1)),bt=.5/bt,ct=(rt.a.g-rt.a.j)*bt,yt=(rt.a.h-rt.a.l)*bt,ft=(rt.a.i-rt.a.f)*bt):vt>xt?vt>dt?(ct=.5*(bt=Math.sqrt(vt-xt-dt+1)),bt=.5/bt,yt=(rt.a.f+rt.a.i)*bt,ft=(rt.a.h+rt.a.l)*bt,ut=(rt.a.g-rt.a.j)*bt):(ft=.5*(bt=Math.sqrt(dt-vt-xt+1)),bt=.5/bt,ct=(rt.a.h+rt.a.l)*bt,yt=(rt.a.j+rt.a.g)*bt,ut=(rt.a.i-rt.a.f)*bt):xt>dt?(yt=.5*(bt=Math.sqrt(xt-dt-vt+1)),bt=.5/bt,ct=(rt.a.f+rt.a.i)*bt,ft=(rt.a.j+rt.a.g)*bt,ut=(rt.a.h-rt.a.l)*bt):(ft=.5*(bt=Math.sqrt(dt-vt-xt+1)),bt=.5/bt,ct=(rt.a.h+rt.a.l)*bt,yt=(rt.a.j+rt.a.g)*bt,ut=(rt.a.i-rt.a.f)*bt);var mt=(ct=ot*ct+ht*ut+at*ft-et*yt)*ct+(yt=ot*yt-ht*ft+at*ut+et*ct)*yt+(ft=ot*ft+ht*yt-at*ct+et*ut)*ft+(ut=ot*ut-ht*ct-at*yt-et*ft)*ut;1e-32<mt&&(mt=1/Math.sqrt(mt));ct*=mt,yt*=mt,ft*=mt,ut*=mt;var jt,Mt,At,wt,Dt,Ct,Bt,qt,St,kt,It,Tt,Ot,Lt,Ft,Pt,Rt,Jt,Nt=2*ct,Ht=2*yt,Kt=2*ft,Gt=ct*Nt,Vt=yt*Ht,Et=ft*Kt,Ut=ct*Ht,Wt=yt*Kt,Yt=ct*Kt,Xt=ut*Nt,$t=ut*Ht,Zt=ut*Kt;rt.a.o=1-Vt-Et,rt.a.f=Ut-Zt,rt.a.h=Yt+$t,rt.a.i=Ut+Zt,rt.a.m=1-Gt-Et,rt.a.j=Wt-Xt,rt.a.l=Yt-$t,rt.a.g=Wt+Xt,rt.a.s=1-Gt-Vt,jt=rt.a.o*rt.Ra+rt.a.f*rt.Ua+rt.a.h*rt.Xa,Mt=rt.a.o*rt.Sa+rt.a.f*rt.Va+rt.a.h*rt.Ya,At=rt.a.o*rt.Ta+rt.a.f*rt.Wa+rt.a.h*rt.Za,wt=rt.a.i*rt.Ra+rt.a.m*rt.Ua+rt.a.j*rt.Xa,Dt=rt.a.i*rt.Sa+rt.a.m*rt.Va+rt.a.j*rt.Ya,Ct=rt.a.i*rt.Ta+rt.a.m*rt.Wa+rt.a.j*rt.Za,Bt=rt.a.l*rt.Ra+rt.a.g*rt.Ua+rt.a.s*rt.Xa,qt=rt.a.l*rt.Sa+rt.a.g*rt.Va+rt.a.s*rt.Ya,St=rt.a.l*rt.Ta+rt.a.g*rt.Wa+rt.a.s*rt.Za,rt.P=jt,rt.R=Mt,rt.S=At,rt.T=wt,rt.U=Dt,rt.V=Ct,rt.W=Bt,rt.X=qt,rt.Y=St,kt=rt.P*rt.a.o+rt.R*rt.a.f+rt.S*rt.a.h,It=rt.P*rt.a.i+rt.R*rt.a.m+rt.S*rt.a.j,Tt=rt.P*rt.a.l+rt.R*rt.a.g+rt.S*rt.a.s,Ot=rt.T*rt.a.o+rt.U*rt.a.f+rt.V*rt.a.h,Lt=rt.T*rt.a.i+rt.U*rt.a.m+rt.V*rt.a.j,Ft=rt.T*rt.a.l+rt.U*rt.a.g+rt.V*rt.a.s,Pt=rt.W*rt.a.o+rt.X*rt.a.f+rt.Y*rt.a.h,Rt=rt.W*rt.a.i+rt.X*rt.a.m+rt.Y*rt.a.j,Jt=rt.W*rt.a.l+rt.X*rt.a.g+rt.Y*rt.a.s,rt.P=kt,rt.R=It,rt.S=Tt,rt.T=Ot,rt.U=Lt,rt.V=Ft,rt.W=Pt,rt.X=Rt,rt.Y=Jt,rt.P*=rt.N.x,rt.R*=rt.N.x,rt.S*=rt.N.x,rt.T*=rt.N.y,rt.U*=rt.N.y,rt.V*=rt.N.y,rt.W*=rt.N.z,rt.X*=rt.N.z,rt.Y*=rt.N.z;var Qt,_t,ti,ii,si,hi,ai=this.D,ei=Math.sqrt(N*N+H*H+K*K),oi=.5*ei;if(.5>oi){var ri=oi*oi;Qt=.5*(1-.16666666666666666*ri+ri*ri*.008333333333333333),_t=1-.5*ri+ri*ri*.041666666666666664}else Qt=Math.sin(oi)/ei,_t=Math.cos(oi);ti=N*Qt,ii=H*Qt,si=K*Qt,hi=_t;var ni,pi,li,ci,yi,fi=ai.a.o,ui=ai.a.m,bi=ai.a.s,vi=fi+ui+bi;0<vi?(ci=.5*(yi=Math.sqrt(vi+1)),yi=.5/yi,ni=(ai.a.g-ai.a.j)*yi,pi=(ai.a.h-ai.a.l)*yi,li=(ai.a.i-ai.a.f)*yi):fi>ui?fi>bi?(ni=.5*(yi=Math.sqrt(fi-ui-bi+1)),yi=.5/yi,pi=(ai.a.f+ai.a.i)*yi,li=(ai.a.h+ai.a.l)*yi,ci=(ai.a.g-ai.a.j)*yi):(li=.5*(yi=Math.sqrt(bi-fi-ui+1)),yi=.5/yi,ni=(ai.a.h+ai.a.l)*yi,pi=(ai.a.j+ai.a.g)*yi,ci=(ai.a.i-ai.a.f)*yi):ui>bi?(pi=.5*(yi=Math.sqrt(ui-bi-fi+1)),yi=.5/yi,ni=(ai.a.f+ai.a.i)*yi,li=(ai.a.j+ai.a.g)*yi,ci=(ai.a.h-ai.a.l)*yi):(li=.5*(yi=Math.sqrt(bi-fi-ui+1)),yi=.5/yi,ni=(ai.a.h+ai.a.l)*yi,pi=(ai.a.j+ai.a.g)*yi,ci=(ai.a.i-ai.a.f)*yi);var gi=(ni=hi*ni+ti*ci+ii*li-si*pi)*ni+(pi=hi*pi-ti*li+ii*ci+si*ni)*pi+(li=hi*li+ti*pi-ii*ni+si*ci)*li+(ci=hi*ci-ti*ni-ii*pi-si*li)*ci;1e-32<gi&&(gi=1/Math.sqrt(gi));ni*=gi,pi*=gi,li*=gi,ci*=gi;var xi,di,zi,mi,ji,Mi,Ai,wi,Di,Ci,Bi,qi,Si,ki,Ii,Ti,Oi,Li,Fi=2*ni,Pi=2*pi,Ri=2*li,Ji=ni*Fi,Ni=pi*Pi,Hi=li*Ri,Ki=ni*Pi,Gi=pi*Ri,Vi=ni*Ri,Ei=ci*Fi,Ui=ci*Pi,Wi=ci*Ri;ai.a.o=1-Ni-Hi,ai.a.f=Ki-Wi,ai.a.h=Vi+Ui,ai.a.i=Ki+Wi,ai.a.m=1-Ji-Hi,ai.a.j=Gi-Ei,ai.a.l=Vi-Ui,ai.a.g=Gi+Ei,ai.a.s=1-Ji-Ni,xi=ai.a.o*ai.Ra+ai.a.f*ai.Ua+ai.a.h*ai.Xa,di=ai.a.o*ai.Sa+ai.a.f*ai.Va+ai.a.h*ai.Ya,zi=ai.a.o*ai.Ta+ai.a.f*ai.Wa+ai.a.h*ai.Za,mi=ai.a.i*ai.Ra+ai.a.m*ai.Ua+ai.a.j*ai.Xa,ji=ai.a.i*ai.Sa+ai.a.m*ai.Va+ai.a.j*ai.Ya,Mi=ai.a.i*ai.Ta+ai.a.m*ai.Wa+ai.a.j*ai.Za,Ai=ai.a.l*ai.Ra+ai.a.g*ai.Ua+ai.a.s*ai.Xa,wi=ai.a.l*ai.Sa+ai.a.g*ai.Va+ai.a.s*ai.Ya,Di=ai.a.l*ai.Ta+ai.a.g*ai.Wa+ai.a.s*ai.Za,ai.P=xi,ai.R=di,ai.S=zi,ai.T=mi,ai.U=ji,ai.V=Mi,ai.W=Ai,ai.X=wi,ai.Y=Di,Ci=ai.P*ai.a.o+ai.R*ai.a.f+ai.S*ai.a.h,Bi=ai.P*ai.a.i+ai.R*ai.a.m+ai.S*ai.a.j,qi=ai.P*ai.a.l+ai.R*ai.a.g+ai.S*ai.a.s,Si=ai.T*ai.a.o+ai.U*ai.a.f+ai.V*ai.a.h,ki=ai.T*ai.a.i+ai.U*ai.a.m+ai.V*ai.a.j,Ii=ai.T*ai.a.l+ai.U*ai.a.g+ai.V*ai.a.s,Ti=ai.W*ai.a.o+ai.X*ai.a.f+ai.Y*ai.a.h,Oi=ai.W*ai.a.i+ai.X*ai.a.m+ai.Y*ai.a.j,Li=ai.W*ai.a.l+ai.X*ai.a.g+ai.Y*ai.a.s,ai.P=Ci,ai.R=Bi,ai.S=qi,ai.T=Si,ai.U=ki,ai.V=Ii,ai.W=Ti,ai.X=Oi,ai.Y=Li,ai.P*=ai.N.x,ai.R*=ai.N.x,ai.S*=ai.N.x,ai.T*=ai.N.y,ai.U*=ai.N.y,ai.V*=ai.N.y,ai.W*=ai.N.z,ai.X*=ai.N.z,ai.Y*=ai.N.z},postSolve:function(){this.$.hd(),this.$.Rl()}}),h.prototype={Wl:function(t){switch(this.Lb){case 1:this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=this.mb=this.lb=this.kb=this.ib=this.hb=this.gb=0;break;case 0:case 2:var i,s,h,a,e;i=this.gb*t,s=this.hb*t,h=this.ib*t;var o=(a=this.kb*t)*a+(e=this.lb*t)*e+(t=this.mb*t)*t;if((r=i*i+s*s+h*h)||o){var r,n;r>gt.maxTranslationPerStep*gt.maxTranslationPerStep&&(r=gt.maxTranslationPerStep/Math.sqrt(r),this.gb*=r,this.hb*=r,this.ib*=r,i*=r,s*=r,h*=r),o>gt.maxRotationPerStep*gt.maxRotationPerStep&&(o=gt.maxRotationPerStep/Math.sqrt(o),this.kb*=o,this.lb*=o,this.mb*=o,a*=o,e*=o,t*=o),this.a.v+=i,this.a.A+=s,this.a.B+=h,.5>(s=.5*(i=Math.sqrt(a*a+e*e+t*t)))?(i=.5*(1-.16666666666666666*(s*=s)+s*s*.008333333333333333),s=1-.5*s+s*s*.041666666666666664):(i=Math.sin(s)/i,s=Math.cos(s)),a*=i,e*=i,t*=i,i=s,0<(r=(s=this.a.o)+(h=this.a.m)+(o=this.a.s))?(s=.5*(n=Math.sqrt(r+1)),n=.5/n,r=(this.a.g-this.a.j)*n,o=(this.a.h-this.a.l)*n,h=(this.a.i-this.a.f)*n):s>h?s>o?(r=.5*(n=Math.sqrt(s-h-o+1)),n=.5/n,o=(this.a.f+this.a.i)*n,h=(this.a.h+this.a.l)*n,s=(this.a.g-this.a.j)*n):(h=.5*(n=Math.sqrt(o-s-h+1)),n=.5/n,r=(this.a.h+this.a.l)*n,o=(this.a.j+this.a.g)*n,s=(this.a.i-this.a.f)*n):h>o?(o=.5*(n=Math.sqrt(h-o-s+1)),n=.5/n,r=(this.a.f+this.a.i)*n,h=(this.a.j+this.a.g)*n,s=(this.a.h-this.a.l)*n):(h=.5*(n=Math.sqrt(o-s-h+1)),n=.5/n,r=(this.a.h+this.a.l)*n,o=(this.a.j+this.a.g)*n,s=(this.a.i-this.a.f)*n),1e-32<(t=(r=i*r+a*s+e*h-t*o)*r+(o=i*o-a*h+e*s+t*r)*o+(h=i*h+a*o-e*r+t*s)*h+(s=i*s-a*r-e*o-t*h)*s)&&(t=1/Math.sqrt(t)),e=r*t,r=o*t,h*=t,i=s*t;var p=2*e;t=e*p,a=r*(n=2*r),h*=s=2*h,o=e*n,r*=s,e*=s,p*=i,n*=i,i*=s,this.a.o=1-a-h,this.a.f=o-i,this.a.h=e+n,this.a.i=o+i,this.a.m=1-t-h,this.a.j=r-p,this.a.l=e-n,this.a.g=r+p,this.a.s=1-t-a,e=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,t=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,i=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,s=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,h=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,o=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,r=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,n=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=e,this.R=t,this.S=a,this.T=i,this.U=s,this.V=h,this.W=o,this.X=r,this.Y=n,e=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,t=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,i=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,s=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,h=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,o=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,r=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,n=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=e,this.R=t,this.S=a,this.T=i,this.U=s,this.V=h,this.W=o,this.X=r,this.Y=n,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z}}},dn:function(){var t=this.Uc*this.Uc+this.Vc*this.Vc+this.Wc*this.Wc;if(this.Yc*this.Yc+this.Zc*this.Zc+this.$c*this.$c||t)switch(this.Lb){case 1:this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;break;case 0:case 2:var i,s,h,a,e,o,r,n;i=this.Yc,s=this.Zc,h=this.$c,t=this.Uc,a=this.Vc,e=this.Wc,this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0,this.a.v+=i,this.a.A+=s,this.a.B+=h,.5>(s=.5*(i=Math.sqrt(t*t+a*a+e*e)))?(i=.5*(1-.16666666666666666*(s*=s)+s*s*.008333333333333333),s=1-.5*s+s*s*.041666666666666664):(i=Math.sin(s)/i,s=Math.cos(s)),t*=i,a*=i,e*=i,i=s,0<(o=(s=this.a.o)+(h=this.a.m)+(r=this.a.s))?(s=.5*(n=Math.sqrt(o+1)),n=.5/n,o=(this.a.g-this.a.j)*n,r=(this.a.h-this.a.l)*n,h=(this.a.i-this.a.f)*n):s>h?s>r?(o=.5*(n=Math.sqrt(s-h-r+1)),n=.5/n,r=(this.a.f+this.a.i)*n,h=(this.a.h+this.a.l)*n,s=(this.a.g-this.a.j)*n):(h=.5*(n=Math.sqrt(r-s-h+1)),n=.5/n,o=(this.a.h+this.a.l)*n,r=(this.a.j+this.a.g)*n,s=(this.a.i-this.a.f)*n):h>r?(r=.5*(n=Math.sqrt(h-r-s+1)),n=.5/n,o=(this.a.f+this.a.i)*n,h=(this.a.j+this.a.g)*n,s=(this.a.h-this.a.l)*n):(h=.5*(n=Math.sqrt(r-s-h+1)),n=.5/n,o=(this.a.h+this.a.l)*n,r=(this.a.j+this.a.g)*n,s=(this.a.i-this.a.f)*n),1e-32<(a=(o=i*o+t*s+a*h-e*r)*o+(r=i*r-t*h+a*s+e*o)*r+(h=i*h+t*r-a*o+e*s)*h+(s=i*s-t*o-a*r-e*h)*s)&&(a=1/Math.sqrt(a)),t=o*a,o=r*a,h*=a,i=s*a;var p=2*t;a=t*p,e=o*(n=2*o),h*=s=2*h,r=t*n,o*=s,t*=s,p*=i,n*=i,i*=s,this.a.o=1-e-h,this.a.f=r-i,this.a.h=t+n,this.a.i=r+i,this.a.m=1-a-h,this.a.j=o-p,this.a.l=t-n,this.a.g=o+p,this.a.s=1-a-e,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,i=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,s=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,h=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,r=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,o=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,n=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=a,this.S=e,this.T=i,this.U=s,this.V=h,this.W=r,this.X=o,this.Y=n,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,i=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,s=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,h=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,r=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,o=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,n=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=a,this.S=e,this.T=i,this.U=s,this.V=h,this.W=r,this.X=o,this.Y=n,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z}},Oj:function(){for(var t,i,s,h,a,e,o,r,n,p=n=r=o=e=a=h=s=i=t=0,l=this.Dc;null!=l;){var c=l.M;(C=l.Kb).Oe();var y,f,u,b,v,g,x,d,z=l.Dk*C.yf;y=l.ha.o*C.mg+l.ha.f*C.pg+l.ha.h*C.sg,f=l.ha.o*C.ng+l.ha.f*C.qg+l.ha.h*C.tg,u=l.ha.o*C.og+l.ha.f*C.rg+l.ha.h*C.ug,b=l.ha.i*C.mg+l.ha.m*C.pg+l.ha.j*C.sg,v=l.ha.i*C.ng+l.ha.m*C.qg+l.ha.j*C.tg,g=l.ha.i*C.og+l.ha.m*C.rg+l.ha.j*C.ug,x=l.ha.l*C.mg+l.ha.g*C.pg+l.ha.s*C.sg,d=l.ha.l*C.ng+l.ha.g*C.qg+l.ha.s*C.tg;var m,j,M,A,w,D,C=l.ha.l*C.og+l.ha.g*C.rg+l.ha.s*C.ug;m=y*l.ha.o+f*l.ha.f+u*l.ha.h,j=y*l.ha.i+f*l.ha.m+u*l.ha.j,u=y*l.ha.l+f*l.ha.g+u*l.ha.s,M=b*l.ha.o+v*l.ha.f+g*l.ha.h,A=b*l.ha.i+v*l.ha.m+g*l.ha.j,g=b*l.ha.l+v*l.ha.g+g*l.ha.s,w=x*l.ha.o+d*l.ha.f+C*l.ha.h,D=x*l.ha.i+d*l.ha.m+C*l.ha.j,C=x*l.ha.l+d*l.ha.g+C*l.ha.s,y=m,f=j,b=M,v=A,x=w,d=D,y*=z,f*=z,u*=z,b*=z,v*=z,g*=z,x*=z,d*=z;var B,q;C=C*z;M=l.ha.v*l.ha.v,A=l.ha.A*l.ha.A,B=l.ha.B*l.ha.B,w=-l.ha.v*l.ha.A,D=-l.ha.A*l.ha.B,q=-l.ha.B*l.ha.v,p+=z,t+=y+=(l=A+B)*z,i+=f+=(m=w)*z,s+=u+=(j=q)*z,h+=b+=w*z,a+=v+=(B=M+B)*z,e+=g+=D*z,o+=x+=q*z,r+=d+=D*z,n+=C+=(M+=A)*z,l=c}this.Pc=p,this.Ad=t,this.Bd=i,this.Cd=s,this.Dd=h,this.Ed=a,this.Fd=e,this.Gd=o,this.Hd=r,this.Id=n,t=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd),0==this.Lb?(this.$a=1/this.Pc,t=this.Ed*this.Id-this.Fd*this.Hd,i=this.Dd*this.Id-this.Fd*this.Gd,s=this.Dd*this.Hd-this.Ed*this.Gd,h=this.Bd*this.Id-this.Cd*this.Hd,a=this.Ad*this.Id-this.Cd*this.Gd,e=this.Ad*this.Hd-this.Bd*this.Gd,o=this.Bd*this.Fd-this.Cd*this.Ed,r=this.Ad*this.Fd-this.Cd*this.Dd,n=this.Ad*this.Ed-this.Bd*this.Dd,(-1e-32>(p=this.Ad*t-this.Bd*i+this.Cd*s)||1e-32<p)&&(p=1/p),this.Ra=t*p,this.Sa=-h*p,this.Ta=o*p,this.Ua=-i*p,this.Va=a*p,this.Wa=-r*p,this.Xa=s*p,this.Ya=-e*p,this.Za=n*p,this.pi=this.Ra,this.ri=this.Sa,this.si=this.Ta,this.ti=this.Ua,this.ui=this.Va,this.vi=this.Wa,this.wi=this.Xa,this.xi=this.Ya,this.yi=this.Za,this.Ra=this.pi*this.N.x,this.Sa=this.ri*this.N.x,this.Ta=this.si*this.N.x,this.Ua=this.ti*this.N.y,this.Va=this.ui*this.N.y,this.Wa=this.vi*this.N.y,this.Xa=this.wi*this.N.z,this.Ya=this.xi*this.N.z,this.Za=this.yi*this.N.z):this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,i=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,s=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,h=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,a=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,o=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,r=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,n=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,i=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,s=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,h=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,a=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,e=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,o=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,r=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,n=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,this.Gb=!1,this.yb=0},qm:function(){var t=new dt;return t.x=this.a.v,t.y=this.a.A,t.z=this.a.B,t},rm:function(t){t.x=this.a.v,t.y=this.a.A,t.z=this.a.B},Xn:function(t){this.a.v=t.x,this.a.A=t.y,this.a.B=t.z,t=this.pa;var i=this.a;for(t.v=i.v,t.A=i.A,t.B=i.B,t.o=i.o,t.f=i.f,t.h=i.h,t.i=i.i,t.m=i.m,t.j=i.j,t.l=i.l,t.g=i.g,t.s=i.s,t=this.Dc;null!=t;){i=t.M;var s,h,a,e,o,r,n,p,l,c=t.pa,y=t.ha,f=this.pa;s=f.o*y.o+f.f*y.i+f.h*y.l,h=f.o*y.f+f.f*y.m+f.h*y.g,a=f.o*y.h+f.f*y.j+f.h*y.s,e=f.i*y.o+f.m*y.i+f.j*y.l,o=f.i*y.f+f.m*y.m+f.j*y.g,r=f.i*y.h+f.m*y.j+f.j*y.s,n=f.l*y.o+f.g*y.i+f.s*y.l,p=f.l*y.f+f.g*y.m+f.s*y.g,l=f.l*y.h+f.g*y.j+f.s*y.s,c.o=s,c.f=h,c.h=a,c.i=e,c.m=o,c.j=r,c.l=n,c.g=p,c.s=l,s=f.o*y.v+f.f*y.A+f.h*y.B,h=f.i*y.v+f.m*y.A+f.j*y.B,y=f.l*y.v+f.g*y.A+f.s*y.B,c.v=s,c.A=h,c.B=y,c.v+=f.v,c.A+=f.A,c.B+=f.B,c=t.a,y=t.ha,s=(f=this.a).o*y.o+f.f*y.i+f.h*y.l,h=f.o*y.f+f.f*y.m+f.h*y.g,a=f.o*y.h+f.f*y.j+f.h*y.s,e=f.i*y.o+f.m*y.i+f.j*y.l,o=f.i*y.f+f.m*y.m+f.j*y.g,r=f.i*y.h+f.m*y.j+f.j*y.s,n=f.l*y.o+f.g*y.i+f.s*y.l,p=f.l*y.f+f.g*y.m+f.s*y.g,l=f.l*y.h+f.g*y.j+f.s*y.s,c.o=s,c.f=h,c.h=a,c.i=e,c.m=o,c.j=r,c.l=n,c.g=p,c.s=l,s=f.o*y.v+f.f*y.A+f.h*y.B,h=f.i*y.v+f.m*y.A+f.j*y.B,y=f.l*y.v+f.g*y.A+f.s*y.B,c.v=s,c.A=h,c.B=y,c.v+=f.v,c.A+=f.A,c.B+=f.B,t.Kb.Nb(t.u,t.pa),c=t.u.ma,f=t.u.na,y=t.u.oa,s=t.u.ja,h=t.u.ka,a=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=c<t.u.ma?c:t.u.ma,t.u.na=f<t.u.na?f:t.u.na,t.u.oa=y<t.u.oa?y:t.u.oa,t.u.ja=s>t.u.ja?s:t.u.ja,t.u.ka=h>t.u.ka?h:t.u.ka,t.u.la=a>t.u.la?a:t.u.la,null!=t.tb&&(c=t.a.v-t.pa.v,f=t.a.A-t.pa.A,y=t.a.B-t.pa.B,(s=t.rc).x=c,s.y=f,s.z=y,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=i}this.Gb=!1,this.yb=0},jo:function(t){var i,s;for(i=t.x,s=t.y,t=t.z,this.a.v+=i,this.a.A+=s,this.a.B+=t,i=this.pa,s=this.a,i.v=s.v,i.A=s.A,i.B=s.B,i.o=s.o,i.f=s.f,i.h=s.h,i.i=s.i,i.m=s.m,i.j=s.j,i.l=s.l,i.g=s.g,i.s=s.s,i=this.Dc;null!=i;){s=i.M,t=i.pa;var h,a,e,o,r,n,p,l,c,y=i.ha,f=this.pa;h=f.o*y.o+f.f*y.i+f.h*y.l,a=f.o*y.f+f.f*y.m+f.h*y.g,e=f.o*y.h+f.f*y.j+f.h*y.s,o=f.i*y.o+f.m*y.i+f.j*y.l,r=f.i*y.f+f.m*y.m+f.j*y.g,n=f.i*y.h+f.m*y.j+f.j*y.s,p=f.l*y.o+f.g*y.i+f.s*y.l,l=f.l*y.f+f.g*y.m+f.s*y.g,c=f.l*y.h+f.g*y.j+f.s*y.s,t.o=h,t.f=a,t.h=e,t.i=o,t.m=r,t.j=n,t.l=p,t.g=l,t.s=c,h=f.o*y.v+f.f*y.A+f.h*y.B,a=f.i*y.v+f.m*y.A+f.j*y.B,y=f.l*y.v+f.g*y.A+f.s*y.B,t.v=h,t.A=a,t.B=y,t.v+=f.v,t.A+=f.A,t.B+=f.B,t=i.a,y=i.ha,h=(f=this.a).o*y.o+f.f*y.i+f.h*y.l,a=f.o*y.f+f.f*y.m+f.h*y.g,e=f.o*y.h+f.f*y.j+f.h*y.s,o=f.i*y.o+f.m*y.i+f.j*y.l,r=f.i*y.f+f.m*y.m+f.j*y.g,n=f.i*y.h+f.m*y.j+f.j*y.s,p=f.l*y.o+f.g*y.i+f.s*y.l,l=f.l*y.f+f.g*y.m+f.s*y.g,c=f.l*y.h+f.g*y.j+f.s*y.s,t.o=h,t.f=a,t.h=e,t.i=o,t.m=r,t.j=n,t.l=p,t.g=l,t.s=c,h=f.o*y.v+f.f*y.A+f.h*y.B,a=f.i*y.v+f.m*y.A+f.j*y.B,y=f.l*y.v+f.g*y.A+f.s*y.B,t.v=h,t.A=a,t.B=y,t.v+=f.v,t.A+=f.A,t.B+=f.B,i.Kb.Nb(i.u,i.pa),t=i.u.ma,f=i.u.na,y=i.u.oa,h=i.u.ja,a=i.u.ka,e=i.u.la,i.Kb.Nb(i.u,i.a),i.u.ma=t<i.u.ma?t:i.u.ma,i.u.na=f<i.u.na?f:i.u.na,i.u.oa=y<i.u.oa?y:i.u.oa,i.u.ja=h>i.u.ja?h:i.u.ja,i.u.ka=a>i.u.ka?a:i.u.ka,i.u.la=e>i.u.la?e:i.u.la,null!=i.tb&&(t=i.a.v-i.pa.v,f=i.a.A-i.pa.A,y=i.a.B-i.pa.B,(h=i.rc).x=t,h.y=f,h.z=y,i.Yb.oc.jc.wd(i.tb,i.u,i.rc)),i=s}this.Gb=!1,this.yb=0},vm:function(){var t=new ft;return t.e00=this.a.o,t.e01=this.a.f,t.e02=this.a.h,t.e10=this.a.i,t.e11=this.a.m,t.e12=this.a.j,t.e20=this.a.l,t.e21=this.a.g,t.e22=this.a.s,t},wm:function(t){t.e00=this.a.o,t.e01=this.a.f,t.e02=this.a.h,t.e10=this.a.i,t.e11=this.a.m,t.e12=this.a.j,t.e20=this.a.l,t.e21=this.a.g,t.e22=this.a.s},$n:function(t){var i,s,h,a,e,o,r,n;for(this.a.o=t.e00,this.a.f=t.e01,this.a.h=t.e02,this.a.i=t.e10,this.a.m=t.e11,this.a.j=t.e12,this.a.l=t.e20,this.a.g=t.e21,this.a.s=t.e22,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,i=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,s=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,h=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,a=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,o=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,r=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,n=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,i=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,s=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,h=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,a=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,e=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,o=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,r=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,n=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,t=this.pa,i=this.a,t.v=i.v,t.A=i.A,t.B=i.B,t.o=i.o,t.f=i.f,t.h=i.h,t.i=i.i,t.m=i.m,t.j=i.j,t.l=i.l,t.g=i.g,t.s=i.s,t=this.Dc;null!=t;){var p,l,c,y,f;i=t.M,s=t.pa,a=t.ha,e=(h=this.pa).o*a.o+h.f*a.i+h.h*a.l,o=h.o*a.f+h.f*a.m+h.h*a.g,r=h.o*a.h+h.f*a.j+h.h*a.s,n=h.i*a.o+h.m*a.i+h.j*a.l,p=h.i*a.f+h.m*a.m+h.j*a.g,l=h.i*a.h+h.m*a.j+h.j*a.s,c=h.l*a.o+h.g*a.i+h.s*a.l,y=h.l*a.f+h.g*a.m+h.s*a.g,f=h.l*a.h+h.g*a.j+h.s*a.s,s.o=e,s.f=o,s.h=r,s.i=n,s.m=p,s.j=l,s.l=c,s.g=y,s.s=f,e=h.o*a.v+h.f*a.A+h.h*a.B,o=h.i*a.v+h.m*a.A+h.j*a.B,a=h.l*a.v+h.g*a.A+h.s*a.B,s.v=e,s.A=o,s.B=a,s.v+=h.v,s.A+=h.A,s.B+=h.B,s=t.a,a=t.ha,e=(h=this.a).o*a.o+h.f*a.i+h.h*a.l,o=h.o*a.f+h.f*a.m+h.h*a.g,r=h.o*a.h+h.f*a.j+h.h*a.s,n=h.i*a.o+h.m*a.i+h.j*a.l,p=h.i*a.f+h.m*a.m+h.j*a.g,l=h.i*a.h+h.m*a.j+h.j*a.s,c=h.l*a.o+h.g*a.i+h.s*a.l,y=h.l*a.f+h.g*a.m+h.s*a.g,f=h.l*a.h+h.g*a.j+h.s*a.s,s.o=e,s.f=o,s.h=r,s.i=n,s.m=p,s.j=l,s.l=c,s.g=y,s.s=f,e=h.o*a.v+h.f*a.A+h.h*a.B,o=h.i*a.v+h.m*a.A+h.j*a.B,a=h.l*a.v+h.g*a.A+h.s*a.B,s.v=e,s.A=o,s.B=a,s.v+=h.v,s.A+=h.A,s.B+=h.B,t.Kb.Nb(t.u,t.pa),s=t.u.ma,h=t.u.na,a=t.u.oa,e=t.u.ja,o=t.u.ka,r=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=s<t.u.ma?s:t.u.ma,t.u.na=h<t.u.na?h:t.u.na,t.u.oa=a<t.u.oa?a:t.u.oa,t.u.ja=e>t.u.ja?e:t.u.ja,t.u.ka=o>t.u.ka?o:t.u.ka,t.u.la=r>t.u.la?r:t.u.la,null!=t.tb&&(s=t.a.v-t.pa.v,h=t.a.A-t.pa.A,a=t.a.B-t.pa.B,(e=t.rc).x=s,e.y=h,e.z=a,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=i}this.Gb=!1,this.yb=0},fo:function(t){var i,s,h;i=t.x,s=t.y,h=t.z,t=Math.sin(i);var a,e,o,r=Math.sin(s),n=Math.sin(h);for(i=Math.cos(i),s=Math.cos(s),h=Math.cos(h),this.a.o=s*h,this.a.f=-s*n,this.a.h=r,this.a.i=i*n+h*t*r,this.a.m=i*h-t*r*n,this.a.j=-s*t,this.a.l=t*n-i*h*r,this.a.g=h*t+i*r*n,this.a.s=i*s,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,r=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,n=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,s=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,i=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,a=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,e=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,o=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=r,this.S=n,this.T=s,this.U=h,this.V=i,this.W=a,this.X=e,this.Y=o,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,r=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,n=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,s=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,i=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,a=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,e=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,o=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=r,this.S=n,this.T=s,this.U=h,this.V=i,this.W=a,this.X=e,this.Y=o,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,t=this.pa,r=this.a,t.v=r.v,t.A=r.A,t.B=r.B,t.o=r.o,t.f=r.f,t.h=r.h,t.i=r.i,t.m=r.m,t.j=r.j,t.l=r.l,t.g=r.g,t.s=r.s,t=this.Dc;null!=t;){var p,l,c,y,f;r=t.M,n=t.pa,h=t.ha,i=(s=this.pa).o*h.o+s.f*h.i+s.h*h.l,a=s.o*h.f+s.f*h.m+s.h*h.g,e=s.o*h.h+s.f*h.j+s.h*h.s,o=s.i*h.o+s.m*h.i+s.j*h.l,p=s.i*h.f+s.m*h.m+s.j*h.g,l=s.i*h.h+s.m*h.j+s.j*h.s,c=s.l*h.o+s.g*h.i+s.s*h.l,y=s.l*h.f+s.g*h.m+s.s*h.g,f=s.l*h.h+s.g*h.j+s.s*h.s,n.o=i,n.f=a,n.h=e,n.i=o,n.m=p,n.j=l,n.l=c,n.g=y,n.s=f,i=s.o*h.v+s.f*h.A+s.h*h.B,a=s.i*h.v+s.m*h.A+s.j*h.B,h=s.l*h.v+s.g*h.A+s.s*h.B,n.v=i,n.A=a,n.B=h,n.v+=s.v,n.A+=s.A,n.B+=s.B,n=t.a,h=t.ha,i=(s=this.a).o*h.o+s.f*h.i+s.h*h.l,a=s.o*h.f+s.f*h.m+s.h*h.g,e=s.o*h.h+s.f*h.j+s.h*h.s,o=s.i*h.o+s.m*h.i+s.j*h.l,p=s.i*h.f+s.m*h.m+s.j*h.g,l=s.i*h.h+s.m*h.j+s.j*h.s,c=s.l*h.o+s.g*h.i+s.s*h.l,y=s.l*h.f+s.g*h.m+s.s*h.g,f=s.l*h.h+s.g*h.j+s.s*h.s,n.o=i,n.f=a,n.h=e,n.i=o,n.m=p,n.j=l,n.l=c,n.g=y,n.s=f,i=s.o*h.v+s.f*h.A+s.h*h.B,a=s.i*h.v+s.m*h.A+s.j*h.B,h=s.l*h.v+s.g*h.A+s.s*h.B,n.v=i,n.A=a,n.B=h,n.v+=s.v,n.A+=s.A,n.B+=s.B,t.Kb.Nb(t.u,t.pa),n=t.u.ma,s=t.u.na,h=t.u.oa,i=t.u.ja,a=t.u.ka,e=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=n<t.u.ma?n:t.u.ma,t.u.na=s<t.u.na?s:t.u.na,t.u.oa=h<t.u.oa?h:t.u.oa,t.u.ja=i>t.u.ja?i:t.u.ja,t.u.ka=a>t.u.ka?a:t.u.ka,t.u.la=e>t.u.la?e:t.u.la,null!=t.tb&&(n=t.a.v-t.pa.v,s=t.a.A-t.pa.A,h=t.a.B-t.pa.B,(i=t.rc).x=n,i.y=s,i.z=h,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=r}this.Gb=!1,this.yb=0},Em:function(t){var i,s,h,a,e,o,r,n,p,l;for(i=t.e00,s=t.e01,h=t.e02,a=t.e10,e=t.e11,o=t.e12,r=t.e20,n=t.e21,p=t.e22,t=i*this.a.o+s*this.a.i+h*this.a.l,l=i*this.a.f+s*this.a.m+h*this.a.g,i=i*this.a.h+s*this.a.j+h*this.a.s,s=a*this.a.o+e*this.a.i+o*this.a.l,h=a*this.a.f+e*this.a.m+o*this.a.g,a=a*this.a.h+e*this.a.j+o*this.a.s,e=r*this.a.o+n*this.a.i+p*this.a.l,o=r*this.a.f+n*this.a.m+p*this.a.g,r=r*this.a.h+n*this.a.j+p*this.a.s,this.a.o=t,this.a.f=l,this.a.h=i,this.a.i=s,this.a.m=h,this.a.j=a,this.a.l=e,this.a.g=o,this.a.s=r,r=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,n=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,t=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,l=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,p=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,a=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,e=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,o=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,i=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=r,this.R=n,this.S=t,this.T=l,this.U=p,this.V=a,this.W=e,this.X=o,this.Y=i,r=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,n=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,t=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,l=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,p=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,a=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,e=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,o=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,i=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=r,this.R=n,this.S=t,this.T=l,this.U=p,this.V=a,this.W=e,this.X=o,this.Y=i,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,r=this.pa,n=this.a,r.v=n.v,r.A=n.A,r.B=n.B,r.o=n.o,r.f=n.f,r.h=n.h,r.i=n.i,r.m=n.m,r.j=n.j,r.l=n.l,r.g=n.g,r.s=n.s,r=this.Dc;null!=r;){var c,y,f;n=r.M,t=r.pa,p=r.ha,a=(l=this.pa).o*p.o+l.f*p.i+l.h*p.l,e=l.o*p.f+l.f*p.m+l.h*p.g,o=l.o*p.h+l.f*p.j+l.h*p.s,i=l.i*p.o+l.m*p.i+l.j*p.l,s=l.i*p.f+l.m*p.m+l.j*p.g,h=l.i*p.h+l.m*p.j+l.j*p.s,c=l.l*p.o+l.g*p.i+l.s*p.l,y=l.l*p.f+l.g*p.m+l.s*p.g,f=l.l*p.h+l.g*p.j+l.s*p.s,t.o=a,t.f=e,t.h=o,t.i=i,t.m=s,t.j=h,t.l=c,t.g=y,t.s=f,a=l.o*p.v+l.f*p.A+l.h*p.B,e=l.i*p.v+l.m*p.A+l.j*p.B,p=l.l*p.v+l.g*p.A+l.s*p.B,t.v=a,t.A=e,t.B=p,t.v+=l.v,t.A+=l.A,t.B+=l.B,t=r.a,p=r.ha,a=(l=this.a).o*p.o+l.f*p.i+l.h*p.l,e=l.o*p.f+l.f*p.m+l.h*p.g,o=l.o*p.h+l.f*p.j+l.h*p.s,i=l.i*p.o+l.m*p.i+l.j*p.l,s=l.i*p.f+l.m*p.m+l.j*p.g,h=l.i*p.h+l.m*p.j+l.j*p.s,c=l.l*p.o+l.g*p.i+l.s*p.l,y=l.l*p.f+l.g*p.m+l.s*p.g,f=l.l*p.h+l.g*p.j+l.s*p.s,t.o=a,t.f=e,t.h=o,t.i=i,t.m=s,t.j=h,t.l=c,t.g=y,t.s=f,a=l.o*p.v+l.f*p.A+l.h*p.B,e=l.i*p.v+l.m*p.A+l.j*p.B,p=l.l*p.v+l.g*p.A+l.s*p.B,t.v=a,t.A=e,t.B=p,t.v+=l.v,t.A+=l.A,t.B+=l.B,r.Kb.Nb(r.u,r.pa),t=r.u.ma,l=r.u.na,p=r.u.oa,a=r.u.ja,e=r.u.ka,o=r.u.la,r.Kb.Nb(r.u,r.a),r.u.ma=t<r.u.ma?t:r.u.ma,r.u.na=l<r.u.na?l:r.u.na,r.u.oa=p<r.u.oa?p:r.u.oa,r.u.ja=a>r.u.ja?a:r.u.ja,r.u.ka=e>r.u.ka?e:r.u.ka,r.u.la=o>r.u.la?o:r.u.la,null!=r.tb&&(t=r.a.v-r.pa.v,l=r.a.A-r.pa.A,p=r.a.B-r.pa.B,(a=r.rc).x=t,a.y=l,a.z=p,r.Yb.oc.jc.wd(r.tb,r.u,r.rc)),r=n}this.Gb=!1,this.yb=0},Sn:function(t){var i,s,h,a,e,o,r;i=t.x,s=t.y,t=t.z,o=Math.sin(i);var n=Math.sin(s),p=Math.sin(t),l=Math.cos(i);r=Math.cos(s);var c=Math.cos(t);for(h=r*c,a=-r*p,t=l*p+c*o*n,i=l*c-o*n*p,e=-r*o,s=o*p-l*c*n,o=c*o+l*n*p,r*=l,p=h*this.a.o+a*this.a.i+n*this.a.l,l=h*this.a.f+a*this.a.m+n*this.a.g,n=h*this.a.h+a*this.a.j+n*this.a.s,h=t*this.a.o+i*this.a.i+e*this.a.l,a=t*this.a.f+i*this.a.m+e*this.a.g,t=t*this.a.h+i*this.a.j+e*this.a.s,i=s*this.a.o+o*this.a.i+r*this.a.l,e=s*this.a.f+o*this.a.m+r*this.a.g,s=s*this.a.h+o*this.a.j+r*this.a.s,this.a.o=p,this.a.f=l,this.a.h=n,this.a.i=h,this.a.m=a,this.a.j=t,this.a.l=i,this.a.g=e,this.a.s=s,s=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,t=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,i=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,o=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,n=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,p=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,r=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=s,this.R=t,this.S=i,this.T=e,this.U=o,this.V=n,this.W=p,this.X=l,this.Y=r,s=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,t=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,i=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,e=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,o=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,n=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,p=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,r=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=s,this.R=t,this.S=i,this.T=e,this.U=o,this.V=n,this.W=p,this.X=l,this.Y=r,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,s=this.pa,t=this.a,s.v=t.v,s.A=t.A,s.B=t.B,s.o=t.o,s.f=t.f,s.h=t.h,s.i=t.i,s.m=t.m,s.j=t.j,s.l=t.l,s.g=t.g,s.s=t.s,s=this.Dc;null!=s;){t=s.M,i=s.pa,o=s.ha;var y,f;n=(e=this.pa).o*o.o+e.f*o.i+e.h*o.l,p=e.o*o.f+e.f*o.m+e.h*o.g,l=e.o*o.h+e.f*o.j+e.h*o.s;r=e.i*o.o+e.m*o.i+e.j*o.l,h=e.i*o.f+e.m*o.m+e.j*o.g,a=e.i*o.h+e.m*o.j+e.j*o.s,c=e.l*o.o+e.g*o.i+e.s*o.l,y=e.l*o.f+e.g*o.m+e.s*o.g,f=e.l*o.h+e.g*o.j+e.s*o.s,i.o=n,i.f=p,i.h=l,i.i=r,i.m=h,i.j=a,i.l=c,i.g=y,i.s=f,n=e.o*o.v+e.f*o.A+e.h*o.B,p=e.i*o.v+e.m*o.A+e.j*o.B,o=e.l*o.v+e.g*o.A+e.s*o.B,i.v=n,i.A=p,i.B=o,i.v+=e.v,i.A+=e.A,i.B+=e.B,i=s.a,o=s.ha,n=(e=this.a).o*o.o+e.f*o.i+e.h*o.l,p=e.o*o.f+e.f*o.m+e.h*o.g,l=e.o*o.h+e.f*o.j+e.h*o.s,r=e.i*o.o+e.m*o.i+e.j*o.l,h=e.i*o.f+e.m*o.m+e.j*o.g,a=e.i*o.h+e.m*o.j+e.j*o.s,c=e.l*o.o+e.g*o.i+e.s*o.l,y=e.l*o.f+e.g*o.m+e.s*o.g,f=e.l*o.h+e.g*o.j+e.s*o.s,i.o=n,i.f=p,i.h=l,i.i=r,i.m=h,i.j=a,i.l=c,i.g=y,i.s=f,n=e.o*o.v+e.f*o.A+e.h*o.B,p=e.i*o.v+e.m*o.A+e.j*o.B,o=e.l*o.v+e.g*o.A+e.s*o.B,i.v=n,i.A=p,i.B=o,i.v+=e.v,i.A+=e.A,i.B+=e.B,s.Kb.Nb(s.u,s.pa),i=s.u.ma,e=s.u.na,o=s.u.oa,n=s.u.ja,p=s.u.ka,l=s.u.la,s.Kb.Nb(s.u,s.a),s.u.ma=i<s.u.ma?i:s.u.ma,s.u.na=e<s.u.na?e:s.u.na,s.u.oa=o<s.u.oa?o:s.u.oa,s.u.ja=n>s.u.ja?n:s.u.ja,s.u.ka=p>s.u.ka?p:s.u.ka,s.u.la=l>s.u.la?l:s.u.la,null!=s.tb&&(i=s.a.v-s.pa.v,e=s.a.A-s.pa.A,o=s.a.B-s.pa.B,(n=s.rc).x=i,n.y=e,n.z=o,s.Yb.oc.jc.wd(s.tb,s.u,s.rc)),s=t}this.Gb=!1,this.yb=0},jm:function(){var t,i,s,h,a,e=new pt;return 0<(h=(t=this.a.o)+(i=this.a.m)+(s=this.a.s))?(h=.5*(a=Math.sqrt(h+1)),a=.5/a,t=(this.a.g-this.a.j)*a,i=(this.a.h-this.a.l)*a,s=(this.a.i-this.a.f)*a):t>i?t>s?(t=.5*(a=Math.sqrt(t-i-s+1)),a=.5/a,i=(this.a.f+this.a.i)*a,s=(this.a.h+this.a.l)*a,h=(this.a.g-this.a.j)*a):(s=.5*(a=Math.sqrt(s-t-i+1)),a=.5/a,t=(this.a.h+this.a.l)*a,i=(this.a.j+this.a.g)*a,h=(this.a.i-this.a.f)*a):i>s?(i=.5*(a=Math.sqrt(i-s-t+1)),a=.5/a,t=(this.a.f+this.a.i)*a,s=(this.a.j+this.a.g)*a,h=(this.a.h-this.a.l)*a):(s=.5*(a=Math.sqrt(s-t-i+1)),a=.5/a,t=(this.a.h+this.a.l)*a,i=(this.a.j+this.a.g)*a,h=(this.a.i-this.a.f)*a),e.x=t,e.y=i,e.z=s,e.w=h,e},lm:function(t){var i,s,h,a,e;0<(a=(i=this.a.o)+(s=this.a.m)+(h=this.a.s))?(a=.5*(e=Math.sqrt(a+1)),e=.5/e,i=(this.a.g-this.a.j)*e,s=(this.a.h-this.a.l)*e,h=(this.a.i-this.a.f)*e):i>s?i>h?(i=.5*(e=Math.sqrt(i-s-h+1)),e=.5/e,s=(this.a.f+this.a.i)*e,h=(this.a.h+this.a.l)*e,a=(this.a.g-this.a.j)*e):(h=.5*(e=Math.sqrt(h-i-s+1)),e=.5/e,i=(this.a.h+this.a.l)*e,s=(this.a.j+this.a.g)*e,a=(this.a.i-this.a.f)*e):s>h?(s=.5*(e=Math.sqrt(s-h-i+1)),e=.5/e,i=(this.a.f+this.a.i)*e,h=(this.a.j+this.a.g)*e,a=(this.a.h-this.a.l)*e):(h=.5*(e=Math.sqrt(h-i-s+1)),e=.5/e,i=(this.a.h+this.a.l)*e,s=(this.a.j+this.a.g)*e,a=(this.a.i-this.a.f)*e),t.x=i,t.y=s,t.z=h,t.w=a},Tn:function(t){var i,s,h;i=t.x,s=t.y,h=t.z;var a=t.w,e=2*i;t=i*e;var o=s*(f=2*s);h*=n=2*h;var r=i*f;for(s*=n,i*=n,e*=a,f*=a,a*=n,this.a.o=1-o-h,this.a.f=r-a,this.a.h=i+f,this.a.i=r+a,this.a.m=1-t-h,this.a.j=s-e,this.a.l=i-f,this.a.g=s+e,this.a.s=1-t-o,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,o=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,n=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,r=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,f=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,s=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,i=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=o,this.S=a,this.T=n,this.U=h,this.V=r,this.W=f,this.X=s,this.Y=i,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,o=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,n=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,r=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,f=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,s=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,i=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=o,this.S=a,this.T=n,this.U=h,this.V=r,this.W=f,this.X=s,this.Y=i,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,t=this.pa,o=this.a,t.v=o.v,t.A=o.A,t.B=o.B,t.o=o.o,t.f=o.f,t.h=o.h,t.i=o.i,t.m=o.m,t.j=o.j,t.l=o.l,t.g=o.g,t.s=o.s,t=this.Dc;null!=t;){o=t.M,a=t.pa,h=t.ha;r=(n=this.pa).o*h.o+n.f*h.i+n.h*h.l;var n,p,l,c,y,f=n.o*h.f+n.f*h.m+n.h*h.g;s=n.o*h.h+n.f*h.j+n.h*h.s,i=n.i*h.o+n.m*h.i+n.j*h.l,e=n.i*h.f+n.m*h.m+n.j*h.g,p=n.i*h.h+n.m*h.j+n.j*h.s,l=n.l*h.o+n.g*h.i+n.s*h.l,c=n.l*h.f+n.g*h.m+n.s*h.g,y=n.l*h.h+n.g*h.j+n.s*h.s,a.o=r,a.f=f,a.h=s,a.i=i,a.m=e,a.j=p,a.l=l,a.g=c,a.s=y,r=n.o*h.v+n.f*h.A+n.h*h.B,f=n.i*h.v+n.m*h.A+n.j*h.B,h=n.l*h.v+n.g*h.A+n.s*h.B,a.v=r,a.A=f,a.B=h,a.v+=n.v,a.A+=n.A,a.B+=n.B,a=t.a,h=t.ha,r=(n=this.a).o*h.o+n.f*h.i+n.h*h.l,f=n.o*h.f+n.f*h.m+n.h*h.g,s=n.o*h.h+n.f*h.j+n.h*h.s,i=n.i*h.o+n.m*h.i+n.j*h.l,e=n.i*h.f+n.m*h.m+n.j*h.g,p=n.i*h.h+n.m*h.j+n.j*h.s,l=n.l*h.o+n.g*h.i+n.s*h.l,c=n.l*h.f+n.g*h.m+n.s*h.g,y=n.l*h.h+n.g*h.j+n.s*h.s,a.o=r,a.f=f,a.h=s,a.i=i,a.m=e,a.j=p,a.l=l,a.g=c,a.s=y,r=n.o*h.v+n.f*h.A+n.h*h.B,f=n.i*h.v+n.m*h.A+n.j*h.B,h=n.l*h.v+n.g*h.A+n.s*h.B,a.v=r,a.A=f,a.B=h,a.v+=n.v,a.A+=n.A,a.B+=n.B,t.Kb.Nb(t.u,t.pa),a=t.u.ma,n=t.u.na,h=t.u.oa,r=t.u.ja,f=t.u.ka,s=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=a<t.u.ma?a:t.u.ma,t.u.na=n<t.u.na?n:t.u.na,t.u.oa=h<t.u.oa?h:t.u.oa,t.u.ja=r>t.u.ja?r:t.u.ja,t.u.ka=f>t.u.ka?f:t.u.ka,t.u.la=s>t.u.la?s:t.u.la,null!=t.tb&&(a=t.a.v-t.pa.v,n=t.a.A-t.pa.A,h=t.a.B-t.pa.B,(r=t.rc).x=a,r.y=n,r.z=h,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=o}this.Gb=!1,this.yb=0},xm:function(){var t=this.a,i=new xt;return i.v=t.v,i.A=t.A,i.B=t.B,i.o=t.o,i.f=t.f,i.h=t.h,i.i=t.i,i.m=t.m,i.j=t.j,i.l=t.l,i.g=t.g,i.s=t.s,i},Cm:function(t){var i=this.a;t.v=i.v,t.A=i.A,t.B=i.B,t.o=i.o,t.f=i.f,t.h=i.h,t.i=i.i,t.m=i.m,t.j=i.j,t.l=i.l,t.g=i.g,t.s=i.s},ho:function(t){var i,s,h,a,e,o,r,n;for(this.a.v=t.v,this.a.A=t.A,this.a.B=t.B,this.a.o=t.o,this.a.f=t.f,this.a.h=t.h,this.a.i=t.i,this.a.m=t.m,this.a.j=t.j,this.a.l=t.l,this.a.g=t.g,this.a.s=t.s,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,i=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,s=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,h=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,a=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,o=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,r=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,n=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,i=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,s=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,h=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,a=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,e=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,o=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,r=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,n=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,t=this.pa,i=this.a,t.v=i.v,t.A=i.A,t.B=i.B,t.o=i.o,t.f=i.f,t.h=i.h,t.i=i.i,t.m=i.m,t.j=i.j,t.l=i.l,t.g=i.g,t.s=i.s,t=this.Dc;null!=t;){var p,l,c,y,f;i=t.M,s=t.pa,a=t.ha,e=(h=this.pa).o*a.o+h.f*a.i+h.h*a.l,o=h.o*a.f+h.f*a.m+h.h*a.g,r=h.o*a.h+h.f*a.j+h.h*a.s,n=h.i*a.o+h.m*a.i+h.j*a.l,p=h.i*a.f+h.m*a.m+h.j*a.g,l=h.i*a.h+h.m*a.j+h.j*a.s,c=h.l*a.o+h.g*a.i+h.s*a.l,y=h.l*a.f+h.g*a.m+h.s*a.g,f=h.l*a.h+h.g*a.j+h.s*a.s,s.o=e,s.f=o,s.h=r,s.i=n,s.m=p,s.j=l,s.l=c,s.g=y,s.s=f,e=h.o*a.v+h.f*a.A+h.h*a.B,o=h.i*a.v+h.m*a.A+h.j*a.B,a=h.l*a.v+h.g*a.A+h.s*a.B,s.v=e,s.A=o,s.B=a,s.v+=h.v,s.A+=h.A,s.B+=h.B,s=t.a,a=t.ha,e=(h=this.a).o*a.o+h.f*a.i+h.h*a.l,o=h.o*a.f+h.f*a.m+h.h*a.g,r=h.o*a.h+h.f*a.j+h.h*a.s,n=h.i*a.o+h.m*a.i+h.j*a.l,p=h.i*a.f+h.m*a.m+h.j*a.g,l=h.i*a.h+h.m*a.j+h.j*a.s,c=h.l*a.o+h.g*a.i+h.s*a.l,y=h.l*a.f+h.g*a.m+h.s*a.g,f=h.l*a.h+h.g*a.j+h.s*a.s,s.o=e,s.f=o,s.h=r,s.i=n,s.m=p,s.j=l,s.l=c,s.g=y,s.s=f,e=h.o*a.v+h.f*a.A+h.h*a.B,o=h.i*a.v+h.m*a.A+h.j*a.B,a=h.l*a.v+h.g*a.A+h.s*a.B,s.v=e,s.A=o,s.B=a,s.v+=h.v,s.A+=h.A,s.B+=h.B,t.Kb.Nb(t.u,t.pa),s=t.u.ma,h=t.u.na,a=t.u.oa,e=t.u.ja,o=t.u.ka,r=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=s<t.u.ma?s:t.u.ma,t.u.na=h<t.u.na?h:t.u.na,t.u.oa=a<t.u.oa?a:t.u.oa,t.u.ja=e>t.u.ja?e:t.u.ja,t.u.ka=o>t.u.ka?o:t.u.ka,t.u.la=r>t.u.la?r:t.u.la,null!=t.tb&&(s=t.a.v-t.pa.v,h=t.a.A-t.pa.A,a=t.a.B-t.pa.B,(e=t.rc).x=s,e.y=h,e.z=a,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=i}this.Gb=!1,this.yb=0},Tg:function(){return this.Pc},se:function(){var t=new ft;return t.e00=this.Ad,t.e01=this.Bd,t.e02=this.Cd,t.e10=this.Dd,t.e11=this.Ed,t.e12=this.Fd,t.e20=this.Gd,t.e21=this.Hd,t.e22=this.Id,t},te:function(t){t.e00=this.Ad,t.e01=this.Bd,t.e02=this.Cd,t.e10=this.Dd,t.e11=this.Ed,t.e12=this.Fd,t.e20=this.Gd,t.e21=this.Hd,t.e22=this.Id},Ug:function(){var t=new a;t.mass=this.Pc;var i=t.localInertia;return i.e00=this.Ad,i.e01=this.Bd,i.e02=this.Cd,i.e10=this.Dd,i.e11=this.Ed,i.e12=this.Fd,i.e20=this.Gd,i.e21=this.Hd,i.e22=this.Id,t},Vg:function(t){t.mass=this.Pc,(t=t.localInertia).e00=this.Ad,t.e01=this.Bd,t.e02=this.Cd,t.e10=this.Dd,t.e11=this.Ed,t.e12=this.Fd,t.e20=this.Gd,t.e21=this.Hd,t.e22=this.Id},Qm:function(t){if(this.Pc=t.mass,t=t.localInertia,this.Ad=t.e00,this.Bd=t.e01,this.Cd=t.e02,this.Dd=t.e10,this.Ed=t.e11,this.Fd=t.e12,this.Gd=t.e20,this.Hd=t.e21,this.Id=t.e22,t=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd),0==this.Lb){this.$a=1/this.Pc,t=this.Ed*this.Id-this.Fd*this.Hd;var i=this.Dd*this.Id-this.Fd*this.Gd,s=this.Dd*this.Hd-this.Ed*this.Gd,h=this.Bd*this.Id-this.Cd*this.Hd,a=this.Ad*this.Id-this.Cd*this.Gd,e=this.Ad*this.Hd-this.Bd*this.Gd,o=this.Bd*this.Fd-this.Cd*this.Ed,r=this.Ad*this.Fd-this.Cd*this.Dd,n=this.Ad*this.Ed-this.Bd*this.Dd,p=this.Ad*t-this.Bd*i+this.Cd*s;(-1e-32>p||1e-32<p)&&(p=1/p),this.Ra=t*p,this.Sa=-h*p,this.Ta=o*p,this.Ua=-i*p,this.Va=a*p,this.Wa=-r*p,this.Xa=s*p,this.Ya=-e*p,this.Za=n*p,this.pi=this.Ra,this.ri=this.Sa,this.si=this.Ta,this.ti=this.Ua,this.ui=this.Va,this.vi=this.Wa,this.wi=this.Xa,this.xi=this.Ya,this.yi=this.Za,this.Ra=this.pi*this.N.x,this.Sa=this.ri*this.N.x,this.Ta=this.si*this.N.x,this.Ua=this.ti*this.N.y,this.Va=this.ui*this.N.y,this.Wa=this.vi*this.N.y,this.Xa=this.wi*this.N.z,this.Ya=this.xi*this.N.z,this.Za=this.yi*this.N.z}else this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0;t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,i=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,s=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,h=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,a=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,o=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,r=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,n=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,i=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,s=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,h=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,a=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,e=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,o=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,r=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,n=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=i,this.S=s,this.T=h,this.U=a,this.V=e,this.W=o,this.X=r,this.Y=n,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,this.Gb=!1,this.yb=0},ji:function(){var t=this.N;return new dt(t.x,t.y,t.z)},Rm:function(t){var i,s,h,a,e,o,r,n=this.N;n.x=t.x,n.y=t.y,n.z=t.z,t=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa,n=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya,i=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za,s=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa,h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya,a=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za,e=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa,o=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya,r=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za,this.P=t,this.R=n,this.S=i,this.T=s,this.U=h,this.V=a,this.W=e,this.X=o,this.Y=r,t=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h,n=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j,i=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s,s=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h,h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j,a=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s,e=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h,o=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j,r=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s,this.P=t,this.R=n,this.S=i,this.T=s,this.U=h,this.V=a,this.W=e,this.X=o,this.Y=r,this.P*=this.N.x,this.R*=this.N.x,this.S*=this.N.x,this.T*=this.N.y,this.U*=this.N.y,this.V*=this.N.y,this.W*=this.N.z,this.X*=this.N.z,this.Y*=this.N.z,this.Gb=!1,this.yb=0},qe:function(){var t=new dt;return t.x=this.gb,t.y=this.hb,t.z=this.ib,t},re:function(t){t.x=this.gb,t.y=this.hb,t.z=this.ib},Pm:function(t){1==this.Lb?this.ib=this.hb=this.gb=0:(this.gb=t.x,this.hb=t.y,this.ib=t.z),this.Gb=!1,this.yb=0},Jc:function(){var t=new dt;return t.x=this.kb,t.y=this.lb,t.z=this.mb,t},Kc:function(t){t.x=this.gb,t.y=this.hb,t.z=this.ib},mo:function(t){1==this.Lb?this.mb=this.lb=this.kb=0:(this.kb=t.x,this.lb=t.y,this.mb=t.z),this.Gb=!1,this.yb=0},cb:function(t){var i,s;1!=this.Lb&&(i=t.x,s=t.y,t=t.z,this.gb+=i,this.hb+=s,this.ib+=t);this.Gb=!1,this.yb=0},ua:function(t){var i,s;1!=this.Lb&&(i=t.x,s=t.y,t=t.z,this.kb+=i,this.lb+=s,this.mb+=t);this.Gb=!1,this.yb=0},uc:function(t,i){var s,h,a,e,o;s=t.x,h=t.y,t=t.z,this.gb+=s*this.$a,this.hb+=h*this.$a,this.ib+=t*this.$a,a=i.x,e=i.y,o=i.z,a-=this.a.v,i=(e-=this.a.A)*t-(o-=this.a.B)*h,t=o*s-a*t,a=a*h-e*s,s=this.P*i+this.R*t+this.S*a,h=this.T*i+this.U*t+this.V*a,i=this.W*i+this.X*t+this.Y*a,this.kb+=s,this.lb+=h,this.mb+=i,this.Gb=!1,this.yb=0},vc:function(t){var i,s;i=t.x,s=t.y,t=t.z,this.gb+=i*this.$a,this.hb+=s*this.$a,this.ib+=t*this.$a,this.Gb=!1,this.yb=0},Mb:function(t){var i,s,h,a;i=t.x,s=t.y,h=t.z,t=this.P*i+this.R*s+this.S*h,a=this.T*i+this.U*s+this.V*h,i=this.W*i+this.X*s+this.Y*h,this.kb+=t,this.lb+=a,this.mb+=i,this.Gb=!1,this.yb=0},pc:function(t,i){var s,h,a,e;s=t.x,h=t.y,t=t.z,this.Mh+=s,this.Nh+=h,this.Oh+=t,a=i.x,e=i.y,i=i.z,a-=this.a.v,e-=this.a.A,i-=this.a.B,this.vf+=e*t-i*h,this.wf+=i*s-a*t,this.xf+=a*h-e*s,this.Gb=!1,this.yb=0},qc:function(t){var i,s;i=t.x,s=t.y,t=t.z,this.Mh+=i,this.Nh+=s,this.Oh+=t,this.Gb=!1,this.yb=0},Ac:function(t){var i,s;i=t.x,s=t.y,t=t.z,this.vf+=i,this.wf+=s,this.xf+=t,this.Gb=!1,this.yb=0},fd:function(){return this.eh},Nm:function(t){this.eh=t,this.Gb=!1,this.yb=0},ue:function(t){var i,s,h,a;return i=t.x,s=t.y,t=t.z,i-=this.a.v,s-=this.a.A,t-=this.a.B,h=this.a.o*i+this.a.i*s+this.a.l*t,a=this.a.f*i+this.a.m*s+this.a.g*t,t=this.a.h*i+this.a.j*s+this.a.s*t,i=h,s=a,(h=new dt).x=i,h.y=s,h.z=t,h},Ue:function(t,i){var s,h,a,e;s=t.x,h=t.y,a=t.z,s-=this.a.v,h-=this.a.A,a-=this.a.B,t=this.a.o*s+this.a.i*h+this.a.l*a,e=this.a.f*s+this.a.m*h+this.a.g*a,s=this.a.h*s+this.a.j*h+this.a.s*a,i.x=t,i.y=e,i.z=s},Ve:function(t){var i,s,h,a;return i=t.x,s=t.y,t=t.z,h=this.a.o*i+this.a.i*s+this.a.l*t,a=this.a.f*i+this.a.m*s+this.a.g*t,t=this.a.h*i+this.a.j*s+this.a.s*t,i=h,s=a,(h=new dt).x=i,h.y=s,h.z=t,h},Mf:function(t,i){var s,h,a,e;s=t.x,h=t.y,a=t.z,t=this.a.o*s+this.a.i*h+this.a.l*a,e=this.a.f*s+this.a.m*h+this.a.g*a,s=this.a.h*s+this.a.j*h+this.a.s*a,i.x=t,i.y=e,i.z=s},Pj:function(t){var i,s,h,a;return i=t.x,s=t.y,t=t.z,h=this.a.o*i+this.a.f*s+this.a.h*t,a=this.a.i*i+this.a.m*s+this.a.j*t,t=this.a.l*i+this.a.g*s+this.a.s*t,i=h+this.a.v,s=a+this.a.A,t+=this.a.B,(h=new dt).x=i,h.y=s,h.z=t,h},Nl:function(t,i){var s,h,a,e;s=t.x,h=t.y,a=t.z,t=this.a.o*s+this.a.f*h+this.a.h*a,e=this.a.i*s+this.a.m*h+this.a.j*a,a=this.a.l*s+this.a.g*h+this.a.s*a,s=t+this.a.v,h=e+this.a.A,a+=this.a.B,i.x=s,i.y=h,i.z=a},am:function(t){var i,s,h,a;return i=t.x,s=t.y,t=t.z,h=this.a.o*i+this.a.f*s+this.a.h*t,a=this.a.i*i+this.a.m*s+this.a.j*t,t=this.a.l*i+this.a.g*s+this.a.s*t,i=h,s=a,(h=new dt).x=i,h.y=s,h.z=t,h},bm:function(t,i){var s,h,a,e;s=t.x,h=t.y,a=t.z,t=this.a.o*s+this.a.f*h+this.a.h*a,e=this.a.i*s+this.a.m*h+this.a.j*a,s=this.a.l*s+this.a.g*h+this.a.s*a,i.x=t,i.y=e,i.z=s},im:function(){return this.zg},ki:function(){return this.Dc},Wg:function(){return this.Ae},Lc:function(){return this.Ob},Xg:function(){return this.kh},Yd:function(){return this.ze},Hb:function(t){if(null==this.Dc?this.Dc=t:(this.Fi.M=t,t.ia=this.Fi),this.Fi=t,this.zg++,t.Yb=this,null!=this.oc){var i=this.oc;t.tb=i.jc.Vh(t,t.u),t.Cc=i.Xl++,i.zg++}for(this.Oj(),t=this.Dc;null!=t;){i=t.M;var s,h,a,e,o,r,n,p,l,c=t.pa,y=t.ha,f=this.pa;s=f.o*y.o+f.f*y.i+f.h*y.l,h=f.o*y.f+f.f*y.m+f.h*y.g,a=f.o*y.h+f.f*y.j+f.h*y.s,e=f.i*y.o+f.m*y.i+f.j*y.l,o=f.i*y.f+f.m*y.m+f.j*y.g,r=f.i*y.h+f.m*y.j+f.j*y.s,n=f.l*y.o+f.g*y.i+f.s*y.l,p=f.l*y.f+f.g*y.m+f.s*y.g,l=f.l*y.h+f.g*y.j+f.s*y.s,c.o=s,c.f=h,c.h=a,c.i=e,c.m=o,c.j=r,c.l=n,c.g=p,c.s=l,s=f.o*y.v+f.f*y.A+f.h*y.B,h=f.i*y.v+f.m*y.A+f.j*y.B,y=f.l*y.v+f.g*y.A+f.s*y.B,c.v=s,c.A=h,c.B=y,c.v+=f.v,c.A+=f.A,c.B+=f.B,c=t.a,y=t.ha,s=(f=this.a).o*y.o+f.f*y.i+f.h*y.l,h=f.o*y.f+f.f*y.m+f.h*y.g,a=f.o*y.h+f.f*y.j+f.h*y.s,e=f.i*y.o+f.m*y.i+f.j*y.l,o=f.i*y.f+f.m*y.m+f.j*y.g,r=f.i*y.h+f.m*y.j+f.j*y.s,n=f.l*y.o+f.g*y.i+f.s*y.l,p=f.l*y.f+f.g*y.m+f.s*y.g,l=f.l*y.h+f.g*y.j+f.s*y.s,c.o=s,c.f=h,c.h=a,c.i=e,c.m=o,c.j=r,c.l=n,c.g=p,c.s=l,s=f.o*y.v+f.f*y.A+f.h*y.B,h=f.i*y.v+f.m*y.A+f.j*y.B,y=f.l*y.v+f.g*y.A+f.s*y.B,c.v=s,c.A=h,c.B=y,c.v+=f.v,c.A+=f.A,c.B+=f.B,t.Kb.Nb(t.u,t.pa),c=t.u.ma,f=t.u.na,y=t.u.oa,s=t.u.ja,h=t.u.ka,a=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=c<t.u.ma?c:t.u.ma,t.u.na=f<t.u.na?f:t.u.na,t.u.oa=y<t.u.oa?y:t.u.oa,t.u.ja=s>t.u.ja?s:t.u.ja,t.u.ka=h>t.u.ka?h:t.u.ka,t.u.la=a>t.u.la?a:t.u.la,null!=t.tb&&(c=t.a.v-t.pa.v,f=t.a.A-t.pa.A,y=t.a.B-t.pa.B,(s=t.rc).x=c,s.y=f,s.z=y,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=i}},ko:function(t){var i=t.ia,s=t.M;if(null!=i&&(i.M=s),null!=s&&(s.ia=i),t==this.Dc&&(this.Dc=this.Dc.M),t==this.Fi&&(this.Fi=this.Fi.ia),t.M=null,t.ia=null,this.zg--,null!=this.oc){(i=this.oc).jc.Wh(t.tb),t.tb=null,t.Cc=-1;for(var h=t.Yb.Ob;null!=h;){s=h.M;if((o=h.Zd).Zb==t||o.$b==t){(h=h.Qc).Gb=!1,h.yb=0;h=i.Kh;var a=o.ia,e=o.M;null!=a&&(a.M=e),null!=e&&(e.ia=a),o==h.zd&&(h.zd=h.zd.M),o==h.ye&&(h.ye=h.ye.ia),o.M=null,o.ia=null,o.Td&&((a=o.Zb.yd)==(e=o.$b.yd)&&(e=null),null!=a&&a.endContact(o),null!=e&&e.endContact(o)),a=o.rb.ia,e=o.rb.M,null!=a&&(a.M=e),null!=e&&(e.ia=a),o.rb==o.C.Ob&&(o.C.Ob=o.C.Ob.M),o.rb==o.C.kc&&(o.C.kc=o.C.kc.ia),o.rb.M=null,o.rb.ia=null,a=o.sb.ia,e=o.sb.M,null!=a&&(a.M=e),null!=e&&(e.ia=a),o.sb==o.D.Ob&&(o.D.Ob=o.D.Ob.M),o.sb==o.D.kc&&(o.D.kc=o.D.kc.ia),o.sb.M=null,o.sb.ia=null,o.C.Ae--,o.D.Ae--,o.rb.Qc=null,o.sb.Qc=null,o.rb.Zd=null,o.sb.Zd=null,o.Zb=null,o.$b=null,o.C=null,o.D=null,o.Td=!1,o.$i.Xe(),o.Ja.Xe(),o.Lh=null,(a=o.Ye).Zb=null,a.$b=null,a.C=null,a.D=null,a.pj=null,a.qj=null,o.M=h.lg,h.lg=o,h.Bi--}h=s}i.zg--}for(t.Yb=null,this.Oj(),t=this.Dc;null!=t;){var o,r,n,p,l,c,y,f;i=t.M,s=t.pa,h=t.ha,a=(o=this.pa).o*h.o+o.f*h.i+o.h*h.l,e=o.o*h.f+o.f*h.m+o.h*h.g;r=o.o*h.h+o.f*h.j+o.h*h.s,n=o.i*h.o+o.m*h.i+o.j*h.l,p=o.i*h.f+o.m*h.m+o.j*h.g,l=o.i*h.h+o.m*h.j+o.j*h.s,c=o.l*h.o+o.g*h.i+o.s*h.l,y=o.l*h.f+o.g*h.m+o.s*h.g,f=o.l*h.h+o.g*h.j+o.s*h.s,s.o=a,s.f=e,s.h=r,s.i=n,s.m=p,s.j=l,s.l=c,s.g=y,s.s=f,a=o.o*h.v+o.f*h.A+o.h*h.B,e=o.i*h.v+o.m*h.A+o.j*h.B,h=o.l*h.v+o.g*h.A+o.s*h.B,s.v=a,s.A=e,s.B=h,s.v+=o.v,s.A+=o.A,s.B+=o.B,s=t.a,h=t.ha,a=(o=this.a).o*h.o+o.f*h.i+o.h*h.l,e=o.o*h.f+o.f*h.m+o.h*h.g,r=o.o*h.h+o.f*h.j+o.h*h.s,n=o.i*h.o+o.m*h.i+o.j*h.l,p=o.i*h.f+o.m*h.m+o.j*h.g,l=o.i*h.h+o.m*h.j+o.j*h.s,c=o.l*h.o+o.g*h.i+o.s*h.l,y=o.l*h.f+o.g*h.m+o.s*h.g,f=o.l*h.h+o.g*h.j+o.s*h.s,s.o=a,s.f=e,s.h=r,s.i=n,s.m=p,s.j=l,s.l=c,s.g=y,s.s=f,a=o.o*h.v+o.f*h.A+o.h*h.B,e=o.i*h.v+o.m*h.A+o.j*h.B,h=o.l*h.v+o.g*h.A+o.s*h.B,s.v=a,s.A=e,s.B=h,s.v+=o.v,s.A+=o.A,s.B+=o.B,t.Kb.Nb(t.u,t.pa),s=t.u.ma,o=t.u.na,h=t.u.oa,a=t.u.ja,e=t.u.ka,r=t.u.la,t.Kb.Nb(t.u,t.a),t.u.ma=s<t.u.ma?s:t.u.ma,t.u.na=o<t.u.na?o:t.u.na,t.u.oa=h<t.u.oa?h:t.u.oa,t.u.ja=a>t.u.ja?a:t.u.ja,t.u.ka=e>t.u.ka?e:t.u.ka,t.u.la=r>t.u.la?r:t.u.la,null!=t.tb&&(s=t.a.v-t.pa.v,o=t.a.A-t.pa.A,h=t.a.B-t.pa.B,(a=t.rc).x=s,a.y=o,a.z=h,t.Yb.oc.jc.wd(t.tb,t.u,t.rc)),t=i}},Dm:function(){return this.Lb},Sm:function(t){this.Lb=t,this.Oj()},Um:function(){this.Gb=!1,this.yb=0},Tm:function(){this.Gb=!0,this.yb=0},cm:function(){return this.Gb},li:function(){return this.yb},Mm:function(t){this.Bk=t,this.Gb=!1,this.yb=0},pe:function(){return this.$j},Om:function(t){this.$j=t},Ec:function(){return this.Qj},lo:function(t){this.Qj=t},um:function(){return this.ia},gm:function(){return this.M}},i.prototype={uc:function(){return this.Xj},ue:function(t){this.Xj=t},Jc:function(){return this.hk},Ve:function(t){this.hk=t},Ac:function(){var t=this.ha,i=new xt;return i.v=t.v,i.A=t.A,i.B=t.B,i.o=t.o,i.f=t.f,i.h=t.h,i.i=t.i,i.m=t.m,i.j=t.j,i.l=t.l,i.g=t.g,i.s=t.s,i},Ec:function(t){var i=this.ha;t.v=i.v,t.A=i.A,t.B=i.B,t.o=i.o,t.f=i.f,t.h=i.h,t.i=i.i,t.m=i.m,t.j=i.j,t.l=i.l,t.g=i.g,t.s=i.s},Yd:function(){var t=this.a,i=new xt;return i.v=t.v,i.A=t.A,i.B=t.B,i.o=t.o,i.f=t.f,i.h=t.h,i.i=t.i,i.m=t.m,i.j=t.j,i.l=t.l,i.g=t.g,i.s=t.s,i},pe:function(t){var i=this.a;t.v=i.v,t.A=i.A,t.B=i.B,t.o=i.o,t.f=i.f,t.h=i.h,t.i=i.i,t.m=i.m,t.j=i.j,t.l=i.l,t.g=i.g,t.s=i.s},Ue:function(t){var i=this.ha;if(i.v=t.v,i.A=t.A,i.B=t.B,i.o=t.o,i.f=t.f,i.h=t.h,i.i=t.i,i.m=t.m,i.j=t.j,i.l=t.l,i.g=t.g,i.s=t.s,null!=this.Yb)for((t=this.Yb).Oj(),i=t.Dc;null!=i;){var s,h,a,e,o,r,n,p,l,c=i.M,y=i.pa,f=i.ha,u=t.pa;s=u.o*f.o+u.f*f.i+u.h*f.l,h=u.o*f.f+u.f*f.m+u.h*f.g,a=u.o*f.h+u.f*f.j+u.h*f.s,e=u.i*f.o+u.m*f.i+u.j*f.l,o=u.i*f.f+u.m*f.m+u.j*f.g,r=u.i*f.h+u.m*f.j+u.j*f.s,n=u.l*f.o+u.g*f.i+u.s*f.l,p=u.l*f.f+u.g*f.m+u.s*f.g,l=u.l*f.h+u.g*f.j+u.s*f.s,y.o=s,y.f=h,y.h=a,y.i=e,y.m=o,y.j=r,y.l=n,y.g=p,y.s=l,s=u.o*f.v+u.f*f.A+u.h*f.B,h=u.i*f.v+u.m*f.A+u.j*f.B,f=u.l*f.v+u.g*f.A+u.s*f.B,y.v=s,y.A=h,y.B=f,y.v+=u.v,y.A+=u.A,y.B+=u.B,y=i.a,f=i.ha,s=(u=t.a).o*f.o+u.f*f.i+u.h*f.l,h=u.o*f.f+u.f*f.m+u.h*f.g,a=u.o*f.h+u.f*f.j+u.h*f.s,e=u.i*f.o+u.m*f.i+u.j*f.l,o=u.i*f.f+u.m*f.m+u.j*f.g,r=u.i*f.h+u.m*f.j+u.j*f.s,n=u.l*f.o+u.g*f.i+u.s*f.l,p=u.l*f.f+u.g*f.m+u.s*f.g,l=u.l*f.h+u.g*f.j+u.s*f.s,y.o=s,y.f=h,y.h=a,y.i=e,y.m=o,y.j=r,y.l=n,y.g=p,y.s=l,s=u.o*f.v+u.f*f.A+u.h*f.B,h=u.i*f.v+u.m*f.A+u.j*f.B,f=u.l*f.v+u.g*f.A+u.s*f.B,y.v=s,y.A=h,y.B=f,y.v+=u.v,y.A+=u.A,y.B+=u.B,i.Kb.Nb(i.u,i.pa),y=i.u.ma,u=i.u.na,f=i.u.oa,s=i.u.ja,h=i.u.ka,a=i.u.la,i.Kb.Nb(i.u,i.a),i.u.ma=y<i.u.ma?y:i.u.ma,i.u.na=u<i.u.na?u:i.u.na,i.u.oa=f<i.u.oa?f:i.u.oa,i.u.ja=s>i.u.ja?s:i.u.ja,i.u.ka=h>i.u.ka?h:i.u.ka,i.u.la=a>i.u.la?a:i.u.la,null!=i.tb&&(y=i.a.v-i.pa.v,u=i.a.A-i.pa.A,f=i.a.B-i.pa.B,(s=i.rc).x=y,s.y=u,s.z=f,i.Yb.oc.jc.wd(i.tb,i.u,i.rc)),i=c}},qc:function(){return this.Dk},te:function(t){if(this.Dk=t,null!=this.Yb){(t=this.Yb).Oj();for(var i=t.Dc;null!=i;){var s,h,a,e,o,r,n,p,l,c=i.M,y=i.pa,f=i.ha,u=t.pa;s=u.o*f.o+u.f*f.i+u.h*f.l,h=u.o*f.f+u.f*f.m+u.h*f.g,a=u.o*f.h+u.f*f.j+u.h*f.s,e=u.i*f.o+u.m*f.i+u.j*f.l,o=u.i*f.f+u.m*f.m+u.j*f.g,r=u.i*f.h+u.m*f.j+u.j*f.s,n=u.l*f.o+u.g*f.i+u.s*f.l,p=u.l*f.f+u.g*f.m+u.s*f.g,l=u.l*f.h+u.g*f.j+u.s*f.s,y.o=s,y.f=h,y.h=a,y.i=e,y.m=o,y.j=r,y.l=n,y.g=p,y.s=l,s=u.o*f.v+u.f*f.A+u.h*f.B,h=u.i*f.v+u.m*f.A+u.j*f.B,f=u.l*f.v+u.g*f.A+u.s*f.B,y.v=s,y.A=h,y.B=f,y.v+=u.v,y.A+=u.A,y.B+=u.B,y=i.a,f=i.ha,s=(u=t.a).o*f.o+u.f*f.i+u.h*f.l,h=u.o*f.f+u.f*f.m+u.h*f.g,a=u.o*f.h+u.f*f.j+u.h*f.s,e=u.i*f.o+u.m*f.i+u.j*f.l,o=u.i*f.f+u.m*f.m+u.j*f.g,r=u.i*f.h+u.m*f.j+u.j*f.s,n=u.l*f.o+u.g*f.i+u.s*f.l,p=u.l*f.f+u.g*f.m+u.s*f.g,l=u.l*f.h+u.g*f.j+u.s*f.s,y.o=s,y.f=h,y.h=a,y.i=e,y.m=o,y.j=r,y.l=n,y.g=p,y.s=l,s=u.o*f.v+u.f*f.A+u.h*f.B,h=u.i*f.v+u.m*f.A+u.j*f.B,f=u.l*f.v+u.g*f.A+u.s*f.B,y.v=s,y.A=h,y.B=f,y.v+=u.v,y.A+=u.A,y.B+=u.B,i.Kb.Nb(i.u,i.pa),y=i.u.ma,u=i.u.na,f=i.u.oa,s=i.u.ja,h=i.u.ka,a=i.u.la,i.Kb.Nb(i.u,i.a),i.u.ma=y<i.u.ma?y:i.u.ma,i.u.na=u<i.u.na?u:i.u.na,i.u.oa=f<i.u.oa?f:i.u.oa,i.u.ja=s>i.u.ja?s:i.u.ja,i.u.ka=h>i.u.ka?h:i.u.ka,i.u.la=a>i.u.la?a:i.u.la,null!=i.tb&&(y=i.a.v-i.pa.v,u=i.a.A-i.pa.A,f=i.a.B-i.pa.B,(s=i.rc).x=y,s.y=u,s.z=f,i.Yb.oc.jc.wd(i.tb,i.u,i.rc)),i=c}}},ua:function(){return this.u.clone()},cb:function(t){t.de(this.u)},vc:function(){return this.Kb},Kc:function(){return this.Yb},Hb:function(){return this.Tj},qe:function(t){this.Tj=t},Mb:function(){return this.Uj},re:function(t){this.Uj=t},pc:function(){return this.yd},se:function(t){this.yd=t},fd:function(){return this.ia},Lc:function(){return this.M}},ti.Ve=1,ti.Mf=2,ti.BRUTE_FORCE=1,ti.BVH=2,Jt.vm=0,Jt.Ue=1,Jt.ji=2,Jt.Ug=3,Jt.Tg=4,Jt.Vg=5,Jt.Xg=0,Jt.Wg=5,Jt.SPHERE=0,Jt.BOX=1,Jt.CYLINDER=2,Jt.CONE=3,Jt.CAPSULE=4,Jt.CONVEX_HULL=5,It.re=1,jt.Mb=0,dt.numCreations=0,gt.defaultFriction=.2,gt.defaultRestitution=.2,gt.defaultDensity=1,gt.defaultCollisionGroup=1,gt.defaultCollisionMask=1,gt.maxTranslationPerStep=20,gt.maxRotationPerStep=3.14159265358979,gt.bvhProxyPadding=.1,gt.bvhIncrementalCollisionThreshold=.45,gt.defaultGJKMargin=.05,gt.enableGJKCaching=!0,gt.maxEPAVertices=128,gt.maxEPAPolyhedronFaces=128,gt.contactEnableBounceThreshold=.5,gt.velocityBaumgarte=.2,gt.positionSplitImpulseBaumgarte=.4,gt.positionNgsBaumgarte=1,gt.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05,gt.defaultContactPositionCorrectionAlgorithm=0,gt.alternativeContactPositionCorrectionAlgorithm=1,gt.contactPersistenceThreshold=.05,gt.maxManifoldPoints=4,gt.defaultJointConstraintSolverType=0,gt.defaultJointPositionCorrectionAlgorithm=0,gt.jointWarmStartingFactorForBaungarte=.8,gt.jointWarmStartingFactor=.95,gt.minSpringDamperDampingRatio=1e-6,gt.minRagdollMaxSwingAngle=1e-6,gt.maxJacobianRows=6,gt.directMlcpSolverEps=1e-9,gt.islandInitialRigidBodyArraySize=128,gt.islandInitialConstraintArraySize=128,gt.sleepingVelocityThreshold=.2,gt.sleepingAngularVelocityThreshold=.5,gt.sleepingTimeThreshold=1,gt.disableSleeping=!1,gt.linearSlop=.005,gt.angularSlop=.017453292519943278,vt.cb=new vt,bt.Dm=0,bt.gm=1,bt.cm=2,bt.bm=257,bt.am=258,bt.Nl=259,bt.SUCCEEDED=0,bt.GJK_FAILED_TO_MAKE_TETRAHEDRON=1,bt.GJK_DID_NOT_CONVERGE=2,bt.EPA_FAILED_TO_INIT=257,bt.EPA_FAILED_TO_ADD_VERTEX=258,bt.EPA_DID_NOT_CONVERGE=259,ft.numCreations=0,yt.numCreations=0,ct.POSITIVE_INFINITY=1/0,ct.NEGATIVE_INFINITY=-1/0,ct.PI=3.14159265358979,ct.TWO_PI=6.28318530717958,ct.HALF_PI=1.570796326794895,ct.TO_RADIANS=.017453292519943278,ct.TO_DEGREES=57.29577951308238,pt.numCreations=0,X.broadPhaseCollisionTime=0,X.narrowPhaseCollisionTime=0,X.dynamicsTime=0,X.totalTime=0,W.ue=0,W.xm=1,W.lm=2,W.BAUMGARTE=0,W.SPLIT_IMPULSE=1,W.NGS=2,H.pe=1,H.Yd=2,q.wm=0,q.um=1,q.ki=2,q.qm=3,q.Em=4,q.rm=5,q.SPHERICAL=0,q.REVOLUTE=1,q.CYLINDRICAL=2,q.PRISMATIC=3,q.UNIVERSAL=4,q.RAGDOLL=5,b.im=0,b.li=1,b.ITERATIVE=0,b.DIRECT=1,s.Pj=0,s.Cm=1,s.jm=2,s.DYNAMIC=0,s.STATIC=1,s.KINEMATIC=2,t.OIMO={},t.OIMO.BroadPhase=oi,oi.prototype.createProxy=oi.prototype.Vh,oi.prototype.destroyProxy=oi.prototype.Wh,oi.prototype.moveProxy=oi.prototype.wd,oi.prototype.isOverlapping=oi.prototype.Mb,oi.prototype.collectPairs=oi.prototype.Ii,oi.prototype.getProxyPairList=oi.prototype.ua,oi.prototype.isIncremental=oi.prototype.Hb,oi.prototype.getTestCount=oi.prototype.cb,oi.prototype.rayCast=oi.prototype.Vd,oi.prototype.convexCast=oi.prototype.Bf,oi.prototype.aabbTest=oi.prototype.qh,t.OIMO.Geometry=ei,ei.prototype.getType=ei.prototype.cb,ei.prototype.getVolume=ei.prototype.ua,ei.prototype.rayCast=ei.prototype.Vd,t.OIMO.ConvexGeometry=ai,ai.prototype.getGjkMargin=ai.prototype.un,ai.prototype.setGjkMargin=ai.prototype.Zn,ai.prototype.computeLocalSupportingVertex=ai.prototype.Pd,ai.prototype.rayCast=ai.prototype.Vd,t.OIMO.BroadPhaseProxyCallback=ii,ii.prototype.process=ii.prototype.process,t.OIMO.BroadPhaseType=ti,t.OIMO.Proxy=_t,_t.prototype.getId=_t.prototype.Hb,_t.prototype.getFatAabb=_t.prototype.ua,_t.prototype.getFatAabbTo=_t.prototype.cb,t.OIMO.ProxyPair=Qt,Qt.prototype.getProxy1=Qt.prototype.ua,Qt.prototype.getProxy2=Qt.prototype.cb,Qt.prototype.getNext=Qt.prototype.Hb,t.OIMO.BruteForceBroadPhase=Zt,Zt.prototype.createProxy=Zt.prototype.Vh,Zt.prototype.destroyProxy=Zt.prototype.Wh,Zt.prototype.moveProxy=Zt.prototype.wd,Zt.prototype.collectPairs=Zt.prototype.Ii,Zt.prototype.rayCast=Zt.prototype.Vd,Zt.prototype.convexCast=Zt.prototype.Bf,Zt.prototype.aabbTest=Zt.prototype.qh,t.OIMO.BvhBroadPhase=$t,$t.prototype.createProxy=$t.prototype.Vh,$t.prototype.destroyProxy=$t.prototype.Wh,$t.prototype.moveProxy=$t.prototype.wd,$t.prototype.collectPairs=$t.prototype.Ii,$t.prototype.rayCast=$t.prototype.Vd,$t.prototype.convexCast=$t.prototype.Bf,$t.prototype.aabbTest=$t.prototype.qh,$t.prototype.getTreeBalance=$t.prototype.Jn,t.OIMO.Aabb=Et,Et.prototype.init=Et.prototype.za,Et.prototype.getMin=Et.prototype.Jc,Et.prototype.getMinTo=Et.prototype.Kc,Et.prototype.setMin=Et.prototype.Yd,Et.prototype.getMax=Et.prototype.Ac,Et.prototype.getMaxTo=Et.prototype.Ec,Et.prototype.setMax=Et.prototype.fd,Et.prototype.getCenter=Et.prototype.Hb,Et.prototype.getCenterTo=Et.prototype.Mb,Et.prototype.getExtents=Et.prototype.pc,Et.prototype.getExtentsTo=Et.prototype.qc,Et.prototype.combine=Et.prototype.ua,Et.prototype.combined=Et.prototype.cb,Et.prototype.overlap=Et.prototype.Lc,Et.prototype.getIntersection=Et.prototype.uc,Et.prototype.getIntersectionTo=Et.prototype.vc,Et.prototype.copyFrom=Et.prototype.de,Et.prototype.clone=Et.prototype.clone,t.OIMO.BoxGeometry=Vt,Vt.prototype.getHalfExtents=Vt.prototype.vn,Vt.prototype.getHalfExtentsTo=Vt.prototype.wn,Vt.prototype.computeLocalSupportingVertex=Vt.prototype.Pd,t.OIMO.CapsuleGeometry=Gt,Gt.prototype.getRadius=Gt.prototype.Xh,Gt.prototype.getHalfHeight=Gt.prototype.Bj,Gt.prototype.computeLocalSupportingVertex=Gt.prototype.Pd,t.OIMO.ConeGeometry=Kt,Kt.prototype.getRadius=Kt.prototype.Xh,Kt.prototype.getHalfHeight=Kt.prototype.Bj,Kt.prototype.computeLocalSupportingVertex=Kt.prototype.Pd,t.OIMO.ConvexHullGeometry=Ht,Ht.prototype.getVertices=Ht.prototype.Nn,Ht.prototype.computeLocalSupportingVertex=Ht.prototype.Pd,t.OIMO.CylinderGeometry=Nt,Nt.prototype.getRadius=Nt.prototype.Xh,Nt.prototype.getHalfHeight=Nt.prototype.Bj,Nt.prototype.computeLocalSupportingVertex=Nt.prototype.Pd,t.OIMO.GeometryType=Jt,t.OIMO.RayCastHit=Rt,t.OIMO.SphereGeometry=Pt,Pt.prototype.getRadius=Pt.prototype.Xh,Pt.prototype.computeLocalSupportingVertex=Pt.prototype.Pd,t.OIMO.CollisionMatrix=Ft,Ft.prototype.getDetector=Ft.prototype.ua,t.OIMO.DetectorResult=Lt,Lt.prototype.getMaxDepth=Lt.prototype.mm,Lt.prototype.clear=Lt.prototype.clear,t.OIMO.DetectorResultPoint=Ot,t.OIMO.Detector=Tt,Tt.prototype.detect=Tt.prototype.hm,t.OIMO.BoxBoxDetector=It,t.OIMO.CapsuleCapsuleDetector=Bt,t.OIMO.GjkEpaDetector=Ct,t.OIMO.SphereBoxDetector=Dt,t.OIMO.SphereCapsuleDetector=wt,t.OIMO.SphereSphereDetector=At,t.OIMO.Vec3=dt,dt.prototype.init=dt.prototype.za,dt.prototype.zero=dt.prototype.Z,dt.prototype.add=dt.prototype.Lc,dt.prototype.addScaled=dt.prototype.ua,dt.prototype.sub=dt.prototype.ue,dt.prototype.scale=dt.prototype.se,dt.prototype.scale3=dt.prototype.Ve,dt.prototype.dot=dt.prototype.Yd,dt.prototype.cross=dt.prototype.Hb,dt.prototype.addEq=dt.prototype.fd,dt.prototype.addScaledEq=dt.prototype.cb,dt.prototype.subEq=dt.prototype.Ue,dt.prototype.scaleEq=dt.prototype.te,dt.prototype.scale3Eq=dt.prototype.Mf,dt.prototype.crossEq=dt.prototype.Mb,dt.prototype.mulMat3=dt.prototype.pc,dt.prototype.mulMat4=dt.prototype.uc,dt.prototype.mulTransform=dt.prototype.Ac,dt.prototype.mulMat3Eq=dt.prototype.qc,dt.prototype.mulMat4Eq=dt.prototype.vc,dt.prototype.mulTransformEq=dt.prototype.Ec,dt.prototype.length=dt.prototype.length,dt.prototype.lengthSq=dt.prototype.pe,dt.prototype.normalized=dt.prototype.re,dt.prototype.normalize=dt.prototype.qe,dt.prototype.negate=dt.prototype.Jc,dt.prototype.negateEq=dt.prototype.Kc,dt.prototype.copyFrom=dt.prototype.de,dt.prototype.clone=dt.prototype.clone,dt.prototype.toString=dt.prototype.toString,t.OIMO.Transform=xt,xt.prototype.identity=xt.prototype.Wf,xt.prototype.getPosition=xt.prototype.Hb,xt.prototype.getPositionTo=xt.prototype.Mb,xt.prototype.setPosition=xt.prototype.Ec,xt.prototype.translate=xt.prototype.Lc,xt.prototype.getRotation=xt.prototype.pc,xt.prototype.getRotationTo=xt.prototype.qc,xt.prototype.setRotation=xt.prototype.Jc,xt.prototype.setRotationXyz=xt.prototype.Kc,xt.prototype.rotate=xt.prototype.uc,xt.prototype.rotateXyz=xt.prototype.vc,xt.prototype.getOrientation=xt.prototype.ua,xt.prototype.getOrientationTo=xt.prototype.cb,xt.prototype.setOrientation=xt.prototype.Ac,xt.prototype.clone=xt.prototype.clone,xt.prototype.copyFrom=xt.prototype.de,t.OIMO.Setting=gt,t.OIMO.GjkEpa=vt,vt.prototype.computeClosestPoints=vt.prototype.ua,vt.prototype.computeDistance=vt.prototype.cb,vt.prototype.convexCast=vt.prototype.Bf,vt.prototype.rayCast=vt.prototype.Vd,vt.getInstance=vt.pc,t.OIMO.GjkEpaResultState=bt,t.OIMO.SimplexUtil=ut,ut.projectOrigin2=ut.qc,ut.projectOrigin3=ut.uc,ut.projectOrigin4=ut.vc,t.OIMO.Mat3=ft,ft.prototype.init=ft.prototype.za,ft.prototype.identity=ft.prototype.Wf,ft.prototype.add=ft.prototype.Ac,ft.prototype.sub=ft.prototype.Ug,ft.prototype.scale=ft.prototype.Mf,ft.prototype.mul=ft.prototype.re,ft.prototype.addEq=ft.prototype.Ec,ft.prototype.subEq=ft.prototype.Vg,ft.prototype.scaleEq=ft.prototype.Tg,ft.prototype.mulEq=ft.prototype.se,ft.prototype.prependScale=ft.prototype.Ue,ft.prototype.appendScale=ft.prototype.Lc,ft.prototype.prependRotation=ft.prototype.te,ft.prototype.appendRotation=ft.prototype.Jc,ft.prototype.prependScaleEq=ft.prototype.Ve,ft.prototype.appendScaleEq=ft.prototype.fd,ft.prototype.prependRotationEq=ft.prototype.ue,ft.prototype.appendRotationEq=ft.prototype.Kc,ft.prototype.transpose=ft.prototype.ji,ft.prototype.transposeEq=ft.prototype.ki,ft.prototype.determinant=ft.prototype.Yd,ft.prototype.trace=ft.prototype.Xg,ft.prototype.inverse=ft.prototype.pe,ft.prototype.inverseEq=ft.prototype.qe,ft.prototype.toArray=ft.prototype.Wg,ft.prototype.copyFrom=ft.prototype.de,ft.prototype.clone=ft.prototype.clone,ft.prototype.fromQuat=ft.prototype.Hb,ft.prototype.toQuat=ft.prototype.Pj,ft.prototype.fromEulerXyz=ft.prototype.cb,ft.prototype.toEulerXyz=ft.prototype.li,ft.prototype.getRow=ft.prototype.uc,ft.prototype.getCol=ft.prototype.pc,ft.prototype.getRowTo=ft.prototype.vc,ft.prototype.getColTo=ft.prototype.qc,ft.prototype.fromRows=ft.prototype.Mb,ft.prototype.fromCols=ft.prototype.ua,ft.prototype.toString=ft.prototype.toString,t.OIMO.Mat4=yt,yt.prototype.init=yt.prototype.za,yt.prototype.identity=yt.prototype.Wf,yt.prototype.add=yt.prototype.pc,yt.prototype.sub=yt.prototype.Mf,yt.prototype.scale=yt.prototype.Ue,yt.prototype.mul=yt.prototype.Yd,yt.prototype.addEq=yt.prototype.qc,yt.prototype.subEq=yt.prototype.Tg,yt.prototype.scaleEq=yt.prototype.Ve,yt.prototype.mulEq=yt.prototype.pe,yt.prototype.prependScale=yt.prototype.te,yt.prototype.appendScale=yt.prototype.Ac,yt.prototype.prependRotation=yt.prototype.re,yt.prototype.appendRotation=yt.prototype.uc,yt.prototype.prependTranslation=yt.prototype.ki,yt.prototype.appendTranslation=yt.prototype.ua,yt.prototype.prependScaleEq=yt.prototype.ue,yt.prototype.appendScaleEq=yt.prototype.Ec,yt.prototype.prependRotationEq=yt.prototype.se,yt.prototype.appendRotationEq=yt.prototype.vc,yt.prototype.prependTranslationEq=yt.prototype.li,yt.prototype.appendTranslationEq=yt.prototype.cb,yt.prototype.transpose=yt.prototype.Wg,yt.prototype.transposeEq=yt.prototype.Xg,yt.prototype.determinant=yt.prototype.Jc,yt.prototype.trace=yt.prototype.Vg,yt.prototype.inverse=yt.prototype.Lc,yt.prototype.inverseEq=yt.prototype.fd,yt.prototype.lookAt=yt.prototype.Mb,yt.prototype.perspective=yt.prototype.qe,yt.prototype.ortho=yt.prototype.ji,yt.prototype.toArray=yt.prototype.Ug,yt.prototype.copyFrom=yt.prototype.de,yt.prototype.fromMat3=yt.prototype.Kc,yt.prototype.fromTransform=yt.prototype.Hb,yt.prototype.clone=yt.prototype.clone,yt.prototype.toString=yt.prototype.toString,t.OIMO.MathUtil=ct,ct.abs=ct.abs,ct.sin=ct.sin,ct.cos=ct.cos,ct.tan=ct.tan,ct.asin=ct.asin,ct.acos=ct.acos,ct.atan=ct.atan,ct.safeAsin=ct.fd,ct.safeAcos=ct.Lc,ct.atan2=ct.atan2,ct.sqrt=ct.sqrt,ct.clamp=ct.Hb,ct.rand=ct.Ac,ct.randIn=ct.Ec,ct.randVec3In=ct.Kc,ct.randVec3=ct.Jc,t.OIMO.Pool=lt,lt.prototype.vec3=lt.prototype.Ac,lt.prototype.mat3=lt.prototype.qc,lt.prototype.mat4=lt.prototype.uc,lt.prototype.quat=lt.prototype.vc,lt.prototype.dispose=lt.prototype.ua,lt.prototype.disposeVec3=lt.prototype.pc,lt.prototype.disposeMat3=lt.prototype.cb,lt.prototype.disposeMat4=lt.prototype.Hb,lt.prototype.disposeQuat=lt.prototype.Mb,t.OIMO.Quat=pt,pt.prototype.identity=pt.prototype.Wf,pt.prototype.init=pt.prototype.za,pt.prototype.add=pt.prototype.ua,pt.prototype.sub=pt.prototype.Ec,pt.prototype.scale=pt.prototype.vc,pt.prototype.addEq=pt.prototype.cb,pt.prototype.subEq=pt.prototype.Jc,pt.prototype.scaleEq=pt.prototype.Ac,pt.prototype.length=pt.prototype.length,pt.prototype.lengthSq=pt.prototype.pc,pt.prototype.dot=pt.prototype.Hb,pt.prototype.normalized=pt.prototype.uc,pt.prototype.normalize=pt.prototype.qc,pt.prototype.setArc=pt.prototype.Kc,pt.prototype.slerp=pt.prototype.Lc,pt.prototype.copyFrom=pt.prototype.de,pt.prototype.clone=pt.prototype.clone,pt.prototype.fromMat3=pt.prototype.Mb,pt.prototype.toMat3=pt.prototype.fd,pt.prototype.toString=pt.prototype.toString,t.OIMO.Contact=nt,nt.prototype.getShape1=nt.prototype.pc,nt.prototype.getShape2=nt.prototype.qc,nt.prototype.isTouching=nt.prototype.sk,nt.prototype.getManifold=nt.prototype.cb,nt.prototype.getContactConstraint=nt.prototype.ua,nt.prototype.getPrev=nt.prototype.Mb,nt.prototype.getNext=nt.prototype.Hb,t.OIMO.ContactLink=rt,rt.prototype.getContact=rt.prototype.ua,rt.prototype.getOther=rt.prototype.Hb,rt.prototype.getPrev=rt.prototype.Mb,rt.prototype.getNext=rt.prototype.cb,t.OIMO.ContactManager=ot,ot.prototype.getNumContacts=ot.prototype.cb,ot.prototype.getContactList=ot.prototype.ua,t.OIMO.TimeStep=at,t.OIMO.World=ht,ht.prototype.step=ht.prototype.pe,ht.prototype.addRigidBody=ht.prototype.cb,ht.prototype.removeRigidBody=ht.prototype.qe,ht.prototype.addJoint=ht.prototype.ua,ht.prototype.removeJoint=ht.prototype.Kl,ht.prototype.rayCast=ht.prototype.Vd,ht.prototype.convexCast=ht.prototype.Bf,ht.prototype.aabbTest=ht.prototype.qh,ht.prototype.getRigidBodyList=ht.prototype.fd,ht.prototype.getJointList=ht.prototype.vc,ht.prototype.getBroadPhase=ht.prototype.Mb,ht.prototype.getContactManager=ht.prototype.pc,ht.prototype.getNumRigidBodies=ht.prototype.Kc,ht.prototype.getNumJoints=ht.prototype.Ec,ht.prototype.getNumShapes=ht.prototype.Yd,ht.prototype.getNumIslands=ht.prototype.Ac,ht.prototype.getNumVelocityIterations=ht.prototype.Lc,ht.prototype.setNumVelocityIterations=ht.prototype.ue,ht.prototype.getNumPositionIterations=ht.prototype.Jc,ht.prototype.setNumPositionIterations=ht.prototype.te,ht.prototype.getGravity=ht.prototype.uc,ht.prototype.setGravity=ht.prototype.se,t.OIMO.AabbTestCallback=_,t.OIMO.ContactCallback=Q,t.OIMO.RayCastCallback=Z,t.OIMO.RayCastClosest=$,$.prototype.clear=$.prototype.clear,$.prototype.process=$.prototype.process,t.OIMO.Performance=X,t.OIMO.ConstraintSolver=Y,Y.prototype.preSolveVelocity=Y.prototype.xh,Y.prototype.warmStart=Y.prototype.Gh,Y.prototype.solveVelocity=Y.prototype.Ch,Y.prototype.postSolveVelocity=Y.prototype.Li,Y.prototype.preSolvePosition=Y.prototype.Pg,Y.prototype.solvePositionSplitImpulse=Y.prototype.Bh,Y.prototype.solvePositionNgs=Y.prototype.Ah,Y.prototype.postSolve=Y.prototype.postSolve,t.OIMO.PositionCorrectionAlgorithm=W,t.OIMO.ContactConstraint=U,U.prototype.getShape1=U.prototype.cb,U.prototype.getShape2=U.prototype.Hb,U.prototype.getManifold=U.prototype.ua,U.prototype.isTouching=U.prototype.sk,t.OIMO.Manifold=V,V.prototype.getNormal=V.prototype.Hb,V.prototype.getNormalTo=V.prototype.Mb,V.prototype.getTangent=V.prototype.uc,V.prototype.getTangentTo=V.prototype.vc,V.prototype.getBinormal=V.prototype.ua,V.prototype.getBinormalTo=V.prototype.cb,V.prototype.getPoints=V.prototype.qc,V.prototype.getNumPoints=V.prototype.pc,t.OIMO.ManifoldPoint=G,G.prototype.getPosition1=G.prototype.Mb,G.prototype.getPosition1To=G.prototype.pc,G.prototype.getPosition2=G.prototype.qc,G.prototype.getPosition2To=G.prototype.uc,G.prototype.getDepth=G.prototype.cb,G.prototype.isWarmStarted=G.prototype.Ac,G.prototype.getNormalImpulse=G.prototype.Hb,G.prototype.getTangentImpulse=G.prototype.vc,G.prototype.getBinormalImpulse=G.prototype.ua,G.prototype.isEnabled=G.prototype.Ec,t.OIMO.Joint=F,F.prototype.getRigidBody1=F.prototype.ue,F.prototype.getRigidBody2=F.prototype.Ue,F.prototype.getType=F.prototype.Tg,F.prototype.getAnchor1=F.prototype.cb,F.prototype.getAnchor2=F.prototype.Mb,F.prototype.getAnchor1To=F.prototype.Hb,F.prototype.getAnchor2To=F.prototype.pc,F.prototype.getLocalAnchor1=F.prototype.pe,F.prototype.getLocalAnchor2=F.prototype.re,F.prototype.getLocalAnchor1To=F.prototype.qe,F.prototype.getLocalAnchor2To=F.prototype.se,F.prototype.getBasis1=F.prototype.Ec,F.prototype.getBasis2=F.prototype.Kc,F.prototype.getBasis1To=F.prototype.Jc,F.prototype.getBasis2To=F.prototype.Lc,F.prototype.getAllowCollision=F.prototype.ua,F.prototype.setAllowCollision=F.prototype.Ug,F.prototype.getBreakForce=F.prototype.fd,F.prototype.setBreakForce=F.prototype.Vg,F.prototype.getBreakTorque=F.prototype.Yd,F.prototype.setBreakTorque=F.prototype.Wg,F.prototype.getPositionCorrectionAlgorithm=F.prototype.te,F.prototype.setPositionCorrectionAlgorithm=F.prototype.Xg,F.prototype.getAppliedForce=F.prototype.qc,F.prototype.getAppliedForceTo=F.prototype.uc,F.prototype.getAppliedTorque=F.prototype.vc,F.prototype.getAppliedTorqueTo=F.prototype.Ac,F.prototype.getPrev=F.prototype.Mf,F.prototype.getNext=F.prototype.Ve,t.OIMO.CylindricalJoint=L,L.prototype.getAxis1=L.prototype.Eg,L.prototype.getAxis2=L.prototype.Gg,L.prototype.getAxis1To=L.prototype.Fg,L.prototype.getAxis2To=L.prototype.Hg,L.prototype.getLocalAxis1=L.prototype.Ig,L.prototype.getLocalAxis2=L.prototype.Kg,L.prototype.getLocalAxis1To=L.prototype.Jg,L.prototype.getLocalAxis2To=L.prototype.Lg,L.prototype.getTranslationalSpringDamper=L.prototype.In,L.prototype.getRotationalSpringDamper=L.prototype.An,L.prototype.getTranslationalLimitMotor=L.prototype.Hn,L.prototype.getRotationalLimitMotor=L.prototype.zn,L.prototype.getAngle=L.prototype.ol,L.prototype.getTranslation=L.prototype.rl,t.OIMO.JointConfig=O,t.OIMO.CylindricalJointConfig=T,T.prototype.init=T.prototype.za,t.OIMO.JointLink=S,S.prototype.getContact=S.prototype.ua,S.prototype.getOther=S.prototype.Hb,S.prototype.getPrev=S.prototype.Mb,S.prototype.getNext=S.prototype.cb,t.OIMO.JointType=q,t.OIMO.PrismaticJoint=B,B.prototype.getAxis1=B.prototype.Eg,B.prototype.getAxis2=B.prototype.Gg,B.prototype.getAxis1To=B.prototype.Fg,B.prototype.getAxis2To=B.prototype.Hg,B.prototype.getLocalAxis1=B.prototype.Ig,B.prototype.getLocalAxis2=B.prototype.Kg,B.prototype.getLocalAxis1To=B.prototype.Jg,B.prototype.getLocalAxis2To=B.prototype.Lg,B.prototype.getSpringDamper=B.prototype.Cj,B.prototype.getLimitMotor=B.prototype.ql,B.prototype.getTranslation=B.prototype.rl,t.OIMO.PrismaticJointConfig=C,C.prototype.init=C.prototype.za,t.OIMO.RagdollJoint=D,D.prototype.getAxis1=D.prototype.Eg,D.prototype.getAxis2=D.prototype.Gg,D.prototype.getAxis1To=D.prototype.Fg,D.prototype.getAxis2To=D.prototype.Hg,D.prototype.getLocalAxis1=D.prototype.Ig,D.prototype.getLocalAxis2=D.prototype.Kg,D.prototype.getLocalAxis1To=D.prototype.Jg,D.prototype.getLocalAxis2To=D.prototype.Lg,D.prototype.getTwistSpringDamper=D.prototype.Mn,D.prototype.getTwistLimitMotor=D.prototype.Ln,D.prototype.getSwingSpringDamper=D.prototype.Gn,D.prototype.getSwingAxis=D.prototype.En,D.prototype.getSwingAxisTo=D.prototype.Fn,D.prototype.getSwingAngle=D.prototype.Dn,D.prototype.getTwistAngle=D.prototype.Kn,t.OIMO.RagdollJointConfig=w,w.prototype.init=w.prototype.za,t.OIMO.RevoluteJoint=A,A.prototype.getAxis1=A.prototype.Eg,A.prototype.getAxis2=A.prototype.Gg,A.prototype.getAxis1To=A.prototype.Fg,A.prototype.getAxis2To=A.prototype.Hg,A.prototype.getLocalAxis1=A.prototype.Ig,A.prototype.getLocalAxis2=A.prototype.Kg,A.prototype.getLocalAxis1To=A.prototype.Jg,A.prototype.getLocalAxis2To=A.prototype.Lg,A.prototype.getSpringDamper=A.prototype.Cj,A.prototype.getLimitMotor=A.prototype.ql,A.prototype.getAngle=A.prototype.ol,t.OIMO.RevoluteJointConfig=M,M.prototype.init=M.prototype.za,t.OIMO.RotationalLimitMotor=j,j.prototype.setLimits=j.prototype.ua,j.prototype.setMotor=j.prototype.cb,j.prototype.clone=j.prototype.clone,t.OIMO.SphericalJoint=m,m.prototype.getSpringDamper=m.prototype.Cj,t.OIMO.SphericalJointConfig=z,z.prototype.init=z.prototype.za,t.OIMO.SpringDamper=d,d.prototype.setSpring=d.prototype.ua,d.prototype.setSymplecticEuler=d.prototype.cb,d.prototype.clone=d.prototype.clone,t.OIMO.TranslationalLimitMotor=x,x.prototype.setLimits=x.prototype.ua,x.prototype.setMotor=x.prototype.cb,x.prototype.clone=x.prototype.clone,t.OIMO.UniversalJoint=g,g.prototype.getAxis1=g.prototype.Eg,g.prototype.getAxis2=g.prototype.Gg,g.prototype.getAxis1To=g.prototype.Fg,g.prototype.getAxis2To=g.prototype.Hg,g.prototype.getLocalAxis1=g.prototype.Ig,g.prototype.getLocalAxis2=g.prototype.Kg,g.prototype.getLocalAxis1To=g.prototype.Jg,g.prototype.getLocalAxis2To=g.prototype.Lg,g.prototype.getSpringDamper1=g.prototype.Bn,g.prototype.getSpringDamper2=g.prototype.Cn,g.prototype.getLimitMotor1=g.prototype.xn,g.prototype.getLimitMotor2=g.prototype.yn,g.prototype.getAngle1=g.prototype.sn,g.prototype.getAngle2=g.prototype.tn,t.OIMO.UniversalJointConfig=v,v.prototype.init=v.prototype.za,t.OIMO.ConstraintSolverType=b,t.OIMO.DirectJointConstraintSolver=n,n.prototype.preSolveVelocity=n.prototype.xh,n.prototype.warmStart=n.prototype.Gh,n.prototype.solveVelocity=n.prototype.Ch,n.prototype.postSolveVelocity=n.prototype.Li,n.prototype.preSolvePosition=n.prototype.Pg,n.prototype.solvePositionSplitImpulse=n.prototype.Bh,n.prototype.solvePositionNgs=n.prototype.Ah,n.prototype.postSolve=n.prototype.postSolve,t.OIMO.PgsContactConstraintSolver=o,o.prototype.preSolveVelocity=o.prototype.xh,o.prototype.warmStart=o.prototype.Gh,o.prototype.solveVelocity=o.prototype.Ch,o.prototype.preSolvePosition=o.prototype.Pg,o.prototype.solvePositionSplitImpulse=o.prototype.Bh,o.prototype.solvePositionNgs=o.prototype.Ah,o.prototype.postSolve=o.prototype.postSolve,t.OIMO.PgsJointConstraintSolver=e,e.prototype.preSolveVelocity=e.prototype.xh,e.prototype.warmStart=e.prototype.Gh,e.prototype.solveVelocity=e.prototype.Ch,e.prototype.postSolveVelocity=e.prototype.Li,e.prototype.preSolvePosition=e.prototype.Pg,e.prototype.solvePositionSplitImpulse=e.prototype.Bh,e.prototype.solvePositionNgs=e.prototype.Ah,e.prototype.postSolve=e.prototype.postSolve,t.OIMO.MassData=a,t.OIMO.RigidBody=h;h.prototype.getPosition=h.prototype.qm,h.prototype.getPositionTo=h.prototype.rm,h.prototype.setPosition=h.prototype.Xn,h.prototype.translate=h.prototype.jo,h.prototype.getRotation=h.prototype.vm,h.prototype.getRotationTo=h.prototype.wm,h.prototype.setRotation=h.prototype.$n,h.prototype.setRotationXyz=h.prototype.fo,h.prototype.rotate=h.prototype.Em,h.prototype.rotateXyz=h.prototype.Sn,h.prototype.getOrientation=h.prototype.jm,h.prototype.getOrientationTo=h.prototype.lm,h.prototype.setOrientation=h.prototype.Tn,h.prototype.getTransform=h.prototype.xm,h.prototype.getTransformTo=h.prototype.Cm,h.prototype.setTransform=h.prototype.ho,h.prototype.getMass=h.prototype.Tg,h.prototype.getLocalInertia=h.prototype.se,h.prototype.getLocalInertiaTo=h.prototype.te,h.prototype.getMassData=h.prototype.Ug,h.prototype.getMassDataTo=h.prototype.Vg,h.prototype.setMassData=h.prototype.Qm,h.prototype.getRotationFactor=h.prototype.ji,h.prototype.setRotationFactor=h.prototype.Rm,h.prototype.getLinearVelocity=h.prototype.qe,h.prototype.getLinearVelocityTo=h.prototype.re,h.prototype.setLinearVelocity=h.prototype.Pm,h.prototype.getAngularVelocity=h.prototype.Jc,h.prototype.getAngularVelocityTo=h.prototype.Kc,h.prototype.setAngularVelocity=h.prototype.mo,h.prototype.addLinearVelocity=h.prototype.cb,h.prototype.addAngularVelocity=h.prototype.ua,h.prototype.applyImpulse=h.prototype.uc,h.prototype.applyLinearImpulse=h.prototype.vc,h.prototype.applyAngularImpulse=h.prototype.Mb,h.prototype.applyForce=h.prototype.pc,h.prototype.applyForceToCenter=h.prototype.qc,h.prototype.applyTorque=h.prototype.Ac,h.prototype.getGravityScale=h.prototype.fd,h.prototype.setGravityScale=h.prototype.Nm,h.prototype.getLocalPoint=h.prototype.ue,h.prototype.getLocalPointTo=h.prototype.Ue,h.prototype.getLocalVector=h.prototype.Ve,h.prototype.getLocalVectorTo=h.prototype.Mf,h.prototype.getWorldPoint=h.prototype.Pj,h.prototype.getWorldPointTo=h.prototype.Nl,h.prototype.getWorldVector=h.prototype.am,h.prototype.getWorldVectorTo=h.prototype.bm,h.prototype.getNumShapes=h.prototype.im,h.prototype.getShapeList=h.prototype.ki,h.prototype.getNumContectLinks=h.prototype.Wg,h.prototype.getContactLinkList=h.prototype.Lc,h.prototype.getNumJointLinks=h.prototype.Xg,h.prototype.getJointLinkList=h.prototype.Yd,h.prototype.addShape=h.prototype.Hb,h.prototype.removeShape=h.prototype.ko,h.prototype.getType=h.prototype.Dm,h.prototype.setType=h.prototype.Sm,h.prototype.wakeUp=h.prototype.Um,h.prototype.sleep=h.prototype.Tm,h.prototype.isSleeping=h.prototype.cm,h.prototype.getSleepTime=h.prototype.li,h.prototype.setAutoSleep=h.prototype.Mm,h.prototype.getLinearDamping=h.prototype.pe,h.prototype.setLinearDamping=h.prototype.Om,h.prototype.getAngularDamping=h.prototype.Ec,h.prototype.setAngularDamping=h.prototype.lo,h.prototype.getPrev=h.prototype.um,h.prototype.getNext=h.prototype.gm,t.OIMO.RigidBodyConfig=function(){this.position=new dt,this.rotation=new ft,this.linearVelocity=new dt,this.angularVelocity=new dt,this.type=0,this.autoSleep=!0,this.angularDamping=this.linearDamping=0},t.OIMO.RigidBodyType=s,t.OIMO.Shape=i,i.prototype.getFriction=i.prototype.uc,i.prototype.setFriction=i.prototype.ue,i.prototype.getRestitution=i.prototype.Jc,i.prototype.setRestitution=i.prototype.Ve,i.prototype.getLocalTransform=i.prototype.Ac,i.prototype.getLocalTransformTo=i.prototype.Ec,i.prototype.getTransform=i.prototype.Yd,i.prototype.getTransformTo=i.prototype.pe,i.prototype.setLocalTransform=i.prototype.Ue,i.prototype.getDensity=i.prototype.qc,i.prototype.setDensity=i.prototype.te,i.prototype.getAabb=i.prototype.ua,i.prototype.getAabbTo=i.prototype.cb,i.prototype.getGeometry=i.prototype.vc,i.prototype.getRigidBody=i.prototype.Kc,i.prototype.getCollisionGroup=i.prototype.Hb,i.prototype.setCollisionGroup=i.prototype.qe,i.prototype.getCollisionMask=i.prototype.Mb,i.prototype.setCollisionMask=i.prototype.re,i.prototype.getContactCallback=i.prototype.pc,i.prototype.setContactCallback=i.prototype.se,i.prototype.getPrev=i.prototype.fd,i.prototype.getNext=i.prototype.Lc,t.OIMO.ShapeConfig=function(){this.position=new dt,this.rotation=new ft,this.friction=gt.defaultFriction,this.restitution=gt.defaultRestitution,this.density=gt.defaultDensity,this.collisionGroup=gt.defaultCollisionGroup,this.collisionMask=gt.defaultCollisionMask,this.contactCallback=this.geometry=null}}(S);var OIMO=S.OIMO;export{OIMO};