<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Taro Examples</title>
		<link rel="stylesheet" href="../files/main.css" />
		<style>
			html,
			body {
				height: 100%;
			}

			body {
				font-size: 18px;
			}

			h1 {
				margin: 0 0 16px;
				font-family:'IBM Plex Mono', monospace;
				font-weight: normal;
			}

			a {
				text-decoration: none;
				color: inherit;
			}

			.example a {
				color: var(--secondary-text-color);
				display: inline;
				font-weight: 500;
			}

			.example a:hover {
				color: var(--theme-color);
			}

			.sidebar {
				position: fixed;
				left: 0px;
				width: 300px;
				border-right: 1px solid var(--border-color);
				height: 100%;
				z-index: 100;
			}

			.content {
				padding: 20px;
			}

			.sidebar span {
				display: block;
				margin-bottom: 10px;
			}

			#viewer {
				margin-left: 300px;
			}

			#viewer, iframe {
				position: absolute;
				border: 0px;
				left: 0;
				right: 0;
				width: calc(100% - 300px);
				height: 100%;
				overflow: auto;
			}

			.selected {
				text-decoration: underline;
			}
		</style>
	</head>
	<body>
		<div class="flex-container">
		<div class="sidebar">
			<div class="content">
				<div style="text-align: center">
					<h1><a href="../index.html">Taro</a></h1>
				</div>
			</div>
		</div>
		<iframe id="viewer" name="viewer" allowfullscreen="" allowvr="" onmousewheel=""></iframe>
	</div>
	<script>
		let examples = [ {name: "Probability", url: "probability.html"},
						{name: "Snake", url: "snake.html"},
						{name: "Drone", url: "drone.html"}  ];

		let hash = window.location.hash;
		let selectedIndex = -1;
		if (hash) {
			selectedIndex = examples.findIndex(example => "#" + encodeURI(example.name) == hash);
		}

		let container = document.getElementsByClassName("content")[0];

		let selectedLine = null;

		//make example list with this template
		//<span><a href="demo/index.html" target="viewer">Name</a> <a href="source link" target="_blank">(source)</a></span>
		for (let i = 0; i < examples.length; i++) {
			const example = examples[i];

			let demoLink = document.createElement("a");
			demoLink.href = example.url;
			demoLink.target = "viewer";
			demoLink.innerHTML = example.name;
			demoLink.addEventListener('click', function(event) {
				if (event.button !== 0 || event.ctrlKey || event.altKey || event.metaKey) return;
				window.location.hash = encodeURI(example.name);

				if (selectedLine)
					selectedLine.classList.remove("selected");
				let line = event.currentTarget.parentNode;
				line.classList.add("selected");
				selectedLine = line;
			});

			let exampleLine = document.createElement("span");
			exampleLine.classList.add('example');
			exampleLine.appendChild(demoLink);

			if (selectedIndex === i) {
				exampleLine.classList.add("selected");
				let viewer = document.getElementById("viewer");
				viewer.src = example.url;

				selectedLine = exampleLine;
			}

			container.appendChild(exampleLine);
		}
	</script>

	</body>
</html>
